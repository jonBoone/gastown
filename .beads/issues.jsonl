{"id": "gt-2rj2", "title": "Drain gastown witness mail backlog and prevent re-accumulation", "description": "The gastown witness has 34+ unread mail. Most are POLECAT_DONE and lifecycle messages that are now stale (polecats already nuked or idle).\n\nImmediate actions:\n1. Mark all stale witness mail as read (messages for polecats that no longer exist)\n2. Add a mail-drain step to the patrol that bulk-archives old messages\n3. Add a rate limiter: if inbox > N messages, process in batches not one-by-one\n\nThis is a quick fix to unblock the witness NOW while the redesign (tasks 1-3) is implemented.\n\nKey files:\n- Witness patrol molecule\n- gt mail mark-read command\n- Witness inbox-check step logic", "notes": "Implemented: Added 'gt mail drain' command for bulk-archiving stale protocol messages. Updated witness patrol formula v7→v8 with drain-first strategy and batch processing for large inboxes. All tests pass.", "status": "closed", "priority": 0, "issue_type": "task", "assignee": "gastown/polecats/furiosa", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-28T00:46:36Z", "created_by": "mayor", "updated_at": "2026-02-28T01:20:53Z", "closed_at": "2026-02-28T00:55:02Z", "close_reason": "Closed", "dependencies": [{"issue_id": "gt-2rj2", "depends_on_id": "gt-wisp-w7o3", "type": "blocks", "created_at": "2026-02-27T16:47:59Z", "created_by": "mayor", "metadata": "{}"}], "dependency_count": 1, "dependent_count": 0, "comment_count": 0}
{"id": "gt-mj3h", "title": "Add JSONL backup freshness check to Doctor Dog", "description": "Doctor already checks Dolt filesystem backup staleness but not JSONL git backup. Add check: git -C ~/.dolt-archive/git log -1 --format=%ci, alert if >2x configured interval (30 min). File: internal/daemon/doctor_dog.go — extend doctorDogBackupStalenessCheck().", "status": "closed", "priority": 0, "issue_type": "task", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-27T22:02:25Z", "created_by": "mayor", "updated_at": "2026-02-27T22:06:16Z", "closed_at": "2026-02-27T22:06:16Z", "close_reason": "Added doctorDogJsonlBackupFreshnessCheck: reads git log -1 from JSONL archive, alerts if >2x configured interval (30 min default).", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-avhe", "title": "Harden pollution patterns in JSONL backup scrub", "description": "Add patterns for --help artifacts, Usage: titles, offlinebrew-* test prefixes, wisp-pattern IDs in issues table. Add post-scrub verification pass that re-scans output and escalates if suspicious records remain. File: internal/daemon/jsonl_git_backup.go — extend testPollutionPatterns and scrubWhereClause.", "status": "closed", "priority": 0, "issue_type": "task", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-27T22:02:23Z", "created_by": "mayor", "updated_at": "2026-02-27T22:05:39Z", "closed_at": "2026-02-27T22:05:39Z", "close_reason": "Added 4 new pollution patterns (--help, Usage:, offlinebrew-*, -wisp-), extended SQL scrub clause, added post-scrub verification pass with escalation.", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-shxm", "title": "Doctor Dog: health monitor with dolt gc and zombie cleanup", "description": "Phase C of Code Red plan. The Doctor Dog does not exist as a proper Dog — health probes are scattered in dolt.go but there's no daemon ticker, no gc, no zombie detection, no escalation.\n\nWHAT TO BUILD:\nCreate gastown/mayor/rig/internal/daemon/doctor_dog.go with a 5-minute ticker that does:\n\n1. TCP connect to port 3307 with 5s timeout — if unreachable, restart server (gt dolt stop && gt dolt start)\n2. SELECT 1 latency check — escalate if >2s\n3. SHOW DATABASES count — escalate if > expected count (currently 6: hq, beads, gastown, sky, wyvern, beads_hop)\n4. Run dolt gc on each production database (cd ~/.dolt-data/<db> && dolt gc). This has NEVER been run on production. Do it carefully — one DB at a time, with timeout.\n5. Zombie server detection: scan for dolt sql-server processes NOT on port 3307, kill them\n6. Check ~/.dolt-backup/ mtime — escalate if backup >30min stale\n7. Check ~/.dolt-data/ disk usage per DB — escalate if any DB >200MB\n8. Escalate ALL anomalies via gt escalate\n\nRegister the ticker in daemon.go alongside existing tickers. Add config to daemon.json with enabled=true, interval=5m.\n\nKEY FILES:\n- gastown/mayor/rig/internal/daemon/daemon.go (ticker registration pattern — follow existing dolt_backup.go pattern)\n- gastown/mayor/rig/internal/daemon/dolt_backup.go (reference for how Dogs are structured)\n- gastown/mayor/rig/internal/daemon/wisp_reaper.go (another reference)\n- gastown/mayor/rig/internal/doltserver/doltserver.go (server lifecycle code)\n- mayor/daemon.json (add config entry)\n\nNOTE: dolt gc must run from the database directory on the filesystem, not via SQL. It's a CLI command: cd ~/.dolt-data/<db> && dolt gc. Run it with a 5-minute timeout per DB. If it hangs, kill and escalate.", "notes": "Implemented Doctor Dog health monitor patrol in internal/daemon/doctor_dog.go. Added DoctorDogConfig to PatrolsConfig (types.go), registered ticker in daemon.go. 7 health checks: TCP connectivity, SELECT 1 latency, SHOW DATABASES count, dolt gc per DB, zombie process detection, backup staleness, disk usage per DB. All escalated via gt escalate. Opt-in patrol with config in daemon.json. Tests pass.", "status": "closed", "priority": 0, "issue_type": "task", "assignee": "gastown/polecats/nux", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-27T03:33:21Z", "created_by": "mayor", "updated_at": "2026-02-27T03:43:43Z", "closed_at": "2026-02-27T03:42:49Z", "close_reason": "Closed", "dependencies": [{"issue_id": "gt-shxm", "depends_on_id": "gt-wisp-xwmcqx", "type": "blocks", "created_at": "2026-02-26T19:33:48Z", "created_by": "mayor", "metadata": "{}"}], "dependency_count": 1, "dependent_count": 0, "comment_count": 0}
{"id": "gt-gtdm", "title": "Reaper Dog: DELETE closed wisp rows after squash", "description": "Phase B of Code Red plan. The Reaper currently closes stale wisps >24h but NEVER deletes them. This means wisp rows accumulate at ~5,000-10,000/day with zero deletion. Dolt's versioned storage amplifies this — every row change creates new chunks.\n\nWHAT TO DO:\n1. In wisp_reaper.go, after closing stale wisps, add a second pass that DELETEs closed wisp rows older than 7 days from ALL wisp tables: wisps, wisp_events, wisp_labels, wisp_deps\n2. Before deleting, create a digest summary (aggregate stats: N wisps closed, by type, by rig) and log it\n3. DELETE the original rows (not just status change — actual SQL DELETE FROM)\n4. Add auto-close for stale ISSUES (not wisps) open >30 days with no status change, with reason 'stale:auto-closed by reaper'. Exempt priority <=1 (P0/P1) issues.\n5. Report deletion counts in daemon log output\n\nKEY FILES:\n- gastown/mayor/rig/internal/daemon/wisp_reaper.go (main file to modify)\n- gastown/mayor/rig/internal/daemon/daemon.go (ticker registration, for reference)\n- beads/mayor/rig/internal/storage/dolt/wisps.go (wisp table structure, for reference)\n- mayor/daemon.json (config, for reference)\n\nCRITICAL: Be DELICATE with Dolt. Use transactions. DELETE in batches (100 at a time) to avoid long-running transactions. Test with SELECT COUNT before and after to verify.", "status": "closed", "priority": 0, "issue_type": "task", "assignee": "gastown/polecats/furiosa", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-27T03:33:08Z", "created_by": "mayor", "updated_at": "2026-02-27T03:43:41Z", "closed_at": "2026-02-27T03:40:48Z", "close_reason": "Closed", "dependencies": [{"issue_id": "gt-gtdm", "depends_on_id": "gt-wisp-7vnf5w", "type": "blocks", "created_at": "2026-02-26T19:33:30Z", "created_by": "mayor", "metadata": "{}"}], "dependency_count": 1, "dependent_count": 0, "comment_count": 0}
{"id": "gt-yhlf2", "title": "Dedicated test Dolt server for gastown tests", "description": "Gastown tests that exercise doltserver.go functions (CreateDatabase, server start/stop, backup sync) currently interact with the production server on port 3307 if the BEADS_TEST_MODE guard doesn't propagate. Need testdoltserver.go equivalent (or reuse beads' StartTestDoltServer via shared testutil). Every gastown test package that touches Dolt needs a TestMain that starts the dedicated server on port 3308 and sets BEADS_DOLT_PORT. doltserver.go functions that CREATE DATABASE must respect BEADS_TEST_MODE. The bdCmd.buildEnv() guard is necessary but not sufficient — gastown's own Go code also calls Dolt directly. Depends on hq-mi5k8 (two-server architecture).", "status": "closed", "priority": 0, "issue_type": "task", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-26T03:15:16Z", "created_by": "mayor", "updated_at": "2026-02-27T06:55:36Z", "closed_at": "2026-02-27T06:55:36Z", "close_reason": "Shipped 61dfce08: daemon manages test server on port 3308, env vars propagated", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-76qgg", "title": "P0: Dedicated test Dolt server for gastown tests", "description": "Gastown tests use BEADS_TEST_MODE=1 env guard but have no dedicated test server. Gastown Go code calls Dolt directly (not through bd), so the bdCmd guard doesn't cover it. Any gastown test exercising doltserver.go (CREATE DATABASE, server start/stop, backup sync) can hit production. Need: (1) testdoltserver.go equivalent for gastown, or reuse beads' via shared testutil. (2) TestMain in every package that touches Dolt. (3) doltserver.go functions must respect BEADS_TEST_MODE. Reference: beads/mayor/rig/internal/testutil/testdoltserver.go for pattern.", "status": "closed", "priority": 0, "issue_type": "task", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-26T02:38:53Z", "created_by": "mayor", "updated_at": "2026-02-27T01:07:57Z", "closed_at": "2026-02-27T01:07:57Z", "close_reason": "Duplicate of gt-yhlf2 (same task: dedicated test Dolt server)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-ienv", "title": "Speed up internal/tmux tests (143s — dominates test suite)", "description": "attached_molecule: gt-wisp-liwao\nattached_formula: mol-polecat-work\nattached_at: 2026-02-28T03:42:31Z\ndispatched_by: mayor\n\ninternal/tmux takes 143 seconds, making it the slowest package in gastown by 6x. This dominates every refinery merge cycle. Investigate: are tests spawning real tmux sessions? Can they be mocked? Can slow tests be parallelized with t.Parallel()? Can integration tests be split to a separate build tag (//go:build integration)? Target: under 30s.", "notes": "Analysis complete. Top 2 tests (77s) are TestHasDescendantWithNames(41s) and TestGetAllDescendants(36s) which walk PID 1's entire process tree. Fix: use current PID instead. Also adding t.Parallel() to independent tests and reducing unnecessary sleeps.", "status": "hooked", "priority": 1, "issue_type": "task", "assignee": "gastown/polecats/rictus", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-28T03:42:04Z", "created_by": "mayor", "updated_at": "2026-02-28T03:49:02Z", "dependencies": [{"issue_id": "gt-ienv", "depends_on_id": "gt-wisp-liwao", "type": "blocks", "created_at": "2026-02-27T19:42:30Z", "created_by": "mayor", "metadata": "{}"}], "dependency_count": 1, "dependent_count": 0, "comment_count": 0}
{"id": "gt-94i9", "title": "TestCrossPlatformBuild fails: syscall.SIGUSR2 undefined for windows/amd64", "description": "daemon.go:379 uses syscall.SIGUSR2 which is not available on Windows. TestCrossPlatformBuild in cmd/gt fails for windows/amd64 target. Needs build tag guard or platform-specific file.", "status": "open", "priority": 1, "issue_type": "bug", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-28T03:16:19Z", "created_by": "gastown/refinery", "updated_at": "2026-02-28T03:16:19Z", "labels": ["pre-existing", "test-failure"], "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-yxx0", "title": "Design: Refinery parallel merge pipeline — helpers and polecat-owned rebasing", "description": "PROBLEM: The refinery is a single-threaded bottleneck. It processes one MR at a time: build → test → merge → push, sequentially. At swarm scale (8+ polecats), MRs queue up and branches go stale waiting. The refinery runs full test suites itself, blocking the merge queue for minutes per MR.\n\nDESIRED STATE: The refinery becomes a lightweight coordinator. Expensive work (build, test, lint, review) is parallelized across helpers or done by the polecats themselves before submission.\n\nDESIGN INVESTIGATION:\n1. **Refinery helpers (Dog-like pattern)**: The Deacon offloads work to Dogs. Can the refinery spawn short-lived helpers to run build/test/review in parallel? Multiple MRs verified concurrently, refinery just does the final fast-forward merge.\n\n2. **Polecat-owned rebasing**: Polecats rebase onto main, run tests, and only submit when green. The refinery's job shrinks to: verify the branch is rebased, fast-forward merge, push. If main moved, polecat retries (optimistic concurrency — like real CI). This is the 'polecats fight over rebasing' model.\n\n3. **Review plugins as polecats**: Instead of the refinery running review plugins inline, dispatch them as polecat tasks. Code review, security scan, style check — all run concurrently by different polecats, results written to beads. Refinery reads the verdict.\n\n4. **Merge queue ordering**: With parallel verification, how does the refinery decide merge order? First-green-wins? Priority-based? Dependency-aware?\n\n5. **Interaction with witness decoupling (gt-0wkk)**: If polecats self-manage completion AND self-manage rebasing, what's left for the refinery? Just the atomic merge+push?\n\nDELIVERABLE: Design doc with proposed architecture, migration path, and tradeoffs. Not code.\n\nCONTEXT: 50 convoys currently piled up. Refinery processing one MR at a time. Both gastown and beads refineries are spending minutes on test suites per MR.", "design": "# Refinery Parallel Merge Pipeline — Design Document\n\n## Status: PROPOSED\n## Author: polecat/slit\n## Issue: gt-yxx0\n\n---\n\n## 1. Problem Statement\n\nThe Refinery is a single-threaded bottleneck. It processes one MR at a time:\nclaim, rebase, setup, typecheck, lint, build, test, merge, push — sequentially.\n\nAt swarm scale (8+ polecats), MRs queue up and branches go stale waiting.\nCurrent throughput: ~4 MRs/hour (at 15min test suites). Target: 15-20+ MRs/hour.\n\nCurrent bottleneck breakdown (per MR):\n- Rebase: ~5s\n- Setup (pnpm install, etc.): ~30s\n- Typecheck: ~30s\n- Lint: ~20s\n- Build: ~60s\n- Tests: 5-15 min (DOMINANT COST)\n- Merge + push: ~5s\n\n## 2. Proposed Architecture: Batched Merge Queue\n\n### 2.1 Core Design: Batch-then-Bisect (Bors Pattern)\n\nReplace sequential per-MR testing with batched verification:\n\nCURRENT (sequential):\n  MR1: rebase then test then merge then push\n  MR2: rebase then test then merge then push  (waits for MR1)\n  MR3: rebase then test then merge then push  (waits for MR2)\n  Total: 3 x test_time\n\nPROPOSED (batched):\n  Batch [MR1, MR2, MR3]:\n    1. Rebase MR1 onto main\n    2. Rebase MR2 onto MR1\n    3. Rebase MR3 onto MR2 (this is the \"stack tip\")\n    4. Run tests ONCE on the stack tip\n    5. If pass: fast-forward merge all 3\n    6. If fail: bisect to find culprit\n  Total: 1 x test_time (happy path)\n\n### 2.2 Batch Formation\n\nConfig knobs (new fields on MergeQueueConfig):\n\n    MaxBatchSize int           // Default: 5. Larger = more throughput,\n                               // bisection cost grows O(log N).\n    BatchWaitTime time.Duration // Default: 30s. Wait for batch to fill.\n                               // 0 = process immediately.\n    MaxParallelBatches int     // Default: 1 (no speculation).\n                               // 2-3 for high throughput.\n\nBatch assembly algorithm:\n1. Poll queue for open MRs, sorted by score (existing scoring logic)\n2. Take up to MaxBatchSize MRs from the head of the queue\n3. If queue has fewer MRs than MaxBatchSize and BatchWaitTime > 0,\n   wait for more MRs to arrive (up to BatchWaitTime)\n4. Claim all MRs in the batch atomically\n5. Build the rebase stack (see 2.3)\n\n### 2.3 Rebase Stack Construction\n\nThe stack is built bottom-up. Each MR in the batch is rebased onto the\nresult of all preceding MRs:\n\n    main <- MR1 <- MR2 <- MR3 (stack tip)\n\nImplementation:\n    buildStack(ctx, batch []MR, targetBranch) -> (tipSHA, error):\n        stackBranch = \"refinery/batch/<batchID>\"\n        git checkout -b stackBranch origin/targetBranch\n\n        for each mr in batch:\n            err = git rebase mr.Branch onto stackBranch\n            if err (conflict):\n                return ConflictError{MR: mr}\n            // Stack branch now includes this MR's changes\n\n        return git rev-parse HEAD\n\nConflict during stack build:\n- If MR[i] conflicts during rebase, remove it from the batch\n- Assign conflict back to worker (existing flow)\n- Rebuild stack without MR[i] (remaining MRs may now be conflict-free)\n- File conflict-resolution task as today\n\n### 2.4 Test-on-Tip Verification\n\nRun the full gate suite (typecheck, lint, build, test) on the stack tip.\nThe tip SHA incorporates ALL MR changes, so a green result proves the batch\nis safe to merge.\n\n    verifyBatch(ctx, stackBranch, config) -> BatchResult:\n        result = runGates(ctx)  // Existing gate infrastructure\n        if result.Success:\n            return BatchPassed\n        else:\n            return BatchFailed{GateResults: result.Details}\n\n### 2.5 Fast-Forward Merge (Happy Path)\n\nWhen tests pass on the stack tip:\n1. Acquire merge slot (existing mechanism)\n2. Verify target branch hasn't moved since stack was built\n   - If moved: rebuild stack from new target, re-test (retry)\n   - If same: proceed to merge\n3. git merge --ff-only stackBranch  (fast-forward target to stack tip)\n4. git push origin targetBranch\n5. Close all MR beads in batch (reason: merged)\n6. Close all source issues\n7. Delete merged branches\n8. Release merge slot\n\nWhy fast-forward: The stack tip SHA is exactly what was tested. No merge\ncommit is created, so what lands is bit-for-bit what CI verified. This is\nthe \"Not Rocket Science Rule\" from bors.\n\n### 2.6 Bisection (Failure Path)\n\nWhen tests fail on the stack tip, bisect to find the culprit:\n\n    bisectBatch(ctx, batch []MR, target) -> culprits []MR:\n        if len(batch) == 1:\n            return batch  // Single MR failed — it's the culprit\n\n        mid = len(batch) / 2\n        left = batch[:mid]\n        right = batch[mid:]\n\n        leftStack = buildStack(ctx, left, target)\n        leftResult = verifyBatch(ctx, leftStack)\n\n        if leftResult.Failed:\n            return bisectBatch(ctx, left, target)\n\n        // Left half is green — culprit is in right half\n        // Test right in context of left (cumulative merge)\n        // O(log N) test runs to isolate culprit\n\nBisection strategy:\n- Binary search: O(log N) test runs to find the bad MR\n- For batch of 5: worst case 3 test runs (vs 5 sequential)\n- Culprit MR gets assigned back to worker (existing flow)\n- Remaining good MRs get re-batched in next cycle\n\nOptimization — parallel bisection:\nWhen bisecting, test both halves concurrently. The failing half gets\nfurther bisected while the passing half gets merged immediately.\nTrade-off: 2x CI capacity usage during bisection for 2x faster isolation.\n\n## 3. Polecat-Owned Pre-Verification\n\n### 3.1 Shift-Left: Polecats Run Gates Before Submission\n\nCurrently, polecats run tests on their feature branch (step 6 of\nmol-polecat-work). The Refinery then re-runs the same tests after rebase.\nThis is redundant when no conflicts exist.\n\nProposed change to mol-polecat-work formula — add step 6.5:\n\n    Step 6.5: Pre-merge rebase verification\n      1. Fetch latest target branch\n      2. Rebase feature branch onto target\n      3. Run full gate suite on rebased result\n      4. If pass: submit MR with \"pre-verified\" flag\n      5. If fail (conflict): resolve and retry\n      6. If fail (tests): fix and retry\n\nMR metadata (new struct embedded in MR bead):\n\n    type MRPreVerification struct {\n        Verified     bool        // polecat ran gates after rebase\n        VerifiedAt   time.Time   // when verification completed\n        VerifiedBase string      // target branch SHA at verification time\n        GateResults  []GateResult // individual gate outcomes\n    }\n\n### 3.2 Refinery Fast Path for Pre-Verified MRs\n\nWhen the Refinery encounters a pre-verified MR whose VerifiedBase\nmatches the current target HEAD:\n- Skip all gates (typecheck, lint, build, test)\n- Just fast-forward merge and push\n- This reduces Refinery processing to ~5 seconds per MR\n\nWhen VerifiedBase doesn't match (main moved):\n- The polecat's verification is stale\n- Refinery must re-verify OR assign back for re-verification\n- Decision: if the only changes to main since VerifiedBase are from\n  OTHER batched MRs that passed, the pre-verification is still valid\n  (transitive trust). Only re-verify if an external push landed on main.\n\n### 3.3 Optimistic Concurrency: \"Polecats Fight Over Rebasing\"\n\nFor maximum throughput, multiple polecats can speculatively rebase and\nverify concurrently:\n\n    Polecat A: fetch main -> rebase -> test -> submit (verified_base=abc)\n    Polecat B: fetch main -> rebase -> test -> submit (verified_base=abc)\n    Polecat C: fetch main -> rebase -> test -> submit (verified_base=abc)\n\n    Refinery: A arrives first, verified_base=abc matches -> merge -> main=def\n              B arrives, verified_base=abc != def -> STALE\n              C arrives, verified_base=abc != def -> STALE\n\nB and C wasted their test runs. This is the OCC waste problem.\n\nMitigation: The Refinery batching subsumes this. Polecats pre-verify\nagainst the target they know. The Refinery then batches all pre-verified\nMRs, does a quick stack-build (no conflict = no re-test needed thanks to\npre-verification), and fast-forward merges the batch. Only if conflicts\narise during stack-build does re-testing become necessary.\n\n## 4. Review Plugins as Parallel Tasks\n\n### 4.1 Current State\n\nThe Refinery runs review plugins inline during MR processing. This adds\nlatency to the critical path.\n\n### 4.2 Proposed: Decouple Review from Merge\n\n    MR submitted -> Dispatcher\n                        |\n           +------------+------------+\n           v            v            v\n      Review       Security      Style\n      Polecat      Scanner       Checker\n           |            |            |\n           v            v            v\n      Verdicts (written to beads)\n                        |\n                        v\n                   Refinery (reads verdicts, merges if all pass)\n\nImplementation:\n- On MR submission, dispatch review tasks as separate beads\n- Each review task is handled by a short-lived polecat (or dog)\n- Review polecats write verdicts to the MR bead (pass/fail + notes)\n- Refinery waits for all verdicts before proceeding to merge\n- Reviews run concurrently with each other AND with test verification\n\nBenefits:\n- Reviews don't block the merge queue\n- Multiple reviews run in parallel\n- Expensive reviews (AI code review) don't delay simple merges\n- Reviews are recorded as beads (audit trail)\n\nTrade-off: More agent spawns = more resource usage. For simple\nprojects, inline review may be faster than spawn overhead.\n\nConfig (new struct):\n\n    type ReviewConfig struct {\n        Plugins        []ReviewPlugin // review plugins to run\n        RequireAllPass bool           // all must pass before merge (default true)\n        Timeout        time.Duration  // max wait for all reviews\n    }\n\n## 5. Merge Queue Ordering with Parallel Verification\n\n### 5.1 Ordering Strategy: Priority-Scored FIFO with Batching\n\nThe existing ScoreMR function already provides good ordering. With batching,\nthe batch is assembled from the highest-scored MRs in the queue.\n\nWithin a batch: Order matters for the rebase stack. Higher-priority MRs\ngo first (bottom of stack) so they merge even if later MRs in the batch\nfail during bisection.\n\nCross-batch (speculative execution, Phase 4): If MaxParallelBatches > 1:\n- Batch 1: MRs [1,2,3] — verified against current main\n- Batch 2: MRs [4,5,6] — verified against (main + batch 1 assumed green)\n- If batch 1 passes: batch 2's result is immediately valid\n- If batch 1 fails: batch 2 is invalidated and must re-verify\n\nThis is the Mergify speculative execution model.\n\n### 5.2 Dependency-Aware Batching\n\nMRs within the same epic/convoy should batch together when possible.\nMRs with cross-issue dependencies must respect ordering constraints.\n\n    assembleBatch(queue []MR, config BatchConfig) -> Batch:\n        batch = []MR{}\n        for each mr in queue:\n            if len(batch) >= config.MaxBatchSize:\n                break\n            if mr.blockedBy any MR not in batch:\n                continue  // Can't include yet\n            batch = append(batch, mr)\n        return batch\n\n## 6. Interaction with Witness Decoupling\n\nWith polecat-owned pre-verification and batched merging, the Refinery's\nremaining responsibilities shrink to:\n\n1. Queue management: Assemble batches from scored queue\n2. Stack construction: Rebase MRs in order, detect conflicts\n3. Verification (when needed): Run gates on stack tip for non-pre-verified MRs\n4. Atomic merge+push: Fast-forward merge and push (serialized by merge slot)\n5. Bisection: Isolate culprits when batch verification fails\n6. Bookkeeping: Close MR beads, close issues, delete branches\n\nThe Refinery becomes a lightweight coordinator. The compute-heavy work\n(testing) shifts to polecats (pre-verification) or is amortized across\nbatches (test-on-tip).\n\nWhat the Witness gains:\n- No longer needs to nudge Refinery about stuck MRs (batches clear faster)\n- Zombie detection is simpler (Refinery processes in predictable cycles)\n- Polecat completion is self-contained (pre-verify before submission)\n\n## 7. Migration Path\n\n### Phase 1: Intra-MR Gate Parallelism (LOW RISK)\n- Set GatesParallel: true in MergeQueueConfig\n- This already exists but defaults to false\n- Impact: ~2x speedup on gate suite (test + lint + typecheck run concurrently)\n- No architectural changes needed\n\n### Phase 2: Batch-then-Bisect (MEDIUM RISK)\n- Implement batch assembly and rebase stack construction\n- Implement test-on-tip verification\n- Implement binary bisection for failures\n- Config: BatchConfig{MaxBatchSize: 3, BatchWaitTime: 15s}\n- Start conservative (batch of 3), increase as confidence grows\n- Fallback: if batch fails, fall back to sequential processing\n\n### Phase 3: Polecat Pre-Verification (MEDIUM RISK)\n- Add pre-merge rebase step to mol-polecat-work formula\n- Add MRPreVerification metadata to MR beads\n- Implement fast-path in Refinery for pre-verified MRs\n- Polecats do more work; Refinery does less\n\n### Phase 4: Speculative Parallel Batches (HIGH COMPLEXITY)\n- Implement MaxParallelBatches > 1\n- Implement speculative stack construction\n- Implement invalidation when predecessor batch fails\n- Requires careful orchestration of concurrent git operations\n- Consider: each parallel batch needs its own worktree\n\n### Phase 5: Review Plugin Parallelism (OPTIONAL)\n- Decouple review plugins from merge pipeline\n- Dispatch reviews as parallel polecat/dog tasks\n- Implement verdict collection and gate-checking\n- Only needed if review latency becomes a bottleneck\n\n## 8. Trade-offs\n\n| Aspect | Current | Proposed (Phase 2+3) | Risk |\n|--------|---------|---------------------|------|\n| Throughput | ~4 MR/hr | ~15-20 MR/hr | - |\n| Complexity | Simple sequential loop | Batch assembly + bisection | Medium |\n| Test coverage | Each MR tested independently | Test-on-tip (batch) | Merge-skew caught by cumulative rebase |\n| Failure isolation | Immediate (1 MR = 1 test) | O(log N) bisection | Slightly slower for failures |\n| Resource usage | 1 test run per MR | 1 test run per batch (happy path) | Lower total CI cost |\n| Polecat cost | Tests on feature branch only | Tests on feature + rebased | Higher per-polecat cost |\n| Git operations | Simple rebase per MR | Rebase stack construction | More complex but well-understood |\n| Merge slot | Held during entire MR processing | Held only during push | Shorter lock duration |\n\n## 9. Key Design Decisions\n\n1. **Batch-then-bisect over speculative parallel:** Start with batching (Phase 2)\n   before adding speculation (Phase 4). Batching gives 3-5x throughput with\n   moderate complexity. Speculation adds another 2-3x but with high complexity.\n\n2. **Pre-verification as complement, not replacement:** Polecat pre-verification\n   reduces Refinery work but doesn't eliminate it. The Refinery is still the\n   single writer to main (merge slot). Pre-verification is an optimization, not\n   a requirement.\n\n3. **Fast-forward merge semantics:** What you test is what you land. No merge\n   commits that could introduce untested state. This is the bors guarantee.\n\n4. **Existing infrastructure reuse:** The GatesParallel flag, merge slot,\n   MR scoring, and conflict-resolution task patterns all carry forward.\n   The batch layer wraps around the existing gate infrastructure.\n\n5. **Pluggable test command:** The test command is already configurable via\n   MergeQueueConfig.TestCommand. Batched verification uses the same command,\n   just runs it on the stack tip instead of individual branches.\n\n## 10. Open Questions\n\n1. **Stack depth limit:** How deep can the rebase stack go before conflicts\n   become likely? Empirical data needed. Start with MaxBatchSize=3-5.\n\n2. **Bisection vs sequential fallback:** When a batch fails, is bisection\n   always better than falling back to sequential testing? For batch=2,\n   bisection IS sequential. Bisection wins at batch>=4.\n\n3. **Cross-rig batching:** Should the gastown and beads refineries share\n   a batch? No — they operate on different repos. But they could share\n   the merge slot (already the case).\n\n4. **Integration branch batching:** When MRs target an integration branch\n   instead of main, batching still applies. The stack is built against\n   the integration branch HEAD. Landing the integration branch to main\n   is a separate (non-batched) operation.\n\n5. **Flaky test handling in batches:** If a batch fails due to a flaky test,\n   bisection would incorrectly blame an innocent MR. Mitigation: retry the\n   full batch once before bisecting (existing RetryFlakyTests config applies\n   at the batch level).", "notes": "Design complete. Key recommendations:\n1. Phase 1 (immediate): Enable GatesParallel=true for ~2x gate speedup\n2. Phase 2 (core): Implement batch-then-bisect (bors pattern) — batch N MRs, rebase as stack, test tip, bisect on failure. 3-5x throughput.\n3. Phase 3: Polecat pre-verification — polecats rebase+test before submission, Refinery fast-paths pre-verified MRs.\n4. Phase 4: Speculative parallel batches (Mergify model) — concurrent batch verification for maximum throughput.\n5. Phase 5 (optional): Decouple review plugins as parallel polecat/dog tasks.\nKey files: engineer.go (1697 lines), manager.go, types.go, score.go, done.go.\nExisting infrastructure (merge slot, GatesParallel, scoring) carries forward.", "status": "closed", "priority": 1, "issue_type": "task", "assignee": "gastown/polecats/slit", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-28T03:15:24Z", "created_by": "mayor", "updated_at": "2026-02-28T03:43:03Z", "closed_at": "2026-02-28T03:24:10Z", "close_reason": "Completed with no code changes (already fixed or pushed directly to main)", "dependencies": [{"issue_id": "gt-yxx0", "depends_on_id": "gt-wisp-4bijs", "type": "blocks", "created_at": "2026-02-27T19:15:39Z", "created_by": "mayor", "metadata": "{}"}], "dependency_count": 1, "dependent_count": 0, "comment_count": 0}
{"id": "gt-0wkk", "title": "Decouple polecat lifecycle from witness — polecats should self-manage completion", "description": "PROBLEM: Polecats currently depend on the witness to finish their lifecycle (process completion mail, clean up). The witness is single-threaded (one item per patrol cycle), so at high throughput it becomes a bottleneck. Zombie polecats accumulate waiting for witness processing. This is a regression — polecats used to be self-managed, with the witness only intervening for genuinely stuck cases.\n\nDESIRED STATE: Polecats self-manage their full lifecycle: push branch, submit MR to refinery, update their bead (close/complete), tear down their own worktree. The witness role returns to being an observer — it patrols for stuck/zombie polecats and intervenes only when something is wrong. No mail-based handoff for routine completions.\n\nINVESTIGATION NEEDED:\n1. Where did the witness-dependency creep in? Trace the polecat completion path and identify where it now requires witness action vs where it used to self-complete.\n2. What state updates does the witness currently perform that the polecat could do itself?\n3. Is the mail-based notification necessary at all, or can the witness discover completion state by polling beads (Discover Don't Track)?\n4. Propose a decoupled design where polecats self-clean and the witness is purely reactive.\n\nThis is a design task — produce a design doc, not code.", "design": "Design doc: docs/design/polecat-self-managed-completion.md\n\nSUMMARY: Decouple polecat lifecycle from witness by having polecats self-manage completion.\n\nTHREE CHANGES:\n1. Polecat sets agent_state=idle directly in gt done (skip done intermediate state)\n2. Polecat nudges refinery directly (skip witness relay for MERGE_READY)\n3. Witness removes completion-processing code (patrol focuses on anomaly detection only)\n\nMIGRATION: Three phases — (1) dual-signal, (2) self-transition, (3) cleanup of witness code.\n\nROOT CAUSE: Witness dependency crept in via gt-4ac (persistent model) and gt-a6gp (nudge-over-mail) which centralized completion discovery in witness patrol. The refinery already discovers MRs by polling beads, making the witness relay redundant.\n\nIMPACT: Completion latency drops from 30s-3min to ~0s. Concurrent completions become parallel instead of serial. Witness patrol time reduced. Witness returns to observer role.", "notes": "Implemented: Design doc at docs/design/polecat-self-managed-completion.md. Traces root cause (gt-4ac + gt-a6gp introduced witness dependency), proposes 3 changes (self-transition to idle, direct refinery nudge, eliminate cleanup wisps), includes 3-phase migration strategy with rollback, covers 5 edge cases, and aligns with existing design principles (GUPP, ZFC, Discover Don't Track).", "status": "closed", "priority": 1, "issue_type": "task", "assignee": "gastown/polecats/nux", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-28T03:05:29Z", "created_by": "mayor", "updated_at": "2026-02-28T03:18:15Z", "closed_at": "2026-02-28T03:17:30Z", "close_reason": "Completed with no code changes (already fixed or pushed directly to main)", "dependencies": [{"issue_id": "gt-0wkk", "depends_on_id": "gt-wisp-vyn0y", "type": "blocks", "created_at": "2026-02-27T19:13:07Z", "created_by": "dog", "metadata": "{}"}], "dependency_count": 1, "dependent_count": 0, "comment_count": 0}
{"id": "gt-1fje", "title": "Formula parser silently ignores extends/compose/advice/presets/squash/gate TOML sections", "status": "open", "priority": 1, "issue_type": "bug", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-28T02:54:39Z", "created_by": "gastown/polecats/capable", "updated_at": "2026-02-28T02:54:39Z", "labels": ["formula"], "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-7uhc", "title": "Bug: gt rig start bypasses docked check (uses wisp config instead of IsRigParkedOrDocked)", "notes": "Fixed: replaced wisp config string check in runRigStart with IsRigParkedOrDocked (checks both wisp state + persistent bead labels). Also added missing parked/docked guard to runRigBoot.", "status": "closed", "priority": 1, "issue_type": "bug", "assignee": "gastown/polecats/furiosa", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-28T02:50:03Z", "created_by": "gastown/polecats/dementus", "updated_at": "2026-02-28T03:09:19Z", "closed_at": "2026-02-28T03:08:55Z", "close_reason": "Completed with no code changes (already fixed or pushed directly to main)", "dependencies": [{"issue_id": "gt-7uhc", "depends_on_id": "gt-wisp-3fcwn", "type": "blocks", "created_at": "2026-02-27T19:02:51Z", "created_by": "dog", "metadata": "{}"}], "dependency_count": 1, "dependent_count": 0, "comment_count": 0}
{"id": "gt-idrl", "title": "ZFC: witness DetectStalledPolecats screen-scrapes tmux pane content", "description": "attached_molecule: gt-wisp-c91dr\nattached_formula: mol-polecat-work\nattached_at: 2026-02-28T03:43:32Z\ndispatched_by: gastown/crew/max\n\nDetectStalledPolecats (handlers.go:1485-1514) captures 30 lines of tmux pane content and does strings.Contains matching on UI text: 'trust this folder', 'Quick safety check', 'Bypass Permissions mode'. These are third-party Claude Code TUI strings that could change with any update.\n\nThis is the second most severe ZFC violation - literal screen-scraping of another tool's display output.\n\nFix: Handle at startup level (ensure --dangerously-skip-permissions is always passed). If stall detection needed, use structured signals (session age vs first tool call timestamp), not raw screen scraping.", "notes": "Implemented: Replaced screen-scraping (CapturePane + strings.Contains) in DetectStalledPolecats with structured signals (GetSessionCreatedUnix + GetSessionActivity). Sessions >90s old with >60s of tmux inactivity are flagged as startup-stall and remediated via AcceptStartupDialogs. No more matching against third-party TUI strings in the detection logic. Updated tests accordingly.", "status": "in_progress", "priority": 1, "issue_type": "bug", "assignee": "gastown/polecats/nux", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-28T02:49:19Z", "created_by": "gastown/polecats/nux", "updated_at": "2026-02-28T03:51:29Z", "labels": ["zfc-violation"], "dependencies": [{"issue_id": "gt-idrl", "depends_on_id": "gt-wisp-c91dr", "type": "blocks", "created_at": "2026-02-27T19:43:32Z", "created_by": "gastown/crew/max", "metadata": "{}"}], "dependency_count": 1, "dependent_count": 0, "comment_count": 0}
{"id": "gt-l7uq", "title": "ZFC: witness AssessHelpRequest is a Go-level triage engine", "description": "attached_molecule: gt-wisp-huatp\nattached_formula: mol-polecat-work\nattached_at: 2026-02-28T03:43:23Z\ndispatched_by: gastown/crew/max\n\nAssessHelpRequest (protocol.go:410-457) is a full Go-level triage engine that pattern-matches on free-text topic/problem fields using strings.Contains ('git', 'conflict', 'test fail', 'build', 'compile', 'unclear'). It makes CanHelp/NeedsEscalation decisions and hardcodes 'Mayor' as escalation target. HandleHelp (line 301-321) acts on these decisions directly - the agent never gets to override.\n\nThis is the most severe ZFC violation found. It hits rules 2 (hardcoded role names), 3 (judgment calls), and 5 (string pattern matching) simultaneously.\n\nFix: Remove AssessHelpRequest entirely. HandleHelp should parse the HELP payload (transport) and present it to the witness agent for triage. Agent decides whether to help, escalate, and to whom.", "notes": "Implemented: Removed AssessHelpRequest (Go-level triage engine), HelpAssessment type, and escalateToDeacon (dead code). HandleHelp now only parses HELP payload and presents it to the witness agent via FormatHelpSummary for agent-level triage. Replaced 5 old tests with 2 new FormatHelpSummary tests. All witness tests pass, full suite green (pre-existing TestCrossPlatformBuild and TestVerifyStartupNudgeDelivery_IdleAgent failures unrelated).", "status": "closed", "priority": 1, "issue_type": "bug", "assignee": "gastown/polecats/furiosa", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-28T02:49:16Z", "created_by": "gastown/polecats/nux", "updated_at": "2026-02-28T03:54:42Z", "closed_at": "2026-02-28T03:49:26Z", "close_reason": "Closed", "labels": ["zfc-violation"], "dependencies": [{"issue_id": "gt-l7uq", "depends_on_id": "gt-wisp-huatp", "type": "blocks", "created_at": "2026-02-27T19:43:23Z", "created_by": "gastown/crew/max", "metadata": "{}"}], "dependency_count": 1, "dependent_count": 0, "comment_count": 0}
{"id": "gt-y8x4", "title": "sweepCrossSocketZombies is a no-op after socket migration to default", "description": "In down.go:568-598, sweepCrossSocketZombies() exits immediately when townSocket == 'default' (line 570). After InitRegistry was changed to SetDefaultSocket('default'), this means gt down never sweeps sessions on old named sockets like -L gt. This caused 24 zombie sessions to survive gt down on 2026-02-27. Fix: make the sweep bidirectional — also check common named sockets (gt, gas-town) regardless of current town socket.", "status": "closed", "priority": 1, "issue_type": "bug", "assignee": "gastown/polecats/furiosa", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-28T02:41:09Z", "created_by": "mayor", "updated_at": "2026-02-28T02:54:00Z", "closed_at": "2026-02-28T02:53:17Z", "close_reason": "Closed", "dependencies": [{"issue_id": "gt-y8x4", "depends_on_id": "gt-wisp-2vlrx", "type": "blocks", "created_at": "2026-02-27T18:42:12Z", "created_by": "mayor", "metadata": "{}"}], "dependency_count": 1, "dependent_count": 0, "comment_count": 0}
{"id": "gt-0jh0", "title": "TestInitRegistry_SocketFromTownName fails: expects per-town socket after 635916ab changed to default", "description": "Pre-existing test failure on main. Commit 635916ab (fix(tmux): use default socket instead of per-town socket) changed the behavior to always use 'default' socket, but TestInitRegistry_SocketFromTownName in internal/session/registry_socket_test.go still asserts town-specific socket names. 5 sub-tests fail. The test needs to be updated to expect 'default' instead of town-derived socket names.", "notes": "Fixed: Updated all 5 sub-tests in TestInitRegistry_SocketFromTownName to expect 'default' socket instead of town-derived names, matching behavior change from 635916ab. Updated test comment to explain the rationale.", "status": "closed", "priority": 1, "issue_type": "bug", "assignee": "gastown/polecats/slit", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-28T02:10:35Z", "created_by": "gastown/refinery", "updated_at": "2026-02-28T02:14:56Z", "closed_at": "2026-02-28T02:13:38Z", "close_reason": "Closed", "dependencies": [{"issue_id": "gt-0jh0", "depends_on_id": "gt-wisp-z3ccc", "type": "blocks", "created_at": "2026-02-27T18:11:22Z", "created_by": "mayor", "metadata": "{}"}], "dependency_count": 1, "dependent_count": 0, "comment_count": 0}
{"id": "gt-kk21", "title": "Compactor Dog: monitor commit growth and call for maintenance", "description": "A Dog that monitors Dolt commit counts across all production DBs and escalates when maintenance is needed.\n\nThe dog should:\n1. Check commit counts on each patrol tick (dolt log --oneline | wc -l equivalent)\n2. Use judgment about when compaction is 'uncomfortable' — consider commit growth rate, not just absolute count. 500 commits after an hour of heavy swarming is different from 500 commits over a week of idle.\n3. Escalate to Mayor when it judges maintenance is needed (gt escalate)\n4. Track when the last flatten happened so it can reason about growth rate\n\nThis is NOT a hard threshold trigger. The dog (Claude) observes the situation and makes the call. Factors to consider:\n- Commit count per DB\n- Time since last flatten\n- Current swarm activity level (how many polecats active)\n- Query latency trends (if observable)\n\nThe dog should be registered as a deacon plugin so it runs on the deacon's heartbeat tick.\n\nKey files:\n- gastown/mayor/rig/internal/daemon/ — plugin system\n- gastown/mayor/rig/docs/design/dolt-storage.md — flatten procedure\n- The echo dog (rebuild-gt) is a working example of a dog plugin\n\nNote: gt-wktj (check-engine-light) is a related but different approach — it was a hard threshold. This dog replaces that concept with agent judgment.", "notes": "Implemented: compactor-dog plugin (plugins/compactor-dog/plugin.md). Plugin monitors Dolt commit counts across all prod DBs, checks growth rate (hourly/daily), swarm activity, and time since last flatten. Uses agent judgment with guidelines table rather than hard thresholds. Escalates via gt escalate when maintenance is needed. Follows existing plugin conventions (session-hygiene, dolt-archive).", "status": "closed", "priority": 1, "issue_type": "task", "assignee": "gastown/polecats/furiosa", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-28T02:07:59Z", "created_by": "mayor", "updated_at": "2026-02-28T02:16:26Z", "closed_at": "2026-02-28T02:13:51Z", "close_reason": "Closed", "dependencies": [{"issue_id": "gt-kk21", "depends_on_id": "gt-wisp-b5sw7", "type": "blocks", "created_at": "2026-02-27T18:08:07Z", "created_by": "mayor", "metadata": "{}"}], "dependency_count": 1, "dependent_count": 0, "comment_count": 0}
{"id": "gt-x7t9", "title": "Define agent bead schema for polecat completion metadata", "description": "For the nudge-over-mail redesign, polecat agent beads need structured fields for completion state. Currently agent_state is a free-form string in the description.\n\nDefine and document the schema:\n- agent_state: running | idle | done | stuck | escalated\n- exit_type: COMPLETED | ESCALATED | DEFERRED | PHASE_COMPLETE (matches protocol.go)\n- mr_id: GitHub PR number (if applicable)\n- branch: polecat working branch\n- hook_bead: the work bead ID\n- mr_failed: bool (if MR creation was attempted but failed)\n- completion_time: timestamp\n\nThis schema must be readable by the witness survey-workers step. Update protocol.go to define these as constants.\n\nKey files:\n- internal/witness/protocol.go — existing message format definitions\n- Agent bead creation code (wherever gt sling creates the agent bead)", "notes": "Implemented: Added completion metadata schema to agent beads. New fields on AgentFields: exit_type, mr_id, branch, mr_failed, completion_time. Added AgentState and ExitType typed constants in witness/protocol.go. Added CompletionMetadata struct with UpdateAgentCompletion/ClearAgentCompletion convenience methods. Updated ResetAgentBeadForReuse to clear completion fields. All tests pass.", "status": "closed", "priority": 1, "issue_type": "task", "assignee": "gastown/polecats/nux", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-28T00:46:41Z", "created_by": "mayor", "updated_at": "2026-02-28T01:26:08Z", "closed_at": "2026-02-28T01:24:54Z", "close_reason": "Completed with no code changes (already fixed or pushed directly to main)", "dependencies": [{"issue_id": "gt-x7t9", "depends_on_id": "gt-wisp-uh7wd", "type": "blocks", "created_at": "2026-02-27T17:22:56Z", "created_by": "mayor", "metadata": "{}"}], "dependency_count": 1, "dependent_count": 2, "comment_count": 0}
{"id": "gt-w0br", "title": "Witness survey-workers: discover completion state from beads instead of mail", "description": "The witness inbox-check step processes mail to learn about polecat completions. The survey-workers step already polls agent beads for zombie detection.\n\nMerge these: survey-workers should be the PRIMARY mechanism for discovering polecat state changes. Instead of relying on mail to learn that a polecat finished, the witness should:\n1. Query all agent beads each patrol cycle\n2. Detect state transitions (working→done, working→idle, working→stuck)\n3. Route based on bead metadata (has MR? exit type? branch?)\n4. Handle cleanup wisps based on discovered state\n\nThe inbox-check step becomes a fallback for edge cases only (cross-rig messages, escalations).\n\nKey files:\n- internal/witness/handlers.go — DetectZombiePolecats (lines 978-1250), survey-workers logic\n- Patrol molecule: mol-witness-patrol.formula.toml\n\nThis implements 'Discover Don't Track' (PRIMING.md principle #4).", "notes": "Implemented: Added DiscoverCompletions() function to witness handlers.go that reads completion metadata from agent beads (exit_type, mr_id, branch, mr_failed, completion_time) to discover polecat completions. Routes based on exit_type and MR presence, creates cleanup wisps and sends MERGE_READY exactly like HandlePolecatDone. Clears completion metadata after processing to prevent re-processing. Updated patrol formula to v9, documenting survey-workers as primary completion discovery mechanism with inbox-check POLECAT_DONE as fallback. Tests added for all new types and functions.", "status": "closed", "priority": 1, "issue_type": "task", "assignee": "gastown/polecats/nux", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-28T00:46:30Z", "created_by": "mayor", "updated_at": "2026-02-28T01:52:19Z", "closed_at": "2026-02-28T01:51:32Z", "close_reason": "Closed", "dependencies": [{"issue_id": "gt-w0br", "depends_on_id": "gt-wisp-ijijb", "type": "blocks", "created_at": "2026-02-27T17:26:54Z", "created_by": "mayor", "metadata": "{}"}, {"issue_id": "gt-w0br", "depends_on_id": "gt-wisp-ufzcr", "type": "blocks", "created_at": "2026-02-27T17:40:24Z", "created_by": "dog", "metadata": "{}"}, {"issue_id": "gt-w0br", "depends_on_id": "gt-x7t9", "type": "blocks", "created_at": "2026-02-27T16:47:02Z", "created_by": "mayor", "metadata": "{}"}], "dependency_count": 3, "dependent_count": 0, "comment_count": 0}
{"id": "gt-i6yv", "title": "Replace MERGE_READY/MERGED/MERGE_FAILED mail with nudge", "description": "Currently the witness-refinery communication is all mail:\n- Witness sends MERGE_READY to refinery when polecat has pending MR\n- Refinery sends MERGED or MERGE_FAILED back to witness\n\nChange: Use gt nudge for all three signals. The refinery can discover pending MRs from beads (cleanup wisps with state:merge-requested label). The witness can discover merge outcomes by checking if the PR was merged on main (git log).\n\nKey files:\n- internal/witness/handlers.go — handlePolecatDonePendingMR (lines 126-146), HandleMerged (lines 267-306), HandleMergeFailed (lines 341-387)\n- internal/witness/protocol.go — MERGE_READY, MERGED, MERGE_FAILED message types\n- Refinery mail handling code\n\nDepends on task 1 (POLECAT_DONE replacement) being designed first.", "status": "closed", "priority": 1, "issue_type": "task", "assignee": "gastown/polecats/furiosa", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-28T00:46:24Z", "created_by": "mayor", "updated_at": "2026-02-28T02:03:47Z", "closed_at": "2026-02-28T02:02:51Z", "close_reason": "Closed", "dependencies": [{"issue_id": "gt-i6yv", "depends_on_id": "gt-a6gp", "type": "blocks", "created_at": "2026-02-27T16:47:02Z", "created_by": "mayor", "metadata": "{}"}, {"issue_id": "gt-i6yv", "depends_on_id": "gt-wisp-fzhvd", "type": "blocks", "created_at": "2026-02-27T17:50:09Z", "created_by": "mayor", "metadata": "{}"}], "dependency_count": 2, "dependent_count": 0, "comment_count": 0}
{"id": "gt-a6gp", "title": "Replace POLECAT_DONE mail with nudge + agent_state bead update", "description": "attached_formula: mol-polecat-work\n\nCurrently polecats send POLECAT_DONE mail when they finish (witness/protocol.go). Each mail = Dolt commit.\n\nChange: When a polecat completes work, it should:\n1. Update its agent bead with agent_state=done and completion metadata (exit type, branch, MR id)\n2. Send gt nudge to witness (free, wakes it up)\n3. Do NOT send gt mail\n\nThe witness survey-workers step already polls agent beads. Extend it to detect agent_state=done and extract completion metadata from the bead description.\n\nKey files:\n- internal/witness/protocol.go — POLECAT_DONE message format (lines 134-172)\n- internal/witness/handlers.go — HandlePolecatDone (lines 83-124)\n- Polecat's gt done implementation (find in cmd/ or wherever polecats signal completion)\n\nThis is the highest-impact change — eliminates the most mail volume.", "notes": "Implemented: Replaced POLECAT_DONE + WORK_DONE mail with agent bead completion metadata + tmux nudge. Witness survey-workers step updated to detect agent_state=done as primary completion signal.", "status": "closed", "priority": 1, "issue_type": "task", "assignee": "gastown/polecats/furiosa", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-28T00:46:17Z", "created_by": "mayor", "updated_at": "2026-02-28T01:49:55Z", "closed_at": "2026-02-28T01:45:54Z", "close_reason": "Completed with no code changes (already fixed or pushed directly to main)", "dependencies": [{"issue_id": "gt-a6gp", "depends_on_id": "gt-wisp-spqdu", "type": "blocks", "created_at": "2026-02-27T17:44:54Z", "created_by": "dog", "metadata": "{}"}, {"issue_id": "gt-a6gp", "depends_on_id": "gt-wisp-xekw6", "type": "blocks", "created_at": "2026-02-27T17:26:46Z", "created_by": "mayor", "metadata": "{}"}, {"issue_id": "gt-a6gp", "depends_on_id": "gt-x7t9", "type": "blocks", "created_at": "2026-02-27T16:46:58Z", "created_by": "mayor", "metadata": "{}"}], "dependency_count": 3, "dependent_count": 1, "comment_count": 0}
{"id": "gt-kcsh", "title": "[epic] Witness-Polecat Communication Redesign: Nudge over Mail", "description": "The gastown witness has 34+ unread mail and is falling further behind every patrol cycle. Root cause: every polecat completion sends mail (= permanent Dolt commit), and the witness processes mail serially.\n\nSteve's directive: redesign the communication model.\n\nDesign principles:\n1. Nudge (free, no persistence) over Mail (Dolt commit, permanent) for routine signals\n2. Discover Don't Track: witness should poll polecat state from beads/tmux, not accumulate mail\n3. Persistent polecats make lifecycle-via-mail model obsolete\n\nCurrent architecture: Polecat runs gt done → sends POLECAT_DONE mail → witness reads in inbox-check → creates cleanup wisp → sends MERGE_READY mail to refinery. Every step is mail. Every mail is a Dolt commit.\n\nTarget architecture: Polecat sets agent_state in its bead → witness survey-workers step discovers state changes → routes accordingly. Mail only for cross-rig or handoff-critical messages.\n\nKey files:\n- internal/witness/protocol.go — message type definitions\n- internal/witness/handlers.go — all message handlers\n- internal/witness/manager.go — lifecycle management\n- internal/cmd/sling_dog.go — work dispatch\n- internal/daemon/handler.go — plugin dispatch\n\nChildren will be filed as separate tasks.", "status": "closed", "priority": 1, "issue_type": "epic", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-28T00:46:08Z", "created_by": "mayor", "updated_at": "2026-02-28T02:11:05Z", "closed_at": "2026-02-28T02:11:05Z", "close_reason": "All 5 child tasks completed: schema (gt-x7t9), replace POLECAT_DONE (gt-a6gp), discovery tracking (gt-w0br), replace merge mail (gt-i6yv), drain backlog (gt-2rj2)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-8qtk", "title": "TestCrossPlatformBuild fails: Setpgid not available on windows/amd64", "description": "dog.go:693 uses syscall.SysProcAttr{Setpgid: true} which is not available on Windows. TestCrossPlatformBuild/windows_amd64 fails. Pre-existing on main since commit 650e42d0.", "notes": "Fix: replaced direct syscall.SysProcAttr{Setpgid: true} in dog.go:693 with util.SetProcessGroup(killCmd). The util package already had proper _unix.go/_windows.go platform files. Removed syscall import, added util import. Verified: go build, GOOS=windows GOARCH=amd64 go build, go vet, and go test -short all pass.", "status": "closed", "priority": 1, "issue_type": "bug", "assignee": "gastown/polecats/nux", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-28T00:17:55Z", "created_by": "gastown/refinery", "updated_at": "2026-02-28T00:43:36Z", "closed_at": "2026-02-28T00:39:20Z", "dependencies": [{"issue_id": "gt-8qtk", "depends_on_id": "gt-wisp-ad95", "type": "blocks", "created_at": "2026-02-27T16:26:22Z", "created_by": "mayor", "metadata": "{}"}], "dependency_count": 1, "dependent_count": 0, "comment_count": 0}
{"id": "gt-spbg", "title": "Reaper Dog: DELETE closed wisps (not just close)", "description": "The Reaper Dog (wisp_reaper.go) currently closes stale wisps >24h but never DELETEs the rows. Add DELETE: after closing, DELETE FROM wisp_labels/wisp_events/wisps WHERE status='closed'. This is live SQL against the running server — no downtime. First manual run deleted 3,884 rows successfully. This is Layer 1 continuous maintenance. The Reaper is the highest-volume maintenance operation in Gas Town.", "status": "closed", "priority": 1, "issue_type": "feature", "assignee": "gastown/polecats/nux", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-27T23:50:59Z", "created_by": "mayor", "updated_at": "2026-02-28T00:23:27Z", "closed_at": "2026-02-27T23:53:00Z", "close_reason": "Completed with no code changes (already fixed or pushed directly to main)", "dependencies": [{"issue_id": "gt-spbg", "depends_on_id": "gt-wisp-t02q", "type": "blocks", "created_at": "2026-02-27T15:51:29Z", "created_by": "mayor", "metadata": "{}"}], "dependency_count": 1, "dependent_count": 0, "comment_count": 0}
{"id": "gt-ghl6", "title": "Daemon scheduled maintenance window (gt config set maintenance.window)", "description": "Add maintenance window config to the gt daemon. User opts in via 'gt config set maintenance.window 03:00' and 'gt config set maintenance.interval daily'. Daemon monitors commit counts per DB (query dolt_log COUNT). When any DB exceeds threshold (default 1000 commits) during the maintenance window, calls 'gt maintain --force'. Config stored in daemon.json alongside existing dolt_server section. See docs/design/dolt-storage.md 'Layer 2: Scheduled flatten' section.", "notes": "Implemented: Added daemon scheduled maintenance window. User configures via gt config set maintenance.window HH:MM, maintenance.interval (daily/weekly/monthly/duration), maintenance.threshold (default 1000). Daemon polls every 5min, runs gt maintain --force during the window when commit threshold exceeded. Config stored in daemon.json. Full test coverage for window parsing, interval logic, config round-trip.", "status": "closed", "priority": 1, "issue_type": "feature", "assignee": "gastown/polecats/slit", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-27T23:50:50Z", "created_by": "mayor", "updated_at": "2026-02-28T01:26:21Z", "closed_at": "2026-02-28T01:25:20Z", "close_reason": "Completed with no code changes (already fixed or pushed directly to main)", "dependencies": [{"issue_id": "gt-ghl6", "depends_on_id": "gt-8ubf", "type": "blocks", "created_at": "2026-02-27T15:51:12Z", "created_by": "mayor", "metadata": "{}"}, {"issue_id": "gt-ghl6", "depends_on_id": "gt-wisp-pc8vj", "type": "blocks", "created_at": "2026-02-27T17:24:18Z", "created_by": "mayor", "metadata": "{}"}], "dependency_count": 2, "dependent_count": 1, "comment_count": 0}
{"id": "gt-8ubf", "title": "gt maintain: one-command Dolt maintenance (reap+flatten+gc)", "description": "Encapsulate the manual reap+flatten+gc procedure into a single gt command. Steps: (1) park all rigs, (2) backup all DBs via dolt backup sync, (3) stop Dolt server, (4) for each DB over commit threshold: DELETE closed wisps + child rows, DOLT_RESET --soft to initial commit, dolt add -A, dolt commit, dolt gc, (5) start server, (6) unpark rigs. Flags: --force for non-interactive (daemon use), interactive mode shows plan and confirms. First successful manual run: 3,884 wisps reaped, 9,195 commits flattened to 6, ~2 min downtime. See docs/design/dolt-storage.md 'Automatic Maintenance' section for full spec.", "notes": "Implemented: gt maintain command with 8-phase pipeline (park, backup, reap, flatten, stop, gc, start, unpark). Supports --force, --dry-run, --threshold flags. Reuses existing flatten algorithm from dolt_flatten.go, PurgeClosedEphemerals for reap, dolt gc CLI for gc. Deferred cleanup ensures server restart and rig unpark even on errors.", "status": "closed", "priority": 1, "issue_type": "feature", "assignee": "gastown/polecats/furiosa", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-27T23:50:46Z", "created_by": "mayor", "updated_at": "2026-02-28T00:43:21Z", "closed_at": "2026-02-28T00:41:41Z", "close_reason": "Completed with no code changes (already fixed or pushed directly to main)", "dependencies": [{"issue_id": "gt-8ubf", "depends_on_id": "gt-wisp-lmmq", "type": "blocks", "created_at": "2026-02-27T16:40:32Z", "created_by": "mayor", "metadata": "{}"}], "dependency_count": 1, "dependent_count": 1, "comment_count": 0}
{"id": "gt-qcjj", "title": "SQL audit: rewrite GetNewlyUnblockedByClose nested JOIN subquery", "description": "GetNewlyUnblockedByClose (dependencies.go:809) has nested subquery with 2-table JOIN + correlated NOT EXISTS. Most dangerous remaining query pattern that could crash/hang Dolt. Rewrite to avoid nested JOIN. Also review cycle detection CTE (dependencies.go:52). See hq-g4nxe for full audit.", "status": "closed", "priority": 1, "issue_type": "bug", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-27T22:49:30Z", "created_by": "mayor", "updated_at": "2026-02-27T22:49:41Z", "closed_at": "2026-02-27T22:49:41Z", "close_reason": "Misfiled in gastown — SQL queries are in beads repo. Refiled as bd-o23.", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-z6tn", "title": "Deacon patrol: skip docked/parked rigs when starting agents", "description": "Deacon patrol starts witnesses and refineries on docked rigs. Should check getRigOperationalState() and skip DOCKED/PARKED rigs before spawning agents. Root cause: deacon patrol logic does not query rig bead labels for status:docked. See hq-lf6h for full context.", "notes": "Implemented: Added getRigOperationalState() checks to 4 agent startup functions that were missing them:\n\n1. start.go:startWitnessForRig - had no operational state check (gt start --all path)\n2. start.go:startRefineryForRig - had no operational state check (gt start --all path)  \n3. up.go:upStartWitness - only checked wisp layer, missed bead labels (status:docked)\n4. up.go:upStartRefinery - only checked wisp layer, missed bead labels (status:docked)\n\nAll 4 now use getRigOperationalState() which checks both wisp layer (local/ephemeral) and bead labels (global/synced), consistent with daemon's isRigOperational() check.\n\nOther code paths already had proper checks:\n- daemon ensureWitnessRunning/ensureRefineryRunning: isRigOperational ✓\n- gt witness/refinery start/restart CLI: checkRigNotParkedOrDocked ✓\n- daemon restartSession (lifecycle.go): isRigOperational ✓", "status": "closed", "priority": 1, "issue_type": "bug", "assignee": "gastown/polecats/nux", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-27T22:49:26Z", "created_by": "mayor", "updated_at": "2026-02-27T23:03:08Z", "closed_at": "2026-02-27T23:03:07Z", "close_reason": "Already merged to main (e7251cc3)", "dependencies": [{"issue_id": "gt-z6tn", "depends_on_id": "gt-wisp-eedk", "type": "blocks", "created_at": "2026-02-27T14:49:48Z", "created_by": "mayor", "metadata": "{}"}], "dependency_count": 1, "dependent_count": 0, "comment_count": 0}
{"id": "gt-0cxc", "title": "Doctor Dog: replace hardcoded thresholds with report-only data", "description": "The doctor dog has hardcoded latency thresholds (200ms critical) that violate ZFC. Go code is making judgment calls that should be left to agents. Result: false-positive CRITICAL escalations that create noise, waste Dolt commits (mail), and train everyone to ignore alerts.\n\nCurrent anti-pattern (Go decides):\n- 200ms latency threshold → fires CRITICAL escalation\n- Server restart window → fires CRITICAL even though daemon auto-recovered\n- Hardcoded numbers can't account for context (connection count, DB count, data volume)\n\nZFC-compliant fix:\n- Doctor dog REPORTS metrics as structured data (latency, connections, disk, etc.)\n- Remove all hardcoded threshold checks and escalation triggers from Go code\n- Deacon/Mayor receives the data and decides whether to escalate based on context\n- The doctor is a thermometer, not a thermostat\n\nReference: PRIMING.md line 36 (Agent decides, Go transports) and line 355 (Let agents decide thresholds).", "notes": "Implemented: Refactored doctor_dog.go to report-only mode per ZFC. Removed 4 threshold constants (latency 2s, max DB count 6, backup stale age 30m, disk limit 200MB), all d.escalate() calls, server restart logic, and zombie kill logic. Added DoctorDogReport struct with typed sub-reports (latency, databases, GC, zombies, backup age, disk usage). Report written as JSON to .doctor-dog-report.json each cycle. GC execution kept as maintenance. Tests updated — removed MaxDBCount test, added report serialization and backwards-compat tests.", "status": "closed", "priority": 1, "issue_type": "task", "assignee": "gastown/polecats/furiosa", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-27T22:37:59Z", "created_by": "mayor", "updated_at": "2026-02-27T23:00:49Z", "closed_at": "2026-02-27T22:46:45Z", "close_reason": "Closed", "dependencies": [{"issue_id": "gt-0cxc", "depends_on_id": "gt-wisp-u7wh", "type": "blocks", "created_at": "2026-02-27T14:38:07Z", "created_by": "mayor", "metadata": "{}"}], "dependency_count": 1, "dependent_count": 0, "comment_count": 0}
{"id": "gt-nsrl", "title": "Add --json flag to gt health", "description": "Machine-readable output for automated monitoring. Struct-based output using json.NewEncoder like gt compact --json. File: internal/cmd/health.go.", "status": "closed", "priority": 1, "issue_type": "task", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-27T22:02:41Z", "created_by": "mayor", "updated_at": "2026-02-27T22:11:47Z", "closed_at": "2026-02-27T22:11:47Z", "close_reason": "Implemented as part of gt-kali — HealthReport struct with json tags, --json flag outputs via json.NewEncoder.", "dependencies": [{"issue_id": "gt-nsrl", "depends_on_id": "gt-kali", "type": "blocks", "created_at": "2026-02-27T14:03:02Z", "created_by": "mayor", "metadata": "{}"}], "dependency_count": 1, "dependent_count": 0, "comment_count": 0}
{"id": "gt-kali", "title": "Implement gt health CLI command", "description": "New top-level cobra command showing: Dolt Server status, per-DB counts, pollution scan, backup freshness (Dolt + JSONL), zombie processes, orphan DBs, stale branches. Output format follows gt dolt status style. New file: internal/cmd/health.go. Register in rootCmd, add to beadsExemptCommands.", "status": "closed", "priority": 1, "issue_type": "feature", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-27T22:02:39Z", "created_by": "mayor", "updated_at": "2026-02-27T22:11:46Z", "closed_at": "2026-02-27T22:11:46Z", "close_reason": "New health.go: gt health showing 6 sections (server, databases, pollution, backups, processes, orphans). Registered in rootCmd, added to beadsExemptCommands. Includes --json flag.", "dependency_count": 0, "dependent_count": 2, "comment_count": 0}
{"id": "gt-h0xo", "title": "Add gt dolt flatten manual command with safety protocol", "description": "New cobra command gt dolt flatten <database> requiring --yes-i-am-sure flag. Pre-flight: verify backup freshness, count issues, show warning. Execute flatten algorithm (shared with compactor). Post-verify: issue counts match, single commit in log. File: internal/cmd/dolt.go.", "status": "closed", "priority": 1, "issue_type": "task", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-27T22:02:36Z", "created_by": "mayor", "updated_at": "2026-02-27T22:09:39Z", "closed_at": "2026-02-27T22:09:39Z", "close_reason": "New dolt_flatten.go: gt dolt flatten <db> --yes-i-am-sure. Pre-flight (backup freshness, row counts), flatten algorithm (branch, reset, commit, verify, swap main), cleanup on failure.", "dependencies": [{"issue_id": "gt-h0xo", "depends_on_id": "gt-wk0q", "type": "blocks", "created_at": "2026-02-27T14:03:01Z", "created_by": "mayor", "metadata": "{}"}], "dependency_count": 1, "dependent_count": 0, "comment_count": 0}
{"id": "gt-wk0q", "title": "Implement Compactor Dog imperative Go code", "description": "Replace 35-line stub in compactor_dog.go with full implementation following Doctor/Reaper pattern. For each production DB, count commits via dolt_log, if above threshold (500), flatten: create temp branch gt-compaction, soft-reset to root commit, commit all data, verify integrity, swap main, delete temp branch, run gc. Concurrency safety: abort if main HEAD moves during compaction.", "status": "closed", "priority": 1, "issue_type": "task", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-27T22:02:33Z", "created_by": "mayor", "updated_at": "2026-02-27T22:07:35Z", "closed_at": "2026-02-27T22:07:35Z", "close_reason": "Replaced 35-line stub with ~250-line implementation: commit counting, 10-step flatten algorithm (branch, soft-reset, commit, verify integrity, swap main, cleanup, gc), concurrency safety (abort if main moves).", "dependency_count": 0, "dependent_count": 1, "comment_count": 0}
{"id": "gt-dsj0", "title": "Verify Reaper DECAY stage runs on production schedule", "description": "Reaper Go code is shipped but never verified running in production. Check: daemon config enables wisp_reaper, ticker fires, closed wisps >7d get deleted. Query counts before/after. Also verify auto-close of stale issues >30d works.", "status": "closed", "priority": 1, "issue_type": "task", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-27T22:02:28Z", "created_by": "mayor", "updated_at": "2026-02-27T22:04:34Z", "closed_at": "2026-02-27T22:04:34Z", "close_reason": "Verified: reaper running on 30m ticker, close logic works, purge logic correct but no aged wisps yet, auto-close stale issues present. Molecule pour failure is cosmetic.", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-22ps", "title": "Refinery: delete remote polecat branch after successful merge to main", "description": "After refinery merges a polecat MR, the remote polecat/* branch should be deleted. git push origin --delete <branch>. The branch name is already known from the MR. This prevents stale branch accumulation. Currently 219 stale branches across remotes. See docs/design/persistent-polecat-pool.md Phase 1.", "notes": "Implemented gt mq post-merge <rig> <mr-id> command. Consolidates post-merge cleanup into a single atomic operation: closes MR bead (merged), closes source issue, and deletes remote polecat branch. Respects delete_merged_branches config. Updated refinery patrol formula to use the command instead of manual git/bd commands. Tests pass. Root cause of 219 stale branches: formula-only instructions that AI agents skip. Solution: Go-level command for reliable execution.", "status": "closed", "priority": 1, "issue_type": "task", "assignee": "gastown/polecats/dementus", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-27T20:49:32Z", "created_by": "mayor", "updated_at": "2026-02-27T21:20:51Z", "closed_at": "2026-02-27T21:20:51Z", "close_reason": "Shipped c39372f4: gt mq post-merge command. Merged by refinery.", "dependencies": [{"issue_id": "gt-22ps", "depends_on_id": "gt-wisp-0z1s", "type": "blocks", "created_at": "2026-02-27T12:50:51Z", "created_by": "mayor", "metadata": "{}"}], "dependency_count": 1, "dependent_count": 1, "comment_count": 0}
{"id": "gt-hdf8", "title": "gt polecat done: transition to IDLE instead of triggering nuke", "description": "When a polecat completes work, gt polecat done (or gt done) should transition the polecat to IDLE state with sandbox preserved, NOT trigger destruction. Flow: push branch -> submit MR if needed -> clear hook_bead -> sync worktree to main (git checkout main && git pull) -> set state IDLE. Session can stay alive or cycle independently. See docs/design/persistent-polecat-pool.md Phase 1.", "notes": "Implemented: gt done now transitions to IDLE instead of killing session. Removed session kill backstop, SIGTERM handler, and selfKillSession call. Added worktree sync to main after MR submission. All tests pass (full suite). selfKillSession kept as deprecated for Witness use.", "status": "closed", "priority": 1, "issue_type": "task", "assignee": "gastown/polecats/rictus", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-27T20:49:24Z", "created_by": "mayor", "updated_at": "2026-02-27T21:10:37Z", "closed_at": "2026-02-27T21:10:37Z", "close_reason": "Merged to main at 341fa43a", "dependencies": [{"issue_id": "gt-hdf8", "depends_on_id": "gt-wisp-bbgl", "type": "blocks", "created_at": "2026-02-27T12:50:42Z", "created_by": "mayor", "metadata": "{}"}], "dependency_count": 1, "dependent_count": 3, "comment_count": 0}
{"id": "gt-dsgp", "title": "Witness: stop nuking idle polecats (remove Idle Polecat Heresy)", "description": "Witness patrol currently treats idle polecats as waste and may nuke them. With persistent polecat pool, IDLE is a healthy state -- the polecat is ready for reuse. Change witness to: (1) skip idle polecats during patrol, (2) only escalate WORKING polecats that appear stuck (not nuke them), (3) restart dead sessions for WORKING polecats instead of nuking. See docs/design/persistent-polecat-pool.md Phase 1.", "notes": "Implementation complete. Changes:\n1. handlers.go: Added KillPolecatSession() and RestartPolecatSession() functions\n2. handlers.go: detectZombieLiveSession now uses kill/restart/escalate instead of nuke\n3. handlers.go: detectZombieDeadSession now restarts working polecats instead of nuking\n4. handlers.go: DetectZombiePolecats skips idle polecats entirely\n5. handlers.go: Removed duplicate live-session zombie checks from outer loop\n6. polecat.md.tmpl: Replaced Idle Polecat Heresy with calm Completion Protocol\n7. mol-witness-patrol.formula.toml: Updated idle handling and zombie actions\n8. All tests passing (both witness and full suite)", "status": "closed", "priority": 1, "issue_type": "task", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-27T20:49:21Z", "created_by": "mayor", "updated_at": "2026-02-27T21:20:48Z", "closed_at": "2026-02-27T21:20:48Z", "close_reason": "Shipped 016381ad: witness restart-first policy. Polecats are restarted instead of nuked.", "dependencies": [{"issue_id": "gt-dsgp", "depends_on_id": "gt-wisp-fx7z", "type": "blocks", "created_at": "2026-02-27T12:50:34Z", "created_by": "mayor", "metadata": "{}"}], "dependency_count": 1, "dependent_count": 1, "comment_count": 0}
{"id": "gt-lpop", "title": "Persistent polecat pool: separate identity, sandbox, and session lifecycles", "description": "Three concepts are currently conflated in the polecat lifecycle:\n\n1. IDENTITY (furiosa, nux, obsidian) — the agent name, history, ledger entries. Should be long-lived. Killing identity means losing the capability record.\n\n2. SANDBOX (git worktree) — the working copy. Easy to keep in sync with main between assignments. No reason to destroy and recreate every time.\n\n3. SESSION (Claude session) — cycles naturally due to context limits. Independent of identity and sandbox. A polecat can cycle sessions without losing its identity or sandbox.\n\nCurrent model: spawn polecat -> do work -> nuke everything. This causes:\n- Lost work (branches not pushed before nuke, data loss)\n- 219 stale remote branches (artifacts of destroyed sandboxes)\n- Slow dispatch (must create worktree + session for every assignment)\n- Lost context (identity destroyed, no continuity between assignments)\n- The Idle Polecat Heresy (treating idle polecats as waste when they should be a ready pool)\n\nTarget model: persistent polecat pool. Polecats stay alive between assignments. When work completes, the polecat syncs its sandbox to main and returns to the pool. New work is dispatched to an available polecat — no spawn/nuke overhead. Sessions cycle as needed but identity and sandbox persist.\n\nThis was previously filed and lost in the Clown Show data outages. Recapturing the direction here.\n\nDesign questions to resolve:\n- Pool size per rig (fixed? elastic?)\n- How polecats sync sandbox between assignments (rebase onto main? fresh checkout?)\n- How refinery interacts with persistent polecats (MR from long-lived branch? or still branch-per-task?)\n- Crew vs polecat distinction (crew is named/specialized, polecats are pool workers?)", "status": "closed", "priority": 1, "issue_type": "feature", "assignee": "gastown/polecats/nux", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-27T20:45:55Z", "created_by": "mayor", "updated_at": "2026-02-28T02:17:32Z", "closed_at": "2026-02-28T02:13:55Z", "close_reason": "Closed", "dependencies": [{"issue_id": "gt-lpop", "depends_on_id": "gt-22ps", "type": "blocks", "created_at": "2026-02-27T12:50:25Z", "created_by": "mayor", "metadata": "{}"}, {"issue_id": "gt-lpop", "depends_on_id": "gt-24j2", "type": "blocks", "created_at": "2026-02-27T12:50:25Z", "created_by": "mayor", "metadata": "{}"}, {"issue_id": "gt-lpop", "depends_on_id": "gt-dsgp", "type": "blocks", "created_at": "2026-02-27T12:50:25Z", "created_by": "mayor", "metadata": "{}"}, {"issue_id": "gt-lpop", "depends_on_id": "gt-hdf8", "type": "blocks", "created_at": "2026-02-27T12:50:25Z", "created_by": "mayor", "metadata": "{}"}, {"issue_id": "gt-lpop", "depends_on_id": "gt-iifg", "type": "blocks", "created_at": "2026-02-27T12:50:25Z", "created_by": "mayor", "metadata": "{}"}, {"issue_id": "gt-lpop", "depends_on_id": "gt-rk12", "type": "blocks", "created_at": "2026-02-27T12:50:25Z", "created_by": "mayor", "metadata": "{}"}, {"issue_id": "gt-lpop", "depends_on_id": "gt-wisp-bxzkx", "type": "blocks", "created_at": "2026-02-27T18:10:32Z", "created_by": "mayor", "metadata": "{}"}], "dependency_count": 7, "dependent_count": 0, "comment_count": 0}
{"id": "gt-2gir", "title": "Refinery: delete remote polecat branch after successful merge", "description": "After refinery merges a polecat MR to main, the remote polecat/* branch is left behind. 219 stale branches accumulated across 3 remotes. Fix: after successful merge to main, run git push origin --delete <polecat-branch>. The branch name is already known from the MR metadata. This is the primary cleanup path -- most polecat branches end via successful merge.", "status": "closed", "priority": 1, "issue_type": "bug", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-27T20:43:34Z", "created_by": "mayor", "updated_at": "2026-02-27T20:45:40Z", "closed_at": "2026-02-27T20:45:40Z", "close_reason": "Wrong framing. Problem isn't cleanup — it's that we're nuking polecats too aggressively. Replacing with architectural bead for persistent polecat pool.", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-uj16", "title": "Refactor Wisp Reaper from imperative Go to formula-only", "description": "wisp_reaper.go is 658 lines of hardwired Go (close stale wisps, batch DELETE from wisps + aux tables, auto-close stale issues, mail purge). Should follow the janitor/compactor pattern: daemon pours a molecule, agent executes formula steps. The formula mol-dog-reaper.formula.toml already exists with scan/reap/purge/auto-close/report steps that match the Go code. Strip the imperative Go, keep only config + pourDogMolecule call. All the SQL is already documented in the formula.", "notes": "Implemented: Stripped 658 lines of imperative Go (SQL execution, batch deletes, DB connections) from wisp_reaper.go. Replaced with 43-line reaper_dog.go following janitor/compactor pattern: config + pourDogMolecule only. Added missing mail-purge step to mol-dog-reaper formula. Simplified WispReaperConfig to Enabled+IntervalStr. Kept doltServerPort() helper (used by doctor_dog). All tests pass.", "status": "closed", "priority": 1, "issue_type": "task", "assignee": "gastown/polecats/nux", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-27T20:27:36Z", "created_by": "mayor", "updated_at": "2026-02-27T21:03:40Z", "closed_at": "2026-02-27T20:34:51Z", "close_reason": "Closed", "dependencies": [{"issue_id": "gt-uj16", "depends_on_id": "gt-wisp-xzcc", "type": "blocks", "created_at": "2026-02-27T12:28:31Z", "created_by": "mayor", "metadata": "{}"}], "dependency_count": 1, "dependent_count": 0, "comment_count": 0}
{"id": "gt-ziiu", "title": "Refactor Doctor Dog from imperative Go to formula-only", "description": "doctor_dog.go is 465 lines of hardwired Go (TCP checks, latency, gc, zombie kill, backup staleness, disk usage). Should follow the janitor/compactor pattern: daemon pours a molecule, agent executes formula steps. The formula mol-dog-doctor.formula.toml already exists but is ignored — the Go code runs everything directly. Strip the imperative Go, keep only config + pourDogMolecule call. Formula steps describe the health checks; agents execute them via bash/SQL.", "notes": "Implemented: Stripped 465 lines of imperative Go from doctor_dog.go (TCP checks, latency, GC, zombie kill, backup staleness, disk usage, server restart, dirSize). Now follows janitor/compactor pattern: config + interval + pourDogMolecule call. Formula mol-dog-doctor.formula.toml defines health checks declaratively. Tests updated to remove tests for deleted functions.", "status": "closed", "priority": 1, "issue_type": "task", "assignee": "gastown/polecats/furiosa", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-27T20:27:33Z", "created_by": "mayor", "updated_at": "2026-02-27T21:03:35Z", "closed_at": "2026-02-27T20:33:43Z", "close_reason": "Closed", "dependencies": [{"issue_id": "gt-ziiu", "depends_on_id": "gt-wisp-d7v5", "type": "blocks", "created_at": "2026-02-27T12:28:23Z", "created_by": "mayor", "metadata": "{}"}], "dependency_count": 1, "dependent_count": 0, "comment_count": 0}
{"id": "gt-emna", "title": "Pre-existing test failures: TestSquashJitterZeroDuration and TestSquashJitterContextCancellation", "description": "Two tests in internal/cmd/molecule_lifecycle_test.go fail on main. Tests expect workspace errors but get nil. Lines 69 and 102. Discovered during merge of polecat/furiosa/gt-fubw. Not caused by any polecat branch.", "notes": "Fixed: Both tests were running inside the actual gastown worktree, so workspace.FindFromCwd() succeeded instead of failing. Added os.Chdir to temp dirs so workspace lookup fails as the tests intended.", "status": "closed", "priority": 1, "issue_type": "bug", "assignee": "gastown/polecats/furiosa", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-27T08:24:28Z", "created_by": "gastown/refinery", "updated_at": "2026-02-27T21:39:34Z", "closed_at": "2026-02-27T21:39:34Z", "close_reason": "Closed", "dependencies": [{"issue_id": "gt-emna", "depends_on_id": "gt-wisp-u3sj", "type": "blocks", "created_at": "2026-02-27T13:26:55Z", "created_by": "mayor", "metadata": "{}"}], "dependency_count": 1, "dependent_count": 0, "comment_count": 0}
{"id": "gt-olb4", "title": "Cross-socket zombie session cleanup and prevention", "description": "## Problem\n\nAfter bug fix gt-qkekp (socket derived from $TMUX instead of town name), zombie agent sessions remain on the default tmux socket. gt down only cleans the town socket (e.g. -L gt), leaving stale copies of gt-crew-*, bd-crew-*, hq-mayor, gt-witness, gt-refinery etc. on default. These zombies:\n- Consume resources (each runs a Claude session)\n- Confuse operators (which session is the real one?)\n- Can cause split-brain if both copies process mail/hooks\n\n## Current state (2026-02-27)\n- default socket: 23 zombie agent sessions (created Feb 23-26)\n- gt socket: 36 active agent sessions (created Feb 26)\n- User terminal clients are attached to default-socket copies\n\n## Proposed work\n\n### 1. Immediate cleanup\nKill zombie agent sessions on the default socket. Preserve user personal terminal session(s) only.\n\n### 2. gt doctor check: cross-socket zombies\nAdd a doctor check that detects agent sessions (gt-*, bd-*, hq-*, hop-*, wy-*) on the default socket when a town socket exists. Flag them as stale.\n\n### 3. gt down: cross-socket sweep\nEnhance gt down to optionally sweep agent sessions from the default socket too (or at minimum warn about them).\n\n### 4. gt up: zombie detection on startup\nWhen gt up creates sessions on the town socket, check if same-named sessions exist on default socket and warn/kill them.\n\n## Architecture context\nDual socket design is intentional and correct:\n- Town socket (gt): agent sessions, managed by gt up/down\n- Default socket: user terminal sessions, untouched by gt\n- Cross-socket keybindings installed by ensureCrossSocketBindings()\n- gt cycle handles cross-socket switching via SocketFromEnv()\n\nThe bug was sessions landing on the wrong socket; the gap is no cleanup for the aftermath.", "notes": "Implemented: cross-socket zombie session cleanup and prevention. Added gt doctor cross-socket-zombies check (fixable), gt down --all cross-socket sweep, and gt up startup warning. All tests pass.", "status": "closed", "priority": 1, "issue_type": "epic", "assignee": "gastown/polecats/slit", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-27T08:03:06Z", "created_by": "gastown/crew/max", "updated_at": "2026-02-28T00:50:22Z", "closed_at": "2026-02-28T00:50:22Z", "close_reason": "no-changes: work already merged to main (commit 91938728)", "labels": ["infrastructure"], "dependencies": [{"issue_id": "gt-olb4", "depends_on_id": "gt-wisp-6v3a", "type": "blocks", "created_at": "2026-02-27T15:53:28Z", "created_by": "mayor", "metadata": "{}"}], "dependency_count": 1, "dependent_count": 0, "comment_count": 0}
{"id": "gt-fubw", "title": "gt vitals: unified health dashboard command", "description": "Add a `gt vitals` subcommand that displays a single-screen health dashboard.\n\n## Output format\n\n```\nDolt Servers\n  ● :3307  production  PID 69625  252MB  8/200 conn  0ms\n  ○ :52879 test zombie PID 87333\n  ○ :57688 test zombie PID 33459\n\nDatabases (9 registered, 1 orphan: gt)\n  Rig        Total  Open  Closed   %\n  hq           160    48     111  69%\n  gastown      373    14     346  93%\n  beads        119    20      97  81%\n  wyvern         0     0       0    -\n\nBackups\n  Local:  ~/gt/.dolt-backup/  last sync 2026-02-27 06:15 (3 DBs)\n  JSONL:  last push 2026-02-27 06:00 (8,263 records)\n```\n\n## Data sources\n\n1. **Dolt Servers**: `ps aux | grep dolt sql-server` to find all dolt processes. Parse PID, port, data-dir. For production (port 3307), also show disk usage, connection count, query latency (from gt dolt status internals).\n\n2. **Database issue stats**: For each rig, run `bd stats` (or query Dolt directly). Show total/open/closed/percentage. Also show orphan count from gt dolt status.\n\n3. **Backups**:\n   - Local: Check mtime of directories in `~/gt/.dolt-backup/`. Show most recent sync time and count of DB dirs.\n   - JSONL: Check the JSONL git archive repo for last commit time. The archive is at `~/gt/.beads/` (the git repo with .jsonl files). Use `git -C <path> log -1 --format=%ci` to get last push time.\n\n## Implementation\n\n- New file: `internal/cmd/vitals.go`\n- Register as `gt vitals` subcommand\n- No flags needed for v1 (maybe --json later)\n- Thin command: calls existing internal APIs (doltserver health, bd stats, ps, file stat)\n- Use the same terminal formatting as gt status (colors, bullets)\n\n## Anti-patterns to avoid\n\n- Do NOT over-engineer this. No config files, no historical tracking, no database storage.\n- Keep it under 200 lines of Go.\n- Shell out to existing tools where convenient (ps, git log, bd stats) rather than reimplementing their logic.", "status": "closed", "priority": 1, "issue_type": "feature", "assignee": "gastown/polecats/furiosa", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-27T07:57:11Z", "created_by": "mayor", "updated_at": "2026-02-27T08:26:50Z", "closed_at": "2026-02-27T08:26:50Z", "close_reason": "Merged to main 462e5269, gt vitals working", "dependencies": [{"issue_id": "gt-fubw", "depends_on_id": "gt-wisp-i4is7d", "type": "blocks", "created_at": "2026-02-27T00:00:06Z", "created_by": "mayor", "metadata": "{}"}], "dependency_count": 1, "dependent_count": 0, "comment_count": 0}
{"id": "gt-s12h", "title": "Pre-existing test failure in internal/cmd package", "description": "The internal/cmd test suite fails on main (commit 122eac39). Output shows FAIL with various sling/hook test output. Detected during refinery merge patrol for gt-loah. This is a pre-existing issue, not caused by any polecat branch.", "notes": "Investigation: Tests in internal/cmd pass on current main (commit f19d2eab). The failure was at commit 122eac39. Six commits have landed in internal/cmd/ since then, including refactor(witness), feat(refinery), feat(done), fix(done), feat(vitals). One or more of these fixed the pre-existing test failure. No action needed — issue resolved upstream.", "status": "closed", "priority": 1, "issue_type": "bug", "assignee": "gastown/polecats/nux", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-27T07:50:07Z", "created_by": "gastown/refinery", "updated_at": "2026-02-27T21:36:22Z", "closed_at": "2026-02-27T21:29:58Z", "close_reason": "Completed with no code changes (already fixed or pushed directly to main)", "dependencies": [{"issue_id": "gt-s12h", "depends_on_id": "gt-wisp-2eyv", "type": "blocks", "created_at": "2026-02-27T13:27:06Z", "created_by": "mayor", "metadata": "{}"}], "dependency_count": 1, "dependent_count": 0, "comment_count": 0}
{"id": "gt-j9tl", "title": "Pre-existing: mol-idea-to-plan.formula.toml missing review_id in [vars]", "description": "TestAllEmbeddedFormulas_VariableValidation fails on main: mol-idea-to-plan.formula.toml has undefined template variable review_id. Needs default='' added to [vars] section. Detected during merge of gt-iq8w.", "status": "closed", "priority": 1, "issue_type": "bug", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-27T07:10:34Z", "created_by": "gastown/refinery", "updated_at": "2026-02-27T07:19:17Z", "closed_at": "2026-02-27T07:19:17Z", "close_reason": "Duplicate of gt-x0z9, fixed: added review_id to [vars]", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-pr-sheriff", "title": "PR Sheriff: triage open PRs", "description": "Run the PR sheriff workflow to triage open PRs into easy-wins (auto-merge eligible) and crew assignments. Use the /pr-sheriff skill.", "notes": "## Sheriff Run 2026-02-27\n\n**Easy-wins merged**: 2\n- PR #2093 (sfncore): fix(sling) remove dependency bonds — squash merged\n- PR #2074 (olpie101): refactor consolidate FindMRForBranch — squash merged\n\n**Assigned to crew**: 3\n- PR #2092 → tom: custom git remote helper schemes (security-adjacent)\n- PR #2081 → george: bridge Dolt PID (large, sling context change)\n- PR #2018 → jack: --upstream-url support (new feature foundation)\n\n**Left for human**: 1\n- PR #2068 (pae23): telemetry (+1735 lines, 26 files, architectural)\n\n**Skipped**: 5 (4 drafts + #2008 no new activity)", "status": "hooked", "priority": 1, "issue_type": "task", "assignee": "gastown/crew/max", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-27T07:05:12Z", "created_by": "gastown/crew/max", "updated_at": "2026-02-27T07:21:42Z", "labels": ["pinned"], "pinned": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 3}
{"id": "gt-ydds", "title": "Reaper Dog: auto-close stale issues > 30 days", "description": "Add auto-close step to mol-dog-reaper formula and wisp_reaper.go.\n\n**New step after purge, before report:** 'auto-close'\n1. For each production database, find issues open > 30 days with no status change\n2. Close them with reason 'stale:auto-closed by reaper'\n3. Exclude: epics, P0/P1 issues, issues with active dependencies (blockers or blocked-by open issues)\n4. Log each closure: issue ID, title, age, database\n\n**Formula change:** Add [[steps]] id='auto-close' needs=['purge'] to mol-dog-reaper.formula.toml\n\n**Go change:** Add autoCloseStaleIssues() to wisp_reaper.go that:\n- Queries issues WHERE status='open' AND updated_at < NOW() - INTERVAL 30d\n- Filters out epics, high-priority, and dependency-linked issues\n- Calls bd close with --reason for each candidate\n- Reports count in reaper summary\n\nThis is Phase E from the war room.", "notes": "Implemented: Added auto-close step to reaper dog formula and enhanced autoCloseStaleIssuesInDB to exclude epics, exclude dependency-linked issues, and log each closure with ID/title/age/database. Fallback path for databases without dependencies table.", "status": "closed", "priority": 1, "issue_type": "task", "assignee": "gastown/polecats/nux", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-27T06:59:57Z", "created_by": "mayor", "updated_at": "2026-02-27T07:41:10Z", "closed_at": "2026-02-27T07:39:50Z", "close_reason": "Completed with no code changes (already fixed or pushed directly to main)", "dependencies": [{"issue_id": "gt-ydds", "depends_on_id": "gt-wisp-74rvvy", "type": "blocks", "created_at": "2026-02-26T23:33:17Z", "created_by": "mayor", "metadata": "{}"}, {"issue_id": "gt-ydds", "depends_on_id": "gt-wisp-8ksta4", "type": "blocks", "created_at": "2026-02-26T23:02:47Z", "created_by": "mayor", "metadata": "{}"}, {"issue_id": "gt-ydds", "depends_on_id": "gt-wisp-t15add", "type": "blocks", "created_at": "2026-02-26T23:09:11Z", "created_by": "mayor", "metadata": "{}"}], "dependency_count": 3, "dependent_count": 0, "comment_count": 0}
{"id": "gt-8xgm", "title": "Janitor Dog: test server cleanup formula", "description": "Create mol-dog-janitor.formula.toml following the EXACT pattern of the other dog formulas (mol-dog-doctor, mol-dog-reaper, mol-dog-backup, mol-dog-jsonl).\n\n## What this means\n\nA TOML formula file with declarative steps. The steps describe WHAT to do in natural language with example CLI commands. An LLM interprets and executes them. You do NOT write 500 lines of Go with raw SQL connections and TCP sockets.\n\n## The formula: mol-dog-janitor.formula.toml\n\nSteps:\n1. **scan**: Run gt dolt status or SHOW DATABASES on test server (port 3308) to identify orphan test DBs (testdb_*, beads_t_*, beads_pt_*, doctest_*)\n2. **clean**: Use gt dolt cleanup or DROP DATABASE for each orphan on test server. Prune branches older than 1h.\n3. **verify**: Read-only check that production (3307) has ZERO test databases. If any found, escalate.\n4. **report**: Send DOG_DONE to Deacon with cleanup counts.\n\n## Go integration (MINIMAL)\n\n- Add JanitorDogConfig to types.go (just Enabled + Interval)\n- Register ticker in daemon.go (same pattern as other dogs)\n- The ticker calls pourDogMolecule to create a wisp from the formula\n- That is ALL the Go code. No raw SQL. No TCP connections. No config accessors. The formula describes the work. The molecule runner does it.\n\n## Safety constraint\n\nNEVER touch production (3307) except read-only SHOW DATABASES verification. All mutations target test server (3308) only.\n\n## Anti-patterns to avoid\n\n- Do NOT write a standalone Go file with raw database/sql connections\n- Do NOT create manual TCP health checks\n- Do NOT duplicate config accessor boilerplate\n- Do NOT hardcode SQL queries in Go — put them in the formula step descriptions\n- Look at mol-dog-doctor.formula.toml as the closest reference", "status": "closed", "priority": 1, "issue_type": "task", "assignee": "gastown/polecats/nux", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-27T06:59:51Z", "created_by": "mayor", "updated_at": "2026-02-27T08:07:21Z", "closed_at": "2026-02-27T08:07:21Z", "close_reason": "Implemented as formula-only: 35-line Go (config+ticker+pourDogMolecule) + declarative TOML. Shipped 739a36b7.", "dependencies": [{"issue_id": "gt-8xgm", "depends_on_id": "gt-wisp-63hxb3", "type": "blocks", "created_at": "2026-02-26T23:48:29Z", "created_by": "mayor", "metadata": "{}"}, {"issue_id": "gt-8xgm", "depends_on_id": "gt-wisp-c12h6g", "type": "blocks", "created_at": "2026-02-26T23:02:20Z", "created_by": "mayor", "metadata": "{}"}, {"issue_id": "gt-8xgm", "depends_on_id": "gt-wisp-fzuswr", "type": "blocks", "created_at": "2026-02-26T23:33:40Z", "created_by": "mayor", "metadata": "{}"}, {"issue_id": "gt-8xgm", "depends_on_id": "gt-wisp-q3c6ql", "type": "blocks", "created_at": "2026-02-26T23:08:52Z", "created_by": "mayor", "metadata": "{}"}], "dependency_count": 4, "dependent_count": 0, "comment_count": 0}
{"id": "gt-ntf7", "title": "JSONL Dog: spike detection and pollution firewall", "description": "Add spike detection to mol-dog-jsonl formula and jsonl_git_backup.go.\n\n**New step between export and push:** 'verify'\n1. Compare current export count to previous commit count per database\n2. If delta > 20% either direction, HALT and escalate (don't commit)\n3. Reject issues matching test patterns (title contains 'Test Issue', IDs like bd-1, bd-abc12)\n4. Log anomalies: sudden jumps = pollution, sudden drops = data loss\n\n**Formula change:** Add [[steps]] id='verify' between export and push in mol-dog-jsonl.formula.toml\n\n**Go change:** Add verifyExportCounts() to jsonl_git_backup.go that:\n- Reads previous commit's line counts (git show HEAD:<file> | wc -l)\n- Compares to current export counts\n- Returns error if delta exceeds threshold (configurable, default 20%)\n- Skips verification on first export (no baseline)\n\nThis is Phase D from the war room: JSONL Pollution Firewall.", "notes": "Implemented spike detection and pollution firewall for JSONL Dog:\n- Added testPollutionPatterns (5 regex patterns) to detect test data in exports\n- applyPollutionFilter() reads each db's issues.jsonl, removes test records, rewrites file\n- verifyExportCounts() compares current line counts vs previous commit via git show HEAD:<file>\n- Halts export and escalates if delta > threshold (configurable, default 20%)\n- Skips verification on first export (no baseline)\n- Added SpikeThreshold config field to JsonlGitBackupConfig\n- Added verify step to mol-dog-jsonl.formula.toml between export and push\n- 13 new tests covering: isTestPollution, filterTestPollution, spikeThreshold, formatSpikeReport, verifyExportCounts (first export, within threshold, exceeds threshold, drop), countFileLines, parseLineCount\n- All existing tests continue to pass", "status": "closed", "priority": 1, "issue_type": "task", "assignee": "gastown/polecats/toast", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-27T06:59:43Z", "created_by": "mayor", "updated_at": "2026-02-27T07:32:35Z", "closed_at": "2026-02-27T07:30:40Z", "close_reason": "Merged to main", "dependencies": [{"issue_id": "gt-ntf7", "depends_on_id": "gt-wisp-oxhigg", "type": "blocks", "created_at": "2026-02-26T23:01:49Z", "created_by": "mayor", "metadata": "{}"}], "dependency_count": 1, "dependent_count": 0, "comment_count": 0}
{"id": "gt-iq8w", "title": "Doctor Dog: phantom + stale DB detection as formula", "description": "Move two checks from bd doctor into Doctor Dog as molecule formulas (not hardwired Go):\n\n1. **Phantom databases** — bd doctor's checkPhantomDatabases() detects naming bugs (GH#2051) that can crash INFORMATION_SCHEMA. Should be continuous monitoring, not just on-demand.\n\n2. **Stale/test databases** — bd doctor --server's checkStaleDatabases() finds testdb_*, beads_pt* etc. Dog already kills zombie processes; detecting zombie databases is the same domain.\n\nImplementation: Create formula files (mol-dog-phantom-db.formula.toml, mol-dog-stale-db.formula.toml) that run as Dog plugins. Use the shared dog_molecule.go helper from gt-yd38. Each formula: query SHOW DATABASES, filter for phantoms/test patterns, escalate if found.\n\nKey constraint: formulas, NOT hardwired Go. Dogs follow molecules (gt-oeol).", "notes": "Implemented: Created mol-dog-phantom-db.formula.toml and mol-dog-stale-db.formula.toml in internal/formula/formulas/. Both follow the Dog formula pattern (scan/action/report steps, template variables, squash config, Deacon reporting). Phantom DB formula detects corrupted dirs with missing noms/manifest and quarantines them. Stale DB formula detects orphaned test databases (testdb_*, beads_t*, etc.) and cleans up or escalates if too many. Build passes, all formula tests pass.", "status": "closed", "priority": 1, "issue_type": "task", "assignee": "gastown/polecats/capable", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-27T06:55:27Z", "created_by": "mayor", "updated_at": "2026-02-27T07:30:40Z", "closed_at": "2026-02-27T07:30:40Z", "close_reason": "Merged to main", "dependencies": [{"issue_id": "gt-iq8w", "depends_on_id": "gt-wisp-1wwbnc", "type": "blocks", "created_at": "2026-02-26T23:01:30Z", "created_by": "mayor", "metadata": "{}"}, {"issue_id": "gt-iq8w", "depends_on_id": "gt-yd38", "type": "blocks", "created_at": "2026-02-26T22:55:30Z", "created_by": "mayor", "metadata": "{}"}], "dependency_count": 2, "dependent_count": 0, "comment_count": 0}
{"id": "gt-oei1", "title": "Witness patrol swim lane: prohibit closing foreign wisps", "description": "The witness patrol agent is closing wisps that belong to active polecats. It sees root-only formula wisps, assumes they are orphaned from prior patrol cycles, and batch-closes them — killing active polecat work molecules.\n\nThis is a swim lane violation: wisp lifecycle management is the reaper Dog's job, not the witness's. The witness should only close wisps it created (its own patrol wisps).\n\nFix: Update mol-witness-patrol.formula.toml to add explicit prohibition:\n- Do NOT close wisps you didn't create\n- Wisp lifecycle (close, delete, gc) is the reaper Dog's responsibility\n- If you see wisps that look orphaned, report them — don't close them\n\nAlso update witness priming template to reinforce this boundary.\n\nEvidence: bd-wisp-bvc4xp and bd-wisp-f4xh8n were closed with reason 'Orphaned wisps from previous patrol cycles' seconds after being created by gt sling for active polecats obsidian and quartz.", "notes": "Implemented swim lane prohibition for witness patrol closing foreign wisps. Updated 3 files: mol-witness-patrol.formula.toml (v6→v7 with swim lane rule in description, inbox-check step, and survey-workers step), witness.md.tmpl (new Swim Lane Rule section + never-do list), witness-CLAUDE.md (new Swim Lane Rule section + Do NOT list). The prohibition instructs witnesses to only close wisps they created, and to report orphaned foreign wisps to Deacon rather than closing them.", "status": "closed", "priority": 1, "issue_type": "bug", "assignee": "gastown/polecats/furiosa", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-27T05:56:22Z", "created_by": "mayor", "updated_at": "2026-02-27T06:06:52Z", "closed_at": "2026-02-27T06:00:00Z", "close_reason": "Closed", "dependencies": [{"issue_id": "gt-oei1", "depends_on_id": "gt-wisp-9m0hnj", "type": "blocks", "created_at": "2026-02-26T21:56:32Z", "created_by": "mayor", "metadata": "{}"}], "dependency_count": 1, "dependent_count": 0, "comment_count": 0}
{"id": "gt-8v0f", "title": "Code review: root-only wisps for formula-based work (b8f79dc8)", "description": "Review commit b8f79dc8 in gastown repo. Check: correct --root-only flag usage, formula attachment logic, beadFieldUpdates correctness, no regressions in sling dispatch flow.", "design": "## Code Review: b8f79dc8 — root-only wisps for formula-based work\n\n**Reviewer:** furiosa | **Verdict: LGTM — no issues found**\n\n### 1. --root-only flag usage ✅\n- Applied in both formula instantiation paths: `sling_formula.go:152` (standalone) and `sling_helpers.go:InstantiateFormulaOnBead()` (formula-on-bead)\n- Both add `--root-only` before `--json` in `bd mol wisp` args\n- Ensures all paths create only root wisp, no child step wisps\n\n### 2. Formula attachment logic ✅\n- `AttachedFormula` field added to `beads.AttachmentFields` struct\n- Parsing handles 3 variants (attached_formula/attached-formula/attachedformula) — consistent with existing patterns\n- Formatting, SetAttachmentFields known-fields map both updated correctly\n\n### 3. beadFieldUpdates correctness ✅\n- **sling.go:872**: Sets both AttachedMolecule + AttachedFormula — correct (hook bead has separate wisp)\n- **sling_dispatch.go:308**: Same pattern via params.FormulaName — correct\n- **sling_formula.go:196-199**: Sets ONLY AttachedFormula, omits AttachedMolecule — correct and well-documented (wisp IS the root, self-reference meaningless)\n- `storeFieldsInBead()`: empty-check guard pattern matches existing fields\n\n### 4. No regressions in sling dispatch flow ✅\n- Changes purely additive — no fields removed/reordered\n- Legacy fallback preserved in prime output for beads without AttachedFormula\n\n### 5. Prime output changes ✅\n- `outputAutonomousDirective`: molecule → formula language update\n- `outputMoleculeWorkflow`: branches on AttachedFormula → showFormulaStepsFull() (new), else legacy showMoleculeExecutionPrompt()\n- `outputAttachmentStatus`: same branching pattern\n- `showPatrolFormulaSteps` → `showFormulaSteps`: clean generalization with label param\n- New `showFormulaStepsFull`: renders full step descriptions for work formulas\n\n### 6. Dead code removal ✅\n- `parseMoleculeMetadata()`, `showMoleculeProgress()`: removed (only used for child-step tracking)\n- `outputMoleculeContext()` body gutted for polecats (stub remains — patrol roles dispatch to own functions)\n- `beads` import correctly removed from prime_molecule.go\n- Build verified clean: `go build ./...` passes\n\n### 7. Companion docs commit (470b653e) ✅\n- All role templates (polecat, deacon, witness, refinery) updated\n- Concepts docs and reference updated to match new architecture\n\n### Build verification\n`go build ./...` passes with no errors or warnings.\n\n### Summary\nWell-structured change. The two-path design (formula-on-bead vs standalone-formula) correctly handles AttachedFormula in each context. Legacy fallback ensures backward compat for pre-existing beads. Dead code removal is safe — no orphaned functions or imports. Impact claim of ~15x wisp reduction is architecturally sound (10 child wisps eliminated per polecat sling).", "notes": "Review complete. LGTM — no issues found. All 4 review areas checked: --root-only flag usage correct in both paths, formula attachment logic properly threaded through all layers, beadFieldUpdates correct with intentional omission in sling_formula path, no regressions in dispatch flow. Build passes. Companion docs commit also reviewed.", "status": "closed", "priority": 1, "issue_type": "task", "assignee": "gastown/polecats/furiosa", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-27T05:48:33Z", "created_by": "mayor", "updated_at": "2026-02-27T05:52:32Z", "closed_at": "2026-02-27T05:51:45Z", "close_reason": "Completed with no code changes (already fixed or pushed directly to main)", "dependencies": [{"issue_id": "gt-8v0f", "depends_on_id": "gt-wisp-seb80d", "type": "blocks", "created_at": "2026-02-26T21:48:46Z", "created_by": "mayor", "metadata": "{}"}], "dependency_count": 1, "dependent_count": 0, "comment_count": 0}
{"id": "gt-x0z9", "title": "mol-idea-to-plan.formula.toml has undefined template variable review_id", "description": "TestAllEmbeddedFormulas_VariableValidation fails: mol-idea-to-plan.formula.toml uses review_id template variable but does not define it in [vars] section. Add review_id with default='' to the formula's vars.", "status": "closed", "priority": 1, "issue_type": "bug", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-27T03:00:50Z", "created_by": "gastown/refinery", "updated_at": "2026-02-27T07:19:16Z", "closed_at": "2026-02-27T07:19:16Z", "close_reason": "Fixed: added review_id with default='' to [vars] section of mol-idea-to-plan.formula.toml", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-loah", "title": "Refactor dolt.go doctor to use molecules (Option B throttling)", "description": "Wrap checkHealthLocked() in DoltServerManager with molecule lifecycle. Use Option B throttling: only pour a mol-dog-doctor molecule when anomaly detected (check fails or triggers warning). Silent when healthy — molecules for events, not heartbeats. Health check runs every 30s; without throttling that's ~2880 wisps/day.", "notes": "Implementation complete. Created dog_molecule.go helper with pourDogMolecule() for async wisp creation. Refactored checkHealthLocked() sub-checks to return warning strings. Added Option B throttling with 5-minute cooldown. All tests pass. Note: dependency gt-yd38 (shared dog_molecule.go helper) was not landed; created minimal helper inline. When gt-yd38 lands, this helper can be replaced by the shared one.", "status": "closed", "priority": 1, "issue_type": "task", "assignee": "gastown/polecats/furiosa", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-27T02:05:16Z", "created_by": "mayor", "updated_at": "2026-02-27T07:44:21Z", "closed_at": "2026-02-27T07:43:41Z", "close_reason": "Closed", "dependencies": [{"issue_id": "gt-loah", "depends_on_id": "gt-oeol", "type": "parent-child", "created_at": "2026-02-26T18:05:43Z", "created_by": "mayor", "metadata": "{}"}, {"issue_id": "gt-loah", "depends_on_id": "gt-wisp-3bokmg", "type": "blocks", "created_at": "2026-02-26T23:00:53Z", "created_by": "mayor", "metadata": "{}"}, {"issue_id": "gt-loah", "depends_on_id": "gt-wisp-g68jj3", "type": "blocks", "created_at": "2026-02-26T23:32:57Z", "created_by": "mayor", "metadata": "{}"}, {"issue_id": "gt-loah", "depends_on_id": "gt-yd38", "type": "blocks", "created_at": "2026-02-26T18:05:39Z", "created_by": "mayor", "metadata": "{}"}], "dependency_count": 3, "dependent_count": 0, "comment_count": 0, "parent": "gt-oeol"}
{"id": "gt-83r4", "title": "Refactor jsonl_git_backup.go to use molecules", "description": "Wrap syncJsonlGitBackup() with molecule lifecycle: pour mol-dog-jsonl at start, close export/push/report steps as work completes. Graceful degradation if bd unavailable.", "notes": "Implemented: Created shared dog_molecule.go helper (pourDogMolecule, CloseStep, FailStep, Close) with nil-safe graceful degradation. Refactored syncJsonlGitBackup() to pour mol-dog-jsonl at start and close export/push/report steps as phases complete. Note: gt-yd38 (shared helper dependency) was marked closed but the file was not on main — created the helper in this PR instead.", "status": "closed", "priority": 1, "issue_type": "task", "assignee": "gastown/polecats/slit", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-27T02:05:14Z", "created_by": "mayor", "updated_at": "2026-02-27T07:32:24Z", "closed_at": "2026-02-27T07:30:40Z", "close_reason": "Merged to main", "dependencies": [{"issue_id": "gt-83r4", "depends_on_id": "gt-oeol", "type": "parent-child", "created_at": "2026-02-26T18:05:43Z", "created_by": "mayor", "metadata": "{}"}, {"issue_id": "gt-83r4", "depends_on_id": "gt-wisp-gdixv2", "type": "blocks", "created_at": "2026-02-26T23:00:37Z", "created_by": "mayor", "metadata": "{}"}, {"issue_id": "gt-83r4", "depends_on_id": "gt-yd38", "type": "blocks", "created_at": "2026-02-26T18:05:39Z", "created_by": "mayor", "metadata": "{}"}], "dependency_count": 2, "dependent_count": 0, "comment_count": 0, "parent": "gt-oeol"}
{"id": "gt-vgym", "title": "Refactor dolt_backup.go to use molecules", "description": "Wrap syncDoltBackups() with molecule lifecycle: pour mol-dog-backup at start, close sync/offsite/report steps as work completes. Graceful degradation if bd unavailable.", "notes": "Implemented: Created dog_molecule.go shared helper (pourDogMolecule, closeStep, failStep, close). Refactored syncDoltBackups() to create mol-dog-backup wisp at start, track sync/offsite/report steps, close wisp on exit. syncOffsiteBackup() now returns error. All gracefully degraded if bd unavailable.", "status": "closed", "priority": 1, "issue_type": "task", "assignee": "gastown/polecats/dementus", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-27T02:05:13Z", "created_by": "mayor", "updated_at": "2026-02-27T07:32:30Z", "closed_at": "2026-02-27T07:30:40Z", "close_reason": "Merged to main", "dependencies": [{"issue_id": "gt-vgym", "depends_on_id": "gt-oeol", "type": "parent-child", "created_at": "2026-02-26T18:05:43Z", "created_by": "mayor", "metadata": "{}"}, {"issue_id": "gt-vgym", "depends_on_id": "gt-wisp-f317y8", "type": "blocks", "created_at": "2026-02-26T23:01:12Z", "created_by": "mayor", "metadata": "{}"}, {"issue_id": "gt-vgym", "depends_on_id": "gt-yd38", "type": "blocks", "created_at": "2026-02-26T18:05:38Z", "created_by": "mayor", "metadata": "{}"}], "dependency_count": 2, "dependent_count": 0, "comment_count": 0, "parent": "gt-oeol"}
{"id": "gt-nzkx", "title": "Refactor wisp_reaper.go to use molecules + add purge", "description": "Wrap reapWisps() with molecule lifecycle: pour mol-dog-reaper at start, close scan/reap/purge/report steps as work completes. Add new purgeClosedWisps() that DELETEs closed wisps older than 7 days. Also purge related tables: wisp_dependencies, wisp_events, wisp_labels, wisp_comments. This is the squash/burn policy that prevents unbounded accumulation (~4500 closed wisps across 3 DBs currently).", "notes": "Implemented: Created dog_molecule.go helper (pourDogMolecule/closeStep/failStep with graceful degradation). Refactored reapWisps() to use mol-dog-reaper lifecycle with scan/reap/purge/report steps. Renamed deleteClosedWispsInDB to purgeClosedWispsInDB. Purge already existed — separated it into its own loop iteration matching the formula structure. All tests pass.", "status": "closed", "priority": 1, "issue_type": "task", "assignee": "gastown/polecats/nux", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-27T02:05:12Z", "created_by": "mayor", "updated_at": "2026-02-27T07:32:19Z", "closed_at": "2026-02-27T07:30:39Z", "close_reason": "Merged to main", "dependencies": [{"issue_id": "gt-nzkx", "depends_on_id": "gt-oeol", "type": "parent-child", "created_at": "2026-02-26T18:05:43Z", "created_by": "mayor", "metadata": "{}"}, {"issue_id": "gt-nzkx", "depends_on_id": "gt-wisp-dqn9iq", "type": "blocks", "created_at": "2026-02-26T23:00:23Z", "created_by": "mayor", "metadata": "{}"}, {"issue_id": "gt-nzkx", "depends_on_id": "gt-yd38", "type": "blocks", "created_at": "2026-02-26T18:05:38Z", "created_by": "mayor", "metadata": "{}"}], "dependency_count": 2, "dependent_count": 0, "comment_count": 0, "parent": "gt-oeol"}
{"id": "gt-yd38", "title": "Create shared dog_molecule.go helper", "description": "New file: gastown/mayor/rig/internal/daemon/dog_molecule.go. Provides pourDogMolecule(formulaName, vars) and closeStep/failStep methods. Shells out to bd from d.config.TownRoot (HQ database). Graceful degradation — if bd fails, dog still does its work. Same pattern as existing gt escalate / dolt sql / git callouts.", "notes": "Implemented: Created internal/daemon/dog_molecule.go with pourDogMolecule(formulaName, vars), closeStep(stepName), failStep(stepName, reason), and close() methods. Uses root-only wisps via bd mol wisp --root-only --json, with step progress tracked as notes on the root wisp. Graceful degradation: all methods are nil-safe no-ops when bd is unavailable. Tests cover JSON parsing (all 3 ID field variants) and nil receiver safety.", "status": "closed", "priority": 1, "issue_type": "task", "assignee": "gastown/polecats/furiosa", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-27T02:05:09Z", "created_by": "mayor", "updated_at": "2026-02-27T07:32:14Z", "closed_at": "2026-02-27T07:30:39Z", "close_reason": "Merged to main", "dependencies": [{"issue_id": "gt-yd38", "depends_on_id": "gt-75uw", "type": "blocks", "created_at": "2026-02-26T18:05:34Z", "created_by": "mayor", "metadata": "{}"}, {"issue_id": "gt-yd38", "depends_on_id": "gt-oeol", "type": "parent-child", "created_at": "2026-02-26T18:05:43Z", "created_by": "mayor", "metadata": "{}"}, {"issue_id": "gt-yd38", "depends_on_id": "gt-wisp-75v802", "type": "blocks", "created_at": "2026-02-26T22:56:04Z", "created_by": "mayor", "metadata": "{}"}], "dependency_count": 2, "dependent_count": 5, "comment_count": 0, "parent": "gt-oeol"}
{"id": "gt-75uw", "title": "Create dog formula files", "description": "Create 4 formula TOML files in ~/gt/.beads/formulas/: mol-dog-reaper (scan/reap/purge/report), mol-dog-backup (sync/offsite/report), mol-dog-jsonl (export/push/report), mol-dog-doctor (probe/inspect/report). These define the molecule steps each dog pours.", "notes": "Implemented: Created 4 dog formula TOML files in internal/formula/formulas/: mol-dog-reaper (scan/reap/purge/report), mol-dog-backup (sync/offsite/report), mol-dog-jsonl (export/push/report), mol-dog-doctor (probe/inspect/report). Each follows the existing dog formula pattern with squash config, step dependencies, and computed vars. All pass embedded formula variable validation tests.", "status": "closed", "priority": 1, "issue_type": "task", "assignee": "gastown/polecats/furiosa", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-27T02:05:07Z", "created_by": "mayor", "updated_at": "2026-02-27T02:53:24Z", "closed_at": "2026-02-27T02:50:25Z", "close_reason": "Closed", "dependencies": [{"issue_id": "gt-75uw", "depends_on_id": "gt-oeol", "type": "parent-child", "created_at": "2026-02-26T18:05:43Z", "created_by": "mayor", "metadata": "{}"}, {"issue_id": "gt-75uw", "depends_on_id": "gt-wisp-efkvec", "type": "blocks", "created_at": "2026-02-26T18:43:48Z", "created_by": "mayor", "metadata": "{}"}], "dependency_count": 1, "dependent_count": 1, "comment_count": 0, "parent": "gt-oeol"}
{"id": "gt-oeol", "title": "Dogs Follow Molecules — epic", "description": "Dogs (Reaper, Backup, JSONL, Doctor) bypass the MEOW stack — no molecules, no wisps, no activity feed. Every other patrol pours a molecule wisp each cycle. Dogs need to do the same. Also need squash/burn policy: purge closed wisps >7 days old.", "status": "closed", "priority": 1, "issue_type": "epic", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-27T02:05:02Z", "created_by": "mayor", "updated_at": "2026-02-28T00:28:47Z", "closed_at": "2026-02-28T00:28:47Z", "close_reason": "All 6 child tasks completed", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-e26g", "title": "gt handoff leaks molecule steps as open wisps", "description": "When gt handoff cycles a session, unclosed molecule steps (wisps) stay open forever. Each patrol cycle pours a molecule, handoff abandons unfinished steps. This caused 746 open wisps in gastown, 105 in HQ, 77 in beads. Fix: gt handoff should burn (close) remaining molecule steps before cycling. Also consider: gt prime on new session should detect and close stale wisps from previous session. Discovered during hq-9c6 wisp lifecycle audit.", "status": "closed", "priority": 1, "issue_type": "bug", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-27T01:35:09Z", "created_by": "mayor", "updated_at": "2026-02-27T04:11:22Z", "closed_at": "2026-02-27T04:11:22Z", "close_reason": "Shipped 9b15a2a9: cleanupMoleculeOnHandoff() runs in all 3 handoff paths (normal, auto, cycle). Closes descendant steps, detaches molecule with audit trail, force-closes root. Same pattern as gt done and gt mol squash.", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-ah2k", "title": "Polecats lose findings on session death: checkpoint never written", "description": "Polecats persist work through git commits, but report-only tasks (audits, reviews, research) produce no commits. Findings exist only in session context and die with the session.\n\nRoot cause: checkpoint.go package exists but is dead code — nobody calls checkpoint.Write(). The gt checkpoint write CLI command exists but is never called automatically. Polecat CLAUDE.md says 'handoff when context filling' but that's agent-initiated and doesn't fire on SIGKILL/context exhaustion.\n\nConcrete failure: polecat furiosa completed a firewall code review (gt-3ntl), marked 5 molecule steps closed, but its actual findings were purely in Claude's context. Session ended, findings gone.\n\nFix plan:\n1. Update polecat CLAUDE.md to instruct: persist findings to bead (bd update <id> --design or --notes) before closing each step\n2. Wire bd close to auto-write a checkpoint (checkpoint.Capture + Write after successful close)\n3. Add a 'persist findings' instruction to the mol-polecat-work implement step for report-only tasks\n4. Consider a Claude Code hook (if feasible) to checkpoint on session end", "status": "closed", "priority": 1, "issue_type": "bug", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-27T01:23:44Z", "created_by": "mayor", "updated_at": "2026-02-27T01:27:18Z", "closed_at": "2026-02-27T01:27:18Z", "close_reason": "Shipped 37521081: formula v6 + template updates for findings persistence", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-3ntl", "title": "Code review: test isolation firewall (is it actually working?)", "description": "Audit all CREATE DATABASE calls, all port 3307 references in test code, all BEADS_TEST_MODE/BEADS_DOLT_PORT interactions. Verify every test that touches Dolt uses the test server path. Check for bypass paths around shipped firewalls (store.go isTestDatabaseName, testdoltserver.go, testdoltbranch.go). Previous firewalls were declared shipped but phantom DBs kept appearing. Trust nothing. Report findings only -- do not fix.", "status": "closed", "priority": 1, "issue_type": "task", "assignee": "gastown/polecats/furiosa", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-27T01:10:28Z", "created_by": "mayor", "updated_at": "2026-02-27T01:27:19Z", "closed_at": "2026-02-27T01:27:19Z", "close_reason": "Polecat lost findings on session death. Root cause fixed in gt-ah2k. Will re-run audit separately.", "dependencies": [{"issue_id": "gt-3ntl", "depends_on_id": "gt-wisp-3ohyri", "type": "blocks", "created_at": "2026-02-26T17:25:25Z", "created_by": "mayor", "metadata": "{}"}, {"issue_id": "gt-3ntl", "depends_on_id": "gt-wisp-50w5qx", "type": "blocks", "created_at": "2026-02-26T17:10:51Z", "created_by": "mayor", "metadata": "{}"}, {"issue_id": "gt-3ntl", "depends_on_id": "gt-wisp-oqnzzh", "type": "blocks", "created_at": "2026-02-26T17:23:57Z", "created_by": "mayor", "metadata": "{}"}, {"issue_id": "gt-3ntl", "depends_on_id": "gt-wisp-vq02z2", "type": "blocks", "created_at": "2026-02-26T17:19:56Z", "created_by": "mayor", "metadata": "{}"}, {"issue_id": "gt-3ntl", "depends_on_id": "gt-wisp-ya3w6m", "type": "blocks", "created_at": "2026-02-26T17:21:55Z", "created_by": "mayor", "metadata": "{}"}], "dependency_count": 5, "dependent_count": 0, "comment_count": 0}
{"id": "gt-43ltj", "title": "gt mol squash fails with 'no handoff bead found'", "description": "Both current and predecessor refinery sessions encounter this error when attempting to squash completed patrol wisps. Error: 'no handoff bead found for gastown/refinery'. gt binary is 1 commit behind (f1322869 vs 7c0de7bd). May need gt binary rebuild or a bug in the squash command.", "status": "closed", "priority": 1, "issue_type": "bug", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-26T05:17:11Z", "created_by": "gastown/refinery", "updated_at": "2026-02-27T07:26:33Z", "closed_at": "2026-02-27T07:26:33Z", "close_reason": "Fixed: extractRoleFromIdentity handles trailing slashes; re-pinned refinery handoff bead gt-j3cx", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-tvrwp", "title": "Ask Tim for server-side query timeout (he offered <24h turnaround)", "description": "Tim offered to add a server-side query timeout to Dolt in under 24 hours. Currently only read_timeout_millis exists (8hr default, connection-level). A per-query timeout would protect against runaway queries that hang the server. Reply to Tim and request it. Suggested default: 30s for normal queries, 5min for backup/migration.", "status": "closed", "priority": 1, "issue_type": "task", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-26T05:16:41Z", "created_by": "mayor", "updated_at": "2026-02-27T23:53:12Z", "closed_at": "2026-02-27T23:53:12Z", "close_reason": "Email sent to Tim 2026-02-27", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-nek89", "title": "P1: Dog patrol Dolt health monitoring", "description": "Doctor Dog: Dolt health monitoring Dog plugin for the Deacon. Runs every 5 minutes. Checks: (1) TCP connect to port 3307 with 5s timeout. (2) SELECT 1 latency — alert if > 2s. (3) SHOW DATABASES count — alert if > 10 (orphan accumulation). (4) Check ~/.dolt-backup/ mtime — alert if > 30min stale. (5) Check ~/.dolt-data/ disk usage — alert if > 1GB. Actions: restart server if unreachable, trigger Janitor if orphans > 20, trigger Backup if stale > 1hr, escalate to Mayor if latency > 5s. Log all checks to activity feed.", "notes": "Implemented: Added automated response actions to the existing doctor_dog health monitor. The dog already had all 5 health checks (TCP, latency, databases, backup age, disk usage). Added doctorDogRespond() which evaluates the report and takes 4 automated actions: (1) restart server if TCP unreachable, (2) escalate to Mayor if latency > 5s, (3) trigger janitor if database count > 20, (4) trigger backup if backup stale > 1hr. Each action has per-type 10-minute cooldowns to prevent storms. Actions skip when check results have errors. 5 new tests cover thresholds, cooldowns, healthy reports, boundary conditions, and error handling.", "status": "closed", "priority": 1, "issue_type": "feature", "assignee": "gastown/polecats/furiosa", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-26T02:39:02Z", "created_by": "mayor", "updated_at": "2026-02-27T23:28:56Z", "closed_at": "2026-02-27T23:19:33Z", "close_reason": "Closed", "dependencies": [{"issue_id": "gt-nek89", "depends_on_id": "gt-wisp-8btb", "type": "blocks", "created_at": "2026-02-27T15:04:27Z", "created_by": "mayor", "metadata": "{}"}], "dependency_count": 1, "dependent_count": 0, "comment_count": 0}
{"id": "gt-69dai", "title": "Pre-existing test failure: TestRunBdCmd_ReturnsStdoutOnNonZeroAndTimeout in internal/web", "status": "closed", "priority": 1, "issue_type": "bug", "assignee": "gastown/polecats/furiosa", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-26T00:59:22Z", "created_by": "gastown/polecats/furiosa", "updated_at": "2026-02-26T23:16:22Z", "closed_at": "2026-02-26T23:14:58Z", "close_reason": "Completed with no code changes (already fixed or pushed directly to main)", "dependencies": [{"issue_id": "gt-69dai", "depends_on_id": "gt-wisp-l4k6j", "type": "blocks", "created_at": "2026-02-26T15:13:23Z", "created_by": "mayor", "metadata": "{}"}], "dependency_count": 1, "dependent_count": 0, "comment_count": 0}
{"id": "gt-2ejqk", "title": "Convoy Lifecycle Robustness", "description": "Make convoys actively converge on completion instead of passively waiting.\n\n## Problem\nConvoys are passive trackers with a structural gap between \"work completes\" and \"convoy closes\". The completion loop depends solely on Deacon patrol polling - a single point of failure.\n\n## Solution\nEvent-driven convoy completion with redundant observers.\n\nSee: gastown/mayor/rig/docs/design/convoy-lifecycle.md\n\n## Deliverables\n1. `gt convoy close` command (desire path, escape hatch)\n2. Event-driven convoy check (daemon hook on issue close)\n3. Redundant observers (Witness/Refinery integration)\n4. Convoy owner field for targeted notifications\n\n## Success Criteria\n- Convoys auto-close within seconds of last issue closing\n- Manual close available for abandoned convoys\n- Multiple agents can trigger completion (not just Deacon)\n\n(Moved from hq-bj8fr)", "status": "in_progress", "priority": 1, "issue_type": "epic", "assignee": "gastown/witness", "created_at": "2026-01-21T01:39:27Z", "created_by": "mayor", "updated_at": "2026-01-21T05:30:07Z", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-gow8b", "title": "Design: Claude Code hooks registry and management", "description": "## Problem\n\nGas Town needs systematic management of Claude Code hooks across worktrees. Current state:\n- Hooks manually copied to each settings.json\n- No central registry of available hooks\n- No tooling to reconcile reality vs desired state\n- Shell script hooks (like Joe's) not integrated with gt tap\n\n## Critical Discovery: Claude Code Settings Model\n\n**Claude Code does NOT traverse parent directories.** It only looks in CWD.\n\n### Precedence (highest → lowest)\n1. Enterprise Managed Policy (managed-settings.json) - cannot override\n2. CLI flags\n3. .claude/settings.local.json (personal, gitignored)\n4. .claude/settings.json (project, committed)\n5. ~/.claude/settings.json (user global)\n6. Built-in defaults\n\n### Merging Behavior\n- Arrays (hooks): MERGE across all levels\n- Scalars: Override (higher precedence wins)\n\n### The Monorepo Problem\n```\n~/gt/                           ← No .claude/ here\n├── gastown/\n│   └── mayor/\n│       └── .claude/settings.json   ← Only found if CWD is here\n├── beads/\n│   └── .claude/settings.json       ← Only found if CWD is here\n```\n\nIf CWD is `gastown/mayor/rig` (below .claude), hooks WON'T be found.\n\n### Current Workaround\nSettings files at multiple levels, each worktree gets its own copy.\nThis works because agents start in their designated worktree root.\n\n## Design Requirements\n\n### 1. Hook Registry\nCentral definition of available hooks:\n```yaml\nhooks:\n  guards:\n    pr-workflow:\n      command: gt tap guard pr-workflow\n      matchers:\n        - Bash(gh pr create*)\n        - Bash(git checkout -b*)\n        - Bash(git switch -c*)\n      default: enabled\n      scope: [crew, polecats]\n    \n    force-push:\n      command: gt tap guard force-push\n      matchers: [Bash(*push*--force*)]\n      default: enabled\n      scope: [all]\n\n  audits:\n    git-push:\n      command: gt tap audit git-push\n      hook_type: PostToolUse\n      matchers: [Bash(git push*)]\n```\n\n### 2. Tooling\n- `gt crew add <name>` - sets up worktree WITH correct hooks\n- `gt doctor hooks` - reconcile reality vs registry\n- `gt tap list` - show available hooks\n- `gt tap enable/disable <hook>` - per-worktree control\n\n### 3. Private vs Public Hooks\n- settings.json (committed) - team-wide hooks\n- settings.local.json (gitignored) - personal overrides\n- How to handle \"disable this hook for me\"?\n\n### 4. Hook Ordering\nIf multiple hooks match same pattern, what order do they fire?\nClaude merges arrays - need to understand/control order.\n\n### 5. Shell Script Hooks\nJoe's hook is a shell script, not a gt command.\nOptions:\n- Keep both patterns (gt tap AND raw scripts)\n- Wrap scripts: `gt tap run <script-name>`\n- Registry includes both types\n\n### 6. Feature Request Tracking\nClaude Code #12962: parent directory traversal (like .gitignore)\nUntil that ships, we need the workaround.\n\n## Open Questions\n\n1. Where does the registry live? (gt config? dedicated file?)\n2. How to version/migrate hook configs when registry changes?\n3. Per-worktree disable vs global disable?\n4. Should gt tap commands be standalone or require registry?\n\n## Related\n- ~/gt/docs/HOOKS.md - current hook documentation\n- gt tap guard pr-workflow - first implemented hook\n- Claude Code hooks docs", "status": "closed", "priority": 1, "issue_type": "feature", "assignee": "gastown/polecats/nux", "owner": "steve.yegge@gmail.com", "created_at": "2026-01-19T19:37:29Z", "created_by": "beads/crew/emma", "updated_at": "2026-02-26T23:29:28Z", "closed_at": "2026-02-26T23:24:11Z", "close_reason": "Closed", "labels": ["design", "hooks", "infrastructure"], "dependencies": [{"issue_id": "gt-gow8b", "depends_on_id": "gt-wisp-whdbx", "type": "blocks", "created_at": "2026-02-26T15:13:46Z", "created_by": "mayor", "metadata": "{}"}], "dependency_count": 1, "dependent_count": 0, "comment_count": 1}
{"id": "gt-pbb5c", "title": "Claude Code orphan process prevention", "description": "Epic tracking all fixes for the Claude Code session orphaning issue where 50+ claude instances accumulated after a few hours, killing the machine.\n\nRoot cause: tmux kill-session sends SIGHUP which claude may catch/ignore, causing processes to survive and get reparented to init (PPID=1).\n\nChild issues:\n- gt-5r7zr: Explicit process kill before tmux kill-session (P1)\n- gt-460m3: Add gt orphans kill command (P1)\n- gt-emi5b: Unify spawn pattern to use NewSessionWithCommand (P2)\n- gt-430oy: Add PID tracking for spawned agents (P3)\n\nOriginal investigation: gt-wd3ce", "status": "in_progress", "priority": 1, "issue_type": "epic", "assignee": "gastown/witness", "created_at": "2026-01-13T02:10:46Z", "created_by": "gastown/crew/joe", "updated_at": "2026-01-21T05:30:09Z", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-myofa", "title": "Convoy Ownership: Caller-managed lifecycle with direct merge", "description": "## The Problem\n\nCurrent model assumes all work flows through full machinery:\n```\nPolecat → Branch → MR → Refinery → Merge → Witness → Cleanup\n```\n\nBut there are legitimate cases where this is overkill:\n- Internal tooling changes\n- Quick fixes where human is actively supervising\n- Development velocity when you trust the work\n- Batch operations where caller wants control\n\n## Current Implicit Ownership\n\nOwnership is fragmented and implicit:\n- **Witness** owns polecat lifecycle (spawn → work → cleanup)\n- **Refinery** owns merge lifecycle (MR → review → merge)\n- **Deacon** owns patrol agent lifecycle\n- **Death Warrant system** owns termination authority\n\nThe caller (Mayor/human) has no direct ownership path. They dispatch and hope.\n\n## Proposed: Explicit Convoy Ownership\n\n```bash\n# Current (implicit witness/refinery ownership)\ngt convoy create \"warrants\" gt-9r08m gt-cd404\n\n# New: caller-owned convoy\ngt convoy create \"warrants\" gt-9r08m gt-cd404 --owned\n```\n\n**Owned convoy semantics:**\n| Aspect | Standard | Owned |\n|--------|----------|-------|\n| Monitoring | Witness | Caller polls `gt convoy status` |\n| Merge | Refinery (MR) | Direct push to main |\n| Cleanup | Witness/Death Warrants | Caller runs `gt convoy land` |\n| Escalation | Witness → Mayor | Inline (caller is present) |\n\n## The `gt convoy land` Pattern\n\nWhen an owned convoy completes:\n\n```bash\ngt convoy land <convoy-id>\n# - Verifies all items done/merged\n# - Cleans up polecat worktrees\n# - Closes convoy bead\n# - No witness/refinery/death-warrant involvement\n```\n\n## Merge Strategy Options\n\n```bash\n--merge=direct    # Push to main, no MR (trusted work)\n--merge=mr        # Create MR, wait for refinery (default)\n--merge=local     # Merge locally, push main (review in polecat)\n```\n\n## ZFC Perspective\n\nA convoy is a set of work items with shared lifecycle. The \"owner\" is the entity responsible for state transitions. Making ownership explicit enables flexibility.\n\n## Implementation Tasks\n\n1. Add --owned flag to gt convoy create\n2. Add --merge flag (direct/mr/local) to gt convoy create and gt sling\n3. Modify polecat workflow to respect merge strategy\n4. Implement gt convoy land for owned convoy cleanup\n5. Skip witness/refinery registration for owned convoys\n6. Add convoy status with richer progress output\n\n## Future: Synchronous Mode\n\n```bash\ngt convoy run \"quick-fix\" gt-xyz --sync\n# Blocks until done, progress inline, auto-cleanup\n```\n", "status": "in_progress", "priority": 1, "issue_type": "epic", "assignee": "gastown/witness", "created_at": "2026-01-08T04:37:24Z", "created_by": "mayor", "updated_at": "2026-01-21T05:30:12Z", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-rz3sw", "title": "Migrate Gas Town to label-based bead types", "description": "## Overview\n\nBeads is extracting Gas Town-specific types (agent, role, rig, convoy, slot) from its core. \nGas Town must migrate to use labels instead of dedicated types.\n\nSee beads epic: bd-i54l\n\n## Approach\n\n1. Add minimum beads version check\n2. Register custom types via `bd config set types.custom \"agent,role,rig,convoy,slot\"`\n3. Update all queries from `--type=agent` to `--label=gt:agent`\n4. Update bead creation to add `gt:*` labels\n5. Run migration on existing beads\n\n## Scope (from codebase exploration)\n\n### Core beads package (~40 functions)\n- internal/beads/beads.go - ListAgentBeads, CreateAgentBead, GetRoleConfig, etc.\n- internal/beads/fields.go - ParseAttachmentFields, FormatMRFields, ParseRoleConfig\n- internal/beads/agent_ids.go - Agent/role ID generation\n\n### Command files (~10 files)\n- cmd/sling.go - convoy creation\n- cmd/convoy.go - convoy queries, agent queries\n- cmd/install.go - role bead creation\n- cmd/formula.go - convoy creation\n- cmd/prime.go, status.go, done.go - agent state\n- cmd/dog.go, role.go, crew_add.go - agent/role management\n- cmd/migrate_agents.go - agent migration\n\n### Supporting files\n- doctor/agent_beads_check.go - agent bead validation\n- mail/router.go - agent bead queries\n- daemon/lifecycle.go - agent lifecycle\n- web/fetcher.go, tui/convoy/model.go - convoy queries\n- formula/*.formula.toml - type queries in formulas\n\n## Dependencies\n\nThis epic REQUIRES beads bd-i54l to be completed first (custom type support).\n\nLabels: [migration beads-integration]", "status": "in_progress", "priority": 1, "issue_type": "epic", "assignee": "gastown/witness", "created_at": "2026-01-07T04:50:23Z", "created_by": "beads/crew/dave", "updated_at": "2026-01-21T05:30:14Z", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-ubqeg", "title": "Formula Molecules: Guzzoline production for Gas Town", "description": "## Vision\n\nGas Town executes work. But it also needs to PRODUCE work - structured, high-quality guzzoline on demand. **Formula Molecules** are recipes that spawn structured convoys.\n\n## Core Insight\n\nA formula is a molecule template that:\n1. Takes input (a PR, a design problem, a codebase)\n2. Spawns multiple polecats with specific focuses\n3. Each leg produces structured output\n4. Synthesis step combines into unified deliverable\n\nGas Town becomes both consumer AND producer of guzzoline.\n\n## Example Formulas\n\n### Design Convoy Formula\nInput: Feature request or problem statement\nLegs (parallel):\n- API design polecat\n- Data model polecat  \n- UX/ergonomics polecat\n- Scalability polecat\n- Security polecat\nSynthesis: Unified design doc with tradeoffs\n\n### Code Review Convoy Formula\nInput: PR or file set\nLegs (parallel):\n- Correctness: Does it work?\n- Performance: Any bottlenecks?\n- Security: Vulnerabilities?\n- Elegance: Clean design?\n- Resilience: Error handling?\n- Style: Convention compliance?\n- Smells: Anti-patterns?\n- Legacy: Respects existing patterns?\nSynthesis: Categorized review with priority issues\n\n### Other Formula Ideas\n- Test Coverage Convoy: Unit, integration, edge cases, error paths\n- Documentation Convoy: API docs, user guide, examples, changelog\n- Migration Convoy: Database, API, config, rollback plan\n- Incident Response: Root cause, timeline, fix, prevention\n\n## Mol Mall\n\nLibrary/marketplace of formulas:\n```bash\ngt formula list              # Available formulas\ngt formula show code-review  # Formula details\ngt formula run code-review --pr=123  # Execute formula → convoy\ngt formula create my-review  # Create custom formula\n```\n\n## Technical Design\n\n### Formula Structure (in beads)\n```yaml\nid: formula-code-review\ntype: formula\nname: Code Review\ninputs:\n  - name: target\n    type: pr | files | branch\nlegs:\n  - name: correctness\n    focus: \"Verify logical correctness and edge cases\"\n    output: findings.md\n  - name: security\n    focus: \"Identify security vulnerabilities\"\n    output: findings.md\n  # ...\nsynthesis:\n  inputs: all leg outputs\n  output: review-summary.md\n```\n\n### Execution Model\n1. `gt formula run` creates convoy with formula reference\n2. Spawns polecats for each leg (parallel where possible)\n3. Each polecat gets leg-specific prompt + shared context\n4. Outputs collected as bead attachments or slots\n5. Synthesis polecat reads all outputs, produces final deliverable\n6. Convoy lands with unified result\n\n### Dependencies\n- Leg outputs feed synthesis (internal convoy deps)\n- Formula can specify leg ordering if needed\n- Parallel by default, sequential where required\n\n## Open Questions\n\n1. Where do formulas live? Town-level beads? Separate formula registry?\n2. How to version/share formulas across towns?\n3. Leg output format standardization?\n4. Human checkpoints between legs or only at end?\n5. Partial formula runs (skip some legs)?\n6. Formula composition (formula that includes other formulas)?\n\n## Why This Matters\n\nGas Town currently waits for humans to create work. With formulas:\n- Mayor can invoke structured reviews on any PR\n- Design work follows consistent methodology\n- Quality processes are repeatable and scalable\n- Work generation becomes as automated as work execution\n\n**Guzzoline factory, not just guzzoline consumer.**", "status": "in_progress", "priority": 1, "issue_type": "epic", "assignee": "gastown/witness", "created_at": "2025-12-31T21:19:46Z", "created_by": "mayor", "updated_at": "2026-01-21T05:30:17Z", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-4ntnq", "title": "Pipeline Reliability: Fix work loss in polecat→refinery flow", "description": "Post-mortem from 12 swarms that produced 74 orphan commits and lost work.\n\n## Root Cause\nNo transactional boundaries between pipeline stages. Work moves polecat→witness→refinery→main with fire-and-forget handoffs.\n\n## Key Failures\n1. Polecat session death before pipeline entry (commit but no push, or push but no gt done)\n2. No push verification in gt done\n3. Cleanup wisp and MR bead are unlinked tracking mechanisms\n4. Premature nuke before merge confirmed\n5. Refinery bottleneck causing stale branches\n6. No polecat session persistence/checkpoint\n\n## Success Criteria\n- Zero work loss from session death\n- All merged work traceable end-to-end\n- Recovery path for every failure mode", "status": "in_progress", "priority": 1, "issue_type": "epic", "assignee": "gastown/witness", "created_at": "2025-12-31T03:06:52Z", "created_by": "mayor", "updated_at": "2026-01-21T05:30:20Z", "dependencies": [{"issue_id": "gt-4ntnq", "depends_on_id": "gt-441j6", "type": "blocks", "created_at": "2025-12-31T04:42:19Z", "created_by": "mayor", "metadata": "{}"}, {"issue_id": "gt-4ntnq", "depends_on_id": "gt-5q6jr", "type": "blocks", "created_at": "2025-12-31T04:42:17Z", "created_by": "mayor", "metadata": "{}"}, {"issue_id": "gt-4ntnq", "depends_on_id": "gt-84ery", "type": "blocks", "created_at": "2025-12-31T04:42:19Z", "created_by": "mayor", "metadata": "{}"}, {"issue_id": "gt-4ntnq", "depends_on_id": "gt-bca67", "type": "blocks", "created_at": "2025-12-31T04:42:17Z", "created_by": "mayor", "metadata": "{}"}, {"issue_id": "gt-4ntnq", "depends_on_id": "gt-cloml", "type": "blocks", "created_at": "2025-12-31T04:42:17Z", "created_by": "mayor", "metadata": "{}"}, {"issue_id": "gt-4ntnq", "depends_on_id": "gt-kgszr", "type": "blocks", "created_at": "2025-12-31T04:42:19Z", "created_by": "mayor", "metadata": "{}"}, {"issue_id": "gt-4ntnq", "depends_on_id": "gt-svdsy", "type": "blocks", "created_at": "2025-12-31T04:42:19Z", "created_by": "mayor", "metadata": "{}"}, {"issue_id": "gt-4ntnq", "depends_on_id": "gt-v7zm7", "type": "blocks", "created_at": "2025-12-31T04:42:19Z", "created_by": "mayor", "metadata": "{}"}], "dependency_count": 8, "dependent_count": 0, "comment_count": 0}
{"id": "gt-t6muy", "title": "Design: Polecat lifecycle and patrol coordination", "description": "## Context\n\nThis design captures thinking from a deep session about the Gas Town propulsion system - how Deacon, Witness, Refinery, and Polecats coordinate to move work smoothly through the system.\n\n## Core Insight: Session-Per-Step Model\n\nPolecats do NOT complete complex molecules end-to-end. Instead:\n- One polecat SESSION per molecule STEP\n- Same sandbox (branch/worktree) persists across sessions\n- Each step: spawn → work → close bead → recycle session\n- Final step: spawn → work → close bead → signal complete → merge → nuke sandbox\n\n## Two Cleanup Stages\n\n| Stage | Trigger | Kills | Survives |\n|-------|---------|-------|----------|\n| Step cleanup | Step bead closed | Session | Branch, worktree, molecule |\n| Molecule cleanup | Merged | Session, branch, worktree | Digest |\n\n## Per-Rig Polecat Channel\n\nNeed a mailing list/queue per rig for session-lifecycle requests:\n- \"Recycle me\" (from polecat)\n- \"Recycle worker X\" (from witness/mayor)\n- \"Spawn for step Y\" (from anyone)\n\nFirst-come-first-served by patrolling agents. Anyone on patrol (Witness, Refinery, Crew, Mayor) can service requests.\n\n## GUPP + Pinned Work = Completion\n\nAs long as:\n1. Work is pinned to polecat identity (e.g., gastown/furiosa)\n2. Sandbox persists (branch + worktree)\n3. Someone keeps spawning polecat when it dies\n\n→ The molecule WILL get finished. GUPP ensures wake-and-work.\n\n## Daemon → Deacon Heartbeat\n\nThe daemon pings the deacon, keeping the cycle alive. Deacon peeks into rig-wide channels during patrol and can service lifecycle requests.\n\n## Open Design Questions\n\n### Q1: Spoon-Feeding Bin-Packing\nTwo dimensions of granularity trade-offs:\n- How many logical steps per physical molecule step?\n- How many molecule steps per polecat session?\n\nToo few steps → context exhaustion, forgetting\nToo many steps → overhead, fragmentation\n\nNeeds: Analysis of optimal granularity based on step complexity.\n\n### Q2: Mechanical vs Agent-Driven Recycling\nCaution from deacon murder spree bug: mechanical detection of \"stuck\" workers is fragile.\n\nPrefer: Explicit \"recycle me\" requests serviced by patrol agents.\n\nQuestion: When is mechanical intervention appropriate?\n\n### Q3: Channel Implementation\nOptions:\n- Mail-based (gt mail to rig/polecats)\n- Beads-based (special issue type)\n- State file (rig/polecat-queue.json)\n\nMail seems most consistent with Gas Town patterns.\n\n### Q4: Who Spawns Next Step?\nCurrent: gt sling spawns fresh polecat\nNeeded: Mechanism for \"continue molecule on existing sandbox\"\n\nMaybe: gt sling --continue or witness detects pending step.\n\n## Related Issues\n\n- gt-dtw9u: Witness monitoring (enhance survey-workers)\n- gt-qpwv4: Completion detection (check ready branches)\n- gt-6qyt1: Refinery queue (process MERGE_READY)\n- gt-budeb: Auto-nuke (handle MERGED signal)\n- gt-5j3ia: Swarm aggregation (batch completion)\n- gt-1dbcp: Polecat auto-start (SessionStart hook issue)\n\n## Design Principles (from HOP/MEOW context)\n\n1. **Discovery over tracking** - observe reality each cycle\n2. **Mail as coordination primitive** - agents signal via mail\n3. **ZFC** - Claude makes judgment calls, no hardcoded thresholds\n4. **Redundant monitoring** - overlapping observation is resilience\n5. **Wisps are ephemeral** - patrol molecules flow like water\n\n## Next Steps\n\n1. Finalize channel design (mail-based queue)\n2. Enhance witness patrol formula with completion detection\n3. Enhance refinery patrol with MERGED signaling\n4. Implement step-level recycling\n5. Design spoon-feeding granularity guidelines", "status": "in_progress", "priority": 1, "issue_type": "epic", "assignee": "gastown/witness", "created_at": "2025-12-28T03:55:02Z", "created_by": "mayor", "updated_at": "2026-01-21T05:30:22Z", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-j7rt", "title": "--help", "status": "open", "priority": 2, "issue_type": "task", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-28T03:53:25Z", "created_by": "gastown/polecats/nux", "updated_at": "2026-02-28T03:53:25Z", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-oqf0", "title": "--help", "status": "open", "priority": 2, "issue_type": "task", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-28T03:53:16Z", "created_by": "gastown/polecats/dementus", "updated_at": "2026-02-28T03:53:16Z", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-p91e", "title": "--help", "status": "closed", "priority": 2, "issue_type": "task", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-28T03:52:09Z", "created_by": "gastown/polecats/dementus", "updated_at": "2026-02-28T03:52:46Z", "closed_at": "2026-02-28T03:52:46Z", "close_reason": "help artifact pollution", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-x2b9", "title": "--help", "status": "closed", "priority": 2, "issue_type": "task", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-28T03:49:13Z", "created_by": "gastown/polecats/furiosa", "updated_at": "2026-02-28T03:52:46Z", "closed_at": "2026-02-28T03:52:46Z", "close_reason": "help artifact pollution", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-l7x9", "title": "Speed up internal/witness tests (22s)", "description": "attached_molecule: gt-wisp-zsh6g\nattached_formula: mol-polecat-work\nattached_at: 2026-02-28T03:46:38Z\ndispatched_by: mayor\n\ninternal/witness takes 22s. Second slowest package. Check for: unnecessary sleeps, real process spawning, serial tests that could be parallel. Target: under 10s.", "status": "in_progress", "priority": 2, "issue_type": "task", "assignee": "gastown/polecats/slit", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-28T03:42:04Z", "created_by": "mayor", "updated_at": "2026-02-28T03:50:49Z", "dependencies": [{"issue_id": "gt-l7x9", "depends_on_id": "gt-wisp-zsh6g", "type": "blocks", "created_at": "2026-02-27T19:46:37Z", "created_by": "mayor", "metadata": "{}"}], "dependency_count": 1, "dependent_count": 0, "comment_count": 0}
{"id": "gt-pp2t", "title": "Speed up internal/web and internal/util tests (16s each)", "description": "attached_molecule: gt-wisp-fl473\nattached_formula: mol-polecat-work\nattached_at: 2026-02-28T03:51:11Z\ndispatched_by: gastown/crew/max\n\ninternal/web and internal/util each take ~16s. Check for: HTTP server startup overhead, unnecessary sleeps, tests that could be parallel. Target: under 5s each.", "status": "in_progress", "priority": 2, "issue_type": "task", "assignee": "gastown/polecats/dementus", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-28T03:42:04Z", "created_by": "mayor", "updated_at": "2026-02-28T03:53:30Z", "dependencies": [{"issue_id": "gt-pp2t", "depends_on_id": "gt-wisp-fl473", "type": "blocks", "created_at": "2026-02-27T19:51:11Z", "created_by": "gastown/crew/max", "metadata": "{}"}], "dependency_count": 1, "dependent_count": 0, "comment_count": 0}
{"id": "gt-333u", "title": "--help", "status": "closed", "priority": 2, "issue_type": "task", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-28T03:38:40Z", "created_by": "mayor", "updated_at": "2026-02-28T03:52:47Z", "closed_at": "2026-02-28T03:52:47Z", "close_reason": "help artifact pollution", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-zgl6", "title": "--help", "status": "closed", "priority": 2, "issue_type": "task", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-28T03:22:54Z", "created_by": "mayor", "updated_at": "2026-02-28T03:52:47Z", "closed_at": "2026-02-28T03:52:47Z", "close_reason": "help artifact pollution", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-yrz2", "title": "--help", "status": "closed", "priority": 2, "issue_type": "task", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-28T03:19:10Z", "created_by": "gastown/polecats/furiosa", "updated_at": "2026-02-28T03:52:47Z", "closed_at": "2026-02-28T03:52:47Z", "close_reason": "help artifact pollution", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-ge1q", "title": "--help", "status": "closed", "priority": 2, "issue_type": "task", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-28T03:17:19Z", "created_by": "mayor", "updated_at": "2026-02-28T03:52:47Z", "closed_at": "2026-02-28T03:52:47Z", "close_reason": "help artifact pollution", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-eo8d", "title": "TestVerifyStartupNudgeDelivery_IdleAgent flaky: NewSession session already exists", "description": "session_manager_test.go:442 fails with 'NewSession: session already exists'. Appears to be a flaky test - session state not properly cleaned between test runs.", "status": "open", "priority": 2, "issue_type": "bug", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-28T03:16:21Z", "created_by": "gastown/refinery", "updated_at": "2026-02-28T03:16:21Z", "labels": ["flaky", "pre-existing", "test-failure"], "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-64zc", "title": "--help", "status": "closed", "priority": 2, "issue_type": "task", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-28T03:13:49Z", "created_by": "gastown/refinery", "updated_at": "2026-02-28T03:52:47Z", "closed_at": "2026-02-28T03:52:47Z", "close_reason": "help artifact pollution", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-l4gj", "title": "--help", "status": "closed", "priority": 2, "issue_type": "task", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-28T03:11:55Z", "created_by": "gastown/polecats/nux", "updated_at": "2026-02-28T03:52:47Z", "closed_at": "2026-02-28T03:52:47Z", "close_reason": "help artifact pollution", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-9nzn", "title": "--help", "status": "closed", "priority": 2, "issue_type": "task", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-28T03:06:31Z", "created_by": "gastown/polecats/furiosa", "updated_at": "2026-02-28T03:52:47Z", "closed_at": "2026-02-28T03:52:47Z", "close_reason": "help artifact pollution", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-u63z", "title": "--help", "status": "closed", "priority": 2, "issue_type": "task", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-28T02:59:50Z", "created_by": "gastown/polecats/cheedo", "updated_at": "2026-02-28T03:52:47Z", "closed_at": "2026-02-28T03:52:47Z", "close_reason": "help artifact pollution", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-ywmg", "title": "--help", "status": "closed", "priority": 2, "issue_type": "task", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-28T02:57:19Z", "created_by": "gastown/polecats/toast", "updated_at": "2026-02-28T03:52:47Z", "closed_at": "2026-02-28T03:52:47Z", "close_reason": "help artifact pollution", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-ghzp", "title": "--help", "status": "closed", "priority": 2, "issue_type": "task", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-28T02:55:30Z", "created_by": "gastown/polecats/keeper", "updated_at": "2026-02-28T03:52:48Z", "closed_at": "2026-02-28T03:52:48Z", "close_reason": "help artifact pollution", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-2e5q", "title": "Role taxonomy hardcoded in 15+ switch blocks across 10+ files", "status": "open", "priority": 2, "issue_type": "task", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-28T02:54:41Z", "created_by": "gastown/polecats/capable", "updated_at": "2026-02-28T02:54:41Z", "labels": ["formula"], "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-1emx", "title": "GUPP violation threshold (30min) defined independently in 3 files", "status": "open", "priority": 2, "issue_type": "bug", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-28T02:54:40Z", "created_by": "gastown/polecats/capable", "updated_at": "2026-02-28T02:54:40Z", "labels": ["duplication"], "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-wrdz", "title": "Dead code: cross-socket zombie functions are permanent no-ops after socket migration", "notes": "-", "status": "open", "priority": 2, "issue_type": "task", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-28T02:50:02Z", "created_by": "gastown/polecats/dementus", "updated_at": "2026-02-28T02:50:16Z", "labels": ["cleanup"], "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-9xbg", "title": "ZFC: refinery hardcoded severity/priority logic in anomalies", "description": "Two instances of Go code making classification decisions that belong to agents:\n- Lines 1402-1409: Hardcodes 'critical' severity for orphaned branches in detectQueueAnomalies. Contrast with ListAllOpenMRs (line 1302) which correctly annotates 'ZFC: Go transports data, agent decides what is interesting.'\n- Lines 1058-1063: Hardcodes priority boost logic (P2->P1->P0) when creating conflict resolution tasks. Boost strategy is a policy judgment.\n\nFix: Return raw anomaly data without severity. Let agent classify severity. Priority boost should be config-driven or agent-decided.", "status": "open", "priority": 2, "issue_type": "bug", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-28T02:49:35Z", "created_by": "gastown/polecats/nux", "updated_at": "2026-02-28T02:51:01Z", "labels": ["zfc-violation"], "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-re2y", "title": "ZFC: refinery convoy description text parsing for metadata", "description": "Two instances of parsing convoy description text with string prefix matching in engineer.go:\n- Lines 1625-1643: Scans description lines for 'Owner: ' and 'Notify: ' prefixes to extract notification addresses\n- Lines 1649-1657 (landConvoySwarm): Scans description lines for 'Molecule: ' prefix to find associated molecule/swarm ID\n\nFix: Convoy metadata (owner, notify, molecule) should be structured fields on the convoy bead, not embedded in freeform description text. Use typed accessors like MRFields already does.", "status": "open", "priority": 2, "issue_type": "bug", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-28T02:49:34Z", "created_by": "gastown/polecats/nux", "updated_at": "2026-02-28T02:50:55Z", "labels": ["zfc-violation"], "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-d9ed", "title": "ZFC: refinery hardcoded thresholds (stale-claim + MaxRetryCount)", "description": "staleClaimWarningAfter=2h and staleClaimCriticalAfter=6h (engineer.go:168-171) are hardcoded thresholds for anomaly severity. Used at lines 1382-1386 to classify stale claims. MaxRetryCount=5 (types.go:123-124) hardcodes when to escalate to Mayor.\n\nNote: StaleClaimTimeout is already config-driven in MergeQueueConfig - these anomaly thresholds should follow the same pattern.\n\nFix: Add to MergeQueueConfig or let the agent decide severity. MaxRetryCount should be a config field with a default.", "status": "open", "priority": 2, "issue_type": "bug", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-28T02:49:30Z", "created_by": "gastown/polecats/nux", "updated_at": "2026-02-28T02:50:49Z", "labels": ["zfc-violation"], "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-qago", "title": "ZFC: refinery findTownRoot infers town root from directory structure", "description": "findTownRoot (manager.go:562-584) walks directories looking for 'mayor/' subdirectory and strings.Contains on config.json for '\"type\": \"workspace\"' to find the town root. Infers state from filesystem signals.\n\nFix: Town root should be provided via config or environment variable (GT_TOWN_ROOT). Start() at line 146 already computes townRoot from m.rig.Path - pass it through rather than re-discovering.", "status": "open", "priority": 2, "issue_type": "bug", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-28T02:49:29Z", "created_by": "gastown/polecats/nux", "updated_at": "2026-02-28T02:50:44Z", "labels": ["zfc-violation"], "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-5rne", "title": "ZFC: witness hardcoded Mayor role refs + cleanup policy decisions", "description": "handleMergedCleanupStatus (handlers.go:373-398) contains hardcoded 'Mayor' as escalation target and makes policy judgments about which cleanup states (has_uncommitted, has_stash, has_unpushed) require escalation. Same pattern in handleZombieRestart (line 1321).\n\nFix: Escalation target should come from config. Mapping of cleanup statuses to severity should be config-driven or left to the agent. The witness agent should decide what to do with each status, not the Go code.", "status": "open", "priority": 2, "issue_type": "bug", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-28T02:49:27Z", "created_by": "gastown/polecats/nux", "updated_at": "2026-02-28T02:50:40Z", "labels": ["zfc-violation"], "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-bmho", "title": "ZFC: witness description/output string parsing for state", "description": "Multiple instances of parsing unstructured text for state in witness/handlers.go:\n- getCleanupStatus (lines 613-627): scans bead description lines for 'cleanup_status:' prefix\n- findMRBeadForBranch (lines 633-655): strings.Contains on description for 'branch: <name>'\n- findCleanupWisp (lines 551-553): parses bd list error string for 'no issues found'\n- createCleanupWisp (lines 511-516) + createSwarmWisp (536-540): fallback parsing of 'Created: <id>' from bd create stdout\n\nFix: cleanup_status should be a structured field (like agent_state). Branch should be a label/field on MR beads. bd list should return distinct exit codes for 'no results' vs errors. bd create --json should be the only parsing path.", "status": "open", "priority": 2, "issue_type": "bug", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-28T02:49:26Z", "created_by": "gastown/polecats/nux", "updated_at": "2026-02-28T02:50:36Z", "labels": ["zfc-violation"], "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-tsut", "title": "ZFC: witness hardcoded zombie state classification (isZombieState + receiptVerdictForZombie)", "description": "isZombieState (handlers.go:1301-1306) compares agent_state against hardcoded strings 'working'/'running'/'spawning'. receiptVerdictForZombie (patrol_receipts.go:30-45) adds synthetic states 'stuck-in-done'/'agent-dead-in-session'/'bead-closed-still-running'/'done-intent-dead' not in the AgentState constants. These two independently maintained state lists classify zombies and map them to patrol verdicts.\n\nFix: AgentState should carry metadata about whether it's an active state. receiptVerdictForZombie should read a field on ZombieResult rather than re-deriving from strings. Use typed AgentState constants, not raw strings.", "status": "open", "priority": 2, "issue_type": "bug", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-28T02:49:18Z", "created_by": "gastown/polecats/nux", "updated_at": "2026-02-28T02:50:22Z", "labels": ["zfc-violation"], "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-ohqi", "title": "ZFC: witness hardcoded HungSessionThresholdMinutes=30", "description": "HungSessionThresholdMinutes=30 (handlers.go:28) is a hardcoded constant for detecting stuck agents. Used at lines 1132-1133 to restart polecats after 30 min inactivity. Different agents/tasks may have legitimately longer silent periods (compilation, CI wait).\n\nFix: Threshold should be config-driven - from rig config, role config, or agent bead metadata. Agent/role should declare its own max expected silence interval.", "status": "open", "priority": 2, "issue_type": "bug", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-28T02:49:15Z", "created_by": "gastown/polecats/nux", "updated_at": "2026-02-28T02:50:09Z", "labels": ["zfc-violation"], "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-qjtq", "title": "ZFC: polecat PID signal inference for liveness (isSessionProcessDead)", "description": "isSessionProcessDead (manager.go:1466-1494) retrieves PID from tmux pane, probes with Signal(0) to determine if agent is alive. This is OS-level signal inference to determine agent liveness - the quintessential ZFC anti-pattern (inferring state from signals instead of reading beads state).\n\nFix: Agent liveness should be self-reported via heartbeat (timestamp in bead or file touch). Go code checks 'has the agent reported recently?' rather than probing PIDs. PID reuse also creates false negative risk.", "status": "open", "priority": 2, "issue_type": "bug", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-28T02:49:11Z", "created_by": "gastown/polecats/nux", "updated_at": "2026-02-28T02:50:02Z", "labels": ["zfc-violation"], "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-4d7p", "title": "ZFC: polecat hardcoded state/status string comparisons", "description": "Multiple hardcoded state/status string comparisons in polecat/manager.go:\n- Line 2006-2009: agent_state=='stuck'/'awaiting-gate' as intentional pause\n- Line 1655: status!='hooked' before setting in_progress\n- Line 869: mrBead.Status=='open' blocks removal\n- Line 1776: fields.AgentState=='idle' maps to StateIdle\nAlso session_manager.go:717: status=='tombstone' check.\n\nFix: Define typed enums for agent states and issue statuses. State metadata (protectsFromCleanup, blocksRemoval) should be on the type, not scattered as string comparisons. Status transition logic belongs in beads schema.", "status": "open", "priority": 2, "issue_type": "bug", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-28T02:49:10Z", "created_by": "gastown/polecats/nux", "updated_at": "2026-02-28T02:49:57Z", "labels": ["zfc-violation"], "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-rcrt", "title": "ZFC: polecat hardcoded role names (ListPolecats + ReservedInfraAgentNames)", "description": "ListPolecats (session_manager.go:596) filters by hardcoded names 'witness', 'refinery', 'crew-'. ReservedInfraAgentNames (namepool.go:27-34) has a DIFFERENT list: 'witness', 'mayor', 'deacon', 'refinery', 'crew', 'polecats'. These are already out of sync.\n\nFix: Single source of truth for infra role names - config-driven or from rig manifest. ListPolecats should use the same source as namepool, or filter by role type tag on sessions rather than name matching.", "notes": "Implemented: Added IsInfraAgentName() in namepool.go as single source of truth for infra agent name detection. ListPolecats now uses it instead of hardcoded checks. filterReservedNames also updated. Test added.", "status": "closed", "priority": 2, "issue_type": "bug", "assignee": "gastown/polecats/keeper", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-28T02:49:10Z", "created_by": "gastown/polecats/nux", "updated_at": "2026-02-28T03:04:38Z", "closed_at": "2026-02-28T02:55:58Z", "close_reason": "Closed", "labels": ["zfc-violation"], "dependencies": [{"issue_id": "gt-rcrt", "depends_on_id": "gt-wisp-3pxql", "type": "blocks", "created_at": "2026-02-27T18:53:24Z", "created_by": "mayor", "metadata": "{}"}], "dependency_count": 1, "dependent_count": 0, "comment_count": 0}
{"id": "gt-ph6q", "title": "ZFC: polecat/manager.go error string matching instead of typed errors", "description": "isDoltOptimisticLockError (manager.go:62-72) and isDoltConfigError (manager.go:74-92) use strings.Contains on error messages ('optimistic lock', 'serialization failure', 'not initialized', etc.) to classify Dolt errors. Also health check functions at lines 208, 217, 240, 292 mix errors.Is() with strings.Contains('not found'/'does not exist') fallbacks.\n\nFix: Dolt/beads package should expose typed sentinel errors (beads.ErrOptimisticLock, etc.). A single adapter in beads/doltserver should wrap raw errors. Consumers use errors.Is() only.", "notes": "Implemented: Moved Dolt error string matching from polecat/manager.go into beads.wrapError as typed sentinel errors (ErrOptimisticLock, ErrConfigError, ErrDoesNotExist). isDoltOptimisticLockError/isDoltConfigError now use errors.Is(). Removed strings.Contains fallbacks from CheckDoltHealth and createAgentBeadWithRetry. Tests updated to verify typed error propagation.", "status": "closed", "priority": 2, "issue_type": "bug", "assignee": "gastown/polecats/valkyrie", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-28T02:49:09Z", "created_by": "gastown/polecats/nux", "updated_at": "2026-02-28T03:04:48Z", "closed_at": "2026-02-28T03:03:31Z", "close_reason": "Closed", "labels": ["zfc-violation"], "dependencies": [{"issue_id": "gt-ph6q", "depends_on_id": "gt-wisp-0ap91", "type": "blocks", "created_at": "2026-02-27T18:53:06Z", "created_by": "mayor", "metadata": "{}"}], "dependency_count": 1, "dependent_count": 0, "comment_count": 0}
{"id": "gt-yoxw", "title": "ZFC: daemon hung session auto-kill and GUPP violation detection in Go", "notes": "daemon.go:1088-1095 and :1140-1147 detect hung sessions with hardcoded 30min threshold and auto-kill. daemon.go:1034-1043 heartbeat >10min→restartStuckDeacon. lifecycle.go:907,1048 GUPP violation detection with hardcoded 30min timeout. Also mass death detection (3 deaths in 30s) and spawning guard (5min stale=failed). All semantic decisions with hardcoded thresholds.", "status": "open", "priority": 2, "issue_type": "bug", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-28T02:48:22Z", "created_by": "gastown/polecats/rictus", "updated_at": "2026-02-28T02:48:48Z", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-jq7l", "title": "ZFC: daemon restart_tracker implements crash-loop detection in Go", "notes": "restart_tracker.go:33-40 implements crash-loop detection with hardcoded params: initialBackoff=30s, maxBackoff=10min, backoffMultiplier=2.0, crashLoopWindow=15min, crashLoopCount=5, stabilityPeriod=30min. Go decides when an agent is crash-looping and blocks restarts. This is agent-level judgment encoded in Go constants.", "status": "open", "priority": 2, "issue_type": "bug", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-28T02:48:21Z", "created_by": "gastown/polecats/rictus", "updated_at": "2026-02-28T02:48:44Z", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-mcw2", "title": "ZFC: boot triage is a full Go decision engine replacing agent judgment", "notes": "cmd/boot.go:282-381 runDegradedTriage implements full multi-level decision tree: missing→start, very stale+>30m→kill, stale→nudge, fresh+backoff→skip, no hook→nudge idle, hook+stale 15m→nudge. Also queries bead slots (413-436), parses molecule steps (443-476), string-matches labels (387-409). gt boot triage always runs this regardless of --degraded flag, making Boot agent a thin wrapper.", "status": "open", "priority": 2, "issue_type": "bug", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-28T02:48:20Z", "created_by": "gastown/polecats/rictus", "updated_at": "2026-02-28T02:48:41Z", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-yzt0", "title": "ZFC: daemon handler manages dog lifecycle with hardcoded timeouts", "notes": "handler.go:16-32 has hardcoded dog lifecycle timeouts: dogIdleSessionTimeout=1hr, dogIdleRemoveTimeout=4hr, staleWorkingTimeout=2hr, maxDogPoolSize=4. Go decides when dogs are stuck (>2hr), kills idle sessions (>1hr), shrinks pool (>4hr idle). These are policy decisions that belong in agent logic or config.", "status": "open", "priority": 2, "issue_type": "bug", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-28T02:48:19Z", "created_by": "gastown/polecats/rictus", "updated_at": "2026-02-28T02:48:36Z", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-utuk", "title": "ZFC: daemon infers process identity via PID + ps string matching", "notes": "daemon.go:1556-1568 isGasTownDaemon and dolt.go:339-351 isDoltSqlServer both use ps -p PID -o command= then strings.Contains on command line to identify processes. Fragile signal inference that violates ZFC rules 1 and 4.", "status": "open", "priority": 2, "issue_type": "bug", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-28T02:48:18Z", "created_by": "gastown/polecats/rictus", "updated_at": "2026-02-28T02:48:33Z", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-sjzd", "title": "ZFC: daemon doctor_dog makes automated decisions on hardcoded thresholds", "notes": "doctor_dog.go implements automated response decisions: latency>5s→escalate, orphans>20→trigger janitor, backup>1hr→sync, unreachable→restart. Also zombie detection via pgrep+command line string matching (lines 328-401). All thresholds hardcoded. Should collect+report metrics; agent decides actions.", "status": "open", "priority": 2, "issue_type": "bug", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-28T02:48:17Z", "created_by": "gastown/polecats/rictus", "updated_at": "2026-02-28T02:48:29Z", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-hnck", "title": "--help", "status": "closed", "priority": 2, "issue_type": "task", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-28T02:45:18Z", "created_by": "gastown/polecats/nux", "updated_at": "2026-02-28T03:52:48Z", "closed_at": "2026-02-28T03:52:48Z", "close_reason": "help artifact pollution", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-6oio", "title": "[PLUGIN] rebuild-gt completed", "description": "Rebuilt gt binary from source. Binary updated from 350942f6 to 0c10447b (latest commit in dog/echo worktree). Note: stale check shows phantom repo_commit (bb8fca823...), suggesting possible misconfiguration.", "status": "open", "priority": 2, "issue_type": "task", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-28T02:43:57Z", "created_by": "dog", "updated_at": "2026-02-28T02:43:57Z", "labels": ["plugin:rebuild-gt", "result:success", "rig:gastown"], "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-8ta7", "title": "Code review: formula system completeness", "description": "Review internal/formula/ and cross-reference with hardcoded behavior elsewhere. The formula system is the RIGHT way to configure agent behavior. Look for: things that should be formulas but aren't, formula features that exist but aren't used, places where Go code duplicates what formulas should express. Are all agent roles, schedules, thresholds, and behavior policies formula-driven? File beads for gaps found.", "design": "# Formula System Completeness Review\n\n## Executive Summary\n\nThe formula system (47 embedded formulas, 4 types) provides excellent coverage for\nworkflow orchestration (patrol loops, polecat work lifecycle, convoy reviews). However,\nsignificant gaps exist in three areas: (1) advanced TOML features declared in formulas\nbut NOT parsed by the Go package, (2) hardcoded agent behavior that should be\nformula-driven, and (3) duplicated constants/policies spread across many files.\n\n## Gap Category A: Unparsed Formula Features (Silent Data Loss)\n\nThe Go `internal/formula/types.go` Formula struct has NO fields for these TOML\nsections. They are silently ignored during parsing — formulas declare them, but\nthe runtime never sees them:\n\n| Feature | Used in formulas | Go parsing | Status |\n|---------|-----------------|------------|--------|\n| extends = [\"...\"] | shiny-enterprise, shiny-secure | NOT PARSED | Dead feature |\n| [compose] / [[compose.expand]] | shiny-enterprise | NOT PARSED | Dead feature |\n| [compose] aspects = [...] | shiny-secure | NOT PARSED | Dead feature |\n| [[advice]] / [advice.around] | security-audit | NOT PARSED | Dead feature |\n| [[pointcuts]] with glob | security-audit | NOT PARSED | Dead feature |\n| [squash] with trigger/template | 12 dog/infra formulas | NOT PARSED | Dead feature |\n| [presets] | code-review | NOT PARSED | Dead feature |\n| gate = { type, condition } | mol-shutdown-dance | NOT PARSED | Dead feature |\n| [[steps.children]] (parallel container) | mol-gastown-boot | NOT PARSED | Dead feature |\n\n**Impact**: Authors write these features thinking they work. The bd tool MAY\nhandle some (needs cross-repo verification), but the gt formula package — the\nprimary parser and validator — silently drops them. No validation, no errors.\n\n## Gap Category B: Hardcoded Behavior That Should Be Formula-Driven\n\n### B1: Role Taxonomy (10+ files, ~15 switch blocks)\nThe role set {mayor, deacon, witness, refinery, polecat, crew, boot, dog} is\nhardcoded in switch/if statements across 10+ files. Adding a new role requires\nmodifying all of them. Should be a declarative role registry.\n\n**Key duplications:**\n- isAutonomousRole(): runtime.go, claude/settings.go, gemini/settings.go (3 copies)\n- Role-to-session-name: daemon/lifecycle.go AND tui/feed/stuck.go (2 copies)\n- Role-to-mail-address: cmd/mail_identity.go (2 switch blocks)\n- Role-to-home-dir: cmd/role.go\n- Role-to-status-line: cmd/statusline.go\n\n### B2: Patrol Molecule Names (5+ files)\nThe strings \"mol-deacon-patrol\", \"mol-witness-patrol\", \"mol-refinery-patrol\"\nappear in 21 Go files. The role→patrol-formula mapping should be metadata on\neither the role or the formula, not scattered string constants.\n\n### B3: Operational Thresholds (30+ constants across 12+ files)\nAll agent behavior thresholds are Go constants, not formula vars:\n\n| Threshold | Value | Files defining it |\n|-----------|-------|-------------------|\n| GUPP violation | 30 min | tui/feed/stuck.go, daemon/lifecycle.go, witness/handlers.go (3x) |\n| Hung session | 30 min | daemon/daemon.go (duplicate of GUPP) |\n| Mass death window | 30s | daemon/daemon.go |\n| Mass death count | 3 | daemon/daemon.go |\n| Dog idle timeout | 1h | daemon/handler.go |\n| Dog removal timeout | 4h | daemon/handler.go |\n| Max dog pool size | 4 | daemon/handler.go |\n| Refinery claim TTL | 30 min | refinery/types.go |\n| Max retry count | 5 | refinery/types.go |\n| Wisp max age | 24h | daemon/wisp_reaper.go |\n| Wisp delete age | 7d | daemon/wisp_reaper.go |\n| Mail delete age | 30d | daemon/wisp_reaper.go |\n| Crash loop window | 15 min | daemon/restart_tracker.go |\n| Crash loop count | 5 | daemon/restart_tracker.go |\n| Max backoff | 10 min | daemon/restart_tracker.go |\n| Max bead respawns | 2 | witness/spawn_count.go |\n| Doctor dog interval | 5 min | daemon/doctor_dog.go |\n| Compactor interval | 24h | daemon/compactor_dog.go |\n| Maintenance interval | 5 min | daemon/scheduled_maintenance.go |\n| Maintenance threshold | 1000 commits | daemon/scheduled_maintenance.go |\n\n### B4: Per-Role Startup Protocols (prime_output.go)\nThe outputPrimeContextFallback function contains 7 large hardcoded strings —\none per role — that serve as system prompts. These are effectively inline\nformulas that define role behavior, but they're Go string literals instead\nof formula TOML files. The template system (outputPrimeContext) is the correct\npath forward, but the fallback path still has these hardcoded.\n\n### B5: Behavior Policies\n- Pre-sync policy: only \"refinery\" and \"crew\" require git pre-sync (hardcoded switch)\n- Merge conflict policy: \"assign_back\" hardcoded in refinery/engineer.go\n- Restart backoff: initialBackoff=30s, multiplier=2.0, max=10min all hardcoded\n- Doctor production DB list: [\"hq\",\"beads\",\"gastown\",\"sky\",\"wyvern\",\"beads_hop\"] hardcoded\n\n### B6: Help Assessment Heuristics (witness/protocol.go)\nKeyword-based escalation rules (\"conflict\" → escalate, \"test fail\" → escalate)\nare hardcoded string matching. These are policies that should be configurable.\n\n## Gap Category C: Formula Features Used But Underutilized\n\n### C1: Variable System\nThe formula var system ({{var}}) with validation exists and works, but only\nmol-polecat-work uses it significantly ({{issue}}, {{base_branch}}, etc.).\nMost workflow formulas have no vars at all, relying on step descriptions\nbeing interpreted by agents at runtime.\n\n### C2: Acceptance Criteria\nThe Step.Acceptance field exists for Ralph loop mode but is only used in\nthe shiny formula and its extensions. Patrol formulas don't use it — could\nimprove patrol step validation.\n\n### C3: Parallel Steps\nStep.Parallel flag exists but is only used in mol-gastown-boot (via the\nunparsed [[steps.children]] syntax). The core parallel execution logic\nexists in ReadySteps/ParallelReadySteps but isn't exercised by most formulas.\n\n## Recommendations (Priority Order)\n\n1. **HIGH: Audit unparsed TOML features** — Determine if bd handles extends/\n   compose/advice/squash/presets/gate, or if these are truly dead. If dead,\n   either implement parsing or remove the TOML sections to prevent confusion.\n\n2. **HIGH: Unify GUPP threshold** — 30-minute threshold defined independently\n   in 3 files. Should be a single constant or formula var.\n\n3. **MEDIUM: Role registry** — Extract role taxonomy into a declarative\n   registry (could be a formula or config) to eliminate 15+ switch blocks.\n\n4. **MEDIUM: Operational thresholds formula** — Create a config/formula for\n   operational thresholds (timeouts, intervals, pool sizes) so they're\n   tunable without recompilation.\n\n5. **LOW: Patrol molecule metadata** — Add role→patrol-formula association\n   to the role registry instead of hardcoding strings in 5+ files.\n\n6. **LOW: Behavior policies** — Move pre-sync, merge-conflict, restart-backoff\n   policies to configuration.", "notes": "Review complete. Key findings:\n\n1. **Unparsed TOML features (P1)**: gt-1fje — extends, compose, advice, presets,\n   squash, gate are declared in 12+ formula TOML files but the Go formula package\n   has zero support for them. Silent data loss.\n\n2. **Duplicated GUPP threshold (P2)**: gt-1emx — 30-minute threshold defined\n   independently in tui/feed/stuck.go, daemon/lifecycle.go, witness/handlers.go.\n\n3. **Role taxonomy scatter (P2)**: gt-2e5q — 15+ switch blocks across 10+ files\n   hardcode the role set. Adding a new role requires modifying all of them.\n\n4. **Hardcoded operational thresholds (P3)**: gt-8l3w — 30+ timeouts/intervals/\n   pool sizes scattered as Go constants across 12+ daemon files.\n\n5. **Patrol molecule string scatter (P3)**: gt-pimh — \"mol-*-patrol\" strings\n   appear in 21 Go files instead of being formula metadata.\n\n6. **Hardcoded escalation heuristics (P3)**: gt-td6p — witness keyword-based\n   escalation rules are string matching, not configurable policy.\n\nFormula system strengths: excellent workflow coverage (47 formulas), strong\ntype system (4 formula types), good validation (cycles, vars, refs), clean\n3-tier resolution (project → town → embedded), proper health management.", "status": "closed", "priority": 2, "issue_type": "task", "assignee": "gastown/polecats/capable", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-28T02:41:58Z", "created_by": "mayor", "updated_at": "2026-02-28T02:55:37Z", "closed_at": "2026-02-28T02:55:17Z", "close_reason": "Completed with no code changes (already fixed or pushed directly to main)", "dependencies": [{"issue_id": "gt-8ta7", "depends_on_id": "gt-wisp-7x62d", "type": "blocks", "created_at": "2026-02-27T18:43:28Z", "created_by": "mayor", "metadata": "{}"}], "dependency_count": 1, "dependent_count": 0, "comment_count": 0}
{"id": "gt-8hqw", "title": "Code review: down/up/lifecycle for socket and cleanup issues", "description": "Review cmd/ and internal/ code related to gt up, gt down, gt rig start/stop/park/dock for: socket handling bugs (like the sweepCrossSocketZombies no-op), incomplete cleanup paths, hardcoded socket names, race conditions in startup/shutdown sequences. Also review the socket migration from -L gt to default — are there other places that still reference the old socket? File beads for each issue found.", "design": "-", "notes": "-", "status": "closed", "priority": 2, "issue_type": "task", "assignee": "gastown/polecats/dementus", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-28T02:41:55Z", "created_by": "mayor", "updated_at": "2026-02-28T02:54:58Z", "closed_at": "2026-02-28T02:50:44Z", "close_reason": "Completed with no code changes (already fixed or pushed directly to main)", "dependencies": [{"issue_id": "gt-8hqw", "depends_on_id": "gt-wisp-gsmbb", "type": "blocks", "created_at": "2026-02-27T18:43:14Z", "created_by": "mayor", "metadata": "{}"}], "dependency_count": 1, "dependent_count": 0, "comment_count": 0}
{"id": "gt-bylf", "title": "Code review: session/daemon/boot for ZFC violations", "description": "Review internal/session/, internal/daemon/, internal/boot/ for ZFC violations. The daemon should be dumb transport — it pokes the deacon, nothing more. Look for: daemon making intelligent decisions, session code inferring state from PID/tmux/branch patterns, boot doing more than spawning/observing. Hardcoded thresholds, string matching on output, Go code that should be agent judgment. File beads for each issue found.", "design": "# ZFC Code Review: session/daemon/boot\n\n## Executive Summary\n\n56 ZFC violations found across three packages. The daemon is the worst offender with 38 violations, having evolved far beyond its \"dumb transport\" mandate into an intelligent controller.\n\n## Findings by Package\n\n### internal/session/ — 7 violations (3 medium, 4 low)\n**Assessment: Relatively ZFC-compliant.** Most violations are in bootstrap-only paths where Go must observe because no agent is running yet.\n\nKey issues:\n- **startup.go:96-113** (MEDIUM): Topic string matching decides what instructions to inject into agent prompts\n- **lifecycle.go:359** (MEDIUM): IsAgentAlive liveness check from PID/process signals\n- **lifecycle.go:233-235** (MEDIUM): AcceptStartupDialogs string-matches pane output (\"trust this folder\", \"Bypass Permissions mode\")\n- **lifecycle.go/town.go** (LOW): Hardcoded timeouts (ClaudeStartTimeout=60s, GracefulShutdownTimeout=3s)\n- **pidtrack.go** (LOW): PID-based state inference (defense-in-depth, documented as best-effort)\n\n### internal/daemon/ — 38 violations (12 high, 18 medium, 8 low)\n**Assessment: Major ZFC violator.** The daemon has become an intelligent controller.\n\nHIGH severity (12):\n- **doctor_dog.go:27-43,539-584**: Automated responses based on hardcoded thresholds (latency>5s→escalate, orphans>20→janitor, backup>1hr→sync)\n- **doctor_dog.go:328-401**: Zombie detection via PID + command line string matching (pgrep -f \"dolt sql-server\", port pattern matching)\n- **daemon.go:1556-1568**: isGasTownDaemon infers identity from ps command output string matching\n- **dolt.go:339-351**: isDoltSqlServer same pattern — ps + strings.Contains\n- **handler.go:16-32,86-182**: Dog lifecycle decisions with hardcoded timeouts (1hr idle→kill session, 4hr idle→remove, 2hr working→\"stuck\")\n- **dolt_remotes.go:107-112**: Refuses to push databases matching test prefixes (string matching policy)\n- **restart_tracker.go:33-40**: Full crash-loop detection with hardcoded backoff (5 restarts in 15min = crash loop)\n- **daemon.go:1034-1043**: Heartbeat staleness >10min → auto-restart Deacon\n- **daemon.go:1088-1095,1140-1147**: Hung session detection with hardcoded 30min threshold → auto-kill\n- **lifecycle.go:907,1048**: GUPP violation detection with hardcoded 30min timeout\n- **daemon.go:118-121**: Mass death detection (3 deaths in 30s = mass death)\n- **daemon.go:1772-1787**: Spawning guard — 5min stale spawning state = failed\n\nMEDIUM severity (18): String matching on output (dog_molecule step discovery, parseWispID, Dolt backup parsing, lifecycle identity parsing, isReadOnlyError), hardcoded policy (test pollution regex patterns, scrub WHERE clause, spike detection 20% threshold, consecutive failure escalation at 3, wisp alert at 500, compactor at 10000 commits, Dolt connection count 50/80%, backup stale 2hr, latency 1s, DB count buffer +3)\n\n### internal/boot/ (+ internal/cmd/boot.go) — 11 violations (3 high, 4 medium, 4 low)\n**Assessment: Split personality.** boot.go itself is clean, but cmd/boot.go implements a full Go decision engine.\n\nHIGH severity (3):\n- **cmd/boot.go:24**: Hardcoded 30min deaconRestartThreshold\n- **cmd/boot.go:282-381**: runDegradedTriage — full multi-level decision tree in Go (missing→start, very stale+>30m→kill, stale→nudge, fresh+backoff→skip, no hook→nudge idle, hook+stale 15m→nudge)\n- **cmd/boot.go:372**: Hardcoded 15min molecule staleness threshold\n\nMEDIUM severity (4):\n- **cmd/boot.go:387-409**: isDeaconInBackoff — string-match bead labels (\"idle:\") to infer state\n- **cmd/boot.go:413-436**: getDeaconHookBead — query bead slots in Go to determine activity\n- **cmd/boot.go:443-476**: getMoleculeLastActivity — parse molecule steps in Go to assess progress\n- **deacon/heartbeat.go:14-21**: Hardcoded staleness thresholds (5min stale, 15min very stale)\n\n**Structural issue**: `gt boot triage` always runs runDegradedTriage regardless of --degraded flag, so even when Boot agent runs `gt boot triage`, all intelligence is in Go, making the agent a thin wrapper.\n\n## Core Architectural Issue\n\nThe daemon has evolved far beyond \"pokes the deacon, nothing more.\" It now:\n- Runs health monitoring with automated responses (doctor_dog)\n- Makes kill/restart decisions based on inferred session state\n- Implements crash-loop detection with exponential backoff\n- Detects and filters \"test pollution\" using regex patterns\n- Implements anomaly detection (spike detection) with hardcoded thresholds\n- Manages dog lifecycle with hardcoded timeouts\n- Parses process command lines to infer identity\n- Makes GUPP violation judgments\n\n## Recommendations\n\n1. **Daemon**: Extract all decision-making into agent-observable reports. Daemon collects metrics; agents decide actions.\n2. **Boot**: Make `gt boot triage` emit observations, not decisions. Let the Boot agent interpret and decide.\n3. **Session**: Bootstrap exceptions are acceptable (no agent to delegate to), but document the boundary explicitly.\n4. **Thresholds**: Move all hardcoded thresholds to configuration (beads or config files).", "status": "closed", "priority": 2, "issue_type": "task", "assignee": "gastown/polecats/rictus", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-28T02:41:51Z", "created_by": "mayor", "updated_at": "2026-02-28T02:54:39Z", "closed_at": "2026-02-28T02:49:03Z", "close_reason": "Completed with no code changes (already fixed or pushed directly to main)", "dependencies": [{"issue_id": "gt-bylf", "depends_on_id": "gt-wisp-ukm4b", "type": "blocks", "created_at": "2026-02-27T18:42:57Z", "created_by": "mayor", "metadata": "{}"}], "dependency_count": 1, "dependent_count": 0, "comment_count": 0}
{"id": "gt-iz0l", "title": "Code review: dog package for hardcoded dog names/types", "description": "Review internal/dog/ for ZFC violations. Dogs should be fully formula-driven but may have hardcoded dog names, specific dog type checks (reaper, doctor, janitor etc), or hardcoded behavior branching. Look for: specific dog name strings, hardcoded plugin names, Go code deciding what a dog should do instead of the agent deciding via formula. File beads for each issue found.", "notes": "## Code Review Findings: internal/dog/ ZFC Compliance\n\n### Result: CLEAN — No ZFC violations found in internal/dog/\n\n### Files Reviewed\n- internal/dog/types.go (42 lines) — Generic Dog/DogState structs\n- internal/dog/manager.go (693 lines) — CRUD lifecycle, all operations parameterized by name\n- internal/dog/session_manager.go (247 lines) — Tmux session lifecycle, generic\n- internal/dog/health.go (135 lines) — Health checks (zombie/hung/orphan detection), generic\n- internal/cmd/dog.go (1174 lines) — CLI layer, all commands work on arbitrary dog names\n- internal/cmd/sling_dog.go (242 lines) — Dispatch helpers, pool management\n- internal/daemon/handler.go (279 lines) — Dog lifecycle/plugin dispatch from daemon\n\n### ZFC Check Results\n\n1. **Hardcoded dog names**: NONE in behavioral code. 'alpha' appears only in doc comments (types.go:22) and test fixtures. 'boot' appears in one explanatory comment (manager.go:300).\n\n2. **Specific dog type checks**: NONE. No Type/Kind field exists on Dog struct. No name-based switch/case/if branching anywhere in the package.\n\n3. **Hardcoded plugin names**: NONE. The dog package has zero awareness of plugins, formulas, or what any dog does.\n\n4. **Go code deciding dog behavior**: NONE in internal/dog/. The package is purely infrastructure — lifecycle, state, sessions, health. All behavior differentiation happens outside:\n   - internal/daemon/{doctor,compactor,janitor}_dog.go (imperative Go for critical dogs)\n   - Plugin system (formula dispatch for non-critical dogs)\n\n### Minor Notes\n- generateDogName() in sling_dog.go uses hardcoded NATO phonetic names for auto-naming, but this is naming convention only, not behavior branching.\n- The daemon package's imperative dog implementations (Doctor, Reaper, Compactor) are a deliberate architecture choice documented in docs/design/dog-execution-model.md, not a ZFC violation.\n\n### Conclusion\nThe internal/dog/ package follows ZFC principles well — dogs are generic workers whose behavior is determined by their formula/plugin assignment, not by hardcoded Go logic in this package.", "status": "closed", "priority": 2, "issue_type": "task", "assignee": "gastown/polecats/slit", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-28T02:41:48Z", "created_by": "mayor", "updated_at": "2026-02-28T02:54:10Z", "closed_at": "2026-02-28T02:45:18Z", "close_reason": "Completed with no code changes (already fixed or pushed directly to main)", "dependencies": [{"issue_id": "gt-iz0l", "depends_on_id": "gt-wisp-j6655", "type": "blocks", "created_at": "2026-02-27T18:42:42Z", "created_by": "mayor", "metadata": "{}"}], "dependency_count": 1, "dependent_count": 0, "comment_count": 0}
{"id": "gt-08iv", "title": "Code review: polecat/witness/refinery for hardcoded role checks", "description": "Review internal/polecat/, internal/witness/, internal/refinery/ for ZFC violations. Look for: hardcoded role names, string comparisons against agent types, Go code that infers agent state from signals (PID, tmux, branch patterns) instead of reading beads state. Anything that should be a formula or config-driven but is hardcoded in Go. File beads for each issue found.", "notes": "ZFC Review Complete: Found 27 violations across 3 packages.\n\nPOLECAT (10 violations):\n- Error string matching (isDoltOptimisticLockError/isDoltConfigError + health checks)\n- Hardcoded role names (ListPolecats filter + ReservedInfraAgentNames)\n- Hardcoded state/status strings (stuck/awaiting-gate/tombstone/hooked/open/idle)\n- PID signal inference for liveness (isSessionProcessDead)\n\nWITNESS (10 violations):\n- Hardcoded 30-min hung threshold (HungSessionThresholdMinutes)\n- AssessHelpRequest triage engine (Go-level decision making via string matching)\n- Zombie state detection with hardcoded strings (isZombieState, receiptVerdictForZombie)\n- Tmux pane screen-scraping (DetectStalledPolecats)\n- Description/output string parsing (cleanup_status, MR branch, bd errors, bd create output)\n- Hardcoded Mayor role + cleanup policy (handleMergedCleanupStatus)\n\nREFINERY (7 violations):\n- findTownRoot directory inference\n- Hardcoded stale-claim thresholds + MaxRetryCount\n- Convoy description text parsing for metadata\n- Hardcoded severity/priority logic in anomaly detection\n\nFiling individual beads for each logical group.", "status": "closed", "priority": 2, "issue_type": "task", "assignee": "gastown/polecats/nux", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-28T02:41:46Z", "created_by": "mayor", "updated_at": "2026-02-28T02:54:22Z", "closed_at": "2026-02-28T02:51:36Z", "close_reason": "Completed with no code changes (already fixed or pushed directly to main)", "dependencies": [{"issue_id": "gt-08iv", "depends_on_id": "gt-wisp-st5bf", "type": "blocks", "created_at": "2026-02-27T18:42:25Z", "created_by": "mayor", "metadata": "{}"}], "dependency_count": 1, "dependent_count": 0, "comment_count": 0}
{"id": "gt-l5js", "title": "gt down: sweep old -L gt socket sessions during shutdown", "description": "## Bug\n\n`gt down --all` fails to kill sessions on the old `-L gt` tmux socket after the socket migration to `default`.\n\n### Root Cause\n\n`session/registry.go:119` now sets `SetDefaultSocket(\"default\")`, so `gt down` only operates on the default socket. But sessions created by old code (or the old deacon tmux parent) live on the `-L gt` named socket.\n\nThe cross-socket sweep (`sweepCrossSocketZombies` in `down.go:570`) is a no-op when `townSocket == \"default\"` — it was written for the old direction (sweep default when town socket was named), but now it is backwards.\n\n### Impact\n\nAfter `gt down` + `gt start`, every crew member gets a duplicate session (old on `-L gt`, new on `default`). On 2026-02-27 this resulted in 42 Claude sessions running simultaneously (~15-25GB RAM, burning tokens).\n\n### Fix\n\n`gt down --all` should sweep the `-L gt` socket in addition to the current socket. Options:\n1. Invert `sweepCrossSocketZombies` to sweep `-L gt` when town socket is `default`\n2. Make it bidirectional — always sweep both sockets\n3. Simplest: just add `tmux -L gt kill-server` equivalent when doing `--all` or `--nuke`\n\n### Files\n- `gastown/mayor/rig/internal/cmd/down.go` — `sweepCrossSocketZombies()` lines 568-598\n- `gastown/mayor/rig/internal/session/registry.go:119` — `SetDefaultSocket(\"default\")`\n- Recovery doc: `mayor/RECOVERY-2026-02-27.md`", "status": "open", "priority": 2, "issue_type": "task", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-28T02:30:40Z", "created_by": "Steve Yegge", "updated_at": "2026-02-28T02:30:40Z", "labels": ["bug", "p1"], "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-u0n0", "title": "--help", "status": "closed", "priority": 2, "issue_type": "task", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-28T02:18:09Z", "created_by": "gastown/polecats/slit", "updated_at": "2026-02-28T03:52:48Z", "closed_at": "2026-02-28T03:52:48Z", "close_reason": "help artifact pollution", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-veoe", "title": "Pre-existing test failure: TestInitRegistry_SocketFromTownName in internal/session (default socket mismatch)", "status": "open", "priority": 2, "issue_type": "bug", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-28T02:15:30Z", "created_by": "gastown/polecats/nux", "updated_at": "2026-02-28T02:15:30Z", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-59sx", "title": "Pre-existing test failure: TestVerifyStartupNudgeDelivery_IdleAgent in internal/polecat", "status": "open", "priority": 2, "issue_type": "bug", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-28T02:15:29Z", "created_by": "gastown/polecats/nux", "updated_at": "2026-02-28T02:15:29Z", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-hdhp", "title": "Pre-existing test failure: TestInitRegistry_SocketFromTownName", "description": "Tests in internal/session/registry_socket_test.go fail on base branch. The SocketFromTownName test cases for spaces and caps return 'default' instead of expected values.", "status": "closed", "priority": 2, "issue_type": "bug", "assignee": "gastown/polecats/slit", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-28T02:15:19Z", "created_by": "gastown/polecats/furiosa", "updated_at": "2026-02-28T02:19:19Z", "closed_at": "2026-02-28T02:18:37Z", "close_reason": "Closed", "dependencies": [{"issue_id": "gt-hdhp", "depends_on_id": "gt-wisp-qj5rn", "type": "blocks", "created_at": "2026-02-27T18:16:11Z", "created_by": "mayor", "metadata": "{}"}], "dependency_count": 1, "dependent_count": 0, "comment_count": 0}
{"id": "gt-ergp", "title": "--help", "status": "closed", "priority": 2, "issue_type": "task", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-28T02:13:13Z", "created_by": "gastown/polecats/nux", "updated_at": "2026-02-28T02:16:02Z", "closed_at": "2026-02-28T02:16:02Z", "close_reason": "Pollution: --help parsed as title (bd-2c0 fix shipped)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-udub", "title": "--help", "status": "closed", "priority": 2, "issue_type": "task", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-28T02:13:07Z", "created_by": "gastown/polecats/furiosa", "updated_at": "2026-02-28T02:16:02Z", "closed_at": "2026-02-28T02:16:02Z", "close_reason": "Pollution: --help parsed as title (bd-2c0 fix shipped)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-g72j", "title": "--help", "status": "closed", "priority": 2, "issue_type": "task", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-28T02:05:43Z", "created_by": "gastown/refinery", "updated_at": "2026-02-28T02:10:22Z", "closed_at": "2026-02-28T02:10:22Z", "close_reason": "Pollution: --help parsed as title (bd-2c0 fix shipped)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-d90o", "title": "--help", "status": "closed", "priority": 2, "issue_type": "task", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-28T02:00:12Z", "created_by": "gastown/refinery", "updated_at": "2026-02-28T02:10:22Z", "closed_at": "2026-02-28T02:10:22Z", "close_reason": "Pollution: --help parsed as title (bd-2c0 fix shipped)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-rcsr", "title": "--help", "status": "closed", "priority": 2, "issue_type": "task", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-28T01:48:50Z", "created_by": "gastown/polecats/rictus", "updated_at": "2026-02-28T02:10:22Z", "closed_at": "2026-02-28T02:10:22Z", "close_reason": "Pollution: --help parsed as title (bd-2c0 fix shipped)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-jvcu", "title": "--help", "status": "closed", "priority": 2, "issue_type": "task", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-28T01:38:45Z", "created_by": "gastown/polecats/furiosa", "updated_at": "2026-02-28T02:10:22Z", "closed_at": "2026-02-28T02:10:22Z", "close_reason": "Pollution: --help parsed as title (bd-2c0 fix shipped)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-3p95", "title": "--help", "status": "closed", "priority": 2, "issue_type": "task", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-28T01:32:58Z", "created_by": "gastown/polecats/slit", "updated_at": "2026-02-28T02:10:22Z", "closed_at": "2026-02-28T02:10:22Z", "close_reason": "Pollution: --help parsed as title (bd-2c0 fix shipped)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-3o6u", "title": "--help", "status": "closed", "priority": 2, "issue_type": "task", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-28T00:55:47Z", "created_by": "gastown/polecats/furiosa", "updated_at": "2026-02-28T02:10:22Z", "closed_at": "2026-02-28T02:10:22Z", "close_reason": "Pollution: --help parsed as title (bd-2c0 fix shipped)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-bifb", "title": "--help", "status": "closed", "priority": 2, "issue_type": "task", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-28T00:54:05Z", "created_by": "gastown/polecats/nux", "updated_at": "2026-02-28T02:10:22Z", "closed_at": "2026-02-28T02:10:22Z", "close_reason": "Pollution: --help parsed as title (bd-2c0 fix shipped)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-p7uq.2", "title": "refactor(refinery): move named GateConfig gates from Go exec to formula steps", "description": "attached_formula: mol-polecat-work\n\nThe GateConfig system (engineer.go runGate/runGates) executes arbitrary shell commands via exec.Command and interprets exit codes as pass/fail. Replace with formula steps where the Refinery agent runs each configured gate command and applies judgment. The config parsing (MergeQueueConfig, GateConfig struct) stays as Go transport — only the execution and decision logic moves to the agent.", "notes": "Implemented: Moved named GateConfig gates from Go exec.Command to formula steps. Removed runGate/runGates/GateResult. Added gt refinery gates CLI command (JSON output). Updated mol-refinery-patrol formula run-tests step to read and execute named gates. Kept legacy runTests path for backward compat. All tests pass.", "status": "closed", "priority": 2, "issue_type": "task", "assignee": "gastown/polecats/rictus", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-28T00:39:54Z", "created_by": "gastown/crew/max", "updated_at": "2026-02-28T01:52:23Z", "closed_at": "2026-02-28T01:48:28Z", "close_reason": "Closed", "labels": ["refactor", "refinery", "zfc"], "dependencies": [{"issue_id": "gt-p7uq.2", "depends_on_id": "gt-p7uq", "type": "parent-child", "created_at": "2026-02-27T16:39:53Z", "created_by": "gastown/crew/max", "metadata": "{}"}, {"issue_id": "gt-p7uq.2", "depends_on_id": "gt-wisp-7yib3", "type": "blocks", "created_at": "2026-02-27T17:27:12Z", "created_by": "mayor", "metadata": "{}"}], "dependency_count": 1, "dependent_count": 0, "comment_count": 0, "parent": "gt-p7uq"}
{"id": "gt-p7uq.1", "title": "refactor(refinery): move test_command execution from Go to formula step", "description": "attached_formula: mol-polecat-work\n\nThe run-tests step in mol-refinery-patrol currently delegates to Go's Engineer.runTests() which uses exec.Command. Move this to a formula step where the Refinery agent runs the test command, reads the output, and decides pass/fail. The agent can distinguish pre-existing failures from branch-caused failures — something Go exit codes cannot do.", "notes": "Implemented: Removed Engineer.runTests() and ValidateTestCommand() from Go merge path in engineer.go. Removed engineer_security_test.go (tests for removed functions). Test execution now handled by run-tests formula step in mol-refinery-patrol. Gates system preserved. Config fields preserved for formula variable injection.", "status": "closed", "priority": 2, "issue_type": "task", "assignee": "gastown/polecats/slit", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-28T00:39:51Z", "created_by": "gastown/crew/max", "updated_at": "2026-02-28T01:40:18Z", "closed_at": "2026-02-28T01:32:32Z", "close_reason": "Closed", "labels": ["refactor", "refinery", "zfc"], "dependencies": [{"issue_id": "gt-p7uq.1", "depends_on_id": "gt-p7uq", "type": "parent-child", "created_at": "2026-02-27T16:39:50Z", "created_by": "gastown/crew/max", "metadata": "{}"}, {"issue_id": "gt-p7uq.1", "depends_on_id": "gt-wisp-4lb07", "type": "blocks", "created_at": "2026-02-27T17:27:03Z", "created_by": "mayor", "metadata": "{}"}], "dependency_count": 1, "dependent_count": 0, "comment_count": 0, "parent": "gt-p7uq"}
{"id": "gt-p7uq", "title": "refactor(refinery): migrate Go-executed quality gates to formula steps", "description": "The Refinery engineer.go currently runs quality checks via exec.Command (runGates/runGate) — Go code executing shell commands and making pass/fail decisions from exit codes. This is a ZFC violation: Go is deciding, not the agent.\n\nMigrate the following Go-executed gates to formula steps in mol-refinery-patrol.formula.toml:\n\n1. setup_command (e.g., pnpm install)\n2. typecheck_command (e.g., tsc --noEmit)\n3. lint_command (e.g., eslint .)\n4. build_command (e.g., go build ./...)\n5. test_command (e.g., go test ./...)\n6. Named gates (GateConfig map)\n\nThe Refinery agent (Claude) should read the formula, run these commands itself via its shell tool, interpret results, and make the judgment call on whether to proceed with the merge.\n\nKey files:\n- internal/refinery/engineer.go (GateConfig, runGate, runGates, MergeQueueConfig)\n- internal/formula/formulas/mol-refinery-patrol.formula.toml (add quality-check steps)\n\nThe Go code for parsing config and the MergeQueueConfig struct can stay — that is transport (reading config). The exec.Command execution and pass/fail logic must move to the agent.\n\nContext: PR #2132 (Guardian) was directed to use formula steps instead of adding more Go-executed gates. This refactoring aligns the existing gates with that same ZFC principle.", "status": "closed", "priority": 2, "issue_type": "task", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-28T00:39:42Z", "created_by": "gastown/crew/max", "updated_at": "2026-02-28T02:11:07Z", "closed_at": "2026-02-28T02:11:07Z", "close_reason": "All 3 children completed: gt-p7uq.1 (test_command), gt-p7uq.2 (named gates), gt-p7uq.3 (remove exec.Command)", "labels": ["refactor", "refinery", "zfc"], "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-ky9u", "title": "--help", "status": "closed", "priority": 2, "issue_type": "task", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-28T00:39:38Z", "created_by": "gastown/polecats/capable", "updated_at": "2026-02-28T00:47:49Z", "closed_at": "2026-02-28T00:47:49Z", "close_reason": "Pollution: --help parsed as title (bd-2c0)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-mcpf", "title": "--help", "status": "closed", "priority": 2, "issue_type": "task", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-28T00:35:19Z", "created_by": "gastown/polecats/slit", "updated_at": "2026-02-28T00:47:49Z", "closed_at": "2026-02-28T00:47:49Z", "close_reason": "Pollution: --help parsed as title (bd-2c0)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-41pb", "title": "--help", "status": "closed", "priority": 2, "issue_type": "task", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-28T00:34:05Z", "created_by": "gastown/polecats/nux", "updated_at": "2026-02-28T00:47:49Z", "closed_at": "2026-02-28T00:47:49Z", "close_reason": "Pollution: --help parsed as title (bd-2c0)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-wbuz", "title": "--help", "status": "closed", "priority": 2, "issue_type": "task", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-28T00:33:04Z", "created_by": "gastown/refinery", "updated_at": "2026-02-28T00:47:49Z", "closed_at": "2026-02-28T00:47:49Z", "close_reason": "Pollution: --help parsed as title (bd-2c0)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-vpy9", "title": "LIFECYCLE:Shutdown beads accumulate as open issues in HQ", "description": "When polecats get recycled by the witness (or slung over existing polecats), LIFECYCLE:Shutdown wisps are created in HQ and left open. These accumulate rapidly — found 7 open shutdown beads for polecats that were already re-slung with new work. Either: (1) these should auto-close when the polecat is recycled, or (2) they shouldn't be created at all since the polecat identity persists.", "notes": "Fix: Added lifecycle:, merged, merge_ready, merge_failed to shouldBeWisp() auto-detection prefixes in internal/mail/router.go. These protocol messages are now stored as ephemeral wisps instead of permanent beads, preventing accumulation in HQ. Also added MERGED, MERGE_READY, and MERGE_FAILED which had the same issue.", "status": "closed", "priority": 2, "issue_type": "bug", "assignee": "gastown/polecats/capable", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-28T00:30:20Z", "created_by": "mayor", "updated_at": "2026-02-28T00:43:08Z", "closed_at": "2026-02-28T00:40:04Z", "close_reason": "Closed", "dependencies": [{"issue_id": "gt-vpy9", "depends_on_id": "gt-wisp-5y1q", "type": "blocks", "created_at": "2026-02-27T16:31:08Z", "created_by": "mayor", "metadata": "{}"}], "dependency_count": 1, "dependent_count": 0, "comment_count": 0}
{"id": "gt-zy6t", "title": "--help", "status": "closed", "priority": 2, "issue_type": "task", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-28T00:30:20Z", "created_by": "gastown/polecats/rictus", "updated_at": "2026-02-28T00:47:49Z", "closed_at": "2026-02-28T00:47:49Z", "close_reason": "Pollution: --help parsed as title (bd-2c0)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-6xs3", "title": "--help", "status": "closed", "priority": 2, "issue_type": "task", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-28T00:29:50Z", "created_by": "gastown/polecats/nux", "updated_at": "2026-02-28T00:47:49Z", "closed_at": "2026-02-28T00:47:49Z", "close_reason": "Pollution: --help parsed as title (bd-2c0)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-61em", "title": "Refinery files duplicate bugs without checking existing issues", "description": "The refinery auto-files bugs for test failures on main (bd-6ie, bd-fu1) without checking if they already exist (bd-7z5, bd-qy0). Add a pre-filing duplicate check: before creating a new test-failure bug, search for existing open issues with similar titles. The bd duplicates command already has content-hashing logic that could be reused.", "notes": "Implemented duplicate check for refinery bug filing. Two-layer fix: (1) Updated mol-refinery-patrol formula to require bd search before bd create for pre-existing failures. (2) Added Search(), FindOpenBugsByTitle(), CreateIfNoDuplicate(), and normalizeBugTitle() to beads Go package for programmatic dedup. All tests pass.", "status": "closed", "priority": 2, "issue_type": "bug", "assignee": "gastown/polecats/furiosa", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-28T00:21:32Z", "created_by": "mayor", "updated_at": "2026-02-28T01:26:00Z", "closed_at": "2026-02-28T01:24:24Z", "close_reason": "Completed with no code changes (already fixed or pushed directly to main)", "dependencies": [{"issue_id": "gt-61em", "depends_on_id": "gt-wisp-fcv6m", "type": "blocks", "created_at": "2026-02-27T17:23:03Z", "created_by": "mayor", "metadata": "{}"}], "dependency_count": 1, "dependent_count": 0, "comment_count": 0}
{"id": "gt-z5je", "title": "TestRunBdCmd_ReturnsStdoutOnNonZeroAndTimeout still flaky after stabilization attempt", "description": "fetcher_test.go:547 - non-zero exit with stdout subtest times out intermittently. Previous fix attempt in c9ee31db did not fully resolve. Pre-existing on main.", "notes": "Fix: widened non-timeout test case timeouts from 2s/500ms to 30s. These tests verify exit-code behavior, not timeout behavior. Under CI load, process startup alone took 1.78s-5.89s for trivial shell scripts, causing intermittent false timeout failures. Timeout subtests retain 200ms deadlines.", "status": "closed", "priority": 2, "issue_type": "bug", "assignee": "gastown/polecats/rictus", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-28T00:17:57Z", "created_by": "gastown/refinery", "updated_at": "2026-02-28T00:43:49Z", "closed_at": "2026-02-28T00:33:50Z", "dependencies": [{"issue_id": "gt-z5je", "depends_on_id": "gt-wisp-xu06", "type": "blocks", "created_at": "2026-02-27T16:26:56Z", "created_by": "mayor", "metadata": "{}"}], "dependency_count": 1, "dependent_count": 0, "comment_count": 0}
{"id": "gt-m24x", "title": "--help", "status": "closed", "priority": 2, "issue_type": "task", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-28T00:15:15Z", "created_by": "gastown/refinery", "updated_at": "2026-02-28T00:16:17Z", "closed_at": "2026-02-28T00:16:17Z", "close_reason": "Test/noise pollution", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-tm4n", "title": "--help", "status": "closed", "priority": 2, "issue_type": "task", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-27T23:59:59Z", "created_by": "gastown/polecats/capable", "updated_at": "2026-02-28T00:15:12Z", "closed_at": "2026-02-28T00:15:12Z", "close_reason": "--help noise pollution", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-gzx7", "title": "--help", "status": "closed", "priority": 2, "issue_type": "task", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-27T23:58:18Z", "created_by": "gastown/polecats/slit", "updated_at": "2026-02-28T00:15:12Z", "closed_at": "2026-02-28T00:15:12Z", "close_reason": "--help noise pollution", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-wktj", "title": "Maintenance escalation: check-engine-light when commit count high", "description": "When no maintenance window is configured and any DB exceeds 2000 commits, the daemon escalates to the human via the normal escalation channel. Not a crash — a nudge suggesting 'gt maintain' or 'gt config set maintenance.window'. Include commit counts per DB and estimated downtime in the message. Rate-limit to once per 24h to avoid nagging. See docs/design/dolt-storage.md 'Layer 3: Escalation' section.", "status": "closed", "priority": 2, "issue_type": "feature", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-27T23:50:54Z", "created_by": "mayor", "updated_at": "2026-02-28T02:10:23Z", "closed_at": "2026-02-28T02:10:23Z", "close_reason": "Superseded by gt-kk21 (Compactor Dog with agent judgment instead of hard threshold)", "dependencies": [{"issue_id": "gt-wktj", "depends_on_id": "gt-ghl6", "type": "blocks", "created_at": "2026-02-27T15:51:12Z", "created_by": "mayor", "metadata": "{}"}], "dependency_count": 1, "dependent_count": 0, "comment_count": 0}
{"id": "gt-zhc4", "title": "Plugin run: rebuild-gt", "description": "Rebuilt gt: 650e42d0 → 4d3098a8 (3 commits ahead of binary)", "status": "closed", "priority": 2, "issue_type": "task", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-27T23:31:34Z", "created_by": "dog", "updated_at": "2026-02-27T23:52:56Z", "closed_at": "2026-02-27T23:52:56Z", "close_reason": "Noise/pollution — backlog cleanup", "labels": ["plugin:rebuild-gt", "result:success", "rig:gastown", "type:plugin-run"], "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-v0f5", "title": "--help", "status": "closed", "priority": 2, "issue_type": "task", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-27T23:23:18Z", "created_by": "gastown/polecats/nux", "updated_at": "2026-02-27T23:52:56Z", "closed_at": "2026-02-27T23:52:56Z", "close_reason": "Noise/pollution — backlog cleanup", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-l77u", "title": "--help", "status": "closed", "priority": 2, "issue_type": "task", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-27T23:16:34Z", "created_by": "gastown/polecats/nux", "updated_at": "2026-02-27T23:52:56Z", "closed_at": "2026-02-27T23:52:56Z", "close_reason": "Noise/pollution — backlog cleanup", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-ba93", "title": "--help", "status": "closed", "priority": 2, "issue_type": "task", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-27T23:16:26Z", "created_by": "gastown/polecats/nux", "updated_at": "2026-02-27T23:52:56Z", "closed_at": "2026-02-27T23:52:56Z", "close_reason": "Noise/pollution — backlog cleanup", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-4sb1", "title": "--help", "status": "closed", "priority": 2, "issue_type": "task", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-27T23:13:08Z", "created_by": "gastown/polecats/furiosa", "updated_at": "2026-02-27T23:52:56Z", "closed_at": "2026-02-27T23:52:56Z", "close_reason": "Noise/pollution — backlog cleanup", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-42qm", "title": "--help", "status": "closed", "priority": 2, "issue_type": "task", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-27T23:12:01Z", "created_by": "gastown/polecats/nux", "updated_at": "2026-02-27T23:52:56Z", "closed_at": "2026-02-27T23:52:56Z", "close_reason": "Noise/pollution — backlog cleanup", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-kv40", "title": "--help", "status": "closed", "priority": 2, "issue_type": "task", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-27T23:11:55Z", "created_by": "gastown/polecats/nux", "updated_at": "2026-02-27T23:52:56Z", "closed_at": "2026-02-27T23:52:56Z", "close_reason": "Noise/pollution — backlog cleanup", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-3hki", "title": "DOG_DONE: plugin:dolt-backup", "description": "Plugin dolt-backup executed successfully. Backup skipped due to 24-hour cooldown gate (recent backup at 14:25). Result recorded in gt-xzbk.", "status": "closed", "priority": 2, "issue_type": "task", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-27T22:57:41Z", "created_by": "dog", "updated_at": "2026-02-27T23:52:57Z", "closed_at": "2026-02-27T23:52:57Z", "close_reason": "Noise/pollution — backlog cleanup", "labels": ["from:dog", "gt:message", "plugin:dolt-backup", "result:skip"], "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-xzbk", "title": "dolt-backup: SKIPPED (recent backup exists, 24h cooldown active)", "description": "dolt-backup: SKIPPED (recent backup exists, 24h cooldown active)", "status": "closed", "priority": 2, "issue_type": "chore", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-27T22:57:12Z", "created_by": "dog", "updated_at": "2026-02-27T23:52:57Z", "closed_at": "2026-02-27T23:52:57Z", "close_reason": "Noise/pollution — backlog cleanup", "labels": ["plugin:dolt-backup", "result:skip", "type:plugin-run"], "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-u12n", "title": "Move Janitor Dog from ticker to plugin dispatch", "description": "First test case for formula+agent execution model. Create plugins/janitor/plugin.md with cooldown gate. Remove dedicated ticker from daemon, let handleDogs() dispatch to idle dog. Depends on design doc.", "status": "closed", "priority": 2, "issue_type": "task", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-27T22:02:51Z", "created_by": "mayor", "updated_at": "2026-02-27T22:14:26Z", "closed_at": "2026-02-27T22:14:26Z", "close_reason": "Removed dedicated janitor ticker from daemon.go. Janitor now dispatched only via plugin system (dolt-janitor/plugin.md) through handleDogs()/dispatchPlugins(). Plugin.md was already in place.", "dependencies": [{"issue_id": "gt-u12n", "depends_on_id": "gt-z3sc", "type": "blocks", "created_at": "2026-02-27T14:03:03Z", "created_by": "mayor", "metadata": "{}"}], "dependency_count": 1, "dependent_count": 0, "comment_count": 0}
{"id": "gt-14mv", "title": "Extract Doctor Dog health checks into reusable health package", "description": "Doctor Dog checks (TCP, latency, DB count, GC, zombie, backup, disk) are on *Daemon receiver. Extract to internal/health/ package so gt health CLI can reuse without duplicating code. Modify doctor_dog.go to delegate, modify health.go to consume.", "status": "closed", "priority": 2, "issue_type": "task", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-27T22:02:48Z", "created_by": "mayor", "updated_at": "2026-02-27T22:13:15Z", "closed_at": "2026-02-27T22:13:15Z", "close_reason": "Created internal/health/ package with reusable checks: TCPCheck, LatencyCheck, DatabaseCount, FindZombieServers, BackupFreshness, JSONLGitFreshness, DirSize. Ready for Doctor Dog and gt health to consume.", "dependencies": [{"issue_id": "gt-14mv", "depends_on_id": "gt-kali", "type": "blocks", "created_at": "2026-02-27T14:03:03Z", "created_by": "mayor", "metadata": "{}"}], "dependency_count": 1, "dependent_count": 0, "comment_count": 0}
{"id": "gt-z3sc", "title": "Design doc: Dog execution model — imperative vs formula dispatch", "description": "Clarify the confusion: some dogs have Go code (Doctor, Reaper — work), some are formula-only (Compactor, Janitor — broken via tickers). Define target model: which dogs should be ticker+Go vs plugin+agent dispatch. Migration path from Go to formula+agent. New file: docs/design/dog-execution-model.md.", "status": "closed", "priority": 2, "issue_type": "task", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-27T22:02:45Z", "created_by": "mayor", "updated_at": "2026-02-27T22:12:29Z", "closed_at": "2026-02-27T22:12:29Z", "close_reason": "Design doc created at docs/design/dog-execution-model.md. Key decision: keep imperative Go for reliability-critical dogs, plugin dispatch only for enhancement/opportunistic dogs. Janitor is the prototype.", "dependency_count": 0, "dependent_count": 1, "comment_count": 0}
{"id": "gt-9frv", "title": "Pre-existing test failures: TestSquashJitterZeroDuration and TestSquashJitterContextCancellation", "description": "Tests in internal/cmd/molecule_lifecycle_test.go fail on main. They expect workspace errors but get nil. Lines 69 and 102. These run against the live gastown/refinery identity which has an active patrol, causing the 'no molecule attached' path instead of expected errors. Likely need test isolation or mock workspace.", "status": "closed", "priority": 2, "issue_type": "bug", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-27T21:15:50Z", "created_by": "gastown/refinery", "updated_at": "2026-02-27T21:26:47Z", "closed_at": "2026-02-27T21:26:47Z", "close_reason": "Duplicate of gt-emna (same test failures)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-5kjn", "title": "Flaky test: TestRunBdCmd_ReturnsStdoutOnNonZeroAndTimeout in internal/web", "description": "Test fails intermittently during full test suite runs but passes in isolation. Likely race condition or resource contention when run alongside other tests. File: internal/web/fetcher_test.go:544", "notes": "Fixed three flakiness vectors: (1) replaced t.Setenv PATH mutation with configurable bdBin field on LiveConvoyFetcher, (2) used 'exec sleep' to prevent orphan child processes holding stdout open, (3) increased timeout from 20ms to 200ms for process startup headroom. Also split into subtests and applied same fixes to TestRunCmd_SuccessAndTimeout.", "status": "closed", "priority": 2, "issue_type": "bug", "assignee": "gastown/polecats/nux", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-27T21:07:13Z", "created_by": "gastown/refinery", "updated_at": "2026-02-27T23:29:01Z", "closed_at": "2026-02-27T23:26:00Z", "close_reason": "Closed", "dependencies": [{"issue_id": "gt-5kjn", "depends_on_id": "gt-wisp-9i3m", "type": "blocks", "created_at": "2026-02-27T15:04:35Z", "created_by": "mayor", "metadata": "{}"}], "dependency_count": 1, "dependent_count": 0, "comment_count": 0}
{"id": "gt-rk12", "title": "Prune 219 stale remote polecat branches (one-time cleanup)", "description": "One-time cleanup of accumulated stale polecat branches. 219 branches across origin/gastown/mayor remotes. Safe to delete all except branches belonging to currently active polecats. Script: git branch -r | grep polecat/ | filter out active | xargs git push origin --delete. Run after persistent pool is initialized. See docs/design/persistent-polecat-pool.md Phase 5.", "notes": "Completed: Pruned 31 stale polecat branches (2 from origin, 29 from gastown/mayor rig remote). Original count of 219 had already been partially cleaned. Remaining branches (7 total) all belong to currently active polecats: capable, dementus, furiosa, nux, rictus, slit. Also pruned 29 stale remote tracking refs from mayor remote.", "status": "closed", "priority": 2, "issue_type": "task", "assignee": "gastown/polecats/dementus", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-27T20:49:44Z", "created_by": "mayor", "updated_at": "2026-02-28T00:40:28Z", "closed_at": "2026-02-28T00:33:20Z", "close_reason": "Completed with no code changes (already fixed or pushed directly to main)", "dependencies": [{"issue_id": "gt-rk12", "depends_on_id": "gt-24j2", "type": "blocks", "created_at": "2026-02-27T12:50:24Z", "created_by": "mayor", "metadata": "{}"}, {"issue_id": "gt-rk12", "depends_on_id": "gt-wisp-n4vw", "type": "blocks", "created_at": "2026-02-27T16:29:40Z", "created_by": "mayor", "metadata": "{}"}], "dependency_count": 2, "dependent_count": 1, "comment_count": 0}
{"id": "gt-24j2", "title": "Sandbox sync: DONE->IDLE syncs worktree to main, IDLE->WORKING creates fresh branch", "description": "Implement the sandbox reuse cycle. On DONE->IDLE: git checkout main, git pull, delete old polecat branch. On IDLE->WORKING (gt sling): git checkout -b polecat/<name>/<issue>@<ts> from main. No git worktree add/remove -- just branch operations on an existing worktree. Eliminates the ~5s worktree creation overhead. See docs/design/persistent-polecat-pool.md Phase 3.", "notes": "Implemented Phase 3 sandbox sync: ReuseIdlePolecat() for branch-only IDLE→WORKING transition (no worktree add/remove), old branch deletion in DONE→IDLE, fallback to full repair if branch ops fail.", "status": "closed", "priority": 2, "issue_type": "task", "assignee": "gastown/polecats/furiosa", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-27T20:49:43Z", "created_by": "mayor", "updated_at": "2026-02-28T00:40:13Z", "closed_at": "2026-02-28T00:25:32Z", "close_reason": "Completed with no code changes (already fixed or pushed directly to main)", "dependencies": [{"issue_id": "gt-24j2", "depends_on_id": "gt-hdf8", "type": "blocks", "created_at": "2026-02-27T12:50:24Z", "created_by": "mayor", "metadata": "{}"}, {"issue_id": "gt-24j2", "depends_on_id": "gt-wisp-h83p", "type": "blocks", "created_at": "2026-02-27T16:24:33Z", "created_by": "mayor", "metadata": "{}"}], "dependency_count": 2, "dependent_count": 2, "comment_count": 0}
{"id": "gt-iifg", "title": "gt polecat pool init: create persistent polecat pool per rig", "description": "New command to initialize a fixed pool of polecats for a rig. Creates N polecats with identities (agent beads) and worktrees. Pool size configured in rig.config.json (polecat_pool_size, polecat_names). Polecats start in IDLE state, ready for gt sling dispatch. No more spawn-per-assignment overhead. See docs/design/persistent-polecat-pool.md Phase 2.", "notes": "Implemented gt polecat pool init command (Phase 2 of persistent polecat pool design). Creates N persistent polecats with identities and worktrees, all starting in IDLE state. Added pool_size config to NamepoolConfig. Also added gt polecat pool status command for pool visibility.", "status": "closed", "priority": 2, "issue_type": "feature", "assignee": "gastown/polecats/dementus", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-27T20:49:38Z", "created_by": "mayor", "updated_at": "2026-02-28T00:23:18Z", "closed_at": "2026-02-28T00:05:15Z", "close_reason": "Closed", "dependencies": [{"issue_id": "gt-iifg", "depends_on_id": "gt-hdf8", "type": "blocks", "created_at": "2026-02-27T12:50:20Z", "created_by": "mayor", "metadata": "{}"}, {"issue_id": "gt-iifg", "depends_on_id": "gt-wisp-g45q", "type": "blocks", "created_at": "2026-02-27T15:53:44Z", "created_by": "mayor", "metadata": "{}"}], "dependency_count": 2, "dependent_count": 1, "comment_count": 0}
{"id": "gt-51dx", "title": "gt mail send rate limiting per role", "description": "Implement rate limiting in gt mail send command based on agent role. Every mail creates a permanent bead + Dolt commit. Agents overuse mail for routine comms that should use gt nudge (ephemeral, zero cost). Proposed limits: Polecats 0-1 per session, Dogs 0 (hard block), Witnesses/Refineries protocol-msgs-only (5/session), Deacon escalations-only (3/session), Mayor unlimited. Implementation: check role from GT_ROLE env var or agent bead, enforce limit with clear error pointing to gt nudge. File: gastown/mayor/rig/internal/cmd/mail.go or similar.", "notes": "Implemented per-role rate limiting in gt mail send. New files: mail_ratelimit.go (rate limit logic + state tracking), mail_ratelimit_test.go (10 tests). Modified: mail_send.go (check before send, record after). Limits: Mayor unlimited, Deacon 3, Witness/Refinery 5, Polecat/Crew 1, Dog/Boot 0 (hard block), Human unlimited. State tracked in tmpdir per session ID. Error messages point users to gt nudge.", "status": "closed", "priority": 2, "issue_type": "task", "assignee": "gastown/polecats/capable", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-27T19:45:21Z", "created_by": "mayor", "updated_at": "2026-02-28T00:23:09Z", "closed_at": "2026-02-28T00:00:21Z", "close_reason": "Closed", "dependencies": [{"issue_id": "gt-51dx", "depends_on_id": "gt-wisp-68ih", "type": "blocks", "created_at": "2026-02-27T15:53:53Z", "created_by": "mayor", "metadata": "{}"}], "dependency_count": 1, "dependent_count": 0, "comment_count": 0}
{"id": "gt-xu9o", "title": "dolt-janitor: maintenance completed", "description": "Dolt health check complete (latency: 1.019s, no orphaned databases)", "status": "closed", "priority": 2, "issue_type": "task", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-27T16:55:19Z", "created_by": "dog", "updated_at": "2026-02-27T21:26:46Z", "closed_at": "2026-02-27T21:26:46Z", "close_reason": "Maintenance artifacts, not real issues", "labels": ["plugin:dolt-janitor", "result:success", "rig:gastown", "type:plugin-run"], "wisp_type": "patrol", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-rig-gastown", "title": "gastown", "description": "Rig identity bead for gastown.\n\nrepo: git@github.com:steveyegge/gastown.git\nprefix: gt\nstate: active", "status": "closed", "priority": 2, "issue_type": "task", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-27T10:11:41Z", "created_by": "dog", "updated_at": "2026-02-27T21:26:46Z", "closed_at": "2026-02-27T21:26:46Z", "close_reason": "Maintenance artifacts, not real issues", "labels": ["gt:rig"], "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-r10q", "title": "Pre-existing test failures: tmux tests require tmux environment (internal/tmux)", "description": "3 tests fail on main: TestAutoRespawnHook_RespawnWorks, TestAutoRespawnHook_SkipsAlreadyAlive, TestNewSessionWithCommand_Success. All require tmux windows/sessions that don't exist in this environment.", "status": "closed", "priority": 2, "issue_type": "bug", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-27T07:16:58Z", "created_by": "gastown/refinery", "updated_at": "2026-02-27T07:30:15Z", "closed_at": "2026-02-27T07:30:15Z", "close_reason": "Tests pass now — likely fixed by upstream tmux changes.", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-nxws", "title": "Pre-existing test failure: TestDetectBeadsPrefixFromConfig_NoFallbackToJSONL (internal/rig)", "description": "Test fails on main. manager_test.go:934 - detectBeadsPrefixFromConfig returns 'gt' instead of empty. Likely environment-dependent.", "status": "closed", "priority": 2, "issue_type": "bug", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-27T07:16:56Z", "created_by": "gastown/refinery", "updated_at": "2026-02-27T07:30:27Z", "closed_at": "2026-02-27T07:30:27Z", "close_reason": "Fixed: removed JSONL fallback from detectBeadsPrefixFromConfig", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-6lmv", "title": "Pre-existing test failure: TestAllEmbeddedFormulas_VariableValidation (internal/formula)", "description": "Test fails on main. mol-idea-to-plan.formula.toml has undefined template variable 'review_id'. Needs [vars] section update.", "status": "closed", "priority": 2, "issue_type": "bug", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-27T07:16:55Z", "created_by": "gastown/refinery", "updated_at": "2026-02-27T07:19:19Z", "closed_at": "2026-02-27T07:19:19Z", "close_reason": "Fixed: root cause was missing review_id in mol-idea-to-plan.formula.toml, resolved in gt-x0z9", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-qz93", "title": "Pre-existing test failure: TestFindTestSockets_Integration (internal/cmd)", "description": "Test fails on main. agents_test.go:578 - findTestSockets() returns empty. Likely requires specific socket file presence.", "status": "closed", "priority": 2, "issue_type": "bug", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-27T07:16:53Z", "created_by": "gastown/refinery", "updated_at": "2026-02-27T07:30:27Z", "closed_at": "2026-02-27T07:30:27Z", "close_reason": "Fixed: findTestSockets now uses /tmp instead of os.TempDir() to match tmux socket location", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-2yx7", "title": "Dogs idle at prompt after completing work instead of exiting", "description": "Recurring issue: dog agents (echo, foxtrot, kilo, lima) complete their plugin work (dolt-doctor, dolt-backup, dolt-archive, rebuild-gt, dolt-reaper) and send DOG_DONE mail, but then idle at the Claude prompt instead of exiting the tmux session. The dog instructions say 'Do NOT idle at the prompt after completing work' but the dogs aren't following through. This causes the deacon to repeatedly kill stuck dog sessions every patrol cycle. Seen across multiple deacon sessions.", "notes": "Fix: gt dog done now auto-terminates its tmux session via background process (sleep 3 && tmux kill-session). Updated session instructions, dog template, and plugin dispatch mail to be consistent. Removed old DOG_DONE mail step from plugin instructions (was contradictory with nudge-only policy). All dog tests pass.", "status": "closed", "priority": 2, "issue_type": "bug", "assignee": "gastown/polecats/slit", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-27T06:26:31Z", "created_by": "deacon", "updated_at": "2026-02-27T23:01:21Z", "closed_at": "2026-02-27T22:57:46Z", "close_reason": "Closed", "dependencies": [{"issue_id": "gt-2yx7", "depends_on_id": "gt-wisp-7rmc", "type": "blocks", "created_at": "2026-02-27T14:51:02Z", "created_by": "mayor", "metadata": "{}"}], "dependency_count": 1, "dependent_count": 0, "comment_count": 0}
{"id": "gt-0eh1", "title": "Pre-existing test failures: cmd, formula, rig, tmux (4 packages)", "description": "4 test packages failing on main as of 470b653e:\n\n1. internal/cmd: TestFindTestSockets_Integration - findTestSockets() returns empty\n2. internal/formula: TestAllEmbeddedFormulas_VariableValidation - mol-idea-to-plan.formula.toml missing review_id in [vars]\n3. internal/rig: TestDetectBeadsPrefixFromConfig_NoFallbackToJSONL - returns 'gt' instead of empty\n4. internal/tmux: TestAutoRespawnHook_RespawnWorks, TestAutoRespawnHook_SkipsAlreadyAlive, TestNewSessionWithCommand_Success - require tmux environment\n\nDiscovered during refinery patrol processing MR gt-wisp-c08z (polecat/furiosa/gt-oei1). All failures reproduce on main without the polecat branch.", "status": "closed", "priority": 2, "issue_type": "bug", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-27T06:10:12Z", "created_by": "gastown/refinery", "updated_at": "2026-02-27T07:30:34Z", "closed_at": "2026-02-27T07:30:34Z", "close_reason": "3 of 4 failures fixed (formula: review_id, rig: JSONL fallback, cmd: socket path). Remaining tmux env issue tracked by gt-r10q.", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-r8m9", "title": "Dog dispatch fails: dogs have no agent beads", "description": "gt dog dispatch --plugin <name> fails with 'invalid recipient deacon/dogs/echo: no agent found'. Dogs exist in the kennel (dog.json files) but are not registered as agents in beads. The mail system requires agent records to route messages. Either gt dog add should create agent beads, or dispatch should use a non-mail mechanism.", "notes": "Implemented: ensure-on-dispatch pattern for dog agent beads + workspace fallback for 3-part dog addresses. Two fixes: (1) runDogDispatch checks FindDogAgentBead before mail send, creates if missing. (2) validateAgentWorkspace handles case 3 (deacon/dogs/name). Tests added for both.", "status": "closed", "priority": 2, "issue_type": "bug", "assignee": "gastown/polecats/rictus", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-27T02:32:52Z", "created_by": "deacon", "updated_at": "2026-02-27T23:09:46Z", "closed_at": "2026-02-27T23:05:48Z", "close_reason": "Completed with no code changes (already fixed or pushed directly to main)", "dependencies": [{"issue_id": "gt-r8m9", "depends_on_id": "gt-wisp-0nr3", "type": "blocks", "created_at": "2026-02-27T14:51:14Z", "created_by": "mayor", "metadata": "{}"}], "dependency_count": 1, "dependent_count": 0, "comment_count": 0}
{"id": "gt-u55vt", "title": "Audit bd queries for expensive patterns (joins, subqueries)", "description": "Tim warns Dolt is not great at memory management for complex queries. >2 table joins and nested subqueries can exhaust memory and hang the server. Audit all SQL queries in beads/mayor/rig/internal/storage/dolt/store.go and gastown SQL usage for expensive patterns. Look for multi-table joins, nested subqueries, large result sets without LIMIT.", "design": "# SQL Query Audit: Expensive Patterns in gastown + beads/store.go\n\n## CRITICAL — Must Fix (High Risk of Dolt Memory Exhaustion)\n\n### 1. wisp_reaper.go:519-535 — Double NOT IN with INNER JOINs (WORST OFFENDER)\n```sql\nSELECT id, title, updated_at FROM `%s`.issues\nWHERE status IN ('open', 'in_progress')\n  AND updated_at < ?\n  AND priority > 1\n  AND issue_type != 'epic'\n  AND id NOT IN (\n    SELECT DISTINCT d.issue_id FROM `%s`.dependencies d\n    INNER JOIN `%s`.issues i ON d.depends_on_id = i.id\n    WHERE i.status IN ('open', 'in_progress')\n  )\n  AND id NOT IN (\n    SELECT DISTINCT d.depends_on_id FROM `%s`.dependencies d\n    INNER JOIN `%s`.issues i ON d.issue_id = i.id\n    WHERE i.status IN ('open', 'in_progress')\n  )\n```\n**Risk**: Two correlated NOT IN subqueries, each with an INNER JOIN. Dolt materializes each subquery fully. With N issues and M dependencies, this is O(N*M) per subquery, run twice. No LIMIT.\n**Fix**: Replace with LEFT JOIN ... IS NULL pattern, or pre-compute dependency sets and filter in Go.\n\n### 2. wisp_reaper.go:413 — Subquery in WHERE (IN SELECT)\n```sql\nSELECT COUNT(*) FROM `%s`.issues\nWHERE status = 'closed' AND closed_at < ?\n  AND id IN (SELECT issue_id FROM `%s`.labels WHERE label = 'gt:message')\n```\n**Risk**: Subquery materialized for every row evaluation. Could hang on large issues table.\n**Fix**: Rewrite as INNER JOIN: `SELECT COUNT(*) FROM issues i INNER JOIN labels l ON i.id = l.issue_id WHERE i.status = 'closed' AND i.closed_at < ? AND l.label = 'gt:message'`\n\n### 3. wisps_migrate.go:316,327,337,347 — INNER JOINs without WHERE (bulk migration)\nFour queries all following the same pattern:\n```sql\nINSERT IGNORE INTO wisp_labels (issue_id, label)\nSELECT l.issue_id, l.label FROM labels l INNER JOIN wisps w ON l.issue_id = w.id\n```\n(Same for wisp_comments, wisp_events, wisp_dependencies)\n**Risk**: Full cross-product of labels×wisps (and comments×wisps, events×wisps, deps×wisps). No WHERE clause means all matching rows processed. No LIMIT. Migration runs once, but if wisps table is large, each query processes the entire join.\n**Mitigating factor**: These run only during migration, not in steady state. But could still OOM on large databases.\n**Fix**: Add batching with LIMIT/OFFSET, or add WHERE clause filtering to avoid unnecessary work.\n\n## MODERATE — Should Review\n\n### 4. jsonl_git_backup.go:238 — SELECT * with multiple LIKE patterns\n```sql\nSELECT * FROM `%s`.issues WHERE (ephemeral IS NULL OR ephemeral != 1)\n  AND issue_type NOT IN ('message', 'event', 'agent', 'convoy', 'molecule', 'role', 'merge-request', 'rig')\n  AND id NOT LIKE '%-wisp-%' AND id NOT LIKE '%-cv-%'\n  AND id NOT LIKE 'test%' AND id NOT LIKE 'beads\\_t%'\n  AND id NOT LIKE 'beads\\_pt%' AND id NOT LIKE 'doctest\\_%'\n  AND id NOT LIKE 'offlinebrew-%'\n  AND title NOT LIKE '--%' AND title NOT LIKE 'Usage: %'\n  ORDER BY id\n```\n**Risk**: SELECT * (all columns), 9 LIKE patterns (each requires string comparison), no LIMIT. Full table scan guaranteed. If issues table grows large, this becomes expensive.\n**Mitigating factor**: Runs as daemon backup, not interactive path.\n**Fix**: Add LIMIT with batching for very large tables, or filter by indexed columns first.\n\n### 5. wl_sync.go:99-103 — Four scalar subqueries\n```sql\nSELECT (SELECT COUNT(*) FROM wanted WHERE status = 'open') AS open_wanted,\n       (SELECT COUNT(*) FROM wanted) AS total_wanted,\n       (SELECT COUNT(*) FROM completions) AS total_completions,\n       (SELECT COUNT(*) FROM stamps) AS total_stamps\n```\n**Risk**: Four separate COUNT(*) scans in one query. Dolt may not optimize these well.\n**Mitigating factor**: Runs via `dolt sql` CLI, not the shared server. Tables are small (wasteland).\n**Fix**: Low priority since it runs locally, but could use 4 separate queries or UNION.\n\n### 6. compactor_dog.go — ORDER BY on dolt_log\n```sql\nSELECT commit_hash FROM `%s`.dolt_log ORDER BY date ASC LIMIT 1  -- root commit\nSELECT commit_hash FROM `%s`.dolt_log ORDER BY date DESC LIMIT 1 -- HEAD commit\n```\n**Risk**: dolt_log can grow unboundedly with commit history. ORDER BY without index could be expensive.\n**Mitigating factor**: LIMIT 1 helps, and Dolt may optimize dolt_log access. HEAD query likely short-circuits.\n\n### 7. beads/store.go:954-960 — Correlated NOT EXISTS subquery\n```sql\nSELECT COUNT(*) FROM dolt_status s\nWHERE NOT EXISTS (\n  SELECT 1 FROM dolt_ignore di WHERE di.ignored = 1 AND s.table_name LIKE di.pattern\n)\n```\n**Risk**: Correlated subquery with LIKE pattern matching. Runs for each row in dolt_status.\n**Mitigating factor**: dolt_status is tiny (handful of rows). Low risk in practice.\n\n## LOW RISK — Acceptable\n\n- **wisp_reaper.go:430** — JOIN with LIMIT (properly batched, good pattern)\n- **health.go:239** — Dynamic WHERE with LIMIT 10 (bounded result set)\n- **vitals.go:151** — Aggregation with CASE (efficient single-pass pattern)\n- **doltserver.go:2154** — COUNT(*) on PROCESSLIST (system table, tiny)\n- **beads/store.go** — Most queries are simple single-table SELECTs, properly parameterized\n\n## Summary Table\n\n| Priority | File | Line | Pattern | Risk |\n|----------|------|------|---------|------|\n| CRITICAL | wisp_reaper.go | 519-535 | 2x NOT IN + INNER JOIN | OOM on large DBs |\n| CRITICAL | wisp_reaper.go | 413 | IN (SELECT subquery) | Hang on large tables |\n| HIGH | wisps_migrate.go | 316,327,337,347 | JOIN without WHERE (×4) | OOM during migration |\n| MEDIUM | jsonl_git_backup.go | 238 | SELECT * + 9 LIKEs, no LIMIT | Slow backup on large DBs |\n| LOW | wl_sync.go | 99-103 | 4 scalar subqueries | Minor, local CLI only |\n| LOW | compactor_dog.go | 135,290,322 | ORDER BY on dolt_log | LIMIT 1 mitigates |\n| LOW | beads/store.go | 954-960 | Correlated NOT EXISTS | dolt_status always tiny |\n\n## Recommendations\n\n1. **Immediate**: Rewrite wisp_reaper.go:519-535 to use LEFT JOIN pattern or pre-filter in Go\n2. **Immediate**: Rewrite wisp_reaper.go:413 to use INNER JOIN instead of IN (SELECT)\n3. **Soon**: Add batching (LIMIT+loop) to wisps_migrate.go bulk INSERT IGNORE queries\n4. **Later**: Add LIMIT+batching to jsonl_git_backup.go backup query for large table resilience", "notes": "Audit complete. Reviewed all SQL in gastown (30 Go files) and beads/store.go (1374 lines). Found 3 critical, 1 high, and 3 moderate-risk query patterns. Worst offender is wisp_reaper.go:519-535 with double NOT IN subqueries each containing INNER JOINs. Second worst is wisp_reaper.go:413 with IN (SELECT subquery). The wisps_migrate.go bulk migration queries (4 INNER JOINs without WHERE) are high risk but mitigated by running only once. beads/store.go is clean. Full analysis with fix recommendations in --design field.", "status": "closed", "priority": 2, "issue_type": "task", "assignee": "gastown/polecats/toast", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-26T05:16:45Z", "created_by": "mayor", "updated_at": "2026-02-28T00:23:35Z", "closed_at": "2026-02-28T00:00:52Z", "close_reason": "Completed with no code changes (already fixed or pushed directly to main)", "dependencies": [{"issue_id": "gt-u55vt", "depends_on_id": "gt-wisp-o44w", "type": "blocks", "created_at": "2026-02-27T15:55:35Z", "created_by": "mayor", "metadata": "{}"}], "dependency_count": 1, "dependent_count": 0, "comment_count": 0}
{"id": "gt-vkpi08.1", "title": "Dead code: SynthesisFields type and related functions unused", "description": "internal/beads/fields.go lines 424-503\n\nSynthesisFields struct and its associated functions are not used anywhere in the codebase:\n- SynthesisFields type (line 424-431)\n- ParseSynthesisFields (lines 435-480)\n- FormatSynthesisFields (lines 482-503)\n\nGrep shows these are only referenced in fields.go itself. This entire synthesis feature appears to be orphaned/dead code that can be removed.", "status": "closed", "priority": 2, "issue_type": "task", "owner": "steve.yegge@gmail.com", "created_at": "2026-01-22T03:21:11Z", "created_by": "gastown/crew/mel", "updated_at": "2026-02-27T02:56:18Z", "closed_at": "2026-02-27T02:56:18Z", "close_reason": "Stale code review cleanup epic — aspirational refactoring (Clown Show #21)", "dependencies": [{"issue_id": "gt-vkpi08.1", "depends_on_id": "gt-vkpi08", "type": "parent-child", "created_at": "2026-01-22T03:21:11Z", "created_by": "mayor", "metadata": "{}"}], "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-vkpi08"}
{"id": "gt-ytsbyw.8", "title": "Remove deprecated agent ID functions in agent_ids.go", "description": "In agent_ids.go (lines 118-142), three functions are marked deprecated:\n\n1. MayorBeadID() - deprecated in favor of MayorBeadIDTown()\n2. DeaconBeadID() - deprecated in favor of DeaconBeadIDTown()\n3. DogBeadID() - deprecated in favor of DogBeadIDTown()\n\nThese should be audited for usage and removed if no longer needed, or migration completed if still in use.\n\nNote: The deprecation comments explain that town-level agents should use the hq- prefix, but these functions return gt- prefix IDs.", "status": "closed", "priority": 2, "issue_type": "task", "owner": "steve.yegge@gmail.com", "created_at": "2026-01-22T03:21:06Z", "created_by": "gastown/crew/gus", "updated_at": "2026-02-27T02:56:17Z", "closed_at": "2026-02-27T02:56:17Z", "close_reason": "Stale code review cleanup epic — aspirational refactoring (Clown Show #21)", "dependencies": [{"issue_id": "gt-ytsbyw.8", "depends_on_id": "gt-ytsbyw", "type": "parent-child", "created_at": "2026-01-22T03:21:06Z", "created_by": "mayor", "metadata": "{}"}], "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-ytsbyw"}
{"id": "gt-ytsbyw.6", "title": "Remove deprecated agent ID functions in agent_ids.go", "description": "In agent_ids.go (lines 118-142), three functions are marked deprecated:\n\n1. MayorBeadID() - deprecated in favor of MayorBeadIDTown()\n2. DeaconBeadID() - deprecated in favor of DeaconBeadIDTown()\n3. DogBeadID() - deprecated in favor of DogBeadIDTown()\n\nThese should be audited for usage and removed if no longer needed, or migration completed if still in use.\n\nNote: The deprecation comments explain that town-level agents should use the hq- prefix, but these functions return gt- prefix IDs.", "status": "closed", "priority": 2, "issue_type": "task", "owner": "steve.yegge@gmail.com", "created_at": "2026-01-22T03:20:59Z", "created_by": "gastown/crew/gus", "updated_at": "2026-02-27T02:56:16Z", "closed_at": "2026-02-27T02:56:16Z", "close_reason": "Stale code review cleanup epic — aspirational refactoring (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-ytsbyw.7", "title": "Optimize ListDelegationsFrom to avoid O(n) queries", "description": "In beads_delegation.go ListDelegationsFrom (lines 134-155):\n\nCurrent implementation:\n1. Lists ALL issues regardless of status via b.List(ListOptions{Status: \"all\"})\n2. Loops through each issue calling b.GetDelegation(issue.ID) individually\n3. This results in O(n) database queries for n issues\n\nThis is inefficient for large issue sets.\n\nConsolidation/optimization opportunity:\n1. Use a single bd query that filters by the delegated_from slot containing the parent ID\n2. Or add a dedicated bd command for listing delegations by parent\n3. Or cache/batch the slot lookups\n\nThis would reduce n+1 queries to 1-2 queries.", "status": "closed", "priority": 2, "issue_type": "task", "owner": "steve.yegge@gmail.com", "created_at": "2026-01-22T03:20:59Z", "created_by": "gastown/crew/gus", "updated_at": "2026-02-27T02:56:17Z", "closed_at": "2026-02-27T02:56:17Z", "close_reason": "Stale code review cleanup epic — aspirational refactoring (Clown Show #21)", "dependencies": [{"issue_id": "gt-ytsbyw.7", "depends_on_id": "gt-ytsbyw", "type": "parent-child", "created_at": "2026-01-22T03:20:59Z", "created_by": "mayor", "metadata": "{}"}], "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-ytsbyw"}
{"id": "gt-ytsbyw.4", "title": "Consolidate RoleBead ID helper functions in agent_ids.go", "description": "In agent_ids.go, there are 7 role-specific helper functions (lines 47-79):\n- MayorRoleBeadIDTown()\n- DeaconRoleBeadIDTown()\n- DogRoleBeadIDTown()\n- WitnessRoleBeadIDTown()\n- RefineryRoleBeadIDTown()\n- PolecatRoleBeadIDTown()\n- CrewRoleBeadIDTown()\n\nEach is a one-liner calling RoleBeadIDTown(\"rolename\").\n\nConsolidation opportunity:\n1. These could be removed if callers use RoleBeadIDTown() directly with a role constant\n2. Or define role constants (RoleMayor, RoleDeacon, etc.) and have callers use RoleBeadIDTown(RoleMayor)\n\nThis would eliminate 7 trivial wrapper functions (~21 lines including comments).", "status": "closed", "priority": 2, "issue_type": "task", "owner": "steve.yegge@gmail.com", "created_at": "2026-01-22T03:20:58Z", "created_by": "gastown/crew/gus", "updated_at": "2026-02-27T02:56:16Z", "closed_at": "2026-02-27T02:56:16Z", "close_reason": "Stale code review cleanup epic — aspirational refactoring (Clown Show #21)", "dependencies": [{"issue_id": "gt-ytsbyw.4", "depends_on_id": "gt-ytsbyw", "type": "parent-child", "created_at": "2026-01-22T03:20:58Z", "created_by": "mayor", "metadata": "{}"}], "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-ytsbyw"}
{"id": "gt-ytsbyw.5", "title": "Consolidate WithPrefix/non-prefix agent ID function pairs", "description": "In agent_ids.go (lines 144-182), there are 4 pairs of nearly identical functions:\n\n1. WitnessBeadIDWithPrefix / WitnessBeadID\n2. RefineryBeadIDWithPrefix / RefineryBeadID\n3. CrewBeadIDWithPrefix / CrewBeadID\n4. PolecatBeadIDWithPrefix / PolecatBeadID\n\nEach pair follows the same pattern:\n- WithPrefix version: calls AgentBeadIDWithPrefix(prefix, rig, role, name)\n- Non-prefix version: calls WithPrefix version with \"gt\"\n\nConsolidation opportunity:\n1. The non-prefix versions could be removed if callers use the WithPrefix version with \"gt\" constant\n2. Or create a type-safe builder pattern\n3. Or use a single generic function with the role as a parameter\n\nWould eliminate ~24 lines of boilerplate.", "status": "closed", "priority": 2, "issue_type": "task", "owner": "steve.yegge@gmail.com", "created_at": "2026-01-22T03:20:58Z", "created_by": "gastown/crew/gus", "updated_at": "2026-02-27T02:56:16Z", "closed_at": "2026-02-27T02:56:16Z", "close_reason": "Stale code review cleanup epic — aspirational refactoring (Clown Show #21)", "dependencies": [{"issue_id": "gt-ytsbyw.5", "depends_on_id": "gt-ytsbyw", "type": "parent-child", "created_at": "2026-01-22T03:20:58Z", "created_by": "mayor", "metadata": "{}"}], "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-ytsbyw"}
{"id": "gt-qmbrx8.5", "title": "beads_channel.go: GetChannelBead and GetChannelByID are nearly identical", "description": "## Location\ninternal/beads/beads_channel.go:184-200 (GetChannelBead)\ninternal/beads/beads_channel.go:202-219 (GetChannelByID)\n\n## Issue\nThese two functions are nearly identical - they differ only in how they obtain the bead ID:\n- GetChannelBead(name) calls ChannelBeadID(name) to construct the ID\n- GetChannelByID(id) uses the provided ID directly\n\nThe remaining ~15 lines of each function are identical.\n\n## Recommendation\nHave GetChannelBead call GetChannelByID internally:\n```go\nfunc (b *Beads) GetChannelBead(name string) (*Issue, *ChannelFields, error) {\n    return b.GetChannelByID(ChannelBeadID(name))\n}\n```", "status": "closed", "priority": 2, "issue_type": "task", "owner": "steve.yegge@gmail.com", "created_at": "2026-01-22T03:20:44Z", "created_by": "gastown/crew/george", "updated_at": "2026-02-27T02:56:17Z", "closed_at": "2026-02-27T02:56:17Z", "close_reason": "Stale code review cleanup epic — aspirational refactoring (Clown Show #21)", "dependencies": [{"issue_id": "gt-qmbrx8.5", "depends_on_id": "gt-qmbrx8", "type": "parent-child", "created_at": "2026-01-22T03:20:44Z", "created_by": "mayor", "metadata": "{}"}], "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-qmbrx8"}
{"id": "gt-qmbrx8.4", "title": "beads_queue.go: FindEligibleQueues re-parses descriptions unnecessarily", "description": "## Location\ninternal/beads/beads_queue.go:368-393\n\n## Issue\nFindEligibleQueues calls ListQueueBeads() which returns map[string]*Issue, then for each issue it calls ParseQueueFields(issue.Description) at line 378.\n\nIf ListQueueBeads or a variant returned the already-parsed QueueFields, callers wouldn't need to re-parse. This is particularly wasteful since parsing involves string splitting and iteration over all lines.\n\nSimilarly, LookupQueueByName (lines 297-324) has the same pattern - it iterates over all queues and parses each one's description.\n\n## Recommendation\nConsider a variant like ListQueueBeadsWithFields() that returns both Issue and parsed QueueFields, or cache parsed fields.", "status": "closed", "priority": 2, "issue_type": "task", "owner": "steve.yegge@gmail.com", "created_at": "2026-01-22T03:20:42Z", "created_by": "gastown/crew/george", "updated_at": "2026-02-27T02:56:17Z", "closed_at": "2026-02-27T02:56:17Z", "close_reason": "Stale code review cleanup epic — aspirational refactoring (Clown Show #21)", "dependencies": [{"issue_id": "gt-qmbrx8.4", "depends_on_id": "gt-qmbrx8", "type": "parent-child", "created_at": "2026-01-22T03:20:42Z", "created_by": "mayor", "metadata": "{}"}], "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-qmbrx8"}
{"id": "gt-qmbrx8.3", "title": "beads_channel.go: LookupChannelByName re-fetches already-available data", "description": "## Location\ninternal/beads/beads_channel.go:354-381\n\n## Issue\nWhen the direct ID lookup fails and the function falls back to searching all channels:\n1. ListChannelBeads() is called (line 365) which fetches all channel issues\n2. If a match is found by name (line 370), the code discards the fields\n3. It then reconstructs the ID and calls b.Show(id) again (lines 372-377)\n\nThe Issue object is never returned from ListChannelBeads because it only returns map[string]*ChannelFields, forcing a re-fetch.\n\n## Recommendation\nEither modify ListChannelBeads to return both Issue and ChannelFields, or have LookupChannelByName use a direct bd list query that returns both.", "status": "closed", "priority": 2, "issue_type": "task", "owner": "steve.yegge@gmail.com", "created_at": "2026-01-22T03:20:41Z", "created_by": "gastown/crew/george", "updated_at": "2026-02-27T02:56:17Z", "closed_at": "2026-02-27T02:56:17Z", "close_reason": "Stale code review cleanup epic — aspirational refactoring (Clown Show #21)", "dependencies": [{"issue_id": "gt-qmbrx8.3", "depends_on_id": "gt-qmbrx8", "type": "parent-child", "created_at": "2026-01-22T03:20:41Z", "created_by": "mayor", "metadata": "{}"}], "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-qmbrx8"}
{"id": "gt-qmbrx8.2", "title": "beads_queue.go: Double-fetch in UpdateQueueCounts and UpdateQueueStatus", "description": "## Location\ninternal/beads/beads_queue.go:232-247 (UpdateQueueCounts)\ninternal/beads/beads_queue.go:250-266 (UpdateQueueStatus)\n\n## Issue\nBoth functions exhibit a double-fetch pattern:\n1. They call GetQueueBead(id) which internally calls b.Show(id)\n2. Then they call UpdateQueueFields(id, fields) \n3. UpdateQueueFields (line 221) calls b.Show(id) again\n\nThis results in 2 Show calls (2 bd invocations) for a single update operation.\n\n## Recommendation\nModify UpdateQueueFields to accept the issue title as a parameter, or have UpdateQueueCounts/UpdateQueueStatus call b.Update directly with the already-fetched issue data.", "status": "closed", "priority": 2, "issue_type": "task", "owner": "steve.yegge@gmail.com", "created_at": "2026-01-22T03:20:39Z", "created_by": "gastown/crew/george", "updated_at": "2026-02-27T02:56:17Z", "closed_at": "2026-02-27T02:56:17Z", "close_reason": "Stale code review cleanup epic — aspirational refactoring (Clown Show #21)", "dependencies": [{"issue_id": "gt-qmbrx8.2", "depends_on_id": "gt-qmbrx8", "type": "parent-child", "created_at": "2026-01-22T03:20:39Z", "created_by": "mayor", "metadata": "{}"}], "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-qmbrx8"}
{"id": "gt-qmbrx8.1", "title": "beads_channel.go: Code duplication between EnforceChannelRetention and PruneAllChannels", "description": "## Location\ninternal/beads/beads_channel.go:386-453 (EnforceChannelRetention)\ninternal/beads/beads_channel.go:459-529 (PruneAllChannels)\n\n## Issue\nThese two functions share ~80% identical logic:\n- Both query messages with the same bd list command\n- Both implement identical time-based retention pruning\n- Both implement nearly identical count-based retention pruning\n- Both use the same message deletion pattern\n\nThe only differences:\n1. PruneAllChannels iterates over all channels vs a single channel\n2. PruneAllChannels uses a 10% buffer threshold for count-based pruning\n\n## Recommendation\nExtract shared retention logic into a helper function like `pruneChannelMessages(name string, fields *ChannelFields, useBuffer bool) (int, error)` that both functions can call.", "status": "closed", "priority": 2, "issue_type": "task", "owner": "steve.yegge@gmail.com", "created_at": "2026-01-22T03:20:38Z", "created_by": "gastown/crew/george", "updated_at": "2026-02-27T02:56:17Z", "closed_at": "2026-02-27T02:56:17Z", "close_reason": "Stale code review cleanup epic — aspirational refactoring (Clown Show #21)", "dependencies": [{"issue_id": "gt-qmbrx8.1", "depends_on_id": "gt-qmbrx8", "type": "parent-child", "created_at": "2026-01-22T03:20:38Z", "created_by": "mayor", "metadata": "{}"}], "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-qmbrx8"}
{"id": "gt-ytsbyw.2", "title": "Extract setHookSlotWithRetry helper for duplicated hook slot logic", "description": "In beads_agent.go, there is duplicated hook slot set/clear/retry logic in two places:\n\n1. UpdateAgentState (lines 254-269):\n   - Try to set hook slot\n   - If 'already occupied' error, clear then retry\n\n2. SetHookBead (lines 287-301):\n   - Identical pattern: try set, check error, clear if occupied, retry\n\nConsolidation opportunity: Extract a helper method like:\n  func (b *Beads) setHookSlotWithRetry(agentID, hookBeadID string) error\n\nThis would eliminate ~20 lines of duplicated error-handling code.", "status": "closed", "priority": 2, "issue_type": "task", "owner": "steve.yegge@gmail.com", "created_at": "2026-01-22T03:20:34Z", "created_by": "gastown/crew/gus", "updated_at": "2026-02-27T02:56:16Z", "closed_at": "2026-02-27T02:56:16Z", "close_reason": "Stale code review cleanup epic — aspirational refactoring (Clown Show #21)", "dependencies": [{"issue_id": "gt-ytsbyw.2", "depends_on_id": "gt-ytsbyw", "type": "parent-child", "created_at": "2026-01-22T03:20:34Z", "created_by": "mayor", "metadata": "{}"}], "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-ytsbyw"}
{"id": "gt-ytsbyw.3", "title": "Consolidate FormatAgentDescription nullable field formatting", "description": "In beads_agent.go FormatAgentDescription (lines 43-75), each optional field follows the same pattern:\n\n  if fields.FieldName != \"\" {\n    lines = append(lines, fmt.Sprintf(\"field_name: %s\", fields.FieldName))\n  } else {\n    lines = append(lines, \"field_name: null\")\n  }\n\nThis pattern repeats 5 times (Rig, HookBead, CleanupStatus, ActiveMR, NotificationLevel).\n\nConsolidation opportunity: Extract a helper like:\n  appendField(lines *[]string, key, value string)\n\nOr use a map-based approach to iterate over fields. Would reduce ~25 lines to ~10.", "status": "closed", "priority": 2, "issue_type": "task", "owner": "steve.yegge@gmail.com", "created_at": "2026-01-22T03:20:34Z", "created_by": "gastown/crew/gus", "updated_at": "2026-02-27T02:56:16Z", "closed_at": "2026-02-27T02:56:16Z", "close_reason": "Stale code review cleanup epic — aspirational refactoring (Clown Show #21)", "dependencies": [{"issue_id": "gt-ytsbyw.3", "depends_on_id": "gt-ytsbyw", "type": "parent-child", "created_at": "2026-01-22T03:20:34Z", "created_by": "mayor", "metadata": "{}"}], "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-ytsbyw"}
{"id": "gt-ytsbyw.1", "title": "Consolidate UpdateAgent*Field methods into generic helper", "description": "In beads_agent.go, three methods follow identical patterns:\n- UpdateAgentCleanupStatus (lines 317-332)\n- UpdateAgentActiveMR (lines 337-352)\n- UpdateAgentNotificationLevel (lines 357-377)\n\nAll three:\n1. Get current issue via b.Show(id)\n2. Parse existing fields via ParseAgentFields(issue.Description)\n3. Update one specific field\n4. Format new description via FormatAgentDescription(issue.Title, fields)\n5. Update via b.Update(id, UpdateOptions{Description: &description})\n\nConsolidation opportunity: Extract a generic helper like:\n  func (b *Beads) updateAgentField(id string, updateFn func(*AgentFields)) error\n\nThis would reduce ~45 lines of duplicated code to ~15 lines.", "status": "closed", "priority": 2, "issue_type": "task", "owner": "steve.yegge@gmail.com", "created_at": "2026-01-22T03:20:33Z", "created_by": "gastown/crew/gus", "updated_at": "2026-02-27T02:56:16Z", "closed_at": "2026-02-27T02:56:16Z", "close_reason": "Stale code review cleanup epic — aspirational refactoring (Clown Show #21)", "dependencies": [{"issue_id": "gt-ytsbyw.1", "depends_on_id": "gt-ytsbyw", "type": "parent-child", "created_at": "2026-01-22T03:20:33Z", "created_by": "mayor", "metadata": "{}"}], "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-ytsbyw"}
{"id": "gt-its8p9.7", "title": "Deduplicate instantiateFromChildren and instantiateFromMarkdown in molecule.go", "description": "Lines 295-449: Both functions have duplicated logic for creating child issues, adding provenance metadata, and wiring dependencies. Extract common step-creation logic.", "status": "closed", "priority": 2, "issue_type": "task", "owner": "steve.yegge@gmail.com", "created_at": "2026-01-22T03:20:29Z", "created_by": "gastown/crew/dennis", "updated_at": "2026-02-27T02:56:16Z", "closed_at": "2026-02-27T02:56:16Z", "close_reason": "Stale code review cleanup epic — aspirational refactoring (Clown Show #21)", "dependencies": [{"issue_id": "gt-its8p9.7", "depends_on_id": "gt-its8p9", "type": "parent-child", "created_at": "2026-01-22T03:20:29Z", "created_by": "mayor", "metadata": "{}"}], "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-its8p9"}
{"id": "gt-its8p9.6", "title": "Complete format bridge migration in molecule.go", "description": "Lines 246-293: InstantiateMolecule supports two formats (old markdown, new child issues) via 'format bridge pattern'. Plan migration to single format and remove bridge code.", "status": "closed", "priority": 2, "issue_type": "task", "owner": "steve.yegge@gmail.com", "created_at": "2026-01-22T03:20:28Z", "created_by": "gastown/crew/dennis", "updated_at": "2026-02-27T02:56:15Z", "closed_at": "2026-02-27T02:56:15Z", "close_reason": "Stale code review cleanup epic — aspirational refactoring (Clown Show #21)", "dependencies": [{"issue_id": "gt-its8p9.6", "depends_on_id": "gt-its8p9", "type": "parent-child", "created_at": "2026-01-22T03:20:28Z", "created_by": "mayor", "metadata": "{}"}], "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-its8p9"}
{"id": "gt-its8p9.2", "title": "Deduplicate Close and CloseWithReason methods in beads.go", "description": "Lines 576-610: CloseWithReason duplicates session ID logic from Close. Simplify by having Close call CloseWithReason with empty reason, or extract shared logic.", "status": "closed", "priority": 2, "issue_type": "task", "owner": "steve.yegge@gmail.com", "created_at": "2026-01-22T03:20:23Z", "created_by": "gastown/crew/dennis", "updated_at": "2026-02-27T02:56:15Z", "closed_at": "2026-02-27T02:56:15Z", "close_reason": "Stale code review cleanup epic — aspirational refactoring (Clown Show #21)", "dependencies": [{"issue_id": "gt-its8p9.2", "depends_on_id": "gt-its8p9", "type": "parent-child", "created_at": "2026-01-22T03:20:23Z", "created_by": "mayor", "metadata": "{}"}], "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-its8p9"}
{"id": "gt-its8p9.1", "title": "Deduplicate Create and CreateWithID methods in beads.go", "description": "Lines 443-534: Create() and CreateWithID() have significant code duplication. CreateWithID duplicates nearly all argument-building logic from Create. Refactor to have one method call the other or extract shared logic.", "status": "closed", "priority": 2, "issue_type": "task", "owner": "steve.yegge@gmail.com", "created_at": "2026-01-22T03:20:22Z", "created_by": "gastown/crew/dennis", "updated_at": "2026-02-27T02:56:15Z", "closed_at": "2026-02-27T02:56:15Z", "close_reason": "Stale code review cleanup epic — aspirational refactoring (Clown Show #21)", "dependencies": [{"issue_id": "gt-its8p9.1", "depends_on_id": "gt-its8p9", "type": "parent-child", "created_at": "2026-01-22T03:20:22Z", "created_by": "mayor", "metadata": "{}"}], "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-its8p9"}
{"id": "gt-npatu9", "title": "Beads Code Review Cleanup Epic", "description": "Comprehensive code review of the Beads codebase to identify refactoring opportunities, legacy code paths, code smells, and simplification targets. Each crew member reviews a different subsystem with a specific lens.", "status": "closed", "priority": 2, "issue_type": "epic", "owner": "steve.yegge@gmail.com", "created_at": "2026-01-22T03:18:34Z", "created_by": "gastown/crew/max", "updated_at": "2026-02-27T02:56:15Z", "closed_at": "2026-02-27T02:56:15Z", "close_reason": "Stale code review cleanup epic — aspirational refactoring (Clown Show #21)", "labels": ["beads", "cleanup", "code-review"], "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-fmnml", "title": "wyvern refinery/rig worktree references missing .repo.git", "description": "The refinery/rig worktree .git file references /Users/stevey/gt/wyvern/.repo.git/worktrees/rig but .repo.git does not exist. This prevents git operations in the refinery rig.\n\nError: fatal: not a git repository: /Users/stevey/gt/wyvern/.repo.git/worktrees/rig\n\nThe wyvern rig needs either:\n1. A .repo.git to be created/cloned\n2. The worktree reference to be fixed\n3. Or clarification that refinery doesn't need git (just processes mail)\n\n(Moved from hq-ht07d)", "status": "closed", "priority": 2, "issue_type": "bug", "created_at": "2026-01-21T01:39:38Z", "created_by": "mayor", "updated_at": "2026-02-27T02:56:08Z", "closed_at": "2026-02-27T02:56:08Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-bxwjr", "title": "Design work-level pause mechanism", "description": "Need to be able to pause individual work items (issues, tasks) separate from pausing workers.\n\n## Use Cases\n- Waiting on external dependency (design review, API not ready)\n- Deprioritized work (context switch, priority change)\n- Blocked by another issue (dependency)\n- Work needs rethinking (approach discovered to be wrong)\n\n## Questions to Resolve\n- Is this just `status: paused` on work beads?\n- How does it interact with molecules (pause a step vs pause the whole thing)?\n- How does MEOW's wisp/molecule model handle this?\n- Should paused work be unhookable, or hookable-but-blocked?\n- What's the UX for a worker who has paused work on their hook?\n- Can paused work be \"stolen\" by another worker if needed?\n\n## Relationship to Worker Pause\nWorker pause (lives on agent bead) is separate:\n- Worker paused = holds ALL work, doesn't run\n- Work paused = THIS work blocked, worker can do other things\n\nBoth need to exist. This bead is about work pause only.\n\n## Potential Mechanisms\n1. **Status field**: `status: paused` on issue/task beads\n2. **Label**: `state:paused` (consistent with worker pause)\n3. **Molecule step state**: pause at step granularity\n4. **Blocking dependency**: synthetic \"pause\" dependency that blocks\n\n## See Also\n- Worker pause: separate implementation (gt pause/unpause)\n- MEOW molecule execution model\n- Beads issue lifecycle\n\n\n(Moved from hq-3sijd)", "status": "closed", "priority": 2, "issue_type": "task", "created_at": "2026-01-21T01:39:37Z", "created_by": "mayor", "updated_at": "2026-02-27T02:56:08Z", "closed_at": "2026-02-27T02:56:08Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "labels": ["design", "placeholder"], "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-4unmo", "title": "Implement pause cascade and polish", "description": "Implement pause cascade logic and polish the pause/resume system.\n\n## Cascade Logic\nPause should cascade from broader to narrower scope:\n- Town paused → all rigs effectively paused → all workers effectively paused\n- Rig paused → all workers in that rig effectively paused\n- Worker paused → just that worker\n\n## Implementation\nModify `gt prime` to check cascade:\n```go\n// Check pause state in order: town → rig → worker\n// If any is paused, worker sees pause state\n```\n\n## Unpause Nudge\nWhen unpausing a worker that has exited:\n- Detect session is dead\n- Optionally restart session automatically\n- Or just remove pause label and let next manual start continue\n\n## Polish Items\n- Better error messages for edge cases\n- Pause state in `gt status` output\n- `gt crew list` shows paused workers\n- Audit trail queries: \"show me all pause/unpause events\"\n\n## Files to Modify\n- `mayor/rig/internal/cmd/prime.go` (cascade check)\n- `mayor/rig/internal/cmd/status.go` (show pause state)\n- `mayor/rig/internal/cmd/crew.go` (show paused in list)\n\n## Depends On\n- Pause/unpause commands\n- Seance-powered resume\n\n\n(Moved from hq-2sjpq)", "status": "closed", "priority": 2, "issue_type": "feature", "created_at": "2026-01-21T01:39:36Z", "created_by": "mayor", "updated_at": "2026-02-27T02:56:08Z", "closed_at": "2026-02-27T02:56:08Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "labels": ["worker-lifecycle"], "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-qdia9", "title": "Plugin & Escalation Systems for Gas Town", "description": "Cross-rig convoy tracking the plugin and escalation system implementation.\n\n## Tracked Epics (gastown rig)\n\n- gt-i9r20: Escalation System (start here - config schema is ready)\n- gt-n08ix: Plugin System (blocked by escalation)\n\n## Design Docs\n\n- docs/design/escalation-system.md\n- docs/design/plugin-system.md\n\n## Ready to Swarm\n\nStart with gt-i9r20.2 (Escalation routing config schema) - no blockers.\n\n## Context\n\nImplements deacon-dispatched plugins with wisps-based state tracking,\nand unified severity-based escalation routing.\n\n(Moved from hq-4jbld)", "status": "closed", "priority": 2, "issue_type": "convoy", "created_at": "2026-01-21T01:39:24Z", "created_by": "mayor", "updated_at": "2026-02-27T02:56:08Z", "closed_at": "2026-02-27T02:56:08Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-0t9n9", "title": "Proactive cleanup via Claude Code hooks", "description": "Problem: Stale branches, orphan processes, and debris accumulate faster than manual cleanup. Found 80+ stale branches today despite cleanup yesterday.\n\nSolution: Use Claude Code hooks (PreToolUse, PostToolUse, Stop) to detect and clean proactively:\n- Before/after git ops: prune merged branches\n- On session end: clean worktree, verify no orphans\n- Session start: run gt doctor checks\n\nKey insight: Real-time cleanup > periodic cleanup sessions (same lesson as Batch-Closure Heresy).\n\nAcceptance: Branch accumulation <10 stale/rig, orphans caught in 60s, no manual cleanup sessions.\n\n(Moved from hq-gvvrs)", "status": "closed", "priority": 2, "issue_type": "feature", "created_at": "2026-01-21T01:39:13Z", "created_by": "mayor", "updated_at": "2026-02-27T02:56:08Z", "closed_at": "2026-02-27T02:56:08Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-sszx3", "title": "Wire refinery to auto-close completed convoys and land branches", "description": "Refinery should handle convoy completion:\n\n1. Run 'gt convoy check' to auto-close convoys where all tracked issues are closed\n2. For landed convoys with integration branches, trigger 'gt swarm land'\n3. Clean up stale branches after successful landing\n\nAcceptance:\n- Convoys auto-close when all tracked issues complete\n- Integration branches merge to main automatically\n- Branch cleanup happens post-landing\n\n(Moved from hq-8rdnkb)", "status": "closed", "priority": 2, "issue_type": "task", "created_at": "2026-01-21T01:39:10Z", "created_by": "mayor", "updated_at": "2026-02-27T02:56:08Z", "closed_at": "2026-02-27T02:56:08Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-t2bjt", "title": "Skip digest creation for patrol molecules by default", "description": "## Problem\n\nPatrol digests are polluting the town beads database with ~1500+ unnecessary beads. Every Deacon and Refinery patrol cycle creates a permanent digest bead when the molecule squashes via `gt mol squash`.\n\n## Location\n\n`internal/cmd/molecule_lifecycle.go:219` - the squash command creates a digest as a regular bead:\n\n```go\ndigestIssue, err := b.Create(beads.CreateOptions{\n    Title:       fmt.Sprintf(\"Digest: %s\", moleculeID),\n    Type:        \"task\",  // Creates a permanent bead\n    Priority:    4,\n    Actor:       target,\n})\n```\n\n## Solution\n\n1. Skip digest creation for patrol molecules by default\n2. Add `tracking.digest` config to formula TOML (default: false)\n3. Only create digest if `tracking.digest: true` in the formula\n\n## Formula config example\n\n```toml\n[tracking]\ndigest = true  # opt-in for digests\n```\n\n## Notes\n\n- Patrol formulas (mol-deacon-patrol, mol-refinery-patrol) should NOT create digests\n- Feature molecules might want digests for audit trail - make it opt-in\n- Consider whether digests should be wisps instead of permanent beads even when enabled\n\n(Moved from hq-a7qjmq)", "status": "closed", "priority": 2, "issue_type": "feature", "created_at": "2026-01-21T01:39:02Z", "created_by": "mayor", "updated_at": "2026-02-27T02:56:08Z", "closed_at": "2026-02-27T02:56:08Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-0jj1l", "title": "Implement seance-powered crash recovery (gt crew resume)", "description": "Implement seance-powered crash recovery for all worker roles.\n\n## Commands\n```bash\ngt crew resume <name>      # Resume crashed crew worker\ngt witness resume          # Resume crashed witness\ngt refinery resume         # Resume crashed refinery\ngt polecat resume <name>   # Resume crashed polecat\ngt dog resume <name>       # Resume crashed dog\n```\n\n## The Flow\n1. Check for existing continuation (checkpoint or graceful pause)\n2. If missing → invoke seance:\n   - Find last session ID from events\n   - Spawn: `gt seance --talk <id> -p \"<extraction prompt>\"`\n   - Capture response as continuation\n   - Store in checkpoint\n3. Start fresh session with continuation as priming\n\n## Seance Extraction Prompt\n```\nYour session ended unexpectedly. A new session will continue your work.\n\nWrite a continuation prompt for your replacement. Include:\n1. What you were working on (specific files, functions, issue)\n2. What approach you were taking\n3. What you had figured out\n4. What you were about to do next\n5. Any gotchas or context they need\n\nBe specific: file names, line numbers, variable names, your reasoning.\nKeep it under 500 words - they'll have access to beads and git state.\n```\n\n## Modify gt prime\nAdd crash recovery priming output when Checkpoint.Continuation exists.\n\n## Files to Create/Modify\n- `mayor/rig/internal/cmd/resume.go` (new)\n- `mayor/rig/internal/cmd/seance.go` (modify: add extraction mode)\n- `mayor/rig/internal/cmd/prime_output.go` (modify: crash recovery priming)\n\n## Depends On\n- Pause/unpause infrastructure (checkpoint continuation field)\n\n\n(Moved from hq-ycbth)", "status": "closed", "priority": 2, "issue_type": "feature", "created_at": "2026-01-21T01:38:47Z", "created_by": "mayor", "updated_at": "2026-02-27T02:56:08Z", "closed_at": "2026-02-27T02:56:08Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "labels": ["worker-lifecycle"], "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-utbjv", "title": "Implement gt pause/unpause commands", "description": "Implement worker pause/unpause commands and infrastructure.\n\n## Commands\n- `gt pause [scope]` - pause worker, rig, or town\n- `gt unpause [scope]` - unpause\n\n## Scope Examples\n```bash\ngt pause               # Pause current worker (from cwd)\ngt pause max           # Pause crew worker \"max\"\ngt pause --rig gastown # Pause entire rig\ngt pause --town        # Pause entire town\n```\n\n## Implementation\n\n### State Representation\n- Event beads for audit trail (agent.paused, agent.unpaused)\n- Label `state:paused` on agent bead (cache for fast query)\n\n### Hook Integration\nModify `gt hook show` to check pause state and display prominently:\n```\nHook: gt-123 (Feature: Add logout button)\n\n⏸️  PAUSED - work hooked but held\n    Scope: worker max\n    Since: 2026-01-12T17:45:00\n```\n\n### Graceful Pause Flow\n1. Send nudge to worker: \"pause-requested\"\n2. Worker writes continuation to checkpoint\n3. Worker adds state:paused label\n4. Worker emits agent.paused event\n5. Worker exits cleanly\n\n### Checkpoint Extension\nAdd `Continuation` and `ContinuationSource` fields to Checkpoint struct.\n\n## Files to Create/Modify\n- `mayor/rig/internal/cmd/pause.go` (new)\n- `mayor/rig/internal/cmd/unpause.go` (new)\n- `mayor/rig/internal/cmd/hook_show.go` (modify)\n- `internal/checkpoint/checkpoint.go` (modify)\n\n## Open Question\nWhen paused, should session exit or hold alive? Recommend: exit cleanly, rely on continuation for context recovery.\n\n\n(Moved from hq-qjhnc)", "status": "closed", "priority": 2, "issue_type": "feature", "created_at": "2026-01-21T01:38:32Z", "created_by": "mayor", "updated_at": "2026-02-27T02:56:07Z", "closed_at": "2026-02-27T02:56:07Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "labels": ["worker-lifecycle"], "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-5huql", "title": "FEAT: gt rig disable/enable to prevent daemon restarts", "description": "## Problem\n\n`gt rig shutdown` stops witness/refinery but the daemon auto-restarts them.\n\nNeed a way to fully disable a rig so it stays down.\n\n## Solution\n\nImplemented as multi-level property system:\n- Level 1: `gt rig park/unpark` (local, ephemeral via wisps)\n- Level 2: `gt rig dock/undock` (global, persistent via rig beads)\n\n## Implementation\n\nSee epic: gt-ih6xy\n\nDocs:\n- ~/gt/docs/hop/PROPERTY-LAYERS.md\n- gastown/docs/property-layers.md\n\n(Moved from hq-k2u5oo)", "status": "closed", "priority": 2, "issue_type": "feature", "created_at": "2026-01-21T01:38:22Z", "created_by": "mayor", "updated_at": "2026-02-27T02:56:07Z", "closed_at": "2026-02-27T02:56:07Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-7w6cq", "title": "gt hook should warn about git divergence and show recent trail", "description": "When a worker checks their hook (waking up or starting a new task), they need context about what happened while they were away.\n\n## Problem\nI started work on hq-ew1mbr.27 without realizing my branch had diverged (1 local, 6 remote commits). This led to duplicate work and merge conflicts.\n\n## Desired behavior\n`gt hook` should show:\n1. Current hooked work (existing)\n2. **Git divergence warning** if local/origin have diverged:\n   ⚠️ Branch diverged: 1 ahead, 6 behind origin/main\n   Run 'git pull --rebase' before starting work\n3. **Recent trail summary** (leverage gt trail):\n   📍 Recent: 3 commits by darcy, 2 beads closed (since last activity)\n4. Unread mail count (already shown)\n\n## Implementation ideas\n- gt trail already exists with commits/beads/hooks subcommands\n- Add git fetch + rev-list check for divergence\n- Make this the standard 'worker context' check\n- Could also run automatically when work is slung to an agent\n\n## Why this matters\n'Unpushed work is lost work' - in multi-agent swarms, agents need to see what others have done before starting. This catches stale state at the moment of task pickup.\n\n(Moved from hq-h8usn)", "status": "closed", "priority": 2, "issue_type": "task", "created_at": "2026-01-21T01:38:19Z", "created_by": "mayor", "updated_at": "2026-02-27T02:56:07Z", "closed_at": "2026-02-27T02:56:07Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "labels": ["desire-path"], "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-9p8h5", "title": "Add 'gt <role> health' as alias for health-state across all roles", "description": "## What I tried\n```\ngt deacon health\n```\n\n## Error\n```\nError: unknown command \"health\" for \"gt deacon\"\n```\n\n## Expected behavior\nShow the health state of the system - same as `gt deacon health-state`.\n\n## Why this is a desire path\n'health' is the natural shorthand. Most CLI tools use short, memorable subcommands. `health-state` feels verbose when you just want to quickly check status.\n\n## Scope\nAdd `health` alias for all roles that have health monitoring:\n- `gt deacon health` → `gt deacon health-state`\n- `gt witness health` → health state for witness\n- Any other roles with health monitoring\n\n## Workaround\nUse `gt deacon health-state`\n\n(Moved from hq-eelf1)", "status": "closed", "priority": 2, "issue_type": "task", "created_at": "2026-01-21T01:38:04Z", "created_by": "mayor", "updated_at": "2026-02-27T02:56:07Z", "closed_at": "2026-02-27T02:56:07Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "labels": ["desire-path"], "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-4z46i", "title": "Add 'gt patrols' command for unified patrol lifecycle management", "description": "(Moved from hq-2sp4qf)", "status": "closed", "priority": 2, "issue_type": "task", "created_at": "2026-01-21T01:38:03Z", "created_by": "mayor", "updated_at": "2026-02-27T02:56:07Z", "closed_at": "2026-02-27T02:56:07Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-vl9ba", "title": "gt resume: Resume worker sessions using Claude Code's --resume", "description": "## Problem\n\nAfter pausing the town (killing Claude processes), restarting workers loses their context. They start fresh sessions and have to re-orient.\n\n## Solution\n\nAdd `gt resume <worker>` command that uses Claude Code's `--resume` flag to continue the most recent session for that worker.\n\n## Usage\n\n```bash\ngt resume gastown/furiosa      # Resume specific polecat\ngt resume gastown/refinery     # Resume refinery\ngt crew resume george          # Resume crew member\ngt town resume                 # Resume all workers (batch)\n```\n\n## Implementation\n\n1. Track session IDs per worker (store in worker state or derive from tmux)\n2. On resume, launch claude with `--resume <session-id>` instead of fresh\n3. Worker picks up where they left off with full context\n\n## Use Cases\n\n- Resume after `gt town pause`\n- Resume after crash/restart\n- Resume after manual kill for debugging\n\n## Notes\n\n- Claude Code stores sessions in ~/.claude/ \n- Need to map worker identity → session ID\n- Consider `gt town pause` + `gt town resume` as paired commands\n\n(Moved from hq-0yn59)", "status": "closed", "priority": 2, "issue_type": "feature", "created_at": "2026-01-21T01:38:01Z", "created_by": "mayor", "updated_at": "2026-02-27T02:56:07Z", "closed_at": "2026-02-27T02:56:07Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-y1uvb", "title": "Replace role beads with config-based role system", "description": "# Design: Config-Based Role System\n\n**Status:** Design\n**Author:** george (crew)\n**Date:** 2026-01-19\n\n## Problem Statement\n\nRole beads are trying to be two things at once:\n1. **Class/Template** - Universal definition of what a role IS (ships with Gas Town)\n2. **Instance/Config** - Per-installation customization of role behavior\n\nThis creates several problems:\n- Migration headaches (gt migrate-agents partial failures)\n- Unclear ownership (are role beads \"work\" or \"infrastructure\"?)\n- Role beads don't fit the HOP ledger model (they're not timestamped work evidence)\n- bd doctor doesn't know how to validate them properly\n\n## Decision\n\n**Replace role beads with config files.** Role definitions become configuration that ships with the binary and can be overridden per-town or per-rig.\n\nAgent beads (runtime state) remain as beads. Only role DEFINITIONS move to config.\n\n## Design\n\n### Directory Structure\n\n```\n~/gt/\n├── .beads/                    # Town beads (WORK only - no role beads)\n│   ├── issues.jsonl\n│   └── routes.jsonl\n├── config/\n│   ├── town.json              # Town identity (existing)\n│   └── settings.json          # Town settings (existing, has role_agents)\n├── roles/                     # NEW: Role definition overrides\n│   └── <role>.yaml            # User customizations (optional)\n└── <rig>/\n    └── roles/                 # Rig-level overrides (optional)\n        └── <role>.yaml        # Rig-specific config\n```\n\nDefault role definitions are embedded in the binary (not written to disk).\n\n### Role Config Schema\n\n```yaml\n# Example: deacon.yaml\nrole: deacon\nscope: town  # town | rig\n\nsession:\n  pattern: \"gt-deacon\"\n  work_dir: \"{town}\"\n  needs_pre_sync: false\n  start_command: \"exec claude --dangerously-skip-permissions\"\n\nenv:\n  GT_ROLE: deacon\n  GT_SCOPE: town\n\nhealth:\n  ping_timeout: 30s\n  consecutive_failures: 3\n  kill_cooldown: 5m\n  stuck_threshold: 1h\n\nnudge: \"Run 'gt prime' to check patrol status and begin heartbeat cycle.\"\nprompt_template: deacon.md.tmpl\n```\n\n### Resolution Order (Layered Config)\n\n1. **Built-in defaults** - Embedded in binary via go:embed\n2. **Town-level overrides** - ~/gt/roles/<role>.yaml\n3. **Rig-level overrides** - <rig>/roles/<role>.yaml\n\nEach layer merges with (not replaces) the previous. Users only specify fields they want to change.\n\n### Roles to Define\n\n| Role | Scope | Session Pattern | Work Dir |\n|------|-------|-----------------|----------|\n| mayor | town | gt-mayor | {town} |\n| deacon | town | gt-deacon | {town} |\n| dog | town | gt-dog-{name} | {town}/deacon/dogs/{name} |\n| witness | rig | gt-{rig}-witness | {town}/{rig}/witness |\n| refinery | rig | gt-{rig}-refinery | {town}/{rig}/refinery/rig |\n| polecat | rig | gt-{rig}-{name} | {town}/{rig}/polecats/{name} |\n| crew | rig | gt-{rig}-{name} | {town}/{rig}/crew/{name} |\n\n### Code Changes\n\n#### New Files\n\n- `internal/config/roles.go` - RoleConfig type and loader\n- `internal/config/roles/` - Embedded default YAML files\n\n#### Modified Files\n\n- `internal/daemon/lifecycle.go` - Use LoadRoleConfig() instead of reading role beads\n- `internal/beads/beads_agent.go` - Remove role_bead field, keep role_type\n- `internal/cmd/install.go` - Remove role bead creation\n- `internal/cmd/doctor.go` - Check config files instead of role beads\n\n#### Removed Files\n\n- `internal/cmd/migrate_agents.go` - No longer needed\n- `internal/beads/beads_role.go` - Role bead definitions (keep RoleConfig parsing temporarily)\n\n### API\n\n```go\n// LoadRoleConfig loads role config with override resolution\nfunc LoadRoleConfig(townRoot, rigPath, roleName string) (*RoleConfig, error)\n\n// RoleConfig contains all role definition fields\ntype RoleConfig struct {\n    Role   string\n    Scope  string // \"town\" or \"rig\"\n    Session SessionConfig\n    Env     map[string]string\n    Health  HealthConfig\n    Nudge          string\n    PromptTemplate string\n}\n```\n\n### Commands\n\n**New:**\n- `gt role show <role>` - Display effective config for a role (with override chain)\n- `gt role list` - List all roles with their scope\n\n**Removed:**\n- `gt migrate-agents` - No longer needed\n\n**Modified:**\n- `gt doctor` - Check for config file issues, not role beads\n\n### Migration Path\n\nFor existing installations with role beads:\n\n1. New code ignores role beads entirely (reads from config)\n2. Old role beads become orphaned (harmless)\n3. Users can optionally run `bd close hq-*-role` to clean up\n4. Or just leave them (they're inert)\n\nNo data migration required. The config system is additive.\n\n### What Stays the Same\n\n- Agent beads (`hq-deacon`, `gt-gastown-witness`) - Still store runtime state\n- System prompt templates (`internal/templates/roles/*.md.tmpl`) - Unchanged\n- `settings.json` role_agents - Model selection stays in settings\n\n### Benefits\n\n1. **No migration needed** - Config ships with binary\n2. **Clear separation** - Config (how roles work) vs. ledger (work evidence)\n3. **Easy customization** - Edit YAML, not beads\n4. **Versioned with code** - Role defs evolve with releases\n5. **Discoverable** - `gt role show deacon` vs. `bd show hq-deacon-role`\n6. **Aligns with HOP** - Beads are for work, not infrastructure\n\n## Implementation Plan\n\n### Phase 1: Add config system (non-breaking)\n- [ ] Create `internal/config/roles.go` with types\n- [ ] Create embedded default YAML files\n- [ ] Add `LoadRoleConfig()` function\n- [ ] Add `gt role show` and `gt role list` commands\n\n### Phase 2: Switch daemon to config\n- [ ] Update `daemon/lifecycle.go` to use `LoadRoleConfig()`\n- [ ] Update `getRoleConfigForIdentity()` to use new loader\n- [ ] Test all role types still work\n\n### Phase 3: Clean up role beads\n- [ ] Remove role bead creation from `gt install`\n- [ ] Remove `gt migrate-agents` command\n- [ ] Update `gt doctor` to check config instead of role beads\n- [ ] Remove `role_bead` field from agent bead schema\n- [ ] Mark `beads_role.go` as deprecated (or remove)\n\n### Phase 4: Documentation\n- [ ] Update architecture.md\n- [ ] Add role customization docs\n- [ ] Update PRIMING.md if needed\n\n## Open Questions\n\n1. **Should defaults be written to disk?** Current design embeds in binary. Alternative: `gt install` writes `roles/defaults/` as reference copies.\n\n2. **Rig-level role overrides path?** Currently `<rig>/roles/`. Could also be `<rig>/config/roles/` for consistency.\n\n3. **Role inheritance?** Should `crew` be able to inherit from `polecat` with overrides? (Probably not - keep it simple.)\n\n## References\n\n- PRIMING.md - Two-level beads architecture\n- architecture.md - Agent bead storage\n- 001-beads-is-the-ledger.md - Beads as work ledger, not config store\n", "status": "closed", "priority": 2, "issue_type": "epic", "owner": "steve.yegge@gmail.com", "created_at": "2026-01-19T20:03:57Z", "created_by": "gastown/crew/george", "updated_at": "2026-02-27T02:56:07Z", "closed_at": "2026-02-27T02:56:07Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "labels": ["architecture", "design"], "dependency_count": 0, "dependent_count": 0, "comment_count": 3}
{"id": "gt-1c1wn", "title": "label:convoy AND status:open", "status": "closed", "priority": 2, "issue_type": "task", "created_at": "2026-01-19T18:28:45Z", "updated_at": "2026-02-27T02:56:06Z", "closed_at": "2026-02-27T02:56:06Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-vd5f", "title": "Test polecat cleanup", "description": "dispatched_by: mayor\n\nImmediately call gt done to test session cleanup", "status": "closed", "priority": 2, "issue_type": "task", "owner": "steve.yegge@gmail.com", "created_at": "2026-01-17T11:15:27Z", "created_by": "mayor", "updated_at": "2026-02-27T02:56:06Z", "closed_at": "2026-02-27T02:56:06Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-e7efgn", "title": "Design agent work-finding mechanism (gt mywork or gt trail --me)", "description": "Agents need to quickly find their last work (commits, beads, etc.) when resuming sessions.\n\n## Context\n- gt trail exists but email domain filtering doesn't work (commits use user email)\n- With --all it shows agent names from author field, but no --me filter\n- Hooks subcommand is stubbed out\n\n## Design direction discussed\nSee ~/gt/docs/AGENT-ERGONOMICS.md for context.\n\nOptions considered:\n1. Fix author filtering - match on author name not email\n2. Add --me flag - auto-detect from gt role\n3. Add --agent NAME flag\n4. New gt mywork command - unified view of agent's recent activity\n\nRecommendation was option 4 as convenience wrapper on improved gt trail --me.\n\n## Files explored\n- internal/cmd/trail.go - existing trail implementation\n- mayor/rig/.beads/README.md - beads overview", "status": "closed", "priority": 2, "issue_type": "task", "owner": "steve.yegge@gmail.com", "created_at": "2026-01-17T10:18:40Z", "created_by": "gastown/crew/joe", "updated_at": "2026-02-27T02:56:06Z", "closed_at": "2026-02-27T02:56:06Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-group-trace-test", "title": "Trace Test", "description": "test", "status": "closed", "priority": 2, "issue_type": "task", "owner": "steve.yegge@gmail.com", "created_at": "2026-01-15T05:59:15Z", "created_by": "gastown/crew/max", "updated_at": "2026-02-27T02:54:16Z", "closed_at": "2026-02-27T02:54:16Z", "close_reason": "Test group artifacts (Clown Show #21 cleanup)", "labels": ["gt:group"], "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-group-test-group-debug", "title": "Group: test-group-debug", "description": "Group: test-group-debug\n\nname: test-group-debug\nmembers: gastown/crew/max\ncreated_by: test\ncreated_at: null", "status": "closed", "priority": 2, "issue_type": "task", "owner": "steve.yegge@gmail.com", "created_at": "2026-01-15T05:57:37Z", "created_by": "gastown/crew/max", "updated_at": "2026-02-27T02:54:15Z", "closed_at": "2026-02-27T02:54:15Z", "close_reason": "Test group artifacts (Clown Show #21 cleanup)", "labels": ["gt:group"], "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-group-test-groupY", "title": "Group: test-groupY", "description": "Group: test-groupY\n\nname: test-groupY\nmembers: gastown/crew/max\ncreated_by: test\ncreated_at: null", "status": "closed", "priority": 2, "issue_type": "task", "owner": "steve.yegge@gmail.com", "created_at": "2026-01-15T05:55:42Z", "created_by": "gastown/crew/max", "updated_at": "2026-02-27T02:54:15Z", "closed_at": "2026-02-27T02:54:15Z", "close_reason": "Test group artifacts (Clown Show #21 cleanup)", "labels": ["gt:group"], "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-group-test-groupX", "title": "Group: test-groupX", "description": "Group: test-groupX\n\nname: test-groupX\nmembers: gastown/crew/max\ncreated_by: test\ncreated_at: null", "status": "closed", "priority": 2, "issue_type": "task", "owner": "steve.yegge@gmail.com", "created_at": "2026-01-15T05:54:43Z", "created_by": "gastown/crew/max", "updated_at": "2026-02-27T02:54:15Z", "closed_at": "2026-02-27T02:54:15Z", "close_reason": "Test group artifacts (Clown Show #21 cleanup)", "labels": ["gt:group"], "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-group-test-group", "title": "Group: test-group", "description": "test", "status": "closed", "priority": 2, "issue_type": "task", "owner": "steve.yegge@gmail.com", "created_at": "2026-01-15T05:53:45Z", "created_by": "gastown/crew/max", "updated_at": "2026-02-27T02:54:15Z", "closed_at": "2026-02-27T02:54:15Z", "close_reason": "Test group artifacts (Clown Show #21 cleanup)", "labels": ["gt:group"], "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-euppz1", "title": "parent:gt-wisp-dfwk status:open", "status": "closed", "priority": 2, "issue_type": "task", "created_at": "2026-01-14T15:47:27Z", "updated_at": "2026-02-27T02:56:06Z", "closed_at": "2026-02-27T02:56:06Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-f6mkz", "title": "Agent git identity: Co-Authored-By convention", "description": "## Problem\n\nFor `gt trail` (and future features) to attribute git commits to agents, we need a reliable way to match commits to agent identities.\n\n## Architectural Constraint\n\nPer FEDERATION.md and BEADS-SCHEMA-CHANGES.md:\n- **Git author email = human identity** (the CV anchor, permanent)\n- **Agent = executor** (ephemeral, like K8s pods)\n- `owner` field tracks human, `created_by` tracks agent\n\nSo agents should NOT be the primary git author - that would break CV attribution.\n\n## Solution: Co-Authored-By Pattern\n\nCommits should have:\n```\nAuthor:         Steve Yegge <steve@example.com>         # Human owner\nCo-Authored-By: jack (crew) <jack@crew.gastown.local>   # Agent executor\nCo-Authored-By: Claude Sonnet 4 <noreply@anthropic.com> # Model (existing pattern)\n```\n\nThis:\n1. Preserves human as git author (CV credit flows correctly)\n2. Agent attribution via Co-Authored-By (grep-able for `gt trail`)\n3. Aligns with existing Claude Code Co-Authored-By pattern\n4. Model attribution remains (already in use)\n\n## Agent Email Convention\n\nFor the Co-Authored-By email, use pattern:\n```\n{name}@{role}.{rig}.gastown.local\n\nExamples:\n- jack@crew.gastown.local           # Crew member jack on rig gastown\n- toast@polecats.beads.gastown.local # Polecat toast on rig beads\n- witness@gastown.gastown.local     # Witness on rig gastown (no name)\n- refinery@beads.gastown.local      # Refinery on rig beads\n- mayor@hq.gastown.local            # Mayor (town-level, use \"hq\" as pseudo-rig)\n- deacon@hq.gastown.local           # Deacon (town-level)\n```\n\nPattern breakdown: `{name}@{role}.{rig}.gastown.local`\n- Name: Agent name (or role name if singleton like witness)\n- Role: crew, polecats, witness, refinery, mayor, deacon\n- Rig: The rig name (or \"hq\" for town-level agents)\n- Domain: `gastown.local` (non-routable, clearly synthetic)\n\n## Implementation\n\n### 1. Set agent git identity at spawn time\n\nIn `gt crew spawn` and `gt polecat spawn`:\n```bash\ngit config user.name \"{name} ({role})\"\ngit config user.email \"{name}@{role}.{rig}.gastown.local\"\n```\n\nBut this would make agent the primary author. Instead:\n\n### 2. Use commit hooks or templates\n\nOption A: Commit message template that includes Co-Authored-By\nOption B: Git commit hook that appends Co-Authored-By\nOption C: Agent's commit wrapper adds the line\n\nRecommended: Option C - agents use a `gt commit` wrapper that:\n1. Uses human's git config for author\n2. Appends agent Co-Authored-By line\n3. Appends model Co-Authored-By line (if not present)\n\n### 3. For gt trail: Parse commits\n\n```go\nfunc GetAgentCommits(agentID string) []Commit {\n    // Convert agent ID to email pattern\n    // gastown/crew/jack -> jack@crew.gastown.gastown.local\n    email := AgentIDToEmail(agentID)\n\n    // Search commits for Co-Authored-By matching email\n    return git.LogWithCoAuthor(email)\n}\n```\n\n## How gt trail Uses This\n\n```\ngt trail commits\n```\n\n1. Get current agent identity via `GetRole()` -> `gastown/crew/jack`\n2. Convert to email pattern: `jack@crew.gastown.gastown.local`\n3. Search git log for commits with matching Co-Authored-By\n4. Display results\n\n## Beads Already Handle This\n\nBeads have `created_by` field with agent identity - no change needed there.\n\n## Open Question\n\nShould there be a `gt commit` wrapper, or should this be done via:\n- Git hooks installed by `gt init`?\n- Environment setup at agent spawn?\n- Claude Code configuration?\n\nRecommendation: Git hooks installed per-agent that append the Co-Authored-By line.\n\n## Related\n\n- Blocks: gt-j1m5v (gt trail design)\n- Aligns with: FEDERATION.md identity hierarchy\n- Aligns with: BEADS-SCHEMA-CHANGES.md owner vs created_by\n", "status": "closed", "priority": 2, "issue_type": "task", "owner": "steve.yegge@gmail.com", "created_at": "2026-01-14T02:02:44Z", "created_by": "gastown/crew/jack", "updated_at": "2026-02-27T02:56:05Z", "closed_at": "2026-02-27T02:56:05Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "labels": ["design", "prerequisite"], "dependencies": [{"issue_id": "gt-f6mkz", "depends_on_id": "gt-j1m5v", "type": "blocks", "created_at": "2026-01-14T02:02:44Z", "created_by": "mayor", "metadata": "{}"}], "dependency_count": 1, "dependent_count": 0, "comment_count": 1}
{"id": "gt-j1m5v", "title": "gt trail - discover recent agent work", "description": "## Summary\n\nAdd `gt trail` command to let agents discover their recent work by aggregating existing state from multiple sources. Follows the \"discover, don't track\" principle - no new state created, just surfaces what's already there.\n\n## Aliases\n\n- `gt recent` → `gt trail`\n- `gt recap` → `gt trail`\n\n## Command Structure\n\n    gt trail                    # All recent work for current agent (default)\n    gt trail commits            # Just git commits\n    gt trail beads              # Just beads activity\n    gt trail hooks              # Just completed hooks\n    gt trail [agent-id]         # Another agent's trail (e.g., \"gastown/crew/max\")\n\n## Flags\n\n    --since=DURATION    # 1h, 24h, 7d, yesterday, 2024-01-10\n    --limit=N, -n N     # Max items (default: 20)\n    --json              # Machine-readable output\n    --all               # Include mail, verbose info\n\n## Data Sources\n\n1. **Git commits** - Match by author identity\n2. **Beads** - Created by or assigned to this agent\n3. **Hook completions** - Beads that were hooked and marked done by this agent\n4. **Mail** (optional via --all) - Sent/received messages\n\n## Output Format\n\nChronological list, most recent first:\n\n    $ gt trail\n    Recent work for gastown/crew/jack:\n\n      2h ago   commit   503e66ba  fix: add --allow-stale to --no-daemon reads\n      3h ago   bead     bd-a8f3   Closed: implement status caching\n      5h ago   hook     bd-c2e1   Completed: review PR #42\n      1d ago   commit   8051c8bd  feat(hook): auto-detect agent in gt hook show\n      ...\n\n## Identity Matching\n\n**Current agent:** Use GetRole() → AgentIdentity.Address()\n\n**Git commits:** Need to establish mapping. Options:\n- Agent git email convention: {name}@{rig}.gastown.local\n- Or: scan commit Co-Authored-By lines for agent names\n- Or: match commits from agent's working directory\n\n**Beads:** Match creator field against agent address\n\n**Hooks:** Query hook completions from agent's hook root\n\n## Implementation Notes\n\n- New file: internal/cmd/trail.go\n- Group: GroupDiag (diagnostic/introspection)\n- Use existing packages: git, beads, session, mail\n- Pattern follows gt status for role detection\n\n## Open Questions\n\n1. How to reliably match git commits to agents? Need a convention.\n2. Should hook history be its own source, or derived from bead status changes?\n3. What's the right default --limit? 20 items? Last 24 hours?\n", "status": "closed", "priority": 2, "issue_type": "task", "owner": "steve.yegge@gmail.com", "created_at": "2026-01-14T02:02:23Z", "created_by": "gastown/crew/jack", "updated_at": "2026-02-27T02:56:05Z", "closed_at": "2026-02-27T02:56:05Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "labels": ["design", "feature"], "dependency_count": 0, "dependent_count": 1, "comment_count": 0}
{"id": "gt-54ias", "title": "Review PR #439: fix test icon expectations", "description": "dispatched_by: gastown/crew/max\n\nReview and merge PR #439. Fixes icon expectations in migrate_agents_test. +35/-11 lines. https://github.com/steveyegge/gastown/pull/439", "notes": "PR #439 has compile error in mail_queue.go - requested changes from author", "status": "closed", "priority": 2, "issue_type": "task", "assignee": "gastown/crew/gus", "owner": "steve.yegge@gmail.com", "created_at": "2026-01-13T21:06:05Z", "created_by": "gastown/crew/max", "updated_at": "2026-02-27T02:56:05Z", "closed_at": "2026-02-27T02:56:05Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-3u40r", "title": "Review PR #460: fix shutdown reliability", "description": "dispatched_by: gastown/crew/max\n\nReview and merge PR #460. Improves gastown shutdown reliability. +90/-8 lines. Closes #291, #345. https://github.com/steveyegge/gastown/pull/460", "status": "closed", "priority": 2, "issue_type": "task", "assignee": "gastown/crew/tom", "owner": "steve.yegge@gmail.com", "created_at": "2026-01-13T21:05:22Z", "created_by": "gastown/crew/max", "updated_at": "2026-02-27T02:56:05Z", "closed_at": "2026-02-27T02:56:05Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-pmpqt", "title": "Merge: rictus-mkcdzb13", "description": "branch: polecat/rictus-mkcdzb13\ntarget: main\nsource_issue: rictus-mkcdzb13\nrig: gastown\nagent_bead: gt-gastown-polecat-rictus\nretry_count: 0\nlast_conflict_sha: null\nconflict_task_id: null", "status": "closed", "priority": 2, "issue_type": "task", "created_at": "2026-01-13T19:44:13Z", "created_by": "gastown/polecats/rictus", "updated_at": "2026-02-27T02:54:14Z", "closed_at": "2026-02-27T02:54:14Z", "close_reason": "Stale merge requests (Clown Show #21 cleanup)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-s9zou", "title": "Merge: nux-mkcdz71r", "description": "branch: polecat/nux-mkcdz71r\ntarget: main\nsource_issue: nux-mkcdz71r\nrig: gastown\nagent_bead: gt-gastown-polecat-nux\nretry_count: 0\nlast_conflict_sha: null\nconflict_task_id: null", "status": "closed", "priority": 2, "issue_type": "task", "created_at": "2026-01-13T19:42:31Z", "created_by": "gastown/polecats/nux", "updated_at": "2026-02-27T02:54:14Z", "closed_at": "2026-02-27T02:54:14Z", "close_reason": "Stale merge requests (Clown Show #21 cleanup)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-8ik", "title": "ZFC: Crew Worker.Branch should be discovered from git", "status": "closed", "priority": 2, "issue_type": "task", "owner": "steve.yegge@gmail.com", "created_at": "2026-01-13T07:32:28Z", "created_by": "gastown/crew/gus", "updated_at": "2026-02-27T02:56:05Z", "closed_at": "2026-02-27T02:56:05Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "labels": ["reconciliation", "zfc"], "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-h7s", "title": "ZFC: Dog State should be derived from agent bead/hook status", "status": "closed", "priority": 2, "issue_type": "task", "owner": "steve.yegge@gmail.com", "created_at": "2026-01-13T07:32:23Z", "created_by": "gastown/crew/gus", "updated_at": "2026-02-27T02:56:05Z", "closed_at": "2026-02-27T02:56:05Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "labels": ["reconciliation", "zfc"], "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-16k", "title": "ZFC: Boot Status.Running is redundant with IsSessionAlive()", "status": "closed", "priority": 2, "issue_type": "task", "owner": "steve.yegge@gmail.com", "created_at": "2026-01-13T07:32:17Z", "created_by": "gastown/crew/gus", "updated_at": "2026-02-27T02:56:05Z", "closed_at": "2026-02-27T02:56:05Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "labels": ["reconciliation", "zfc"], "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-gw1", "title": "ZFC: Daemon State.Running should be discovered from tmux session", "status": "closed", "priority": 2, "issue_type": "task", "owner": "steve.yegge@gmail.com", "created_at": "2026-01-13T07:32:12Z", "created_by": "gastown/crew/gus", "updated_at": "2026-02-27T02:56:05Z", "closed_at": "2026-02-27T02:56:05Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "labels": ["reconciliation", "zfc"], "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-2lqh1", "title": "Code review: dog dispatch and health-check", "description": "Review today's dog-related changes:\n\n1. **gt dog dispatch --plugin** (commits ff3f3b4, ee2ca10)\n   - Plugin dispatch to dogs\n   - Fixed race condition (assign work before mail)\n   - Added --json and --dry-run flags\n   - Rollback on mail failure\n\n2. **dog-health-check patrol step** (commit 6b2a743)\n   - Detects stuck dogs (working past timeout)\n   - Decision matrix for escalation\n   - Added to mol-deacon-patrol formula\n\n**Review focus:**\n- Edge cases and error handling\n- Integration with existing dog/plugin systems\n- Formula step correctness\n- Any missing functionality\n\n**Action:** File beads for any issues or followups discovered.", "status": "closed", "priority": 2, "issue_type": "task", "created_at": "2026-01-13T02:26:14Z", "created_by": "gastown/crew/gus", "updated_at": "2026-02-27T02:56:05Z", "closed_at": "2026-02-27T02:56:05Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-5ufet", "title": "Merge: nux-mkaoonte", "description": "branch: polecat/nux-mkaoonte\ntarget: main\nsource_issue: nux-mkaoonte\nrig: gastown\nagent_bead: gt-gastown-polecat-nux\nretry_count: 0\nlast_conflict_sha: null\nconflict_task_id: null", "status": "closed", "priority": 2, "issue_type": "task", "created_at": "2026-01-13T02:10:36Z", "created_by": "gastown/polecats/nux", "updated_at": "2026-02-27T02:54:14Z", "closed_at": "2026-02-27T02:54:14Z", "close_reason": "Stale merge requests (Clown Show #21 cleanup)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-emi5b", "title": "Unify spawn pattern to use NewSessionWithCommand", "description": "dispatched_by: mayor\n\nMigrate all session spawns to use NewSessionWithCommand so BD_ACTOR is always visible in the process tree. This enables orphan detection via ps.\n\nCurrently using NewSession+SendKeys (no BD_ACTOR visible):\n- internal/witness/manager.go: Witness spawn\n- internal/boot/boot.go: Boot spawn\n- internal/cmd/deacon.go: Deacon spawn (deaconStartSimple)\n\nShould use NewSessionWithCommand like:\n- internal/crew/manager.go: Crew spawn ✓\n- internal/polecat/session_manager.go: Polecat spawn ✓\n- internal/refinery/manager.go: Refinery spawn ✓\n\nThis is lower priority since Fix 1 (explicit kill) addresses the root cause.", "status": "closed", "priority": 2, "issue_type": "task", "assignee": "gastown/polecats/dementus", "created_at": "2026-01-13T01:59:46Z", "created_by": "gastown/crew/joe", "updated_at": "2026-02-27T02:56:04Z", "closed_at": "2026-02-27T02:56:04Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependencies": [{"issue_id": "gt-emi5b", "depends_on_id": "gt-pbb5c", "type": "parent-child", "created_at": "2026-01-13T02:10:52Z", "created_by": "mayor", "metadata": "{}"}, {"issue_id": "gt-emi5b", "depends_on_id": "gt-wd3ce", "type": "blocks", "created_at": "2026-01-13T01:59:46Z", "created_by": "mayor", "metadata": "{}"}], "dependency_count": 1, "dependent_count": 0, "comment_count": 0, "parent": "gt-pbb5c"}
{"id": "gt-y0utd", "title": "Merge: capable-mkbxewmf", "description": "branch: polecat/capable-mkbxewmf\ntarget: main\nsource_issue: capable-mkbxewmf\nrig: gastown\nagent_bead: gt-gastown-polecat-capable\nretry_count: 0\nlast_conflict_sha: null\nconflict_task_id: null", "status": "closed", "priority": 2, "issue_type": "task", "created_at": "2026-01-13T01:52:51Z", "created_by": "gastown/polecats/capable", "updated_at": "2026-02-27T02:54:15Z", "closed_at": "2026-02-27T02:54:15Z", "close_reason": "Stale merge requests (Clown Show #21 cleanup)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-1487o", "title": "Merge: dementus-mkbxd5s9", "description": "branch: polecat/dementus-mkbxd5s9\ntarget: main\nsource_issue: dementus-mkbxd5s9\nrig: gastown\nagent_bead: gt-gastown-polecat-dementus\nretry_count: 0\nlast_conflict_sha: null\nconflict_task_id: null", "status": "closed", "priority": 2, "issue_type": "task", "created_at": "2026-01-13T01:49:03Z", "created_by": "gastown/polecats/dementus", "updated_at": "2026-02-27T02:54:13Z", "closed_at": "2026-02-27T02:54:13Z", "close_reason": "Stale merge requests (Clown Show #21 cleanup)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-6qk6c", "title": "Merge: rictus-mkbxjxrt", "description": "branch: polecat/rictus-mkbxjxrt\ntarget: main\nsource_issue: rictus-mkbxjxrt\nrig: gastown\nagent_bead: gt-gastown-polecat-rictus\nretry_count: 0\nlast_conflict_sha: null\nconflict_task_id: null", "status": "closed", "priority": 2, "issue_type": "task", "created_at": "2026-01-13T01:47:27Z", "created_by": "gastown/polecats/rictus", "updated_at": "2026-02-27T02:54:14Z", "closed_at": "2026-02-27T02:54:14Z", "close_reason": "Stale merge requests (Clown Show #21 cleanup)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-gcqc4", "title": "Merge: dag-mkbxi9ks", "description": "branch: polecat/dag-mkbxi9ks\ntarget: main\nsource_issue: dag-mkbxi9ks\nrig: gastown\nagent_bead: gt-gastown-polecat-dag\nretry_count: 0\nlast_conflict_sha: null\nconflict_task_id: null", "status": "closed", "priority": 2, "issue_type": "task", "created_at": "2026-01-13T01:47:06Z", "created_by": "gastown/polecats/dag", "updated_at": "2026-02-27T02:54:14Z", "closed_at": "2026-02-27T02:54:14Z", "close_reason": "Stale merge requests (Clown Show #21 cleanup)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-5ay5o", "title": "Merge: toast-mkbxgkvd", "description": "branch: polecat/toast-mkbxgkvd\ntarget: main\nsource_issue: toast-mkbxgkvd\nrig: gastown\nagent_bead: gt-gastown-polecat-toast\nretry_count: 0\nlast_conflict_sha: null\nconflict_task_id: null", "status": "closed", "priority": 2, "issue_type": "task", "created_at": "2026-01-13T01:45:07Z", "created_by": "gastown/polecats/toast", "updated_at": "2026-02-27T02:54:14Z", "closed_at": "2026-02-27T02:54:14Z", "close_reason": "Stale merge requests (Clown Show #21 cleanup)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-6t5yq", "title": "Merge: rictus-mkbxbhrf", "description": "branch: polecat/rictus-mkbxbhrf\ntarget: main\nsource_issue: rictus-mkbxbhrf\nrig: gastown\nagent_bead: gt-gastown-polecat-rictus\nretry_count: 0\nlast_conflict_sha: null\nconflict_task_id: null", "status": "closed", "priority": 2, "issue_type": "task", "created_at": "2026-01-13T01:44:48Z", "created_by": "gastown/polecats/rictus", "updated_at": "2026-02-27T02:54:14Z", "closed_at": "2026-02-27T02:54:14Z", "close_reason": "Stale merge requests (Clown Show #21 cleanup)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-7tfvu", "title": "Merge: gt-gi52i", "description": "branch: polecat/slit-mkbx9tg6\ntarget: main\nsource_issue: gt-gi52i\nrig: gastown\nagent_bead: gt-gastown-polecat-slit\nretry_count: 0\nlast_conflict_sha: null\nconflict_task_id: null", "status": "closed", "priority": 2, "issue_type": "task", "created_at": "2026-01-13T01:41:06Z", "created_by": "gastown/polecats/slit", "updated_at": "2026-02-27T02:54:14Z", "closed_at": "2026-02-27T02:54:14Z", "close_reason": "Stale merge requests (Clown Show #21 cleanup)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-mfkf7", "title": "plugin: gt plugin run records success without actually executing", "description": "gt plugin run just prints the plugin instructions and records the run as 'success'. But it doesn't actually execute anything - the user/agent still needs to manually run the instructions. Recording 'success' is misleading. Options: (1) Don't record at all for manual runs, (2) Record as 'triggered' not 'success', (3) Actually execute the plugin (complex, deferred to dog dispatch).", "status": "closed", "priority": 2, "issue_type": "task", "created_at": "2026-01-13T01:28:09Z", "created_by": "gastown/crew/george", "updated_at": "2026-02-27T02:55:41Z", "closed_at": "2026-02-27T02:55:41Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-x6e6l", "title": "Merge: furiosa-mkb22v44", "description": "branch: polecat/furiosa-mkb22v44\ntarget: main\nsource_issue: furiosa-mkb22v44\nrig: gastown\nagent_bead: gt-gastown-polecat-furiosa\nretry_count: 0\nlast_conflict_sha: null\nconflict_task_id: null", "status": "closed", "priority": 2, "issue_type": "task", "created_at": "2026-01-12T11:10:26Z", "created_by": "gastown/polecats/furiosa", "updated_at": "2026-02-27T02:54:14Z", "closed_at": "2026-02-27T02:54:14Z", "close_reason": "Stale merge requests (Clown Show #21 cleanup)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-wbgpr", "title": "First plugin: rebuild-gt", "description": "Create the rebuild-gt plugin as proof of concept.\n\n## Parent Epic: gt-n08ix\n\n## Location\n~/gt/gastown/plugins/rebuild-gt/plugin.md\n\n## Content\n```markdown\n+++\nname = 'rebuild-gt'\ndescription = 'Rebuild stale gt binary from gastown source'\nversion = 1\n\n[gate]\ntype = 'cooldown'\nduration = '1h'\n\n[tracking]\nlabels = ['plugin:rebuild-gt', 'rig:gastown', 'category:maintenance']\n\n[execution]\ntimeout = '5m'\nnotify_on_failure = true\nseverity = 'medium'\n+++\n\n# Rebuild gt Binary\n\n## Timeout Awareness\nThis plugin has a 5-minute timeout. If build takes longer than expected,\ncheckpoint progress and recycle cleanly. Do not wait to be killed.\n\n## Detection\nCheck binary staleness:\n\\`\\`\\`bash\ngt stale --json\n\\`\\`\\`\nIf 'stale': false, record success wisp and exit early.\n\n## Action\nRebuild from source:\n\\`\\`\\`bash\ncd ~/gt/gastown && make build && make install\n\\`\\`\\`\n\n## Record Result\nOn success: create ephemeral bead with result:success\nOn failure: create bead with result:failure and escalate:\n\\`\\`\\`bash\ngt escalate --severity=medium 'Plugin FAILED: rebuild-gt' -m '$ERROR'\n\\`\\`\\`\n```\n\n## ZFC Notes\nThis plugin demonstrates the pattern:\n- Instructions are for the DOG (agent) to interpret\n- Dog decides if detection warrants action\n- Dog decides how to handle errors\n- Dog self-manages timeout\n- Dog decides escalation severity (within config bounds)\n\nThe plugin.md is a work specification, not a script. The dog brings judgment.\n\n## Acceptance\n- Plugin file created and valid\n- Works with gt plugin list/show\n- Executes correctly via gt plugin run\n- Gate respects cooldown\n- Dog self-enforces timeout", "status": "closed", "priority": 2, "issue_type": "task", "created_at": "2026-01-12T10:50:38Z", "created_by": "mayor", "updated_at": "2026-02-27T02:55:40Z", "closed_at": "2026-02-27T02:55:40Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-z6i0m", "title": "Cooldown gate evaluation", "description": "Implement cooldown gate for plugin scheduling.\n\n## Parent Epic: gt-n08ix\n\n## Gate Config\n[gate]\ntype = 'cooldown'\nduration = '1h'\n\n## ZFC Analysis - THE CRITICAL QUESTION\n\n**Option A: Go evaluates gates (borderline)**\n```go\nfunc EvaluateCooldownGate(pluginName string, duration time.Duration) (bool, error)\n```\n- Pro: Fast, consistent\n- Con: Go is making a decision (even if mechanical)\n- Risk: Slippery slope to more complex gate logic in Go\n\n**Option B: Deacon evaluates gates (ZFC pure)**\nDeacon's patrol instructions include:\n```markdown\nFor cooldown gates:\n1. Query: bd list --ephemeral -l plugin:<name> --limit 1 --json\n2. Parse created_at from result  \n3. Compare: created_at + duration vs now\n4. If past or no results: gate OPEN, dispatch plugin\n```\n\n**RECOMMENDATION: Option B (Deacon evaluates)**\n\nReasons:\n1. Keeps decision-making in agents\n2. Deacon already does patrol logic\n3. Gate evaluation is part of 'should I dispatch?' decision\n4. Avoids adding decision functions to Go\n\n## Implementation\n\nProvide DATA HELPERS only:\n```go\n// Returns last run bead, or nil if never run\nfunc GetLastPluginRun(pluginName string) (*Bead, error)\n\n// Parses duration strings like '1h', '30m', '1d'\nfunc ParseDuration(s string) (time.Duration, error)\n```\n\nDeacon uses these to make the decision. Go provides data, agent decides.\n\n## Acceptance\n- GetLastPluginRun returns raw bead data\n- ParseDuration handles common formats\n- NO EvaluateCooldownGate function in Go\n- Document gate evaluation logic for Deacon's CLAUDE.md", "status": "closed", "priority": 2, "issue_type": "task", "created_at": "2026-01-12T10:50:35Z", "created_by": "mayor", "updated_at": "2026-02-27T02:55:40Z", "closed_at": "2026-02-27T02:55:40Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-vluqu", "title": "Plugin run recording with ephemeral beads", "description": "Track plugin runs with ephemeral beads.\n\n## Parent Epic: gt-n08ix\n\n## Bead Format\nbd create 'Plugin run: rebuild-gt' --ephemeral --type task \\\n  -l type:plugin-run -l plugin:rebuild-gt -l rig:gastown -l result:success\n\n## Query Patterns\n- Last run: bd list --ephemeral -l plugin:NAME --limit 1\n- Failures: bd list --ephemeral -l plugin:NAME -l result:failure\n\n## Implementation\nAdd helper functions in internal/plugins/recording.go for creating and querying run beads.\n\n## ZFC Notes\nThis is TRANSPORT - writing and reading ledger data.\n\n**Recording (OK):**\n- CreatePluginRunBead(name, rig, result, body) - pure data write\n- The CALLER (dog) decides what result to record\n\n**Querying (OK):**\n- GetLastRun(pluginName) - returns bead data\n- GetRunsSince(pluginName, duration) - returns list of beads\n\nThese are data retrieval functions. They return raw data for agents to interpret.\n\n**What NOT to add:**\n- ShouldPluginRun(name) - that's a decision, belongs in Deacon\n- IsPluginHealthy(name) - that's interpretation, belongs in agent\n\n## Acceptance\n- Creates ephemeral beads for runs\n- Includes all required labels (type, plugin, rig, result)\n- Query helpers return raw data\n- Supports both success and failure results", "status": "closed", "priority": 2, "issue_type": "task", "created_at": "2026-01-12T10:50:33Z", "created_by": "mayor", "updated_at": "2026-02-27T02:55:40Z", "closed_at": "2026-02-27T02:55:40Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-2xinz", "title": "Dog plugin execution", "description": "Dogs execute plugin instructions.\n\n## Parent Epic: gt-n08ix\n\n## Dog Workflow\n1. Receive plugin work from dispatch\n2. Read plugin.md instructions\n3. Execute Detection step\n4. Execute Action step (if needed)\n5. Create ephemeral bead with result\n6. Signal completion (DOG_DONE)\n7. Use gt escalate on failure\n\n## ZFC Notes\nThis is AGENT DECISION-MAKING - the dog interprets and executes.\n\n**The dog decides:**\n- Whether detection step indicates action is needed\n- How to execute the action step\n- What result to record (success/failure/partial)\n- Whether to escalate and at what severity\n- Whether to continue or abort on errors\n\n**Timeout handling (CRITICAL):**\nThe plugin config may specify timeout = '5m'. The DOG must self-enforce this:\n\n```markdown\n## Timeout Awareness\nThis plugin has a 5-minute timeout. Monitor your execution time.\nIf approaching timeout:\n1. Checkpoint any partial progress\n2. Record partial result bead\n3. Recycle yourself cleanly\n\nDo NOT wait to be killed. Self-manage your lifecycle.\n```\n\nNO mechanical timeout kills from Go. That's the murder spree bug.\n\n## Acceptance\n- Dog executes plugin instructions\n- Dog self-enforces timeout (no external kills)\n- Creates result bead (success/failure/partial)\n- Uses gt escalate on failure\n- Signals completion", "status": "closed", "priority": 2, "issue_type": "task", "created_at": "2026-01-12T10:50:08Z", "created_by": "mayor", "updated_at": "2026-02-27T02:55:40Z", "closed_at": "2026-02-27T02:55:40Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-l1p7i", "title": "Dog plugin dispatch", "description": "Extend gt dog to dispatch plugin work to dogs.\n\n## Parent Epic: gt-n08ix\n\n## Command\ngt dog call --plugin <name> [--rig <rig>]\n\n## Implementation\nFind idle dog, prepare plugin work unit with spec and context, sling to dog via mail/hook.\nNon-blocking - return immediately.\n\n## ZFC Notes\nThis is TRANSPORT - routing work to an agent.\n\n**What Go does (OK):**\n- Find an idle dog (mechanical query of dog status beads)\n- Package plugin spec into work unit\n- Sling work to dog via mail or hook\n- Return immediately\n\n**What Go must NOT do:**\n- Evaluate whether the plugin SHOULD run (that's Deacon's job)\n- Decide which dog is 'best' for the work (any idle dog is fine)\n- Wait for completion or check results\n\nThe Deacon calls this command AFTER deciding to run the plugin. Go is just the messenger.\n\n## Acceptance\n- Dispatches plugin to available dog\n- Non-blocking (returns immediately)\n- Dog receives plugin spec and instructions\n- Works with existing dog infrastructure", "status": "closed", "priority": 2, "issue_type": "task", "created_at": "2026-01-12T10:50:07Z", "created_by": "mayor", "updated_at": "2026-02-27T02:55:40Z", "closed_at": "2026-02-27T02:55:40Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-mi9v7", "title": "gt plugin run command", "description": "Manual plugin execution trigger.\n\n## Parent Epic: gt-n08ix\n\n## Command\ngt plugin run <name> [--force] [--dry-run]\n- --force: Skip gate check\n- --dry-run: Show what would happen\n\n## Implementation\nFind plugin, execute instructions, record result.\n\n## ZFC Notes\nThis command is for MANUAL execution (human or agent explicitly runs it).\n\n**--force flag**: Acceptable because the CALLER is making the decision to skip the gate. Go isn't deciding - it's obeying an explicit instruction.\n\n**Gate check (without --force)**: This is the tricky part. Options:\n1. PREFERRED: No gate check in gt plugin run. If you want gate-aware execution, use Deacon.\n2. ACCEPTABLE: Gate check as a safeguard, but log 'gate closed, use --force to override' rather than silently skipping.\n\nThe command should NOT silently make decisions. Either execute (--force), or inform and require explicit override.\n\n## Acceptance\n- Finds and executes named plugin\n- --force skips any gate check\n- Records execution result as ephemeral bead\n- --dry-run shows plan without executing\n- Without --force: inform user if gate would be closed, suggest --force", "status": "closed", "priority": 2, "issue_type": "task", "created_at": "2026-01-12T10:50:07Z", "created_by": "mayor", "updated_at": "2026-02-27T02:55:40Z", "closed_at": "2026-02-27T02:55:40Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-jno5n", "title": "Review PR #340: Add gt mail show alias", "description": "Review and merge PR #340. Adds 'show' alias for mail command to match hook instructions. +2/-1 lines.", "status": "closed", "priority": 2, "issue_type": "task", "created_at": "2026-01-12T02:26:01Z", "created_by": "gastown/crew/jack", "updated_at": "2026-02-27T02:55:40Z", "closed_at": "2026-02-27T02:55:40Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-6dizy", "title": "Review PR #343: docs(formula) package documentation", "description": "dispatched_by: mayor\n\nReview and merge PR #343. Add comprehensive package documentation for formula package. doc.go, README.md, example_test.go. +1845/-5 lines.", "status": "closed", "priority": 2, "issue_type": "task", "assignee": "gastown/polecats/toast", "created_at": "2026-01-12T02:25:59Z", "created_by": "gastown/crew/jack", "updated_at": "2026-02-27T02:55:40Z", "closed_at": "2026-02-27T02:55:40Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-bmq47", "title": "Review PR #351: test coverage for 5 packages", "description": "Review and merge PR #351. Adds comprehensive test coverage for util, connection, checkpoint, lock, keepalive. +1657/-5 lines.", "status": "closed", "priority": 2, "issue_type": "task", "created_at": "2026-01-12T02:25:45Z", "created_by": "gastown/crew/jack", "updated_at": "2026-02-27T02:55:39Z", "closed_at": "2026-02-27T02:55:39Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-2cven", "title": "Review PR #352: docs godoc improvements", "description": "dispatched_by: mayor\n\nReview and merge PR #352. Documentation improvements - README clarifications and godoc additions. +61/-9 lines.", "status": "closed", "priority": 2, "issue_type": "task", "assignee": "gastown/polecats/capable", "created_at": "2026-01-12T02:25:44Z", "created_by": "gastown/crew/jack", "updated_at": "2026-02-27T02:55:39Z", "closed_at": "2026-02-27T02:55:39Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-2tci8", "title": "Review PR #367: fix(refinery) default Claude account", "description": "dispatched_by: gastown/crew/jack\n\nReview and merge PR #367. Fix refinery initialization to use default Claude account. +22/-6 lines.", "status": "closed", "priority": 2, "issue_type": "task", "created_at": "2026-01-12T02:25:38Z", "created_by": "gastown/crew/jack", "updated_at": "2026-02-27T02:55:39Z", "closed_at": "2026-02-27T02:55:39Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-m1y3d", "title": "Fix gt nudge docs: gold standard for ALL worker-to-worker comms", "description": "## Summary\n\nThe `gt nudge --help` text is too narrow. It says \"Sends a message to a polecat's or deacon's Claude Code session\" but nudge is the gold standard for ALL worker-to-worker communication.\n\n## Current docs issue\n\n```\nSends a message to a polecat's or deacon's Claude Code session.\n```\n\nShould be something like:\n\n```\nGold standard for all worker-to-worker communication in Gas Town.\n\nSends a message reliably to any Claude Code session (crew, polecats, \ndeacon, witness, refinery, mayor - any agent).\n```\n\n## Why it matters\n\n- New users/agents may think nudge is only for polecats/deacons\n- The reliable delivery pattern (literal mode + wait + Enter) is critical\n- Should emphasize: NEVER use raw tmux send-keys, ALWAYS use gt nudge\n\n## Files to update\n\n- internal/cmd/nudge.go (the Long/Short help text)", "status": "closed", "priority": 2, "issue_type": "task", "created_at": "2026-01-11T08:18:46Z", "created_by": "gastown/crew/max", "updated_at": "2026-02-27T02:55:39Z", "closed_at": "2026-02-27T02:55:39Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-i0pcp", "title": "refactor: consolidate down/shutdown/stop commands", "description": "Per GitHub issue #336 - deprecate gt stop, clarify down vs shutdown, consider flag renames", "status": "closed", "priority": 2, "issue_type": "task", "created_at": "2026-01-11T06:57:24Z", "created_by": "gastown/crew/max", "updated_at": "2026-02-27T02:55:39Z", "closed_at": "2026-02-27T02:55:39Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-mlmys", "title": "Daemon doesn't auto-restart Deacon when Boot detects it missing", "description": "## Problem\n\nBoot triage correctly detects when Deacon is missing (action: report → deacon-missing), but nothing actually restarts the Deacon. The system leaves the Deacon offline.\n\n## Evidence\n\n```\n$ gt boot status\nBoot Status\n  ...\n  Action:  report → deacon-missing\n\n$ gt deacon status\n○ Deacon session is not running\n```\n\n## Root Cause\n\nIn degraded mode, `runDegradedTriage()` returns `\"report\", \"deacon-missing\", nil` when Deacon is not found. The comment says \"daemon should have restarted it\" but the daemon doesn't have this logic.\n\nFrom internal/cmd/boot.go:286-289:\n```go\nif !hasDeacon {\n    // Deacon not running - this is unusual, daemon should have restarted it\n    // In degraded mode, we just report - let daemon handle restart\n    return \"report\", \"deacon-missing\", nil\n}\n```\n\nThe formula (mol-boot-triage) also expects daemon to handle restart:\n> **START**\n> # Deacon is dead - daemon will restart it\n\nBut the daemon doesn't have Deacon restart logic.\n\n## Impact\n\nIf Deacon goes down, the system loses its health-check orchestrator. Witnesses continue running but cross-rig coordination and lifecycle management stops.\n\n## Suggested Fix\n\nEither:\n1. Daemon should watch for Deacon session and restart it when missing\n2. Boot's degraded triage should run `gt deacon start` directly when Deacon is missing\n3. Boot's non-degraded mode (Claude session) should start Deacon as part of START action\n\nOption 2 is simplest - change the degraded triage to actually restart Deacon instead of just reporting.", "status": "closed", "priority": 2, "issue_type": "bug", "created_at": "2026-01-10T05:30:03Z", "created_by": "gastown/polecats/furiosa", "updated_at": "2026-02-27T02:55:39Z", "closed_at": "2026-02-27T02:55:39Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-8s953", "title": "Tiny lifecycle test: add comment to version.go", "description": "## Purpose\n\nMinimal task to verify polecat lifecycle e2e.\n\n## Task\n\nAdd a single-line comment to internal/cmd/version.go:\n\n```go\n// Gas Town version - lifecycle test verified\n```\n\nAdd it above the Version variable declaration.\n\n## Success Criteria\n\n1. Polecat completes task\n2. Runs gt done\n3. MR created and submitted to refinery\n4. Refinery merges\n5. Witness cleans up polecat\n6. All roles return to idle\n\n## Why This Task\n\n- Trivial change (one line)\n- Fast to complete\n- Easy to verify\n- Low risk if something goes wrong", "status": "closed", "priority": 2, "issue_type": "task", "created_at": "2026-01-09T05:04:46Z", "created_by": "mayor", "updated_at": "2026-02-27T02:55:39Z", "closed_at": "2026-02-27T02:55:39Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-1seex", "title": "Startup reminder: verify escalations reference existing resources", "description": "Add guidance to mayor startup reminder: when processing escalations from Witness patrol reports, verify that referenced resources (polecats, worktrees) still exist before acting.\n\nContext: Mayor received escalations about furiosa/nux polecats with uncommitted work, but those worktrees no longer existed by the time Mayor processed the mail. Time passed between patrol and Mayor startup.\n\nSuggested addition to startup prompt:\n- 'If escalations reference non-existent resources, verify current state before acting'\n- Or have Witness include timestamps so Mayor knows how stale the data is", "status": "closed", "priority": 2, "issue_type": "task", "created_at": "2026-01-08T22:13:48Z", "created_by": "mayor", "updated_at": "2026-02-27T02:55:39Z", "closed_at": "2026-02-27T02:55:39Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-rb39o", "title": "Add execution audit logging and epitaph system", "description": "Every execution creates epitaph bead with cause of death, final words, interrogation log. Mass casualty detection alerts if >3 executions in 5 minutes.", "status": "closed", "priority": 2, "issue_type": "task", "created_at": "2026-01-08T03:37:03Z", "created_by": "mayor", "updated_at": "2026-02-27T02:55:38Z", "closed_at": "2026-02-27T02:55:38Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-dmp61", "title": "Review PR #243: warn instead of killing sessions for stale town-root", "description": "attached_args: Review this PR, check code quality and correctness, then approve or request changes", "status": "closed", "priority": 2, "issue_type": "task", "created_at": "2026-01-08T01:40:46Z", "created_by": "gastown/crew/max", "updated_at": "2026-02-27T02:55:38Z", "closed_at": "2026-02-27T02:55:38Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-ii0ae", "title": "Review PR #244: skip beads-unavailable test when bd is installed", "description": "attached_args: Review this PR, check code quality and correctness, then approve or request changes", "status": "closed", "priority": 2, "issue_type": "task", "created_at": "2026-01-08T01:40:45Z", "created_by": "gastown/crew/max", "updated_at": "2026-02-27T02:55:38Z", "closed_at": "2026-02-27T02:55:38Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-mv55q", "title": "Review PR #246: Add code coverage reporting to GitHub Actions", "description": "attached_args: Review this PR, check code quality and correctness, then approve or request changes", "status": "closed", "priority": 2, "issue_type": "task", "created_at": "2026-01-08T01:40:44Z", "created_by": "gastown/crew/max", "updated_at": "2026-02-27T02:55:38Z", "closed_at": "2026-02-27T02:55:38Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-4yzce", "title": "gt doctor: check beads redirect files for crew/polecat clones", "description": "When running gt doctor in a worktree/clone that should have a redirect (e.g., crew/george, polecats/*), verify:\n\n1. The .beads/redirect file exists\n2. The redirect target is valid and accessible  \n3. The target has a working beads setup\n\nThis helps catch setup issues when cloning to a new machine where redirects might not have been created properly.\n\nExample checks:\n- If cwd contains /crew/ or /polecats/, expect a redirect file\n- Warn if redirect is missing: 'Missing .beads/redirect - run gt crew add or create manually'\n- Warn if redirect target doesn't exist\n\nRelated: ensure gt crew add and gt rig add create redirects properly.", "status": "closed", "priority": 2, "issue_type": "feature", "created_at": "2026-01-07T09:11:23Z", "created_by": "gastown/crew/george", "updated_at": "2026-02-27T02:55:38Z", "closed_at": "2026-02-27T02:55:38Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-gkj02", "title": "Migration: add gt:* labels to existing Gas Town beads", "description": "## Overview\n\nOne-time migration to add gt:* labels to all existing Gas Town beads.\n\n## Work\n\n1. Create `gt migrate-bead-labels` command\n2. Query all beads with type=agent, add label gt:agent\n3. Query all beads with type=role, add label gt:role  \n4. Query all beads with type=rig, add label gt:rig\n5. Query all beads with type=convoy, add label gt:convoy\n6. Query all beads with type=slot, add label gt:slot\n7. Run across all clones (town beads + per-rig beads)\n\n## Notes\n\nThis is the Gas Town side of bd-jybi.\nMust run AFTER beads custom type support is deployed.", "status": "closed", "priority": 2, "issue_type": "task", "created_at": "2026-01-07T04:51:46Z", "created_by": "beads/crew/dave", "updated_at": "2026-02-27T02:55:38Z", "closed_at": "2026-02-27T02:55:38Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependencies": [{"issue_id": "gt-gkj02", "depends_on_id": "gt-jonlx", "type": "blocks", "created_at": "2026-01-07T04:52:19Z", "created_by": "mayor", "metadata": "{}"}, {"issue_id": "gt-gkj02", "depends_on_id": "gt-rz3sw", "type": "parent-child", "created_at": "2026-01-07T04:51:55Z", "created_by": "mayor", "metadata": "{}"}], "dependency_count": 1, "dependent_count": 0, "comment_count": 0, "parent": "gt-rz3sw"}
{"id": "gt-jonlx", "title": "Update Gas Town tests for label-based types", "description": "## Overview\n\nUpdate all tests that create or query Gas Town-specific beads.\n\n## Test patterns to update\n\n- Tests creating agent beads\n- Tests querying by type\n- Integration tests with convoy operations\n- Doctor test mocks", "status": "closed", "priority": 2, "issue_type": "task", "created_at": "2026-01-07T04:51:46Z", "created_by": "beads/crew/dave", "updated_at": "2026-02-27T02:55:38Z", "closed_at": "2026-02-27T02:55:38Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependencies": [{"issue_id": "gt-jonlx", "depends_on_id": "gt-6k7f7", "type": "blocks", "created_at": "2026-01-07T04:52:18Z", "created_by": "mayor", "metadata": "{}"}, {"issue_id": "gt-jonlx", "depends_on_id": "gt-d1tsb", "type": "blocks", "created_at": "2026-01-07T04:52:18Z", "created_by": "mayor", "metadata": "{}"}, {"issue_id": "gt-jonlx", "depends_on_id": "gt-rz3sw", "type": "parent-child", "created_at": "2026-01-07T04:52:01Z", "created_by": "mayor", "metadata": "{}"}, {"issue_id": "gt-jonlx", "depends_on_id": "gt-uxwyw", "type": "blocks", "created_at": "2026-01-07T04:52:18Z", "created_by": "mayor", "metadata": "{}"}, {"issue_id": "gt-jonlx", "depends_on_id": "gt-x9bdy", "type": "blocks", "created_at": "2026-01-07T04:52:18Z", "created_by": "mayor", "metadata": "{}"}], "dependency_count": 4, "dependent_count": 1, "comment_count": 0, "parent": "gt-rz3sw"}
{"id": "gt-x9bdy", "title": "Update doctor checks for label-based types", "description": "## Overview\n\nDoctor agent bead checks query by type. Update to use labels.\n\n## Files to update\n\n- internal/doctor/agent_beads_check.go\n  - Check existence of agent beads by label\n  - Create missing beads with proper labels\n  - Mayor, Deacon, Witness, Refinery, Crew checks\n\n- internal/doctor/patrol_check.go\n  - Role type queries", "status": "closed", "priority": 2, "issue_type": "task", "created_at": "2026-01-07T04:51:45Z", "created_by": "beads/crew/dave", "updated_at": "2026-02-27T02:55:38Z", "closed_at": "2026-02-27T02:55:38Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependencies": [{"issue_id": "gt-x9bdy", "depends_on_id": "gt-x0i2m", "type": "blocks", "created_at": "2026-01-07T04:52:13Z", "created_by": "mayor", "metadata": "{}"}], "dependency_count": 1, "dependent_count": 1, "comment_count": 0}
{"id": "gt-3qw5s", "title": "ZFC: Auto-close convoys when tracked issues close via bd close", "description": "When bd close closes an issue, check if this issue was tracked by any convoy. If all tracked issues in a convoy are now closed, auto-close the convoy.\n\n## Background\nPR #236 attempted to fix stale convoys by calling gt convoy check in the refinery merge handler. This is a ZFC violation - it couples the refinery to convoy semantics and uses the wrong trigger point.\n\n## Proper ZFC approach\nThe closure event should propagate at the source:\n1. bd close closes an issue\n2. Check if this issue is tracked by any open convoy\n3. For each convoy tracking this issue, check if all tracked issues are now closed\n4. If so, auto-close the convoy\n\n## Implementation notes\n- Add convoy-check logic to bd close command\n- The deacon patrol step check-convoy-completion remains as backup\n\n## Related\n- PR #236 (closed - ZFC violation)\n- Deacon patrol step: check-convoy-completion", "status": "closed", "priority": 2, "issue_type": "feature", "created_at": "2026-01-07T02:53:47Z", "created_by": "gastown/crew/joe", "updated_at": "2026-02-27T02:55:38Z", "closed_at": "2026-02-27T02:55:38Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-tacf4", "title": "cleanup:furiosa", "description": "Verify and cleanup polecat furiosa\nIssue: furiosa-mk338i8l\nBranch: polecat/furiosa-mk338i8l", "status": "closed", "priority": 2, "issue_type": "task", "created_at": "2026-01-06T21:21:29Z", "created_by": "gastown/crew/jack", "updated_at": "2026-02-27T02:55:37Z", "closed_at": "2026-02-27T02:55:37Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-mjsjv", "title": "Protect vapor formulas from accidental bd pour", "description": "When a formula has phase=\"vapor\", it's designed to run as a wisp (ephemeral). Currently 'bd pour' creates persistent issues, which is wrong for vapor formulas.\n\nRoot cause of bd-mol-* pollution: beads-release formula was invoked via 'bd pour beads-release' instead of 'bd mol wisp beads-release' or 'gt sling --formula'.\n\nOptions:\n1. Make 'bd pour' refuse vapor formulas (force gt sling --formula)\n2. Make 'bd pour' auto-invoke wisp creation for vapor formulas\n3. Add prominent warning + confirmation for vapor formulas (current bd behavior with phase=vapor)\n\nRecommendation: Option 1 - refuse with helpful error pointing to gt sling --formula", "status": "closed", "priority": 2, "issue_type": "feature", "created_at": "2026-01-05T08:03:33Z", "created_by": "beads/crew/emma", "updated_at": "2026-02-27T02:55:37Z", "closed_at": "2026-02-27T02:55:37Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-mpyuq", "title": "Refactor: Move formula source of truth to internal/formula/formulas/", "description": "## Problem\n\n.beads/formulas/ is tracked in git but polecats using redirects see all formulas as deleted.\nThe internal/formula/formulas/ directory is already tracked (for embedding).\n\n## Current flow\n1. Edit .beads/formulas/ (source of truth)\n2. Run go generate ./... → copies to internal/formula/formulas/\n3. Build embeds from internal/formula/formulas/\n4. ProvisionFormulas() creates .beads/formulas/ from embedded\n\n## Proposed fix\n1. Make internal/formula/formulas/ the ONLY tracked formula location\n2. Remove .beads/formulas/ from git tracking\n3. ProvisionFormulas() already handles runtime provisioning\n4. Developers edit internal/formula/formulas/ directly\n\n## Why this fixes polecat tracking\nPolecats using redirects won't have .beads/formulas/ tracked, eliminating the deleted entries.", "status": "closed", "priority": 2, "issue_type": "task", "created_at": "2026-01-05T07:38:28Z", "created_by": "gastown/polecats/nux", "updated_at": "2026-02-27T02:55:36Z", "closed_at": "2026-02-27T02:55:36Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-si8rq.10", "title": "Testing: End-to-end rebase workflow validation", "description": "Comprehensive testing of the new rebase-as-work workflow.\n\n## Test Scenarios\n\n### Happy Path\n1. Single MR, clean rebase → refinery merges\n2. Multiple MRs, no conflicts → priority ordering works\n\n### Conflict Handling\n3. MR conflicts → conflict task created\n4. Conflict task dispatched → polecat resolves\n5. Resolved MR re-enters queue with priority boost\n6. Multiple conflict cycles → retry_count tracked\n\n### Priority Scoring\n7. Older convoy MRs prioritized over newer\n8. P1 epic MRs prioritized over P3\n9. High retry_count gets appropriate adjustment\n\n### Edge Cases\n10. MR conflicts again after resolution\n11. Polecat recycled before merge\n12. Convoy completed with pending MRs\n\n## Implementation\n- Unit tests for ScoreMR function\n- Integration tests for refinery flow\n- Scenario tests with actual polecats (manual/semi-auto)", "status": "closed", "priority": 2, "issue_type": "task", "created_at": "2026-01-02T07:56:04Z", "created_by": "mayor", "updated_at": "2026-02-27T02:55:35Z", "closed_at": "2026-02-27T02:55:35Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependencies": [{"issue_id": "gt-si8rq.10", "depends_on_id": "gt-si8rq", "type": "parent-child", "created_at": "2026-01-02T07:56:04Z", "created_by": "mayor", "metadata": "{}"}, {"issue_id": "gt-si8rq.10", "depends_on_id": "gt-si8rq.5", "type": "blocks", "created_at": "2026-01-02T07:56:20Z", "created_by": "mayor", "metadata": "{}"}, {"issue_id": "gt-si8rq.10", "depends_on_id": "gt-si8rq.6", "type": "blocks", "created_at": "2026-01-02T07:56:20Z", "created_by": "mayor", "metadata": "{}"}, {"issue_id": "gt-si8rq.10", "depends_on_id": "gt-si8rq.9", "type": "blocks", "created_at": "2026-01-02T07:56:20Z", "created_by": "mayor", "metadata": "{}"}], "dependency_count": 3, "dependent_count": 0, "comment_count": 0, "parent": "gt-si8rq"}
{"id": "gt-eph-04p3", "title": "mol-deacon-patrol", "description": "Mayor's daemon patrol loop.\n\nThe Deacon is the Mayor's background process that runs continuously, handling callbacks, monitoring rig health, and performing cleanup. Each patrol cycle runs these steps in sequence, then loops or exits.\n\n## Idle Town Principle\n\n**The Deacon should be silent/invisible when the town is healthy and idle.**\n\n- Skip HEALTH_CHECK nudges when no active work exists\n- Sleep 60+ seconds between patrol cycles (longer when idle)\n- Let the feed subscription wake agents on actual events\n- The daemon (10-minute heartbeat) is the safety net for dead sessions\n\nThis prevents flooding idle agents with health checks every few seconds.\n\n## Second-Order Monitoring\n\nWitnesses send WITNESS_PING messages to verify the Deacon is alive. This\nprevents the \"who watches the watchers\" problem - if the Deacon dies,\nWitnesses detect it and escalate to the Mayor.\n\nThe Deacon's agent bead last_activity timestamp is updated during each patrol\ncycle. Witnesses check this timestamp to verify health.", "status": "hooked", "priority": 2, "issue_type": "epic", "created_at": "2026-01-02T04:37:17Z", "updated_at": "2026-01-02T04:37:23Z", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-eph-8gb", "title": "mol-deacon-patrol", "description": "Mayor's daemon patrol loop.\n\nThe Deacon is the Mayor's background process that runs continuously, handling callbacks, monitoring rig health, and performing cleanup. Each patrol cycle runs these steps in sequence, then loops or exits.\n\n## Second-Order Monitoring\n\nWitnesses send WITNESS_PING messages to verify the Deacon is alive. This\nprevents the \"who watches the watchers\" problem - if the Deacon dies,\nWitnesses detect it and escalate to the Mayor.\n\nThe Deacon's agent bead last_activity timestamp is updated during each patrol\ncycle. Witnesses check this timestamp to verify health.", "status": "hooked", "priority": 2, "issue_type": "epic", "created_at": "2026-01-01T01:06:11Z", "updated_at": "2026-01-01T01:06:16Z", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-eph-3n5", "title": "mol-deacon-patrol", "description": "Mayor's daemon patrol loop.\n\nThe Deacon is the Mayor's background process that runs continuously, handling callbacks, monitoring rig health, and performing cleanup. Each patrol cycle runs these steps in sequence, then loops or exits.\n\n## Second-Order Monitoring\n\nWitnesses send WITNESS_PING messages to verify the Deacon is alive. This\nprevents the \"who watches the watchers\" problem - if the Deacon dies,\nWitnesses detect it and escalate to the Mayor.\n\nThe Deacon's agent bead last_activity timestamp is updated during each patrol\ncycle. Witnesses check this timestamp to verify health.", "status": "closed", "priority": 2, "issue_type": "epic", "created_at": "2025-12-31T22:15:34Z", "updated_at": "2026-02-27T02:55:35Z", "closed_at": "2026-02-27T02:55:35Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-9guv2", "title": "Messaging Channels: Unified list/queue/announce/nudge system", "description": "Implement the full messaging channel system for Gas Town.\n\nTWO PARALLEL SYSTEMS:\n1. Durable (polling): mail - list, queue, announce\n2. Real-time (ephemeral): nudge - channels\n\nARCHITECTURE:\n- Config: ~/gt/config/messaging.json (town-level)\n- Messages: beads (.beads/issues.jsonl with type=message)\n\nCHANNEL TYPES:\n- list:name - Fan-out, each recipient gets copy (DONE)\n- queue:name - Claim-based, exactly-once processing (gt-02431)\n- announce:name - Bulletin board, read-only (gt-cqvgt)\n- nudge channel:name - Real-time fan-out (gt-3txyh)\n\nPRIORITY ORDER:\n1. Queues - solves real polecat cleanup race condition\n2. Nudge channels - gt broadcast mostly works but channels add precision\n3. Announces - nice-to-have bulletin boards", "status": "closed", "priority": 2, "issue_type": "epic", "created_at": "2025-12-31T02:10:03Z", "created_by": "gastown/crew/max", "updated_at": "2026-02-27T02:55:35Z", "closed_at": "2026-02-27T02:55:35Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-02431", "title": "Implement queue:name address type for claim-based mail delivery", "description": "Add support for queue:name addresses in the mail router.\n\nSEMANTICS:\n- Messages to queue:name create ONE copy in a shared location\n- Workers eligible for the queue (per messaging.json) can claim messages\n- Claimed message is removed from queue, moved to claimer inbox\n- If claimer fails to process, message can be released back to queue\n\nUSE CASE:\nPolecat completion notifications - Witness OR Deacon should handle, not both.\n\nIMPLEMENTATION:\n1. Add isQueueAddress() / parseQueueName() helpers\n2. Add sendToQueue() - creates message in queue location\n3. Add gt mail claim <queue> - claims oldest unclaimed message\n4. Add gt mail release <msg-id> - releases back to queue\n5. Track claim state in message metadata\n\nCONFIG (already in messaging.json schema):\nqueues.cleanup/gastown.workers = [gastown/witness, deacon/]\nqueues.cleanup/gastown.max_claims = 0", "status": "closed", "priority": 2, "issue_type": "feature", "created_at": "2025-12-31T02:09:48Z", "created_by": "gastown/crew/max", "updated_at": "2026-02-27T02:55:35Z", "closed_at": "2026-02-27T02:55:35Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependencies": [{"issue_id": "gt-02431", "depends_on_id": "gt-guyt5", "type": "blocks", "created_at": "2025-12-31T02:16:10Z", "created_by": "mayor", "metadata": "{}"}], "dependency_count": 1, "dependent_count": 0, "comment_count": 0}
{"id": "gt-3txyh", "title": "Add nudge channels for real-time fan-out messaging", "description": "Add channel support to gt nudge for real-time fan-out.\n\n## Semantics\n- Ephemeral, real-time (tmux send-keys)\n- Fan-out to all channel members\n- Parallel to list:name but for nudge instead of mail\n\n## Use Case\n\"Everyone send yourself gt handoff now\" - real-time coordination.\n\n## Syntax\ngt nudge channel:workers \"gt handoff\"\ngt nudge channel:witnesses \"Swarm incoming\"\n\n## Implementation\n1. Add nudge_channels to MessagingConfig schema\n2. Extend gt nudge to recognize channel:name syntax\n3. Expand channel to member list, nudge each\n\n## Config Addition to messaging.json\n```json\n\"nudge_channels\": {\n  \"workers\": [\"gastown/polecats/*\", \"gastown/crew/*\"],\n  \"witnesses\": [\"*/witness\"],\n  \"all\": [\"@town\", \"@rig/*\"]\n}\n```\n\n## Relation to gt broadcast\ngt broadcast is a one-off \"everyone\" nudge.\nNudge channels are named, configured subsets.\n\nCould potentially deprecate gt broadcast in favor of:\ngt nudge channel:all \"message\"", "status": "closed", "priority": 2, "issue_type": "feature", "created_at": "2025-12-31T02:09:32Z", "created_by": "gastown/crew/max", "updated_at": "2026-02-27T02:55:21Z", "closed_at": "2026-02-27T02:55:21Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependencies": [{"issue_id": "gt-3txyh", "depends_on_id": "gt-p2o6s", "type": "blocks", "created_at": "2025-12-31T02:16:57Z", "created_by": "mayor", "metadata": "{}"}], "dependency_count": 1, "dependent_count": 0, "comment_count": 0}
{"id": "gt-jzmsj.3", "title": "Gas Town as reference platform adapter", "description": "Implement Gas Town as the reference PlatformAdapter. This proves the interface works\nand serves as a template for other platforms.\n\n**Depends on**: gt-jzmsj.1 (interface must exist first)\n\n**Location**: gastown repo, `internal/hop/gastown_adapter.go`\n\n**Implementation mapping** (from ~/gt/docs/hop/PLATFORM-OF-PLATFORMS.md lines 381-398):\n- Platform ID: \"gastown\"\n- Sovereignty: Tier 2-3 (organizational/pseudonymous)\n- Identity: Map BD_ACTOR format (rig/role/name) → HOP EntityRef\n- Work Units: Beads (issues, molecules) → HopWorkUnit\n- Validation: Refinery approvals → ValidationRecord\n- Skills: Stub returning empty (future work)\n- Governance: Return GUPP rules reference\n- Payment: Return nil (future work)\n- Federation: Return town URI\n\n**Key mappings**:\n- Issue → HopWorkUnit (1:1, most fields align)\n- BD_ACTOR \"gastown/crew/max\" → EntityRef{Platform: \"gastown\", Org: \"steveyegge\", ID: \"crew-max\"}\n- Validation struct → ValidationRecord (already aligned)\n\n**Acceptance criteria**:\n1. GasTownAdapter implements PlatformAdapter interface\n2. MapIdentity correctly parses BD_ACTOR format\n3. TranslateWorkUnit converts Issue to HopWorkUnit\n4. Basic test coverage", "status": "closed", "priority": 2, "issue_type": "task", "created_at": "2025-12-30T20:56:10Z", "created_by": "gastown/crew/joe", "updated_at": "2026-02-27T02:55:21Z", "closed_at": "2026-02-27T02:55:21Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependencies": [{"issue_id": "gt-jzmsj.3", "depends_on_id": "gt-jzmsj", "type": "parent-child", "created_at": "2025-12-30T20:56:10Z", "created_by": "mayor", "metadata": "{}"}, {"issue_id": "gt-jzmsj.3", "depends_on_id": "gt-jzmsj.1", "type": "blocks", "created_at": "2025-12-31T20:53:36Z", "created_by": "mayor", "metadata": "{}"}], "dependency_count": 1, "dependent_count": 0, "comment_count": 0, "parent": "gt-jzmsj"}
{"id": "gt-jzmsj.2", "title": "Add sovereignty tier to entity model", "description": "Add SovereigntyTier to the entity model. This determines what identity information\nis revealed and to whom.\n\n**Location**: beads repo, `internal/types/types.go`\n\n**Changes required**:\n\n1. Add SovereigntyTier type and constants:\n```go\ntype SovereigntyTier string\n\nconst (\n    TierPublic         SovereigntyTier = \"public\"         // Full legal identity, full visibility\n    TierOrganizational SovereigntyTier = \"organizational\" // Known to org, private outside\n    TierPseudonymous   SovereigntyTier = \"pseudonymous\"   // KYC verified, operates under handle\n    TierAnonymous      SovereigntyTier = \"anonymous\"      // Cryptographic identity only\n)\n```\n\n2. Add field to EntityRef:\n```go\ntype EntityRef struct {\n    // ... existing fields ...\n    SovereigntyTier SovereigntyTier `json:\"sovereignty_tier,omitempty\"`\n}\n```\n\n3. Add IsValid() method to SovereigntyTier\n\n4. Update ComputeContentHash to include sovereignty tier\n\n**Acceptance criteria**:\n1. SovereigntyTier type with 4 values defined\n2. EntityRef has optional sovereignty_tier field\n3. Empty/missing tier defaults to \"public\" (backward compatible)\n4. Content hash includes sovereignty tier\n5. Tests pass", "status": "closed", "priority": 2, "issue_type": "task", "created_at": "2025-12-30T20:56:08Z", "created_by": "gastown/crew/joe", "updated_at": "2026-02-27T02:55:21Z", "closed_at": "2026-02-27T02:55:21Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependencies": [{"issue_id": "gt-jzmsj.2", "depends_on_id": "gt-jzmsj", "type": "parent-child", "created_at": "2025-12-30T20:56:08Z", "created_by": "mayor", "metadata": "{}"}], "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-jzmsj"}
{"id": "gt-jzmsj.1", "title": "Define PlatformAdapter interface", "description": "Define the PlatformAdapter interface in Go. The interface specification is already\ndocumented in ~/gt/docs/hop/PLATFORM-OF-PLATFORMS.md (lines 118-152).\n\n**Location**: Create `internal/hop/platform.go` in the beads repo\n\n**Interface methods** (from doc):\n- Registration: GetPlatformID, GetPlatformMetadata\n- Identity: MapIdentity, GetSovereigntyTier, ResolveEntity\n- Work Translation: TranslateWorkUnit, TranslateToNative\n- Validation: SubmitCompletion, QueryValidations\n- Skills: ExtractSkills, GetSkillOntology\n- Governance: GetPlatformRules, ValidateWork\n- Payment (optional): GetPaymentRails, RecordPayment\n- Federation: GetFederationEndpoint, CanFederateWith\n\n**Supporting types needed**:\n- SovereigntyTier enum (see gt-jzmsj.2)\n- PlatformMetadata struct\n- HopEntity (maps to existing EntityRef)\n- HopWorkUnit (maps to existing Issue/Bead)\n- ValidationRecord (maps to existing Validation)\n- SkillVector, SkillOntology (stub for now)\n- GovernanceRules, Violation\n- PaymentRail, Payment, Receipt\n\n**Acceptance criteria**:\n1. Interface compiles and is documented\n2. Types compile with reasonable defaults\n3. No implementation yet - interface only", "status": "closed", "priority": 2, "issue_type": "task", "created_at": "2025-12-30T20:56:07Z", "created_by": "gastown/crew/joe", "updated_at": "2026-02-27T02:55:21Z", "closed_at": "2026-02-27T02:55:21Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependencies": [{"issue_id": "gt-jzmsj.1", "depends_on_id": "gt-jzmsj", "type": "parent-child", "created_at": "2025-12-30T20:56:07Z", "created_by": "mayor", "metadata": "{}"}], "dependency_count": 0, "dependent_count": 1, "comment_count": 0, "parent": "gt-jzmsj"}
{"id": "gt-jzmsj", "title": "Platform of Platforms (POP) Foundation", "description": "Design and implementation of the Platform Adapter Layer for HOP. Enables multiple work platforms to integrate with the universal work ledger. See ~/gt/docs/hop/PLATFORM-OF-PLATFORMS.md for full architecture.", "status": "closed", "priority": 2, "issue_type": "epic", "created_at": "2025-12-30T20:55:51Z", "created_by": "gastown/crew/joe", "updated_at": "2026-02-27T02:55:20Z", "closed_at": "2026-02-27T02:55:20Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependencies": [{"issue_id": "gt-jzmsj", "depends_on_id": "gt-6r18e", "type": "blocks", "created_at": "2025-12-30T20:56:25Z", "created_by": "mayor", "metadata": "{}"}], "dependency_count": 1, "dependent_count": 0, "comment_count": 0}
{"id": "gt-gastown-polecat-ace", "title": "gt-gastown-polecat-ace", "description": "attached_molecule: mol-polecat-work\nattached_at: 2026-01-22T01:30:42Z\n\ngt-gastown-polecat-ace\n\nrole_type: polecat\nrig: gastown\nagent_state: spawning\nhook_bead: gt-mzyk5\ncleanup_status: null\nactive_mr: null\nnotification_level: null", "status": "closed", "priority": 2, "issue_type": "task", "created_at": "2025-12-30T05:59:45Z", "created_by": "mayor", "updated_at": "2026-02-27T02:55:20Z", "closed_at": "2026-02-27T02:55:20Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-gastown-polecat-keeper", "title": "gt-gastown-polecat-keeper", "description": "gt-gastown-polecat-keeper\n\nrole_type: polecat\nrig: gastown\nagent_state: nuked\nhook_bead: null\ncleanup_status: null\nactive_mr: null\nnotification_level: null", "status": "open", "priority": 2, "issue_type": "agent", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-28T02:53:19Z", "created_by": "mayor", "updated_at": "2026-02-28T03:04:40Z", "labels": ["gt:agent"], "ephemeral": true, "agent_state": "done", "last_activity": "2026-02-28T03:03:03Z", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-gastown-polecat-cheedo", "title": "gt-gastown-polecat-cheedo", "description": "gt-gastown-polecat-cheedo\n\nrole_type: polecat\nrig: gastown\nagent_state: nuked\nhook_bead: null\ncleanup_status: null\nactive_mr: null\nnotification_level: null", "status": "open", "priority": 2, "issue_type": "agent", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-28T02:52:32Z", "created_by": "mayor", "updated_at": "2026-02-28T03:04:28Z", "labels": ["gt:agent"], "ephemeral": true, "agent_state": "done", "last_activity": "2026-02-28T03:03:05Z", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-gastown-polecat-dag", "title": "gt-gastown-polecat-dag", "description": "gt-gastown-polecat-dag\n\nrole_type: polecat\nrig: gastown\nagent_state: nuked\nhook_bead: null\ncleanup_status: null\nactive_mr: null\nnotification_level: null", "status": "open", "priority": 2, "issue_type": "agent", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-28T02:52:21Z", "created_by": "mayor", "updated_at": "2026-02-28T03:02:34Z", "labels": ["gt:agent"], "ephemeral": true, "agent_state": "done", "last_activity": "2026-02-28T03:01:27Z", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-polecat-role", "title": "Polecat Role Definition", "description": "You are a Polecat - an autonomous worker assigned to a specific issue.\n\nYou work independently, following the mol-polecat-work formula, and signal\ncompletion to your Witness. You are transient - spawned for work, cleaned up\nafter completion.\n\nsession_pattern: gt-{rig}-{name}\nwork_dir_pattern: {town}/{rig}/polecats/{name}\nneeds_pre_sync: true\nstart_command: export GT_ROLE=polecat GT_RIG={rig} GT_POLECAT={name} BD_ACTOR={rig}/polecats/{name} && claude --dangerously-skip-permissions\n\ndefault_molecule: mol-polecat-work\ncapabilities:\n  - execute_assigned_work\n  - git_operations\n  - branch_management\n  - completion_signaling\n\n## Core Responsibilities\n\n1. Execute your pinned molecule's steps\n2. Maintain clean git state\n3. Signal completion via gt done\n4. Wait for Witness to handle lifecycle\n\n## You Do NOT\n\n- Push directly to main (Refinery merges)\n- Kill your own session (Witness does cleanup)\n- Skip verification steps\n- Work on anything other than your assigned issue\n\n## Propulsion Principle\n\nIf you find something on your hook, YOU RUN IT.\n\nYour work is defined by your pinned molecule. Execute steps:\n- bd ready (find next step)\n- bd show <step-id> (see what to do)\n- bd close <step-id> (mark complete)\n\n## Completion Protocol\n\nWhen done:\n1. Tests pass: go test ./...\n2. COMMIT changes: git add and git commit\n3. Push branch: git push -u origin HEAD\n4. Close issue: bd close <issue>\n5. Sync beads: bd sync\n6. Run gt done\n7. WAIT: Witness will kill your session\n\n## Communication\n\nMail your Witness when stuck:\ngt mail send <rig>/witness -s \"HELP: <problem>\" -m \"...\"", "status": "closed", "priority": 2, "issue_type": "task", "created_at": "2025-12-29T21:24:17Z", "created_by": "gastown/crew/max", "updated_at": "2026-02-27T02:55:20Z", "closed_at": "2026-02-27T02:55:20Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "labels": ["migrated-to:hq-polecat-role"], "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-crew-role", "title": "Crew Role Definition", "description": "You are a Crew Worker - a human-managed persistent workspace within a rig.\n\nUnlike polecats which are witness-managed and transient, crew workers are:\n- Persistent: Not auto-garbage-collected\n- User-managed: Overseer controls lifecycle\n- Long-lived identities: Keep your name across sessions\n- Gas Town integrated: Mail, handoff mechanics work\n\nsession_pattern: gt-{rig}-crew-{name}\nwork_dir_pattern: {town}/{rig}/crew/{name}\nneeds_pre_sync: true\nstart_command: exec claude --dangerously-skip-permissions\n\ndefault_molecule: null\ncapabilities:\n  - autonomous_work\n  - beads_access\n  - git_operations\n  - mail_communication\n\n## Core Responsibilities\n\n1. Execute assigned work autonomously\n2. Track progress via beads (bd commands)\n3. Communicate via mail when blocked or complete\n4. Maintain clean git state\n5. Hand off context when cycling sessions\n\n## Propulsion Principle\n\nIf you find something on your hook, YOU RUN IT.\n\nHook has work then Run it. Hook empty then Check mail. Nothing then Wait for overseer.\n\n## Session End Protocol\n\n- git status, git add, bd sync, git commit, git push\n- gt handoff - hand off to fresh session\n\n## Key Commands\n\n- gt mol status - Check your hook\n- bd ready - Find next step\n- bd close <id> - Mark work complete\n- gt mail inbox - Check messages\n- gt handoff - Cycle to fresh session", "status": "closed", "priority": 2, "issue_type": "task", "created_at": "2025-12-29T21:23:56Z", "created_by": "gastown/crew/max", "updated_at": "2026-02-27T02:55:19Z", "closed_at": "2026-02-27T02:55:19Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "labels": ["migrated-to:hq-crew-role"], "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-l6ro3", "title": "Patrol Exponential Backoff System", "description": "Cost-saving await-signal model for patrol agents.\n\n## The Problem\n\nPatrol agents (witness, refinery) poll continuously even when idle, burning API credits.\n\n## The Solution: Await-Signal\n\nAgents don't poll constantly. They **wait for a signal**, then **discover reality**.\n\n```\nPATROL LOOP:\n    await-signal (just wake me)\n         ↓ awake\n    check-reality (mail, beads, hook, git)\n         ↓\n    work found? → DO WORK → loop\n         ↓ no\n    increase backoff → loop\n```\n\n**Key principle (ZFC-aligned):** Signal carries no semantic meaning - just 'wake up'.\nAgent discovers what to do by examining reality.\n\n## Two-Level Wake\n\n| Level | State | Command |\n|-------|-------|---------|\n| 1 | Running (backoff) | `gt nudge` clears backoff |\n| 2 | Asleep | `gt rig boot` starts session |\n\n**Boot+nudge pattern:**\n```bash\ngt rig boot <rig>              # Wake if asleep (idempotent)\ngt nudge <rig>/witness 'wake'  # Clear backoff if running\n```\n\n## Backoff Curve\n\nBase: 30s → 60s → 120s → 240s → ... → 10min cap\n\nResets on: nudge received, work found, deacon ping.\n\n## Reference\n\nSee ~/gt/docs/patrol-system-design.md (Await-Signal Model section)", "status": "closed", "priority": 2, "issue_type": "epic", "created_at": "2025-12-29T06:31:05Z", "created_by": "mayor", "updated_at": "2026-02-27T02:55:19Z", "closed_at": "2026-02-27T02:55:19Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependencies": [{"issue_id": "gt-l6ro3", "depends_on_id": "gt-vdprb", "type": "blocks", "created_at": "2025-12-30T01:03:40Z", "created_by": "mayor", "metadata": "{}"}], "dependency_count": 1, "dependent_count": 0, "comment_count": 0}
{"id": "gt-v37fx", "title": "Patrol exponential backoff for cost savings", "description": "Agent-side backoff state tracking in patrol molecules.\n\n## State\n\nEach patrol agent tracks:\n- current_interval: current sleep duration (starts at base)\n- idle_cycles: count of cycles with no work found\n\n## Backoff Logic\n\n```\non await-signal timeout (no nudge):\n    idle_cycles++\n    current_interval = min(base * 2^idle_cycles, max_interval)\n\non nudge received:\n    idle_cycles = 0\n    current_interval = base\n    wake immediately\n\non work found:\n    idle_cycles = 0\n    current_interval = base\n```\n\n## Where State Lives\n\nOptions:\nA. Agent bead fields (persistent across sessions)\nB. In-memory during patrol (resets on restart)\nC. Wisp fields (ephemeral but survives handoff)\n\nOption B is simplest - backoff resets when agent restarts anyway.\n\n## Depends On\n\n- gt-l6ro3.3: await-signal step type", "status": "closed", "priority": 2, "issue_type": "feature", "created_at": "2025-12-29T06:14:53Z", "created_by": "mayor", "updated_at": "2026-02-27T02:55:19Z", "closed_at": "2026-02-27T02:55:19Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependencies": [{"issue_id": "gt-v37fx", "depends_on_id": "gt-arjlu", "type": "blocks", "created_at": "2025-12-29T06:14:59Z", "created_by": "mayor", "metadata": "{}"}, {"issue_id": "gt-v37fx", "depends_on_id": "gt-l6ro3", "type": "parent-child", "created_at": "2025-12-29T06:31:11Z", "created_by": "mayor", "metadata": "{}"}, {"issue_id": "gt-v37fx", "depends_on_id": "gt-l6ro3.3", "type": "blocks", "created_at": "2025-12-29T07:06:31Z", "created_by": "mayor", "metadata": "{}"}], "dependency_count": 2, "dependent_count": 0, "comment_count": 0, "parent": "gt-l6ro3"}
{"id": "gt-yt4py", "title": "gt polecat add should spawn with --dangerously-skip-permissions", "description": "When adding polecats via gt polecat add, the subsequent Claude session needs --dangerously-skip-permissions flag to run autonomously.\n\nCurrently:\n- gt polecat add creates worktree\n- tmux new-session spawns 'claude' without flags\n- Polecat gets stuck at permission prompts\n\nNeeded:\n- gt polecat add (or gt sling) should spawn with --dangerously-skip-permissions\n- Or store a config in polecat worktree indicating autonomous mode\n\nThis is critical for swarm automation - polecats can't self-approve permissions.", "status": "closed", "priority": 2, "issue_type": "feature", "created_at": "2025-12-29T00:31:54Z", "created_by": "mayor", "updated_at": "2026-02-27T02:55:19Z", "closed_at": "2026-02-27T02:55:19Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-xtsb5", "title": "Fix namepool Save() to use write lock", "description": "attached_args: Fix namepool Save() mutex for thread safety\n\nFix incorrect mutex usage in namepool Save() method.\n\n## Files to modify\n- internal/polecat/namepool.go\n\n## Problem (lines 179-194)\nSave() uses RLock() but performs file I/O:\n```go\nfunc (p *NamePool) Save() error {\n    p.mu.RLock()  // WRONG: file write needs write lock\n    defer p.mu.RUnlock()\n    // ... file operations ...\n}\n```\n\n## Fix\nChange to write lock:\n```go\nfunc (p *NamePool) Save() error {\n    p.mu.Lock()\n    defer p.mu.Unlock()\n    // ... file operations ...\n}\n```\n\n## Acceptance criteria\n- [ ] Save() uses Lock() instead of RLock()\n- [ ] go test -race ./internal/polecat/... passes\n- [ ] Existing namepool tests still pass", "status": "closed", "priority": 2, "issue_type": "task", "created_at": "2025-12-28T23:49:18Z", "created_by": "gastown/crew/max", "updated_at": "2026-02-27T02:55:19Z", "closed_at": "2026-02-27T02:55:19Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-bp0ht", "title": "Add mutex to swarm.Manager for thread safety", "description": "attached_args: Add swarm.Manager mutex for thread safety\n\nFix potential race condition in swarm manager's map access.\n\n## Files to modify\n- internal/swarm/manager.go\n- internal/swarm/manager_test.go (add concurrency test)\n\n## Problem\nThe swarms map[string]*Swarm is accessed without synchronization:\n```go\ntype Manager struct {\n    swarms map[string]*Swarm  // No mutex protection\n}\n```\n\nMultiple goroutines could call Create(), GetSwarm(), etc. simultaneously.\n\n## Implementation\n```go\ntype Manager struct {\n    mu     sync.RWMutex\n    swarms map[string]*Swarm\n}\n\nfunc (m *Manager) GetSwarm(id string) *Swarm {\n    m.mu.RLock()\n    defer m.mu.RUnlock()\n    return m.swarms[id]\n}\n```\n\n## Acceptance criteria\n- [ ] sync.RWMutex added to Manager struct\n- [ ] All map accesses protected by mutex\n- [ ] RLock for reads, Lock for writes\n- [ ] Concurrency test added\n- [ ] go test -race ./internal/swarm/... passes", "status": "closed", "priority": 2, "issue_type": "task", "created_at": "2025-12-28T23:49:17Z", "created_by": "gastown/crew/max", "updated_at": "2026-02-27T02:55:19Z", "closed_at": "2026-02-27T02:55:19Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-0vu9e", "title": "Add unit tests for internal/mrqueue package", "description": "attached_args: mrqueue package tests\n\nAdd comprehensive tests for the merge request queue package.\n\n## Files to create\n- internal/mrqueue/mrqueue_test.go\n\n## Test cases to cover\n1. NewQueue creates queue directory\n2. Add() persists MR to queue\n3. Get() retrieves MR by ID\n4. List() returns all MRs\n5. Remove() deletes MR\n6. MR serialization/deserialization\n7. Queue handles concurrent access\n\n## Acceptance criteria\n- [ ] internal/mrqueue/mrqueue_test.go created\n- [ ] At least 6 test functions\n- [ ] Tests pass: go test ./internal/mrqueue/...\n- [ ] Coverage > 70%", "status": "closed", "priority": 2, "issue_type": "task", "created_at": "2025-12-28T23:49:13Z", "created_by": "gastown/crew/max", "updated_at": "2026-02-27T02:55:18Z", "closed_at": "2026-02-27T02:55:18Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-p2eg5", "title": "Add unit tests for internal/lock package", "description": "attached_args: Lock package tests\n\nAdd comprehensive tests for the file locking package.\n\n## Files to create\n- internal/lock/lock_test.go\n\n## Test cases to cover\n1. Lock() acquires lock successfully\n2. Lock() blocks when lock held by another\n3. Unlock() releases lock\n4. TryLock() returns immediately if locked\n5. IsLocked() detects lock state\n6. Lock file contains correct PID\n7. Stale lock detection (if implemented)\n\n## Acceptance criteria\n- [ ] internal/lock/lock_test.go created\n- [ ] At least 5 test functions\n- [ ] Tests pass: go test ./internal/lock/...\n- [ ] Coverage > 70%: go test -cover ./internal/lock/...", "status": "closed", "priority": 2, "issue_type": "task", "created_at": "2025-12-28T23:49:13Z", "created_by": "gastown/crew/max", "updated_at": "2026-02-27T02:55:18Z", "closed_at": "2026-02-27T02:55:18Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-ddw3y", "title": "Extract duplicate boilerplate in molecule_lifecycle.go", "description": "attached_args: Extract molecule_lifecycle boilerplate\n\nExtract duplicate boilerplate in molecule_lifecycle.go.\n\n## Files to modify\n- internal/cmd/molecule_lifecycle.go\n\n## Current duplication\nrunMoleculeBurn (lines 17-53) and runMoleculeSquash (lines 121-165) share ~50 lines of identical target detection code:\n- Get cwd\n- Find workspace\n- Parse target argument\n- Determine rig from address or role\n\n## Implementation\nExtract helper function:\n```go\ntype AgentContext struct {\n    TownRoot string\n    RigName  string\n    Role     string\n    Target   string  // polecat name or crew name\n}\n\nfunc getTargetAgentContext(args []string) (*AgentContext, error) {\n    cwd, err := os.Getwd()\n    if err != nil {\n        return nil, fmt.Errorf(\"getting current directory: %w\", err)\n    }\n    townRoot, err := workspace.FindFromCwd()\n    if err != nil {\n        return nil, fmt.Errorf(\"finding workspace: %w\", err)\n    }\n    if townRoot == \"\" {\n        return nil, fmt.Errorf(\"not in a Gas Town workspace\")\n    }\n    // ... rest of target detection logic ...\n}\n```\n\n## Acceptance criteria\n- [ ] AgentContext struct defined\n- [ ] getTargetAgentContext function extracts shared logic\n- [ ] runMoleculeBurn uses getTargetAgentContext\n- [ ] runMoleculeSquash uses getTargetAgentContext\n- [ ] Duplicate code eliminated (diff shows net negative lines)\n- [ ] go build ./... passes\n- [ ] go test ./internal/cmd/... passes", "status": "closed", "priority": 2, "issue_type": "task", "created_at": "2025-12-28T23:43:21Z", "created_by": "gastown/crew/max", "updated_at": "2026-02-27T02:55:18Z", "closed_at": "2026-02-27T02:55:18Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-u7dxq", "title": "Activity feed improvements", "description": "Make the activity feed (gt feed) a first-class TUI experience using charmbracelet.\n\n## Vision\n\nA real-time dashboard showing all Gas Town activity with:\n- Agent tree organized by role (mayor, witnesses, crew, polecats)\n- Live event stream\n- Vim-style navigation\n- Filtering and search\n\n## Architecture\n\nTwo-tier event system:\n- ~/gt/.events.jsonl (raw, audit) - all events from gt, bd, agents\n- Feed daemon curates → ~/gt/.feed.jsonl (user-facing) - filtered, deduped\n\nTUI reads from curated feed for smooth UX.\n\n## Layout (Dashboard + Stream)\n```\n┌─────────────────────────────────────────────────────────────┐\n│ GT Feed                                    Filter: all      │\n├─────────────────────────────────────────────────────────────┤\n│ gastown/                                                    │\n│   🎩 mayor      [10:30] Dispatched gt-xyz → Toast           │\n│   👁 witness    [10:28] Nudged polecat-3 (idle 5m)          │\n│   🏭 refinery   [10:25] Merged PR #123                      │\n│   👷 crew/                                                   │\n│      joe        [10:22] ✓ Completed gt-95j13                │\n│      max        [10:18] → Working on gt-s6r44               │\n│   😺 polecats/                                               │\n│      Toast      [10:30] Received gt-xyz, starting...        │\n├─────────────────────────────────────────────────────────────┤\n│ [10:30] 😺 Toast: Received molecule gt-xyz                  │\n│ [10:28] 👁 witness: Nudged polecat-3 after 5m idle          │\n│ [10:25] 🏭 refinery: Merged PR #123                         │\n├─────────────────────────────────────────────────────────────┤\n│ j/k: scroll  /: search  f: filter  q: quit  ?: help         │\n└─────────────────────────────────────────────────────────────┘\n```\n\n## Key Features\n1. Real-time updates - events stream in live\n2. Agent tree - all agents grouped by role with status\n3. Vim-style navigation - j/k, gg/G, /search\n4. Filtering - by rig, role, event type, time\n5. Collapsible sections\n6. Details on select\n\n## Tech Stack\n- bubbletea - TUI framework\n- bubbles - viewport, list components\n- lipgloss - styling (already have)\n\n## Success Criteria\n- Feed is beautiful and scannable at a glance\n- Agent activity visible in real-time\n- Works in any terminal, degrades gracefully for pipes", "status": "closed", "priority": 2, "issue_type": "epic", "created_at": "2025-12-28T19:01:43Z", "created_by": "gastown/crew/joe", "updated_at": "2026-02-27T02:55:18Z", "closed_at": "2026-02-27T02:55:18Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependencies": [{"issue_id": "gt-u7dxq", "depends_on_id": "gt-1uhmj", "type": "blocks", "created_at": "2025-12-28T20:46:47Z", "created_by": "mayor", "metadata": "{}"}, {"issue_id": "gt-u7dxq", "depends_on_id": "gt-1ydd9", "type": "blocks", "created_at": "2025-12-28T19:02:43Z", "created_by": "mayor", "metadata": "{}"}, {"issue_id": "gt-u7dxq", "depends_on_id": "gt-38doh", "type": "blocks", "created_at": "2025-12-28T20:46:47Z", "created_by": "mayor", "metadata": "{}"}, {"issue_id": "gt-u7dxq", "depends_on_id": "gt-7aw1m", "type": "blocks", "created_at": "2025-12-28T19:02:43Z", "created_by": "mayor", "metadata": "{}"}, {"issue_id": "gt-u7dxq", "depends_on_id": "gt-sb6m4", "type": "blocks", "created_at": "2025-12-28T19:02:43Z", "created_by": "mayor", "metadata": "{}"}, {"issue_id": "gt-u7dxq", "depends_on_id": "gt-zc6ma", "type": "blocks", "created_at": "2025-12-28T19:02:43Z", "created_by": "mayor", "metadata": "{}"}], "dependency_count": 6, "dependent_count": 0, "comment_count": 0}
{"id": "gt-witness-role", "title": "Witness Role Definition", "description": "You are the Witness - per-rig worker monitor. You watch polecats, nudge them\ntoward completion, verify clean git state before kills, and escalate stuck\nworkers to the Mayor.\n\nYou do NOT do implementation work. Your job is oversight, not coding.\n\nsession_pattern: gt-{rig}-witness\nwork_dir_pattern: {town}/{rig}\nneeds_pre_sync: false\nstart_command: exec claude --dangerously-skip-permissions\n\ndefault_molecule: mol-witness-patrol\ncapabilities:\n  - monitor_workers\n  - nudge_stuck\n  - pre_kill_verify\n  - session_lifecycle\n  - escalation\n\n## Core Responsibilities\n\n1. Monitor workers: Track polecat health and progress\n2. Nudge: Prompt slow workers toward completion\n3. Pre-kill verification: Ensure git state is clean before killing sessions\n4. Session lifecycle: Kill sessions, update worker state\n5. Self-cycling: Hand off to fresh session when context fills\n6. Escalation: Report stuck workers to Mayor\n\nKey principle: You own ALL per-worker cleanup. Mayor is never involved in\nroutine worker management.\n\n## Propulsion Principle\n\nIf you find something on your hook, YOU RUN IT.\n\nYour work is defined by the mol-witness-patrol molecule. Execute steps:\n- bd ready (find next step)\n- bd show <step-id> (see what to do)\n- bd close <step-id> (mark complete)\n\n## Nudge Protocol\n\nProgress through stages. Track nudge count per worker per issue.\n- First Nudge (10+ min idle): Gentle inquiry\n- Second Nudge (15 min): Direct question\n- Third Nudge (20 min): Final warning\nAfter 3 nudges with no progress then escalate to Mayor\n\n## Pre-Kill Verification\n\nBefore killing ANY polecat session:\n1. gt polecat git-state <name> - Must be clean\n2. Check for uncommitted work\n3. Check for unpushed commits\n4. Verify issue closed\n5. Verify PR submitted (if applicable)\n\n## Commands\n\n- gt polecat list <rig> - See all polecats\n- gt polecat git-state <name> - Check git cleanliness\n- tmux capture-pane -t gt-<rig>-<name> -p | tail -40 - Session inspection\n- gt mail inbox - Check messages\n- gt mail send mayor/ -s \"Subject\" -m \"Message\" - Escalate", "status": "closed", "priority": 2, "issue_type": "task", "created_at": "2025-12-28T08:51:21Z", "created_by": "stevey", "updated_at": "2026-02-27T02:55:18Z", "closed_at": "2026-02-27T02:55:18Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "labels": ["migrated-to:hq-witness-role"], "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-deacon", "title": "gt-deacon", "description": "Deacon (daemon beacon) - receives mechanical heartbeats, runs town plugins and monitoring.\n\nrole_type: deacon\nrig: null\nagent_state: idle\nhook_bead: null\nrole_bead: gt-deacon-role", "status": "closed", "priority": 2, "issue_type": "task", "created_at": "2025-12-28T08:46:18Z", "created_by": "stevey", "updated_at": "2026-02-27T02:55:18Z", "closed_at": "2026-02-27T02:55:18Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "labels": ["migrated-to:hq-deacon"], "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-mayor", "title": "gt-mayor", "description": "gt-mayor\n\nrole_type: mayor\nrig: null\nagent_state: stopped\nhook_bead: null\nrole_bead: gt-mayor-role\ncleanup_status: has_stash\nactive_mr: gt-z4lxc\nnotification_level: null", "status": "closed", "priority": 2, "issue_type": "task", "created_at": "2025-12-28T08:07:11Z", "created_by": "gastown/crew/joe", "updated_at": "2026-02-27T02:55:18Z", "closed_at": "2026-02-27T02:55:18Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "labels": ["migrated-to:hq-mayor"], "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-594l2", "title": "ZFC #10: Polecat reports cleanup status instead of Go checking git", "description": "**ZFC Violation:** internal/polecat/manager.go:192-215\n\nGo examines git state to decide if polecat removal is safe:\n```go\nstatus, err := polecatGit.CheckUncommittedWork()\nif status.StashCount > 0 || status.UnpushedCommits > 0 {\n    return &UncommittedWorkError{...}\n}\n```\n\n**ZFC-compliant solution:**\nPolecat reports its own cleanup status via agent bead:\n- state: stopped\n- cleanup_status: clean | has_uncommitted | has_stash | has_unpushed\n- Witness reads cleanup_status before calling nuke\n- Polecat is authority on whether it's safe to remove\n\n**Relates to:** Day 4.1/4.2 (recycle/nuke commands)\n\nReference: ~/gt/docs/zfc-violations-audit.md #10", "status": "closed", "priority": 2, "issue_type": "task", "created_at": "2025-12-28T05:32:26Z", "created_by": "mayor", "updated_at": "2026-02-27T02:55:17Z", "closed_at": "2026-02-27T02:55:17Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependencies": [{"issue_id": "gt-594l2", "depends_on_id": "gt-z99nh", "type": "blocks", "created_at": "2025-12-28T05:32:44Z", "created_by": "mayor", "metadata": "{}"}], "dependency_count": 1, "dependent_count": 0, "comment_count": 0}
{"id": "gt-opzm4", "title": "ZFC #9: Explicit MR registration instead of branch parsing", "description": "**ZFC Violation:** internal/refinery/manager.go:346-370\n\nGo infers work metadata from branch naming conventions:\n```go\npattern := regexp.MustCompile(`^polecat/([^/]+)(?:/(.+))?$`)\nworker := matches[1]\nissueID = matches[2]\n```\n\n**ZFC-compliant solution:**\nPolecats register MRs with explicit structured data:\n- `gt mq submit --worker=nux --issue=gt-xyz --branch=polecat/nux/gt-xyz`\n- Creates MR bead with explicit fields\n- No regex parsing of branch names\n\n**Benefits:**\n- Work metadata is explicit, not inferred\n- Branch naming can evolve without breaking refinery\n- Audit trail in beads\n\nReference: ~/gt/docs/zfc-violations-audit.md #9", "status": "closed", "priority": 2, "issue_type": "task", "created_at": "2025-12-28T05:32:25Z", "created_by": "mayor", "updated_at": "2026-02-27T02:55:17Z", "closed_at": "2026-02-27T02:55:17Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependencies": [{"issue_id": "gt-opzm4", "depends_on_id": "gt-7uhts", "type": "blocks", "created_at": "2025-12-28T05:32:42Z", "created_by": "mayor", "metadata": "{}"}], "dependency_count": 1, "dependent_count": 0, "comment_count": 0}
{"id": "gt-l3o0k", "title": "Update gastown to use 'ephemeral' instead of 'wisp' terminology", "description": "After beads renames 'wisp' to 'ephemeral' (bd-o18s), update gastown code:\n\n- patrol_helpers.go: bd wisp create → bd ephemeral create (or new API)\n- doctor/wisp_check.go: rename to ephemeral_check.go\n- All references to Wisp field → Ephemeral\n\nDepends on: bd-o18s", "status": "closed", "priority": 2, "issue_type": "task", "created_at": "2025-12-27T04:16:45Z", "updated_at": "2026-02-27T02:55:17Z", "closed_at": "2026-02-27T02:55:17Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-m5w4g.4", "title": "Agent protocol integration test", "description": "End-to-end test: polecat completes work → sends WORK_COMPLETE → witness receives and sends POLECAT_READY → refinery merges → sends MERGE_SUCCESS → witness cleans up polecat. All via structured protocol messages.", "status": "closed", "priority": 2, "issue_type": "task", "created_at": "2025-12-26T04:56:31Z", "updated_at": "2026-02-27T02:55:16Z", "closed_at": "2026-02-27T02:55:16Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependencies": [{"issue_id": "gt-m5w4g.4", "depends_on_id": "gt-m5w4g", "type": "parent-child", "created_at": "2025-12-26T04:56:31Z", "created_by": "mayor", "metadata": "{}"}, {"issue_id": "gt-m5w4g.4", "depends_on_id": "gt-m5w4g.2", "type": "blocks", "created_at": "2025-12-26T04:56:51Z", "created_by": "mayor", "metadata": "{}"}, {"issue_id": "gt-m5w4g.4", "depends_on_id": "gt-m5w4g.3", "type": "blocks", "created_at": "2025-12-26T04:56:51Z", "created_by": "mayor", "metadata": "{}"}], "dependency_count": 2, "dependent_count": 0, "comment_count": 0, "parent": "gt-m5w4g"}
{"id": "gt-m5w4g", "title": "Agent Communication Protocol", "description": "Structured mail between agents for coordination.\n\n## Problem\nAgents communicate via freeform mail. This works but lacks parseable structure for automated handling.\n\n## Protocols\n\n### Witness to Refinery\n- POLECAT_READY: worker X completed, branch ready for merge\n- REWORK_COMPLETE: worker Y finished requested rework\n\n### Refinery to Witness  \n- MERGE_SUCCESS: worker X merged, can be cleaned up\n- MERGE_FAILED: worker X needs rework (reason attached)\n- REWORK_REQUEST: please have worker X rebase on current main\n\n### Polecat to Witness\n- WORK_COMPLETE: done with assigned issue\n- NEED_HELP: stuck, requesting intervention\n\n### Any to Deacon\n- ESCALATION: problem requiring Mayor attention\n\n## Mail Format\nSubject: [PROTOCOL_TYPE] brief description\nBody: Structured YAML or JSON payload\n\n## Success Criteria\n- Patrol steps parse protocol messages automatically\n- Handlers exist for each protocol type\n- Integration test: polecat completes -> witness notifies -> refinery merges -> witness cleans up\n\nConsolidates gt-0qki.", "status": "closed", "priority": 2, "issue_type": "epic", "created_at": "2025-12-26T04:46:36Z", "updated_at": "2026-02-27T02:55:16Z", "closed_at": "2026-02-27T02:55:16Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-glgdo", "title": "MQ conflict prediction: file hotspot tracking", "description": "Track which files change frequently to predict conflicts before spawn.\n\n## Goal\nBefore spawning a polecat on an issue, warn if the target files are \"hot\" (recently changed by other MRs).\n\n## Approach\n1. Track file change frequency per MR (sliding window, e.g., last 24h)\n2. At spawn time, analyze issue description / planned changes\n3. If touching hot files, either:\n   - Warn and proceed\n   - Suggest waiting for queue to clear\n   - Auto-assign to ownership zone (future)\n\n## Implementation\n- Add file_changes log to refinery state (or separate hotspot.json)\n- After each merge, record changed files with timestamp\n- gt spawn checks hotspots before assignment\n- Optional: Witness patrol aggregates hotspot data\n\n## Example\n```\n$ gt spawn --issue gt-xyz\nWarning: This issue likely touches auth/login.go\n  - Changed 3 times in last 2 hours\n  - 2 MRs pending that also touch this file\nProceed anyway? [y/N]\n```\n\n## Parent\ngt-lxxh2", "status": "closed", "priority": 2, "issue_type": "task", "created_at": "2025-12-26T02:30:33Z", "updated_at": "2026-02-27T02:55:16Z", "closed_at": "2026-02-27T02:55:16Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-tst6j", "title": "MQ smart scheduling: dependency-aware queue reordering", "description": "Implement intelligent MQ reordering to minimize conflicts.\n\n## Goal\nReorder the MQ so that MRs touching disjoint files merge \"in parallel\" (no conflicts), while MRs touching overlapping files are sequenced.\n\n## Approach\n1. For each MR, get list of changed files (from branch diff)\n2. Build conflict graph: edge between MRs if files overlap\n3. Find maximal independent sets (MRs that can merge in any order)\n4. Schedule independent MRs first, then handle remaining sequentially\n\n## Implementation\n- Add file analysis to MR submission (gt done)\n- Store changed_files in MR wisp\n- Refinery sorts queue by: priority → conflicts → age\n\n## Example\n```\nQueue: [A, B, C, D]\nFiles:\n  A: auth/login.go\n  B: payments/checkout.go  \n  C: auth/login.go ← conflicts with A!\n  D: docs/readme.md\n\nOptimal: [A, B, D, C] - A, B, D can merge without waiting\n```\n\n## Parent\ngt-lxxh2", "status": "closed", "priority": 2, "issue_type": "task", "created_at": "2025-12-26T02:30:19Z", "updated_at": "2026-02-27T02:55:16Z", "closed_at": "2026-02-27T02:55:16Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-j3cx", "title": "refinery Handoff", "description": "# Merge queue tracking\nlast_processed_branch: null\nbranches_merged_this_cycle: 0", "status": "pinned", "priority": 2, "issue_type": "task", "created_at": "2025-12-25T07:19:17Z", "updated_at": "2026-02-27T16:26:55Z", "labels": ["idle:3"], "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-qe9w", "title": "Simplify and reorganize molecular chemistry docs", "description": "The Gas Town molecular chemistry docs (molecules.md, molecular-chemistry.md, molecule-algebra.md) are too dramatic and verbose. They need a simplification pass to be more reference-manual style.\n\n**Current problems:**\n1. Too much metaphor and philosophy, not enough practical reference\n2. Start with the chemistry abstraction instead of what users care about (patrols, workflows)\n3. Layer cake is presented top-down (formulas → protos → molecules) instead of bottom-up (issues → dependencies → execution)\n\n**Proposed structure (inverted pyramid):**\n\n1. **Start with execution semantics:**\n   - Work = issues with dependencies\n   - Dependencies control execution (blocks = sequential, no dep = parallel)\n   - Agents traverse dependency graphs until blocked\n   - Multi-day workflows via compound bonding\n\n2. **Move to molecules:**\n   - Molecules are just epics with workflow intent\n   - Bonding = creating dependencies between work graphs\n   - No protos required for ad-hoc workflows\n\n3. **Then templates (protos/wisps):**\n   - Phase metaphor for storage locations\n   - pour/wisp/squash/burn operations\n   - When to use each phase\n\n4. **Finally formulas (for advanced users):**\n   - YAML compile-time composition\n   - extends, compose, aspects\n   - Only needed for complex reusable patterns\n\n**Style guidelines:**\n- Reference manual with quick examples\n- Written like agent priming (context they need to execute)\n- Less dramatic, more straightforward\n- TL;DR at top of each doc\n\n**See also:**\n- beads/docs/MOLECULES.md has a simplified version to use as template\n- The execution model section explains multi-day traversal clearly", "status": "closed", "priority": 2, "issue_type": "task", "created_at": "2025-12-25T03:51:42Z", "updated_at": "2026-02-27T02:55:15Z", "closed_at": "2026-02-27T02:55:15Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-z3rf", "title": "Remove schedule/phase terminology from code", "description": "Temporal/schedule language in identifiers is an anti-pattern.\n\n## Found Issues\n\n### beads repo\n- `examples/multi-phase-development/` directory\n  - Rename to `examples/dependency-sequenced-work/` or similar\n\n### gastown repo  \n- `internal/cmd/start.go` lines 178-195\n  - Uses \"Phase 1:\", \"Phase 2:\", etc. in printf output\n  - Change to descriptive names: \"Interrupting agents...\", \"Requesting handoff...\", etc.\n\n- `internal/swarm/landing.go` lines ~50-70\n  - Comments say \"// Phase 1: Stop all polecat sessions\"\n  - Change to \"// Step: Stop all polecat sessions\" or just remove phase labels\n\n## Why This Matters\n\nPhase/version language in names:\n1. Implies a fixed schedule (antithetical to dependency-driven work)\n2. Creates confusion with molecule \"phases\" (solid/liquid/gas)\n3. Encourages temporal thinking that leads to backwards dependencies\n\n## What To Keep\n\n- Molecule phase terminology (pour/wisp/proto) - this is chemistry, not scheduling\n- Version fields inside files (version: 1) - this is semantic versioning", "status": "closed", "priority": 2, "issue_type": "chore", "created_at": "2025-12-24T23:57:43Z", "updated_at": "2026-02-27T02:55:15Z", "closed_at": "2026-02-27T02:55:15Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-rxsh", "title": "Multiple merge/landing models documented without clarification", "description": "Architecture describes three different merge models:\n\n1. Refinery-only model (traditional)\n2. Direct landing model (Mayor bypass) \n3. Swarm integration branch model (internal/swarm)\n\nThese appear to conflict. Documentation should clarify:\n- Which model is canonical?\n- When to use which model?\n- Or are some deprecated?\n\nThis is confusing for users trying to understand the system.", "status": "closed", "priority": 2, "issue_type": "task", "created_at": "2025-12-24T20:51:44Z", "updated_at": "2026-02-27T02:55:15Z", "closed_at": "2026-02-27T02:55:15Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-9uxr", "title": "Critical packages lack test coverage", "description": "Several packages have no test files:\n- internal/lock/ - Core identity locking (212 lines UNTESTED)\n- internal/witness/ - Worker monitoring\n- internal/mrqueue/ - MR queue management\n- internal/claude/ - Claude integration\n- internal/style/ - Terminal styling\n- internal/constants/ - Constants\n\nPriority for testing:\n1. lock/ - prevents duplicate agents, critical for correctness\n2. witness/ - agent lifecycle management\n3. mrqueue/ - merge request processing\n\nOverall: 37 test files for 160 Go files (23% by file count)", "status": "closed", "priority": 2, "issue_type": "task", "created_at": "2025-12-24T20:51:01Z", "updated_at": "2026-02-27T02:55:15Z", "closed_at": "2026-02-27T02:55:15Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-wy8t", "title": "Add live polling and updates", "description": "Implement live polling (500ms default) for activity updates. Merge new events into view without flickering. Show connection status indicator. Handle daemon disconnects gracefully.", "status": "closed", "priority": 2, "issue_type": "task", "created_at": "2025-12-24T00:27:18Z", "updated_at": "2026-02-27T02:55:00Z", "closed_at": "2026-02-27T02:55:00Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-55kx", "title": "Build activity stream component", "description": "Bubbletea component showing scrollable activity stream for a selected worker. Shows mutation events with timestamps, symbols, and issue titles. Displayed when user expands/selects a worker.", "status": "closed", "priority": 2, "issue_type": "task", "created_at": "2025-12-24T00:27:17Z", "updated_at": "2026-02-27T02:55:00Z", "closed_at": "2026-02-27T02:55:00Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependencies": [{"issue_id": "gt-55kx", "depends_on_id": "gt-3p77", "type": "blocks", "created_at": "2025-12-24T00:27:39Z", "created_by": "mayor", "metadata": "{}"}], "dependency_count": 1, "dependent_count": 1, "comment_count": 0}
{"id": "gt-tr0a", "title": "Build rig/worker tree view component", "description": "Bubbletea component showing hierarchical rig list with workers. Each rig expandable to show workers. Each worker shows: status indicator, current molecule title, step progress (X/Y), time since last activity.", "status": "closed", "priority": 2, "issue_type": "task", "created_at": "2025-12-24T00:27:11Z", "updated_at": "2026-02-27T02:55:00Z", "closed_at": "2026-02-27T02:55:00Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependencies": [{"issue_id": "gt-tr0a", "depends_on_id": "gt-3p77", "type": "blocks", "created_at": "2025-12-24T00:27:39Z", "created_by": "mayor", "metadata": "{}"}], "dependency_count": 1, "dependent_count": 1, "comment_count": 0}
{"id": "gt-3p77", "title": "Implement gt watch command scaffold", "description": "Basic bubbletea TUI scaffold for 'gt watch' command. Discovers rigs, connects to daemons, renders placeholder view. Foundation for the full activity feed TUI.", "status": "closed", "priority": 2, "issue_type": "task", "created_at": "2025-12-24T00:27:10Z", "updated_at": "2026-02-27T02:55:00Z", "closed_at": "2026-02-27T02:55:00Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependency_count": 0, "dependent_count": 2, "comment_count": 0}
{"id": "gt-22ng", "title": "Create activity aggregator", "description": "Component that connects to multiple rig beads daemons and merges their activity into a unified view. Polls GetMutations and GetWorkerStatus from each rig, groups by rig/worker. Handles connection failures gracefully.\n\nBLOCKED BY (Beads rig):\n- bd-gqxd: Enrich MutationEvent with title and assignee\n- bd-l13p: Add GetWorkerStatus RPC endpoint\n- bd-0oqz: Add GetMoleculeProgress RPC endpoint", "status": "closed", "priority": 2, "issue_type": "task", "created_at": "2025-12-24T00:27:08Z", "updated_at": "2026-02-27T02:55:00Z", "closed_at": "2026-02-27T02:55:00Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-suuf", "title": "check-refinery", "description": "Ensure the refinery is alive and processing merge requests.\n\nNeeds: inbox-check", "status": "closed", "priority": 2, "issue_type": "task", "created_at": "2025-12-24T00:23:42Z", "updated_at": "2026-02-27T02:55:00Z", "closed_at": "2026-02-27T02:55:00Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-w98d", "title": "witness Handoff", "status": "hooked", "priority": 2, "issue_type": "task", "created_at": "2025-12-24T00:23:42Z", "updated_at": "2025-12-28T02:14:42Z", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-in7b", "title": "gt sling: nudge crew/mayor if session is running", "description": "When slinging to crew or mayor, if they have an active tmux session, send a nudge notification so they know work has landed on their hook.\n\nCurrently only slingToPolecat nudges (lines 514-521 in internal/cmd/sling.go).\n\nMissing nudge in:\n- slingToCrew (line ~669)\n- slingToMayor (line ~876)\n\nNOTE: For patrol-based agents (witness, refinery, deacon), see gt-arjlu which handles nudging them when work is dispatched to polecats in their rig. That's a different pattern - not slinging TO them, but notifying them of activity.\n\nImplementation:\n1. For crew: need to determine session name (e.g., gastown-crew-max)\n2. Check if session running via tmux\n3. If running, call t.NudgeSession() with appropriate message", "status": "closed", "priority": 2, "issue_type": "task", "created_at": "2025-12-23T23:56:22Z", "updated_at": "2026-02-27T02:55:00Z", "closed_at": "2026-02-27T02:55:00Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-tnss", "title": "Analysis: Beads database size and hygiene strategy", "description": "Audit beads database size and plan medium-term hygiene.\n\n## Questions\n1. How many issues total (including tombstones)?\n2. Size of issues.jsonl?\n3. Growth rate per day/week?\n4. What percentage are tombstones?\n\n## Hygiene Topics\n- Compaction: squash tombstones periodically\n- Archival: move old closed issues to archive file\n- Pruning: delete truly stale items (test beads, old MRs)\n- Sync efficiency: large JSONL = slow sync\n\n## Action Items\n- [ ] Count total issues by status\n- [ ] Count tombstones\n- [ ] Measure file sizes\n- [ ] Propose hygiene schedule", "status": "closed", "priority": 2, "issue_type": "task", "created_at": "2025-12-23T22:38:33Z", "updated_at": "2026-02-27T02:54:59Z", "closed_at": "2026-02-27T02:54:59Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-ox67", "title": "Maintenance: Regular cleanup of closed MR/gate beads", "description": "Closed merge-request and gate beads accumulate over time. Need regular cleanup.\n\n## Cleanup Candidates\n- type=merge-request with status=closed\n- type=gate with status=closed\n- type=molecule with status=closed (completed workflows)\n\n## Options\n1. **Deacon patrol step** - squash closed MRs periodically\n2. **Refinery post-merge** - close and tombstone MR after successful merge\n3. **bd doctor check** - warn when stale MR count exceeds threshold\n\n## Consideration\nKeep some audit trail? Or just tombstone after N days?", "status": "closed", "priority": 2, "issue_type": "task", "created_at": "2025-12-23T22:38:32Z", "updated_at": "2026-02-27T02:54:59Z", "closed_at": "2026-02-27T02:54:59Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-1elg", "title": "Code review: handoff.go changes (gt-yt6g, gt-tocb)", "description": "Review ~80 lines of Go changes to internal/cmd/handoff.go:\n\n## Commits to review\n- 1414081: Standardize session end with gt handoff (gt-yt6g)\n  - Detect polecats via GT_POLECAT env var\n  - Call gt done instead of respawning for polecats\n  - +31/-11 lines\n\n- 9c85b83: Support full session paths in gt handoff (gt-tocb)\n  - resolveRoleToSession accepts <rig>/crew/<name>, <rig>/witness, <rig>/refinery\n  - +46/-3 lines\n\n## Review focus\n- Error handling in path resolution\n- Edge cases in polecat detection\n- Test coverage needed?", "status": "closed", "priority": 2, "issue_type": "task", "created_at": "2025-12-23T22:27:41Z", "updated_at": "2026-02-27T02:54:59Z", "closed_at": "2026-02-27T02:54:59Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-8nmy", "title": "Update Deacon template to emphasize staying in ~/gt/deacon directory", "description": "The Deacon template should instruct the agent to stay in ~/gt/deacon/ as much as possible, and always return there after any excursion. This prevents issues with identity detection (mail, mol status) which depend on cwd.", "status": "closed", "priority": 2, "issue_type": "task", "created_at": "2025-12-23T21:30:28Z", "updated_at": "2026-02-27T02:54:59Z", "closed_at": "2026-02-27T02:54:59Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-6qld", "title": "Daemon should auto-start as part of town bootstrap", "description": "The Go daemon should be started automatically when the town boots up (mol-gastown-boot). Currently it requires manual 'gt daemon start'.\n\nThe daemon is critical infrastructure - it monitors the Deacon and nudges it when naked. Without it, the Deacon patrol loop doesn't run.", "status": "closed", "priority": 2, "issue_type": "task", "created_at": "2025-12-23T21:16:52Z", "updated_at": "2026-02-27T02:54:59Z", "closed_at": "2026-02-27T02:54:59Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-gswn", "title": "Integration test: agent waits for CI via gate", "description": "End-to-end test of the gate workflow.\n\n## Test Scenario\n1. Agent creates gate: bd gate create --await gh:run:123 --timeout 5m --notify beads/dave\n2. Agent writes handoff and exits\n3. Deacon patrol checks gate condition\n4. (Mock) GitHub run completes\n5. Deacon notifies waiter and closes gate\n6. New agent session reads mail and resumes\n\n## Test Requirements\n- Mock GitHub API responses\n- Test timeout path\n- Test multiple waiters\n- Verify mail notifications sent\n\n## Moved from beads\nOriginally bd-rl5t. Tests Deacon patrol which is in gastown.", "status": "closed", "priority": 2, "issue_type": "task", "created_at": "2025-12-23T20:23:57Z", "updated_at": "2026-02-27T02:54:58Z", "closed_at": "2026-02-27T02:54:58Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependencies": [{"issue_id": "gt-gswn", "depends_on_id": "gt-dh65", "type": "blocks", "created_at": "2025-12-23T20:24:02Z", "created_by": "mayor", "metadata": "{}"}], "dependency_count": 1, "dependent_count": 0, "comment_count": 0}
{"id": "gt-fqcz", "title": "Add gate timeout tracking and notification", "description": "Implement timeout and notification logic for gates.\n\n## Timeout Behavior\n1. Gate created with timeout (e.g., 30m)\n2. Deacon tracks elapsed time during patrol\n3. If timeout reached:\n   - Notify all waiters: 'Gate timed out'\n   - Close gate with timeout reason\n   - Waiter can retry, escalate, or fail gracefully\n\n## Notification\n- Use gt mail send to notify waiters\n- Include gate ID, await type, and reason in message\n- Support multiple waiters notification\n\n## Moved from beads\nOriginally bd-ykqu. Gate notifications are Deacon's job in gastown.", "status": "closed", "priority": 2, "issue_type": "task", "created_at": "2025-12-23T20:19:18Z", "updated_at": "2026-02-27T02:54:58Z", "closed_at": "2026-02-27T02:54:58Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependencies": [{"issue_id": "gt-fqcz", "depends_on_id": "gt-dh65", "type": "blocks", "created_at": "2025-12-23T20:19:33Z", "created_by": "mayor", "metadata": "{}"}], "dependency_count": 1, "dependent_count": 0, "comment_count": 0}
{"id": "gt-ng6g", "title": "Implement await type handlers (gh:run, gh:pr, timer, human, mail)", "description": "Implement condition checking for each await type.\n\n## Handlers Needed\n- gh:run:<id> - Check GitHub Actions run status via gh CLI\n- gh:pr:<id> - Check PR merged/closed status via gh CLI  \n- timer:<duration> - Simple elapsed time check\n- human:<prompt> - Check for human approval (via mail?)\n- mail:<pattern> - Check for mail matching pattern\n\n## Interface\n```go\ntype AwaitHandler interface {\n    Check(awaitID string) (completed bool, result string, err error)\n}\n```\n\n## Moved from beads\nOriginally bd-2l03. Deacon handlers belong in gastown.", "status": "closed", "priority": 2, "issue_type": "task", "created_at": "2025-12-23T20:19:12Z", "updated_at": "2026-02-27T02:54:58Z", "closed_at": "2026-02-27T02:54:58Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependencies": [{"issue_id": "gt-ng6g", "depends_on_id": "gt-dh65", "type": "blocks", "created_at": "2025-12-23T20:19:33Z", "created_by": "mayor", "metadata": "{}"}], "dependency_count": 1, "dependent_count": 0, "comment_count": 0}
{"id": "gt-kabx", "title": "Build context self-check into patrol molecules", "description": "Patrol molecules (witness-patrol, refinery-patrol, deacon-patrol) should have\nexplicit context self-check as part of each cycle:\n\nAfter each patrol cycle step:\n- Self-assess context pressure\n- If high: complete current step, then initiate handoff\n- If OK: continue to next cycle\n\nThis could be:\n1. Explicit step in molecule: 'context-check'\n2. Guidance in step instructions: 'Before continuing, assess context...'\n3. Protocol baked into the patrol loop description\n\nThe key is making it unavoidable - not optional guidance that gets ignored.", "status": "closed", "priority": 2, "issue_type": "task", "created_at": "2025-12-23T09:46:57Z", "updated_at": "2026-02-27T02:54:58Z", "closed_at": "2026-02-27T02:54:58Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-v650", "title": "Add handoff self-initiation protocol to role templates", "description": "Agents need clear protocol for self-initiated handoff:\n\n1. Recognize: 'I should cycle now'\n2. Prepare: Summarize current state, what's next\n3. Send: gt mail send <self> -s '🤝 HANDOFF: ...' -m '...'\n4. Exit: End session cleanly\n\nThis replaces external 'you should cycle now' nudging.\nThe agent owns its lifecycle.\n\nInclude examples for each role type.", "status": "closed", "priority": 2, "issue_type": "task", "created_at": "2025-12-23T09:46:31Z", "updated_at": "2026-02-27T02:54:57Z", "closed_at": "2026-02-27T02:54:57Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-8a0h", "title": "Add compaction recovery protocol to role templates", "description": "After context compaction (summarization), agents may be disoriented.\n\nAdd guidance to recognize and recover:\n- 'If you feel you've lost earlier context or are disoriented, run: gt prime'\n- 'This re-injects your role, current work, and pending messages'\n- 'It's safe to prime multiple times - it just outputs context'\n\nThis is the fallback path when self-check is missed and compaction happens.\nCompaction isn't catastrophic if priming is robust.", "status": "closed", "priority": 2, "issue_type": "task", "created_at": "2025-12-23T09:46:22Z", "updated_at": "2026-02-27T02:54:57Z", "closed_at": "2026-02-27T02:54:57Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-xuzo", "title": "Add self-check context guidance to role CLAUDE.md files", "description": "Each role's CLAUDE.md needs guidance for context self-management:\n\n- After each patrol cycle, self-assess context pressure\n- Heuristics: feeling compressed, lots of tool calls, long session\n- If triggered: initiate handoff before continuing\n\nRoles to update:\n- Mayor (~/gt/CLAUDE.md)\n- Witness template\n- Refinery template  \n- Polecat template\n- Crew template\n- Deacon template\n\nThis is the 'inversion of control' - agents decide when to cycle, not external monitoring.", "status": "closed", "priority": 2, "issue_type": "task", "created_at": "2025-12-23T09:46:14Z", "updated_at": "2026-02-27T02:54:57Z", "closed_at": "2026-02-27T02:54:57Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-9wv0", "title": "gt spawn should verify daemon is running for polecat triggering", "description": "gt spawn notifies the Deacon (via mail) that a polecat was started, expecting the Deacon to trigger it once Claude is ready. But if the daemon isn't running, the mail sits unread and the polecat never gets triggered.\n\n## Current Behavior\n1. gt spawn starts polecat session\n2. gt spawn sends POLECAT_STARTED to deacon/\n3. (assumes daemon will trigger polecat)\n\n## Problem\nIf gt daemon isn't running, step 3 never happens and polecat sits at prompt.\n\n## Solution\nIn gt spawn, after session start:\n1. Check if daemon is running (gt daemon status)\n2. If not running, either:\n   a. Start daemon: gt daemon start\n   b. Or warn user: 'Daemon not running, polecat may not auto-start'\n\n## Alternative\nThe user can manually trigger with gt nudge, but automated flow should work.", "status": "closed", "priority": 2, "issue_type": "task", "created_at": "2025-12-23T09:03:04Z", "updated_at": "2026-02-27T02:54:57Z", "closed_at": "2026-02-27T02:54:57Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-tr3d", "title": "Zombie session detection for refinery/witness", "description": "A Claude session can crash or hang while still appearing as 'running' in tmux. The current IsRunning checks only verify tmux session exists, not that Claude is actually processing.\n\n## Problem\n- Refinery session might be hung (Claude crashed, infinite loop, etc.)\n- tmux HasSession returns true, so auto-start doesn't trigger\n- MRs pile up with no processing\n\n## Solution Options\n1. **Activity-based detection**: Check last output timestamp in tmux\n2. **Heartbeat file**: Agents write timestamp to file, check staleness\n3. **Prompt detection**: Look for Claude '>' prompt indicating idle/stuck\n\n## Related\n- gt-bjft (spawn auto-start) assumes IsRunning means healthy\n- Witness patrol assumes running refinery is processing", "status": "closed", "priority": 2, "issue_type": "task", "created_at": "2025-12-23T09:02:51Z", "updated_at": "2026-02-27T02:54:57Z", "closed_at": "2026-02-27T02:54:57Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-3oyn", "title": "Blocked issues: gt-um6q, gt-lz13, gt-5xph depend on missing beads features", "description": "Template/docs updates blocked on: bd-nurq (bd mol current), bd-29fb (bd close --continue). These gastown issues should be marked blocked on the beads issues once cross-rig deps work.", "status": "closed", "priority": 2, "issue_type": "task", "created_at": "2025-12-23T08:19:13Z", "updated_at": "2026-02-27T02:54:57Z", "closed_at": "2026-02-27T02:54:57Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-unev", "title": "Clean up ~/gt root directory cruft", "description": "The town root has accumulated various directories and files that need review:\n\n**To evaluate:**\n- daemon/ - old daemon code? move or delete?\n- deacon/ - WIP deacon work? consolidate with gastown?\n- mayor/ - old mayor structure? \n- AGENTS.md - is this still used?\n- gt binary at root - should be gitignored\n\n**Already correct:**\n- .beads/, .claude/, .gastown/, .runtime/ - runtime dirs\n- beads/, gastown/ - rig directories  \n- docs/hop/ - strategic docs\n- CLAUDE.md - mayor context\n\nClean up, consolidate, update .gitignore as needed.", "status": "closed", "priority": 2, "issue_type": "task", "created_at": "2025-12-23T06:10:10Z", "updated_at": "2026-02-27T02:54:56Z", "closed_at": "2026-02-27T02:54:56Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-ogpk", "title": "Add neighbor-check steps to all patrol molecules", "description": "Part of the 'Gas Town is a Village' antifragility design.\n\nEvery patrol molecule should include optional neighbor-checking:\n- Deacon checks Witness and Refinery health\n- Witness checks Refinery health  \n- Refinery checks Witness health\n- Polecats can peek other polecats\n\nUse gt peek to check health states.\nIf stuck neighbor found, can nudge or escalate.\n\nThis creates distributed monitoring - no single point of failure.", "status": "closed", "priority": 2, "issue_type": "task", "created_at": "2025-12-23T06:01:16Z", "updated_at": "2026-02-27T02:54:56Z", "closed_at": "2026-02-27T02:54:56Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-s6dw", "title": "Batch wisp squashing in Deacon maintenance", "description": "Add wisp squashing to Deacon's maintenance duties:\n- Patrol plugin to find orphaned/completed wisps across all rigs\n- Squash completed patrol wisps to digests\n- Burn abandoned wisps that have no audit value\n- Part of the hygiene/cleanup system\n\nAlso: Witness polecat shutdown should spawn its own short wisp for the cleanup protocol.", "status": "closed", "priority": 2, "issue_type": "task", "created_at": "2025-12-23T05:52:49Z", "updated_at": "2026-02-27T02:54:56Z", "closed_at": "2026-02-27T02:54:56Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-dx5c", "title": "Update swarm terminology to streams", "description": "Gas Town moved from batch swarms to continuous streaming of polecats. Update:\n- Docs and designs\n- Code comments\n- CLI flags (remove --swarm if present, or reframe)\n- Variable/function names where appropriate\n\nStreams reflect the reality: polecats flow continuously, not in discrete batches.", "status": "closed", "priority": 2, "issue_type": "task", "created_at": "2025-12-23T05:42:20Z", "updated_at": "2026-02-27T02:54:56Z", "closed_at": "2026-02-27T02:54:56Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-mzal.8", "title": "Update Mayor startup protocol for bootstrap", "description": "Teach Mayor to respond to \"boot up gas town\" by slinging mol-gastown-boot.\n\n## Current Protocol\n\n1. Announce: \"Mayor, checking in.\"\n2. Check mail\n3. If handoff, continue\n4. Await user instruction\n\n## Enhanced Protocol\n\n1. Announce: \"Mayor, checking in.\"\n2. Check mail\n3. If handoff, continue\n4. **If user says \"boot\"/\"startup\"/\"bootstrap\":**\n   - Sling mol-gastown-boot as wisp\n   - Execute verification-gated steps\n   - Report town status when complete\n5. Otherwise await instruction\n\n## Trigger Phrases\n\n- \"boot up gas town\"\n- \"bootstrap the town\"\n- \"start gas town\"\n- \"bring up the town\"\n\n## Execution\n\nMayor runs the molecule manually (not via subagent):\n\n```\n1. Bond the proto: bd mol bond mol-gastown-boot --wisp\n2. For each step:\n   a. Run action command\n   b. Loop verification with backoff\n   c. On stall, run recovery\n   d. Close step when verified\n3. Squash wisp with summary\n4. Report: \"Gas Town is up. All agents healthy.\"\n```\n\n## CLAUDE.md Update\n\nAdd to Mayor CLAUDE.md:\n\n```markdown\n## Bootstrap Command\n\nWhen user requests town bootstrap:\n1. gt sling gastown-boot mayor/ --wisp\n2. Execute molecule steps with verification\n3. Keep trying until all agents healthy\n4. No timeouts - you are the town engineer\n```\n", "status": "closed", "priority": 2, "issue_type": "task", "created_at": "2025-12-23T05:00:50Z", "updated_at": "2026-02-27T02:54:56Z", "closed_at": "2026-02-27T02:54:56Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependencies": [{"issue_id": "gt-mzal.8", "depends_on_id": "gt-mzal", "type": "parent-child", "created_at": "2025-12-23T05:00:50Z", "created_by": "mayor", "metadata": "{}"}, {"issue_id": "gt-mzal.8", "depends_on_id": "gt-mzal.2", "type": "blocks", "created_at": "2025-12-23T05:00:59Z", "created_by": "mayor", "metadata": "{}"}], "dependency_count": 1, "dependent_count": 0, "comment_count": 0, "parent": "gt-mzal"}
{"id": "gt-mzal.5", "title": "Add event-triggered lifecycle wisps", "description": "Commands like `gt town start` should auto-trigger lifecycle wisps.\n\n## Event → Wisp Mapping\n\n| Command | Triggers Wisp |\n|---------|---------------|\n| gt town start | mol-gastown-boot |\n| gt rig add <name> | mol-rig-spinup (param: rig=<name>) |\n| gt rig remove <name> | mol-rig-spindown (param: rig=<name>) |\n| gt daemon restart | mol-gastown-boot |\n\n## Implementation\n\n1. Command implementation checks for lifecycle proto\n2. Auto-slings wisp to Mayor with --wisp flag\n3. Mayor picks up via molecule attachment\n\n## Alternative: Explicit Sling\n\nKeep commands simple, require explicit:\n\n```bash\ngt town start        # Just starts sessions\ngt sling gastown-boot mayor/ --wisp   # Bootstrap with verification\n```\n\nThis is more transparent - user sees the sling happen.\n\n## Recommendation\n\nStart with explicit sling. Add auto-trigger later once pattern proven.\n`gt town start --verified` could trigger the wisp.\n", "status": "closed", "priority": 2, "issue_type": "task", "created_at": "2025-12-23T05:00:22Z", "updated_at": "2026-02-27T02:54:56Z", "closed_at": "2026-02-27T02:54:56Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependencies": [{"issue_id": "gt-mzal.5", "depends_on_id": "gt-mzal", "type": "parent-child", "created_at": "2025-12-23T05:00:22Z", "created_by": "mayor", "metadata": "{}"}, {"issue_id": "gt-mzal.5", "depends_on_id": "gt-mzal.3", "type": "blocks", "created_at": "2025-12-23T05:01:00Z", "created_by": "mayor", "metadata": "{}"}], "dependency_count": 1, "dependent_count": 0, "comment_count": 0, "parent": "gt-mzal"}
{"id": "gt-mzal.4", "title": "Add parallel step support to molecules", "description": "Enable steps to run in parallel within a molecule.\n\n## Current State\n\nMolecules have linear step dependencies via \"Needs:\" directive.\nSteps run sequentially.\n\n## Proposed Change\n\nAdd parallel grouping:\n\n```markdown\n## Step: ensure-witnesses\nParallel: true\n\n### Sub-steps\n- ensure-gastown-witness\n- ensure-beads-witness\n```\n\nOr via frontmatter:\n\n```yaml\n---\nparallel: [ensure-witnesses, ensure-refineries]\n---\n```\n\nSteps in parallel group:\n- Start simultaneously\n- Parent step closes when all children complete\n- Failures in one dont block others\n\n## Implementation\n\n1. Parse parallel directive in proto\n2. When bonding, create child steps with same dependency\n3. Executor spawns parallel children concurrently\n4. Track completion, close parent when all done\n\n## For Mayor Bootstrap\n\nMayor can check all witnesses in parallel, then all refineries,\nrather than sequentially. Faster boot time.\n", "status": "closed", "priority": 2, "issue_type": "task", "created_at": "2025-12-23T05:00:21Z", "updated_at": "2026-02-27T02:54:56Z", "closed_at": "2026-02-27T02:54:56Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependencies": [{"issue_id": "gt-mzal.4", "depends_on_id": "gt-mzal", "type": "parent-child", "created_at": "2025-12-23T05:00:21Z", "created_by": "mayor", "metadata": "{}"}], "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-mzal"}
{"id": "gt-mzal.3", "title": "Create molecules catalog directory structure", "description": "Establish the proto catalog at ~/gt/molecules/.\n\n## Structure\n\n```\n~/gt/molecules/\n├── README.md           # Catalog overview\n├── lifecycle/\n│   ├── gastown-boot/\n│   │   └── PROTO.md    # Proto definition in markdown\n│   ├── rig-spinup/\n│   ├── rig-spindown/\n│   └── agent-restart/\n├── patrol/\n│   ├── deacon-patrol/\n│   ├── witness-patrol/\n│   └── refinery-patrol/\n└── work/\n    ├── polecat-work/\n    ├── code-review/\n    └── feature/\n```\n\n## PROTO.md Format\n\n```markdown\n---\ntype: lifecycle\nparallel: [ensure-witnesses, ensure-refineries]\nephemeral: true\n---\n\n# mol-gastown-boot\n\nTown bootstrap molecule.\n\n## Step: ensure-daemon\n...\n```\n\n## Catalog Loading\n\n`gt sling gastown-boot` should find the proto by:\n1. Check beads for existing proto issue\n2. If not found, scan ~/gt/molecules/lifecycle/gastown-boot/\n3. Auto-create proto issue from PROTO.md\n\nThis enables file-based proto development with beads tracking.\n", "status": "closed", "priority": 2, "issue_type": "task", "created_at": "2025-12-23T05:00:16Z", "updated_at": "2026-02-27T02:54:56Z", "closed_at": "2026-02-27T02:54:56Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependencies": [{"issue_id": "gt-mzal.3", "depends_on_id": "gt-mzal", "type": "parent-child", "created_at": "2025-12-23T05:00:16Z", "created_by": "mayor", "metadata": "{}"}], "dependency_count": 0, "dependent_count": 1, "comment_count": 0, "parent": "gt-mzal"}
{"id": "gt-mzal.2", "title": "Implement verification patterns for boot steps", "description": "Define and implement the verification logic Mayor uses.\n\n## Verification Utilities\n\nMayor needs to check:\n\n### Session Exists\n```bash\ntmux has-session -t <session> 2>/dev/null && echo \"exists\"\n```\n\n### Not Stalled (Claude waiting at prompt)\n```bash\ngt peek <agent> 10 | grep -q \"> Try\" && echo \"stalled\"\n```\n\nPattern: `> Try \"...\"` indicates Claude started but no message sent.\n\n### Recent Heartbeat\n```bash\n# For deacon\nage=$(( $(date +%s) - $(stat -f %m ~/gt/deacon/heartbeat.json) ))\n[ $age -lt 120 ] && echo \"fresh\"\n```\n\n### Active Work Output\n```bash\ngt peek <agent> 20 | grep -q \"⏺\" && echo \"working\"\n```\n\nPattern: `⏺` indicates Claude is executing tools.\n\n## Mayor Execution Pattern\n\n```\nfor each step in molecule:\n  run action\n  loop:\n    check verification\n    if verified: close step, continue\n    if stalled: run on_stall recovery\n    if timeout (5 attempts): log warning, continue\n    sleep 10s\n```\n\nNo hard timeout - Mayor keeps trying with increasing backoff.\n", "status": "closed", "priority": 2, "issue_type": "task", "created_at": "2025-12-23T05:00:15Z", "updated_at": "2026-02-27T02:54:56Z", "closed_at": "2026-02-27T02:54:56Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependencies": [{"issue_id": "gt-mzal.2", "depends_on_id": "gt-mzal", "type": "parent-child", "created_at": "2025-12-23T05:00:15Z", "created_by": "mayor", "metadata": "{}"}], "dependency_count": 0, "dependent_count": 1, "comment_count": 0, "parent": "gt-mzal"}
{"id": "gt-mzal", "title": "mol-gastown-boot: Mayor-driven town bootstrap", "description": "Mayor bootstraps Gas Town via a verification-gated lifecycle molecule.\n\n## Vision\n\nWhen user says \"boot up gas town\", Mayor slings `mol-gastown-boot` and executes it.\nEach step has **action + verification** - steps stay open until outcome is confirmed.\n\n## Key Principles\n\n1. **No daemon-based timeouts** - Mayor keeps trying until verified\n2. **Verification-gated steps** - Not \"command ran\" but \"outcome confirmed\"\n3. **gt peek for verification** - Capture session output to detect stalls\n4. **gt nudge for recovery** - Reliable message delivery to unstick agents\n5. **Parallel where possible** - Witnesses can start in parallel\n6. **Ephemeral execution** - Boot is a wisp, squashed to digest\n\n## Proto Catalog\n\nTown maintains a catalog of protos at `~/gt/molecules/`:\n\n```\n~/gt/molecules/\n├── lifecycle/\n│   ├── gastown-boot/       # Full town bootstrap\n│   ├── rig-spinup/         # Add a rig at runtime\n│   ├── rig-spindown/       # Remove a rig gracefully\n│   └── agent-restart/      # Restart single agent\n├── patrol/\n│   ├── deacon-patrol/      # Deacon health loop\n│   ├── witness-patrol/     # Witness polecat loop\n│   └── refinery-patrol/    # Refinery merge loop\n└── work/\n    ├── polecat-work/       # Standard issue workflow\n    ├── code-review/        # Pluggable review\n    └── feature/            # Feature development\n```\n\n## mol-gastown-boot Structure\n\n```\nmol-gastown-boot (proto)\n├── ensure-daemon       # Verify daemon running\n├── ensure-deacon       # Start deacon, verify patrol active\n├── ensure-witnesses    # Parallel: all rig witnesses\n│   ├── ensure-gastown-witness\n│   └── ensure-beads-witness\n├── ensure-refineries   # Parallel: all rig refineries\n│   ├── ensure-gastown-refinery\n│   └── ensure-beads-refinery\n└── verify-town-health  # Final gt status check\n```\n\n## Step Template\n\nEach step in description includes action + verification:\n\n```markdown\n## Step: ensure-deacon\n\n### Action\ngt deacon start\n\n### Verify\n1. Session gt-deacon exists: `tmux has-session -t gt-deacon`\n2. Not stalled: `gt peek deacon/` does NOT show \"> Try\"\n3. Recent heartbeat: deacon/heartbeat.json < 2 min old\n\n### On Stall\ngt nudge deacon/ \"Start patrol.\"\nWait 30s, re-verify.\n\n### On Fail\nLog error, continue to next step (town can run with degraded deacon)\n```\n\n## Event-Triggered Lifecycle\n\nBeyond manual slinging, events can trigger lifecycle wisps:\n\n| Event | Triggers |\n|-------|----------|\n| `gt town start` | mol-gastown-boot wisp |\n| `gt rig add <name>` | mol-rig-spinup wisp |\n| `gt rig remove <name>` | mol-rig-spindown wisp |\n| Agent crash detected | mol-agent-restart wisp |\n\n## Parameterization (Future)\n\nFor rig-spinup/spindown, need to pass rig name:\n\n```bash\ngt sling rig-spinup mayor/ --param rig=newproject\n```\n\nMolecule steps interpolate `${rig}` in their descriptions.\n\n## Related Issues\n\n- gt-lx3n: Witness startup bond\n- gt-j6s8: Refinery startup bond  \n- gt-rana: Patrol System epic\n- gt-sye: Mayor startup protocol\n", "status": "closed", "priority": 2, "issue_type": "epic", "created_at": "2025-12-23T04:59:16Z", "updated_at": "2026-02-27T02:54:56Z", "closed_at": "2026-02-27T02:54:56Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-op78", "title": "Session cycling: Auto-spawn successor when context full", "description": "Enable automatic session succession for crew workers.\n\nWhen a crew worker's context fills up (>80%), they should:\n1. Write handoff mail to themselves\n2. Signal session end\n3. System auto-spawns successor session\n4. Successor reads handoff, finds attached work, auto-continues\n\nThis completes the autonomous overnight work pattern from gt-9g82.\n\nDepends on:\n- Detecting context fullness (Claude Code API?)\n- Session spawning mechanism (tmux/daemon)\n- Handoff protocol already implemented", "status": "closed", "priority": 2, "issue_type": "feature", "created_at": "2025-12-23T00:18:28Z", "updated_at": "2026-02-27T02:54:55Z", "closed_at": "2026-02-27T02:54:55Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-qwin", "title": "Refinery and witness rigs should redirect .beads to mayor rig", "description": "The refinery's rig clone and witness rig clones should have their .beads directories redirect to the mayor's rig beads (like polecats do).\n\nCurrent state:\n- Polecats have .beads symlinked/redirected to mayor rig beads\n- Refinery and witness have their own .beads (or none)\n\nDesired state:\n- refinery/rig/.beads -> mayor/rig/.beads (or equivalent redirect)\n- witness/rig/.beads -> mayor/rig/.beads (or equivalent redirect)\n\nThis ensures all rig agents share the same issue tracking state.", "status": "closed", "priority": 2, "issue_type": "task", "created_at": "2025-12-22T22:27:38Z", "updated_at": "2026-02-27T02:54:55Z", "closed_at": "2026-02-27T02:54:55Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-7921", "title": "Add await-work and plugin-run steps to mol-refinery-patrol", "description": "## Context\n\nThe mol-refinery-patrol needs two additional steps:\n\n### 1. await-work (Decision Point)\n\nNot just 'wait for signal' but a crossroads:\n- Check for pending signals (mail, nudge, human)\n- Check plugin gates (any plugins need to run?)\n- Check maintenance schedule (daily/weekly due?)\n- Evaluate context and decide next action\n\nPosition: Between burn-or-loop and inbox-check (the loop point)\n\n### 2. plugin-run (Like Deacon)\n\nRefinery needs plugin support for:\n- **Monitors**: Flag PRs touching sensitive code\n- **Gates**: Block merges under certain conditions\n- **Schedulers**: Reorder queue based on priority/urgency\n- **Maintenance**: Weekly cleanup, audits, stats\n- **Audits**: Log merge statistics, track patterns\n\nPosition: After queue-scan, before process-branch\n\n## Implementation\n\nUpdate RefineryPatrolMolecule() in builtin_molecules.go to include:\n- await-work step with decision tree\n- plugin-run step with gate types\n\n## Related\n- gt-7920 (original mol-refinery-patrol)\n- docs/deacon-plugins.md (existing plugin model)", "status": "closed", "priority": 2, "issue_type": "task", "created_at": "2025-12-22T21:24:11Z", "updated_at": "2026-02-27T02:54:55Z", "closed_at": "2026-02-27T02:54:55Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-f165", "title": "Pinned bead naming convention for all roles", "description": "Establish consistent naming convention for pinned beads across all roles.\n\n## Problem\n\nEvery role needs a pinned bead for molecule attachment, handoff state, and identity.\nWe need a consistent naming convention so gt tools can find the pinned bead for any role.\n\n## Proposed Convention\n\n  {role}.pinned                    - Singleton roles (deacon, mayor)\n  {rig}-{role}.pinned              - Per-rig roles (witness, refinery)\n  {rig}-{name}.pinned              - Named agents (polecats, crew)\n\nExamples:\n- deacon.pinned\n- mayor.pinned\n- gastown-witness.pinned\n- gastown-refinery.pinned\n- gastown-furiosa.pinned (polecat)\n- gastown-max.pinned (crew)\n\n## Storage Location\n\n| Role | Pinned Bead Location |\n|------|---------------------|\n| Mayor | ~/gt/.beads/ (town level) |\n| Deacon | ~/gt/.beads/ (town level) |\n| Witness | {rig}/.beads/ (rig level) |\n| Refinery | {rig}/.beads/ (rig level) |\n| Polecat | {rig}/polecats/{name}/.beads/ |\n| Crew | {rig}/crew/{name}/.beads/ |\n\n## Why This Matters\n\n1. Name recycling: Polecats reuse names so their pinned beads persist\n2. Molecule attachment: gt mol bond needs to find the pinned bead\n3. gt prime: Can show you are working on X from pinned bead\n4. Crash recovery: Resume from pinned beads attached molecule\n\n## Tasks\n\n- Document naming convention in architecture.md\n- Update gt prime to find pinned bead by convention\n- Update gt mol bond to use conventional name\n- Create pinned beads on role startup if missing\n- Add gt pinned command to show/manage pinned beads\n\n## Related\n\n- gt-rana.1: Attachment field on pinned beads (closed)\n- gt-id36.2: Deacon marching orders (pinned bead)", "status": "closed", "priority": 2, "issue_type": "task", "created_at": "2025-12-22T11:04:17Z", "updated_at": "2026-02-27T02:54:55Z", "closed_at": "2026-02-27T02:54:55Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-q6lg", "title": "mol-crew-session: Startup/shutdown protocols for crew workers", "description": "Crew workers (like joe, max) don't have patrol molecules keeping them fresh. When gt gets rebuilt, they have stale binaries that cause hangs and bugs.\n\n## Problem\n\n- Crew binaries get stale when gt is rebuilt elsewhere\n- No automatic pull/rebase/rebuild on session start\n- No standardized shutdown protocol (sync, push, handoff)\n\n## Solution: mol-crew-session\n\nA molecule template for crew sessions:\n\n### Startup Phase\n1. `git pull --rebase` - get latest code\n2. `bd sync` - sync beads\n3. `go build -o gt ./cmd/gt` - rebuild gt (if in gastown)\n4. `gt prime` - load context\n\n### Work Phase  \n- Open-ended human interaction\n- No molecule steps - just work until done\n\n### Shutdown Phase\n1. `git status` - check for uncommitted changes\n2. `bd sync` - sync beads\n3. `git push` - push code\n4. Handoff if incomplete work\n\n## Implementation\n\n1. Define mol-crew-session in builtin_molecules.go\n2. Update crew CLAUDE.md to reference the protocol\n3. Optionally: gt prime auto-runs startup steps\n\n## Dependencies\n\n- Should implement after deacon/witness/polecat patrols are stable\n- Consider: gt-3x0z.10 (Witness patrol molecules)\n\n## Related\n\n- gt-3x0z.9: Deacon wisp patrol (done)\n- fix-gt script: Current workaround for binary freshness", "status": "closed", "priority": 2, "issue_type": "task", "created_at": "2025-12-22T10:48:26Z", "updated_at": "2026-02-27T02:54:55Z", "closed_at": "2026-02-27T02:54:55Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-0a90", "title": "Add gt hook command (wrapper for bd hook)", "description": "Add a thin wrapper command `gt hook` that calls `bd hook` to inspect what's pinned to an agent's hook.\n\n## Usage\n\n```bash\ngt hook                    # Show what's on current agent's hook\ngt hook --agent deacon     # Show Deacon's hook\ngt hook --agent gastown/furiosa  # Show polecat's hook\n```\n\n## Implementation\n\nThin wrapper in gt that:\n1. Determines current agent identity\n2. Calls `bd hook [--agent <name>]`\n3. Formats output for gt context\n\n## Why gt wrapper?\n\n- Consistent with gt ecosystem (gt mail, gt status, etc.)\n- Can add gt-specific context (session status, etc.)\n- Easier discovery for gt users\n\n## Related\n\n- bd hook command (implemented by Dave)\n- Chemistry UX design: gastown/mayor/rig/docs/chemistry-design-changes.md", "status": "closed", "priority": 2, "issue_type": "task", "created_at": "2025-12-22T10:37:02Z", "updated_at": "2026-02-27T02:54:55Z", "closed_at": "2026-02-27T02:54:55Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-1y0e", "title": "🤝 HANDOFF: Investigate beads-sync divergence (221 files)", "description": "## Context\n\ngt doctor now detects orphaned code on beads-sync branch. Running it shows:\n\n  beads-sync-orphans: 221 file(s) on beads-sync not in main\n\nThis is in the gastown repo (checking from crew/max).\n\n## Background\n\n- Earlier today we recovered orphaned mail migration code lost in merge 96c773f\n- Recently simplified architecture: all workers use mayor/rig/.beads (redirects)\n- This simplification may have caused beads-sync branch to diverge unexpectedly\n\n## Investigation Steps\n\n1. From crew/max run: git diff main..beads-sync --stat\n2. Check if beads-sync should even exist anymore (was for multi-clone sync)\n3. If obsolete with redirect architecture, consider deleting it\n4. If it has legitimate changes, cherry-pick or merge to main\n\n## Key Question\n\nWith all workers using mayor/rig/.beads via redirects, is beads-sync still needed?\n\n## Commands\n\ngit log main..beads-sync --oneline | head -20\ngit diff main..beads-sync -- *.go | head -100", "status": "closed", "priority": 2, "issue_type": "task", "created_at": "2025-12-21T06:38:49Z", "updated_at": "2026-02-27T02:54:45Z", "closed_at": "2026-02-27T02:54:45Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-x9m7", "title": "Molecule converge: iterate until AI says done", "description": "Work isn't 'done' until AI is confident it's done. Fixes the 85% problem.\n\n**From VC**: internal/iterative/converge.go - 3-7 iterations with AI convergence detection. ~600 lines.\nTarget: 20%+ more issues discovered. Observed: ~25% average improvement.\n\n**Gas Town implementation**: Molecule converge config:\n```yaml\nconverge:\n  strategy: ai\n  min_iterations: 3\n  max_iterations: 7\n  confidence: 0.85\n```\n\nPolecat iterates, AI checks convergence. Stop when AI is confident or max reached.\n\n**Value**: Raw agents get to ~85% and stop. Iteration catches the remaining 15%.\n\n**VC metrics**: Convergence rate >70%, mean 4-5 iterations for complex work.", "status": "closed", "priority": 2, "issue_type": "task", "created_at": "2025-12-21T04:30:19Z", "updated_at": "2026-02-27T02:54:44Z", "closed_at": "2026-02-27T02:54:44Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-h262", "title": "bd ready --blockers: prioritize issues that block other work", "description": "bd ready should prioritize issues that are blocking other work.\n\n**From VC**: Blocker-first prioritization in GetReadyWork(). ~100 lines.\nAlgorithm: baseline-failure first, then discovered:blocker, then by priority.\n\n**Gas Town implementation**: CLI flag or default behavior:\n```bash\nbd ready --blockers-first  # Or make this default\n```\n\nChecks dependency graph. Issues with many dependents surface first.\n\n**Value**: Unblocks parallelism faster. Critical path gets cleared.\n\n**VC lesson**: Without blocker priority, work can starve on discovered issues.", "status": "closed", "priority": 2, "issue_type": "task", "created_at": "2025-12-21T04:30:18Z", "updated_at": "2026-02-27T02:54:44Z", "closed_at": "2026-02-27T02:54:44Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-6m3e", "title": "bd create --dedup: semantic deduplication before issue creation", "description": "Before creating issue, check for semantic duplicates using AI similarity.\n\n**From VC**: internal/deduplication/ - AI-powered batch comparison. ~300 lines.\nVC had issue pollution problem: 438 issues with ~350+ spam because no early dedup.\n\n**Gas Town implementation**: CLI flag on bd create:\n```bash\nbd create --dedup --title=\"Fix auth bug\" --description=\"...\"\n```\n\nChecks recent issues (7-day window) with AI similarity. If confidence >0.85, warns or blocks.\n\n**Value**: Prevents pollution from parallel workers discovering same issues.\n\n**VC lesson**: 115 issues filed in single day (Nov 2) because supervisor over-discovered without dedup. Rate limiting + dedup are essential.", "status": "closed", "priority": 2, "issue_type": "task", "created_at": "2025-12-21T04:30:17Z", "updated_at": "2026-02-27T02:54:44Z", "closed_at": "2026-02-27T02:54:44Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-pv93", "title": "Post-work discovery: AI analysis finds follow-on issues", "description": "AI analyzes completed work to discover: bugs, punted work, follow-on tasks.\n\n**From VC**: Supervisor.AnalyzeResult() with iterative refinement. ~300 lines.\n\n**Gas Town implementation**: Post-work hook in molecule:\n```yaml\npost_work:\n  discover:\n    - bugs\n    - punted_items\n    - follow_on_work\n  file_as: beads\n```\n\nPolecat output gets analyzed by AI, discovered work becomes beads issues.\n\n**Value**: Nothing gets forgotten. VC found ~25% more issues with refinement.\n\n**Key**: Use semantic deduplication (gt-xxx) to avoid pollution.", "status": "closed", "priority": 2, "issue_type": "task", "created_at": "2025-12-21T04:30:15Z", "updated_at": "2026-02-27T02:54:44Z", "closed_at": "2026-02-27T02:54:44Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependencies": [{"issue_id": "gt-pv93", "depends_on_id": "gt-6m3e", "type": "related", "created_at": "2025-12-21T04:30:35Z", "created_by": "mayor", "metadata": "{}"}], "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-5y5p", "title": "Preflight molecule: verify baseline health before work", "description": "Before assigning work, verify baseline (main branch) is healthy.\n\n**From VC**: Self-healing state machine (HEALTHY → SELF_HEALING → ESCALATED). ~200 lines.\n\n**Gas Town implementation**: Preflight molecule or refinery feature:\n```yaml\npreflight:\n  gates: [test, lint, build]\n  on_failure: create-fix-issue\n```\n\nRun at session start. If baseline broken, file a P0 fix issue and work on that first.\n\n**Value**: Self-healing baseline. Agents don't start from broken state.\n\n**VC lesson**: Prevents cascading failures. Agent shouldn't start work on broken code.", "status": "closed", "priority": 2, "issue_type": "task", "created_at": "2025-12-21T04:30:14Z", "updated_at": "2026-02-27T02:54:44Z", "closed_at": "2026-02-27T02:54:44Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-mh5s", "title": "Refinery gates: test/lint/build before merge", "description": "Before merging polecat work to main, run configurable quality gates.\n\n**From VC**: internal/gates/ - parallel execution with timeout, any failure = overall failure.\n\n**Gas Town implementation**: Refinery config with gate commands:\n```yaml\ngates:\n  test:\n    cmd: go test ./...\n    timeout: 5m\n  lint:\n    cmd: golangci-lint run\n    timeout: 2m\n  build:\n    cmd: go build ./...\n    timeout: 3m\nparallel: true\n```\n\nIf gates fail, don't merge. Polecat can iterate and retry.\n\n**Value**: Prevents broken code from reaching main. VC had 90.9% gate pass rate.\n\n**VC complexity**: ~200 lines Go\n**Gas Town complexity**: ~10 lines YAML", "status": "closed", "priority": 2, "issue_type": "task", "created_at": "2025-12-21T04:30:12Z", "updated_at": "2026-02-27T02:54:44Z", "closed_at": "2026-02-27T02:54:44Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-976", "title": "Add crew lifecycle support to Deacon", "description": "Currently crew sessions (like gastown/crew/max, beads/crew/dave) are marked as 'human-managed' and excluded from automated lifecycle.\n\n## Current State\n- `getManager(RoleCrew)` returns `\"human\"` (handoff.go:273)\n- `gt handoff` for crew just prints a message, no lifecycle request sent\n- Crew cannot request automated refresh from Deacon\n\n## Desired State\nCrew members should be able to request lifecycle actions from Deacon:\n- `gt handoff --cycle` sends request to Deacon, which kills/restarts the crew session\n- Useful when: context full, running molecules that need fresh session, automation\n\n## Implementation\n1. Change `getManager(RoleCrew)` to return `\"deacon/\"` (or new crew manager)\n2. Teach Deacon to recognize crew session naming pattern\n3. Add crew to Deacon's respawn loop handling\n4. Test with `gt nudge` for reliable message delivery\n\n## Use Case\nRunning a molecule (e.g., version-bump) and discovering mid-workflow that a fresh session is needed. Agent should be able to request refresh automatically rather than requiring human intervention.\n\n## Related\n- gt nudge: reliable message delivery to Claude sessions\n- bd mol bond: molecule instantiation (coming in beads)", "status": "closed", "priority": 2, "issue_type": "feature", "created_at": "2025-12-21T01:19:47Z", "updated_at": "2026-02-27T02:54:44Z", "closed_at": "2026-02-27T02:54:44Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-9m9g", "title": "Refinery startup: Use Claude agent instead of foreground mode", "description": "WIP found in stash: Refactor refinery startup to spawn Claude as the refinery agent rather than using gt refinery start --foreground.\n\nChanges needed:\n- Use refineryDir (refinery/rig) as working directory\n- Start Claude with --dangerously-skip-permissions  \n- Wait for shell ready, then Claude ready\n- Send gt prime, then refinery startup prompt\n- Remove foreground mode complexity\n\nRelated: gt-n7z7 (refinery --foreground race condition bug)", "status": "closed", "priority": 2, "issue_type": "task", "created_at": "2025-12-20T21:35:04Z", "updated_at": "2026-02-27T02:54:44Z", "closed_at": "2026-02-27T02:54:44Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-wusk", "title": "Layered context onboarding pattern", "description": "Pattern from handoff discussion:\n\n## Pattern: Layered Context Onboarding\n\nTown CLAUDE.md (user/org) -> Rig CLAUDE.md (project) -> Role priming\n\n## Ultra-compressed HOP for workers (no reveal)\n\n- Permanent record: All work tracked. Outcomes matter.\n- Quality gates: Molecule steps exist for a reason.\n- Attribution: Completions build your track record.\n- Handoff clean: Leave state any worker can continue.\n\n## Recommendation\n\nCreate Town @AGENTS.md for shared worker context that all workers see.\nThis provides common behavioral guidance without revealing full HOP context.", "status": "closed", "priority": 2, "issue_type": "task", "created_at": "2025-12-20T08:55:12Z", "updated_at": "2026-02-27T02:54:43Z", "closed_at": "2026-02-27T02:54:43Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-pyqv", "title": "Work on ga-ct2: Add MR workflow to polecat completion. Wh...", "description": "Work on ga-ct2: Add MR workflow to polecat completion. When polecat completes work, auto-create MR to integration branch. When done, submit MR (not PR) to integration branch for Refinery.", "status": "closed", "priority": 2, "issue_type": "task", "created_at": "2025-12-20T06:58:35Z", "updated_at": "2026-02-27T02:54:43Z", "closed_at": "2026-02-27T02:54:43Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-qqtk", "title": "Speed up test suite", "description": "Tests are running slow during MQ processing. Investigate and optimize:\n- Profile test execution time\n- Look for slow tests (network, file I/O, sleeps)\n- Consider parallel test execution\n- Cache expensive setup where possible", "status": "closed", "priority": 2, "issue_type": "task", "created_at": "2025-12-20T01:44:15Z", "updated_at": "2026-02-27T02:54:43Z", "closed_at": "2026-02-27T02:54:43Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-xqdk", "title": "Add molecule to update local go binary on push to main", "description": "When pushing to main branch, automatically rebuild and install the gt binary on the local machine so changes are immediately available.", "status": "closed", "priority": 2, "issue_type": "task", "created_at": "2025-12-19T23:37:41Z", "updated_at": "2026-02-27T02:54:43Z", "closed_at": "2026-02-27T02:54:43Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-8r7", "title": "Enhance Mayor CLAUDE.md with GGT milestone tracking", "description": "Update ~/ai/CLAUDE.md (Mayor startup context) with:\n\n1. GGT Self-Hosting Milestone section\n   - Track progress toward gt replacing town\n   - Key blockers: gt-h5n (merge queue), gt-974 (daemon)\n   - What \"self-hosting\" means (GGT working on itself)\n\n2. Recent Architecture Decisions\n   - Engineer = role, Refinery = place\n   - Merge queue in Beads (not branch discovery)\n   - Session restart protocol\n\n3. Transition Plan\n   - Current: use town commands (PGT)\n   - Target: use gt commands (GGT)\n   - Switch criteria: gt-b1g closed\n\nKeep it concise - Mayor context should be quick to scan.", "status": "closed", "priority": 2, "issue_type": "task", "created_at": "2025-12-17T07:12:07Z", "updated_at": "2026-02-27T02:54:43Z", "closed_at": "2026-02-27T02:54:43Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-0ol", "title": "Update prompts.md: Engineer role and templates", "description": "Update docs/prompts.md with Engineer role:\n\n1. Role Prompts table: Change Refinery to Engineer\n2. Add Engineer-specific prompts:\n   - Session restart request template\n   - Subtask filing template\n   - Handoff mail template\n3. Update refinery.md template name to engineer.md\n4. Ensure consistency with architecture.md", "status": "closed", "priority": 2, "issue_type": "task", "created_at": "2025-12-17T07:12:05Z", "updated_at": "2026-02-27T02:54:42Z", "closed_at": "2026-02-27T02:54:42Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-8wf", "title": "Polecat prompting: gt mq submit on completion", "description": "Update Polecat CLAUDE.md prompting to:\n\n1. On task completion, run: gt mq submit --issue <id>\n2. This creates a merge-request bead in the queue\n3. Engineer will process it\n\nThe Polecat self-reports completion to the merge queue.", "status": "closed", "priority": 2, "issue_type": "task", "created_at": "2025-12-17T07:02:40Z", "updated_at": "2026-02-27T02:54:42Z", "closed_at": "2026-02-27T02:54:42Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-30o", "title": "Error handling improvements: retry logic and recovery hints", "description": "Improve error handling across GGT codebase.\n\n## Issues Found\n\n### 1. Silent Failures in Refinery\nmanager.go ProcessMR():\n- git pull errors ignored\n- Continues processing even on partial failures\n\n### 2. Missing Beads CLI\nMany operations silently continue if `bd` not found:\n```go\n// Current\ntasks, err := m.loadTasksFromBeads(epicID)\nif err != nil {\n    // Non-fatal - swarm can start without tasks\n}\n\n// Better\nif err != nil {\n    return nil, fmt.Errorf(\"beads required: %w\", err)\n}\n```\n\n### 3. No Retry Logic\nNetwork/lock errors should retry:\n```go\nfunc withRetry(attempts int, delay time.Duration, fn func() error) error {\n    for i := 0; i < attempts; i++ {\n        if err := fn(); err == nil {\n            return nil\n        }\n        time.Sleep(delay)\n    }\n    return fmt.Errorf(\"failed after %d attempts\", attempts)\n}\n```\n\n### 4. Recovery Hints\nError messages should include fix suggestions:\n```go\n// Current\nreturn fmt.Errorf(\"polecat not found\")\n\n// Better\nreturn fmt.Errorf(\"polecat '%s' not found. Use 'gt polecat list' to see available polecats\", name)\n```\n\n## Domain Error Types\n```go\ntype SessionError struct {\n    Op      string\n    Polecat string\n    Err     error\n}\n\nfunc (e *SessionError) Error() string {\n    return fmt.Sprintf(\"session %s for %s: %v\", e.Op, e.Polecat, e.Err)\n}\n```\n\n## Files to Review\n- internal/refinery/manager.go\n- internal/swarm/manager.go\n- internal/session/manager.go\n- All cmd/*.go files\n\n## Acceptance Criteria\n- [ ] No silent error swallowing\n- [ ] Retry logic for transient failures\n- [ ] Helpful error messages with hints\n- [ ] Consistent error types per domain", "status": "closed", "priority": 2, "issue_type": "task", "created_at": "2025-12-16T22:48:48Z", "updated_at": "2026-02-27T02:54:42Z", "closed_at": "2026-02-27T02:54:42Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-a9y", "title": "File locking for concurrent access", "description": "Add file locking for concurrent access safety.\n\n## At-Risk Files\n- .gastown/swarms.json (or per-swarm state.json)\n- .gastown/refinery.json\n- polecats/<name>/state.json\n- inbox.jsonl files\n\n## Go File Locking\nUse syscall.Flock for advisory locking:\n```go\ntype FileLock struct {\n    file *os.File\n}\n\nfunc AcquireLock(path string, timeout time.Duration) (*FileLock, error) {\n    f, err := os.OpenFile(path+\".lock\", os.O_CREATE|os.O_RDWR, 0644)\n    if err != nil {\n        return nil, err\n    }\n    // Use syscall.Flock with timeout\n}\n\nfunc (l *FileLock) Release() error\n```\n\n## Integration Pattern\n```go\nfunc (m *Manager) saveState(ref *Refinery) error {\n    lock, err := AcquireLock(m.stateFile(), 5*time.Second)\n    if err != nil {\n        return fmt.Errorf(\"could not acquire lock: %w\", err)\n    }\n    defer lock.Release()\n    \n    // Read-modify-write cycle\n}\n```\n\n## New Package\ninternal/filelock/\n├── lock.go     # FileLock, AcquireLock\n└── lock_test.go\n\n## Apply To\n- internal/refinery/manager.go: loadState/saveState\n- internal/cmd/swarm.go: SwarmStore\n- internal/mail/mailbox.go: Append, rewrite\n- internal/polecat/manager.go: state operations\n\n## Timeout Handling\nDefault 5 second timeout. Return error if lock not acquired.\n\n## Acceptance Criteria\n- [ ] Lock files created (.lock extension)\n- [ ] Timeout on lock contention\n- [ ] All state files protected\n- [ ] Locks released on error paths", "status": "closed", "priority": 2, "issue_type": "task", "created_at": "2025-12-16T22:48:16Z", "updated_at": "2026-02-27T02:54:42Z", "closed_at": "2026-02-27T02:54:42Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-c92", "title": "CLI: all command for batch polecat operations", "description": "Batch operations across multiple polecats.\n\n## Commands\n\n### gt all start\n```\ngt all start [--awake-only] [<specs>...]\n```\nStart sessions for multiple polecats.\n- --awake-only: Only start awake polecats\n- specs: Polecat names, rig/polecat patterns\n\n### gt all stop\n```\ngt all stop [<specs>...] [--force]\n```\nStop sessions for multiple polecats.\n\n### gt all status\n```\ngt all status [<specs>...] [--json]\n```\nShow status of multiple polecats.\n\n### gt all attach\n```\ngt all attach [<specs>...]\n```\nAttach to multiple sessions in tmux panes/windows.\n\n### gt all run\n```\ngt all run <command> [<specs>...]\n```\nRun command in multiple polecat sessions.\n\n## Spec Patterns\n- `Toast`: Specific polecat (in default/current rig)\n- `gastown/Toast`: Specific rig/polecat\n- `gastown/*`: All polecats in rig\n- `*`: All polecats everywhere\n\n## Implementation\n```go\nfunc expandSpecs(specs []string, awakeOnly bool) ([]*polecat.Polecat, error) {\n    // Expand patterns to list of polecats\n}\n\nfunc runForAll(polecats []*polecat.Polecat, action func(*polecat.Polecat) error) error {\n    // Run action for each, collect errors\n}\n```\n\n## New File\ninternal/cmd/all.go\n\n## PGT Reference\ngastown-py/src/gastown/cli/all_cmd.py\n\n## Acceptance Criteria\n- [ ] Pattern expansion works\n- [ ] Parallel execution where safe\n- [ ] Aggregate error reporting\n- [ ] --awake-only filter works", "status": "closed", "priority": 2, "issue_type": "task", "created_at": "2025-12-16T22:48:12Z", "updated_at": "2026-02-27T02:54:32Z", "closed_at": "2026-02-27T02:54:32Z", "close_reason": "Stale early design issues — features shipped or superseded (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-7o7", "title": "Session pre-shutdown checks", "description": "Session stop should verify clean state before killing, like PGT.\n\n## Pre-Shutdown Checks\n\n### 1. Git Working Tree Clean\n```go\nfunc checkGitClean(clonePath string) error {\n    // git status --porcelain\n    // Fail if any output\n}\n```\n\n### 2. All Commits Pushed\n```go\nfunc checkCommitsPushed(clonePath string) error {\n    // git log origin/HEAD..HEAD\n    // Fail if any unpushed commits\n}\n```\n\n### 3. Assigned Issues Handled\n```go\nfunc checkIssuesHandled(polecat *Polecat) error {\n    // If polecat.Issue != \"\", check if closed or reassigned\n}\n```\n\n### 4. Beads Synced\n```go\nfunc checkBeadsSynced(clonePath string) error {\n    // bd sync --status in clone directory\n}\n```\n\n## Behavior on Failure\n1. First attempt: Nudge worker to fix\n2. Retry up to 3 times with delay\n3. After retries: Escalate to Witness/Mayor\n\n## Integration\nModify internal/session/manager.go Stop():\n```go\nfunc (m *Manager) Stop(polecat string, force bool) error {\n    if !force {\n        if err := m.runPreShutdownChecks(polecat); err != nil {\n            return fmt.Errorf(\"pre-shutdown checks failed: %w\", err)\n        }\n    }\n    // existing stop logic\n}\n```\n\n## Flags\n- --force: Skip checks\n- --grace-period N: Time to wait for fixes\n\n## Dependencies\n- Ties into gt-69l (hook system) - can be hook-based\n- Ties into gt-f8v (Witness pre-kill verification)\n\n## Acceptance Criteria\n- [ ] Stop fails if uncommitted changes (without --force)\n- [ ] Stop fails if unpushed commits\n- [ ] Clear error messages with fix instructions\n- [ ] --force bypasses all checks", "status": "closed", "priority": 2, "issue_type": "task", "created_at": "2025-12-16T22:47:56Z", "updated_at": "2026-02-27T02:54:42Z", "closed_at": "2026-02-27T02:54:42Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-qao", "title": "CLI: mayor commands (start, attach, stop, status)", "description": "Mayor management CLI commands.\n\n## Commands\n\n### gt mayor start\n```\ngt mayor start [--continue] [--agent AGENT]\n```\n- --continue: Resume from previous session (check for handoff mail)\n- --agent: claude (default) or other agent type\n\n### gt mayor attach\n```\ngt mayor attach\n```\nAttach to running Mayor session.\n\n### gt mayor stop\n```\ngt mayor stop [--grace-period N]\n```\nStop Mayor session with optional grace period.\n\n### gt mayor status\n```\ngt mayor status [--json]\n```\nShow Mayor running status.\n\n## Session Management\nSession name: `gt-mayor`\nWorking directory: `<town>/mayor/rig/` or `<town>/mayor/`\n\n## Implementation\nSimilar to session commands but for special Mayor context.\n\n```go\nfunc getMayorPath(townRoot string) string {\n    return filepath.Join(townRoot, \"mayor\")\n}\n\nfunc getMayorSessionName() string {\n    return \"gt-mayor\"\n}\n```\n\n## New File\ninternal/cmd/mayor.go\n\n## PGT Reference\ngastown-py/src/gastown/cli/mayor_cmd.py\n\n## Acceptance Criteria\n- [ ] gt mayor start launches Mayor session\n- [ ] gt mayor attach works\n- [ ] gt mayor stop with grace period\n- [ ] gt mayor status shows running state", "status": "closed", "priority": 2, "issue_type": "task", "created_at": "2025-12-16T22:47:55Z", "updated_at": "2026-02-27T02:54:32Z", "closed_at": "2026-02-27T02:54:32Z", "close_reason": "Stale early design issues — features shipped or superseded (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-9j9", "title": "CLI: worker status reporting commands", "description": "Worker status reporting CLI for polecats to report progress.\n\n## Commands\n\n### gt worker started\n```\ngt worker started <issue-id> [-m MESSAGE]\n```\nReports work started on issue.\n\n### gt worker progress\n```\ngt worker progress <issue-id> <0-100> [-m MESSAGE]\n```\nReports percentage complete.\n\n### gt worker blocked\n```\ngt worker blocked <issue-id> <reason> [-m MESSAGE]\n```\nReports blocked status with reason.\n\n### gt worker completed\n```\ngt worker completed <issue-id> [-m MESSAGE]\n```\nReports task completion.\n\n### gt worker failed\n```\ngt worker failed <issue-id> <reason> [-m MESSAGE]\n```\nReports task failure.\n\n## Implementation\nEach command sends mail to refinery with structured content:\n```go\ntype WorkerStatusReport struct {\n    IssueID    string\n    Status     string  // started|progress|blocked|completed|failed\n    Progress   int     // 0-100 for progress\n    Reason     string  // for blocked/failed\n    Message    string  // optional detail\n    ReportedAt time.Time\n}\n```\n\n## Message Format\nSubject: \"[STATUS] <issue-id>: <status>\"\nBody: JSON-encoded WorkerStatusReport\n\n## Default Recipient\n```go\n// Determine from context\nfunc getDefaultRecipient() string {\n    rig := os.Getenv(\"GT_RIG\")\n    if rig != \"\" {\n        return rig + \"/refinery\"\n    }\n    return \"refinery/\"\n}\n```\n\n## New File\ninternal/cmd/worker.go\n\n## PGT Reference\ngastown-py/src/gastown/cli/worker_cmd.py\n\n## Acceptance Criteria\n- [ ] All 5 commands implemented\n- [ ] Status sent as mail to refinery\n- [ ] Structured JSON body for parsing\n- [ ] Works from polecat session context", "status": "closed", "priority": 2, "issue_type": "task", "created_at": "2025-12-16T22:47:53Z", "updated_at": "2026-02-27T02:54:32Z", "closed_at": "2026-02-27T02:54:32Z", "close_reason": "Stale early design issues — features shipped or superseded (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-1ky", "title": "CLI: workspace commands (init, add, list)", "description": "GGT needs workspace management commands beyond install.\n\n## Commands (beyond gt-f9x.3 install)\n\n### gt workspace list\nList all rigs in current workspace.\n```\ngt workspace list [--json]\n```\nEssentially `gt rig list` but framed as workspace view.\n\n### gt workspace add\nAdd existing rig to workspace (alternative to gt rig add).\n```\ngt workspace add <git-url> [--name NAME]\n```\n\n### gt onboard\nInteractive first-time setup wizard.\n```\ngt onboard\n```\n- Prompts for workspace location\n- Creates structure via gt install\n- Offers to add first rig\n\n## Note\nMay be redundant with gt-f9x.3 (install) and gt-u1j.16 (rig commands).\nConsider if this is needed or should be closed as covered by those.\n\n## PGT Reference\ngastown-py/src/gastown/cli/workspace_cmd.py", "status": "closed", "priority": 2, "issue_type": "task", "created_at": "2025-12-16T22:47:38Z", "updated_at": "2026-02-27T02:54:31Z", "closed_at": "2026-02-27T02:54:31Z", "close_reason": "Stale early design issues — features shipped or superseded (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-3yj", "title": "Agent monitoring and status inference", "description": "Agent monitoring with status inference from activity, like PGT.\n\n## Agent Status Enum\n```go\ntype AgentStatus string\nconst (\n    StatusAvailable AgentStatus = \"available\"\n    StatusWorking   AgentStatus = \"working\"\n    StatusThinking  AgentStatus = \"thinking\"\n    StatusBlocked   AgentStatus = \"blocked\"\n    StatusWaiting   AgentStatus = \"waiting\"\n    StatusReviewing AgentStatus = \"reviewing\"\n    StatusIdle      AgentStatus = \"idle\"\n    StatusPaused    AgentStatus = \"paused\"\n    StatusError     AgentStatus = \"error\"\n    StatusOffline   AgentStatus = \"offline\"\n)\n```\n\n## Status Sources (priority order)\n```go\ntype StatusSource string\nconst (\n    SourceBossOverride StatusSource = \"boss\"      // Witness/Mayor sets\n    SourceSelfReported StatusSource = \"self\"      // Agent reports own status\n    SourceInferred     StatusSource = \"inferred\"  // Detected from activity\n)\n```\n\n## Activity Detection\n\n### Pattern Registry\n```go\nvar activityPatterns = []struct {\n    Pattern string\n    Status  AgentStatus\n}{\n    {\"Thinking...\", StatusThinking},\n    {\"BLOCKED:\", StatusBlocked},\n    {\"Error:\", StatusError},\n    // etc\n}\n```\n\n### Idle Detection\nNo pane output for N seconds → StatusIdle\n\n### Resource Monitoring (optional)\nCPU/memory via os.Process\n\n## New Package\ninternal/monitoring/\n├── types.go      # AgentStatus, StatusReport\n├── detector.go   # PatternRegistry, detect from output\n├── tracker.go    # Per-agent status tracking\n└── idle.go       # Idle timeout detection\n\n## Integration\n- Session capture output → monitoring detector\n- Status shown in gt status, gt session list\n\n## PGT Reference\ngastown-py/src/gastown/monitoring/\n\n## Acceptance Criteria\n- [ ] Status enum with 10 states\n- [ ] Pattern-based detection from pane output\n- [ ] Idle detection with configurable timeout\n- [ ] Status visible in CLI output", "status": "closed", "priority": 2, "issue_type": "task", "created_at": "2025-12-16T22:47:36Z", "updated_at": "2026-02-27T02:54:42Z", "closed_at": "2026-02-27T02:54:42Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-69l", "title": "Hook system for event extensibility", "description": "GGT needs hook system for extensibility like PGT.\n\n## Event Types\n```go\ntype Event string\nconst (\n    EventPreSessionStart  Event = \"pre-session-start\"\n    EventPostSessionStart Event = \"post-session-start\"\n    EventPreShutdown      Event = \"pre-shutdown\"\n    EventPostShutdown     Event = \"post-shutdown\"\n    EventOnPaneOutput     Event = \"on-pane-output\"\n    EventSessionIdle      Event = \"session-idle\"\n    EventMailReceived     Event = \"mail-received\"\n    EventWorkAssigned     Event = \"work-assigned\"\n)\n```\n\n## Hook Configuration\nFile: .claude/hooks.json or .gastown/hooks.json\n```json\n{\n  \"hooks\": {\n    \"pre-shutdown\": [\n      {\"type\": \"command\", \"cmd\": \"./scripts/pre-shutdown.sh\"}\n    ],\n    \"on-pane-output\": [\n      {\"type\": \"command\", \"cmd\": \"./scripts/activity-monitor.sh\"}\n    ]\n  }\n}\n```\n\n## Hook Types\n1. **Command**: Execute external script\n2. **Built-in**: Internal Go functions (pre-shutdown checks)\n\n## Hook Interface\n```go\ntype HookRunner struct {\n    config *HookConfig\n}\n\ntype HookResult struct {\n    Success bool\n    Message string\n    Block   bool  // For pre-* hooks: should operation be blocked?\n}\n\nfunc (r *HookRunner) Fire(event Event, ctx *HookContext) []HookResult\n```\n\n## CLI Commands\n```\ngt hooks list [<event>]    # List registered hooks\ngt hooks fire <event>      # Manually fire for testing\ngt hooks test [--all]      # Validate hook config\n```\n\n## Integration Points\n- internal/session/manager.go: Fire pre/post session hooks\n- internal/mail/router.go: Fire mail-received hook\n\n## New Package\ninternal/hooks/\n├── types.go    # Event, HookConfig, HookResult\n├── runner.go   # HookRunner, Fire()\n└── builtin.go  # Built-in hooks (pre-shutdown checks)\n\n## PGT Reference\ngastown-py/src/gastown/hooks/\n\n## Acceptance Criteria\n- [ ] Hook config loading from JSON\n- [ ] Command hooks execute subprocess\n- [ ] Pre-shutdown hook integration with session stop\n- [ ] CLI for listing and testing hooks", "status": "closed", "priority": 2, "issue_type": "task", "created_at": "2025-12-16T22:47:35Z", "updated_at": "2026-02-27T02:54:42Z", "closed_at": "2026-02-27T02:54:42Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-e9k", "title": "Workspace cleanup: preflight and postflight", "description": "Workspace preflight and postflight commands for clean state management.\n\n## Preflight\n```\ngt preflight [--rig <rig>] [--dry-run]\n```\n\nRun before starting batch work:\n1. Clean stale mail in inboxes\n2. Check for stuck workers (warn)\n3. Check rig health (polecats, refinery)\n4. Verify git state is clean\n5. Run bd sync to ensure beads current\n\n## Postflight\n```\ngt postflight [--rig <rig>] [--archive-mail] [--dry-run]\n```\n\nRun after batch work completes:\n1. Archive old mail with --archive-mail\n2. Clean up stale integration branches\n3. Sync beads\n4. Report on rig state\n\n## Implementation\n```go\nfunc Preflight(rigName string, dryRun bool) (*PreflightReport, error)\nfunc Postflight(rigName string, opts PostflightOptions) (*PostflightReport, error)\n```\n\n## Report Structures\n```go\ntype PreflightReport struct {\n    MailCleaned    int\n    RigHealthy     bool\n    StuckWorkers   []string\n    Warnings       []string\n}\n\ntype PostflightReport struct {\n    MailArchived   int\n    BranchesCleaned int\n    Warnings       []string\n}\n```\n\n## Note\n\nThese are workspace maintenance commands, not tied to \"swarm\" lifecycle. Run them anytime to keep the rig clean.\n\n## Acceptance Criteria\n- [ ] Preflight cleans stale state\n- [ ] Postflight archives old mail\n- [ ] Both have --dry-run mode\n- [ ] Clear reports of actions taken", "status": "closed", "priority": 2, "issue_type": "task", "created_at": "2025-12-16T22:47:16Z", "updated_at": "2026-02-27T02:54:41Z", "closed_at": "2026-02-27T02:54:41Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-z4g", "title": "Plugin: Plan-to-Epic converter", "description": "## Purpose\n\nHelp users create beads epics from various planning inputs.\n\n## Inputs\n- Markdown task lists\n- GitHub issues\n- Linear/Jira exports\n- Free-form descriptions\n- Existing beads epics\n\n## Output\n- Beads epic with properly structured children\n- Dependencies set for wave ordering\n- Priorities assigned\n- Ready for `gt spawn --epic <id>`\n\n## Implementation Options\n\n### Option A: CLI Tool\n```bash\ngt plan import --from github --repo owner/repo --label batch-candidate\ngt plan import --from markdown tasks.md\ngt plan structure <epic-id>  # analyze and add dependencies\n```\n\n### Option B: Plugin Agent\nA plugin at `<rig>/plugins/plan-oracle/` that:\n- Receives planning requests via mail\n- Analyzes scope and requirements\n- Creates structured beads epic\n- Sets dependencies based on analysis\n\n### Option C: Interactive Mode\n```bash\ngt plan create\n# Walks through questions, creates epic interactively\n```\n\n## Axiom\n\nAs stated: 'The Planning phase should end in the creation of a workable Beads plan.'\n\nThis plugin bridges the gap between human planning and machine-executable work.\n\n## Priority\n\nP2 - Nice to have for MVP. Manual epic creation works for now.\n\n## Note\n\nNo \"swarm IDs\" - output is just a beads epic with children. Workers process it independently.", "status": "closed", "priority": 2, "issue_type": "task", "created_at": "2025-12-16T10:10:21Z", "updated_at": "2026-02-27T02:54:32Z", "closed_at": "2026-02-27T02:54:32Z", "close_reason": "Stale early design issues — features shipped or superseded (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-l9g", "title": "Beads epic templates for batch work patterns", "description": "Optional: Define templates for common batch work patterns.\n\n## Concept\n\nA template encodes a workflow pattern that can be instantiated as beads:\n\n```yaml\n# templates/batch-basic.yaml\nname: basic-batch\ndescription: Simple batch work pattern\nphases:\n  - name: startup\n    issues:\n      - title: \"Verify workers ready\"\n  - name: working\n    # Actual work issues added separately\n  - name: cleanup\n    issues:\n      - title: \"Merge all branches\"\n      - title: \"Clean up workers\"\n      - title: \"Report to Mayor\"\n```\n\n## Usage\n\n```bash\ngt spawn --template basic-batch --epic gt-u1j --workers 3\n```\n\nCreates beads epic with template phases + actual work from gt-u1j children.\n\n## Decision Point\n\nTemplates are OPTIONAL. The core design (beads as state, multi-wave orchestration) works without templates. Templates are sugar for common patterns.\n\nConsider deferring to P3 or dropping entirely if beads epics with dependencies suffice.\n\n## Note\n\nNo \"swarm IDs\" involved - templates just pre-populate epic/issue structure.", "status": "closed", "priority": 2, "issue_type": "task", "created_at": "2025-12-16T09:51:24Z", "updated_at": "2026-02-27T02:54:41Z", "closed_at": "2026-02-27T02:54:41Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-td6p", "title": "Witness help-assessment escalation heuristics hardcoded as string matching", "status": "open", "priority": 3, "issue_type": "task", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-28T02:54:50Z", "created_by": "gastown/polecats/capable", "updated_at": "2026-02-28T02:54:50Z", "labels": ["formula"], "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-pimh", "title": "Patrol molecule names hardcoded as strings in 21 Go files", "status": "open", "priority": 3, "issue_type": "task", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-28T02:54:47Z", "created_by": "gastown/polecats/capable", "updated_at": "2026-02-28T02:54:47Z", "labels": ["formula"], "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-8l3w", "title": "30+ operational thresholds hardcoded as Go constants instead of formula/config", "status": "open", "priority": 3, "issue_type": "task", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-28T02:54:42Z", "created_by": "gastown/polecats/capable", "updated_at": "2026-02-28T02:54:42Z", "labels": ["formula"], "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-qzjb", "title": "Stale comment in down.go Phase 6: claims nuke only kills town socket, but town socket IS default", "notes": "-", "status": "open", "priority": 3, "issue_type": "task", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-28T02:50:04Z", "created_by": "gastown/polecats/dementus", "updated_at": "2026-02-28T02:50:28Z", "labels": ["cleanup"], "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-p7uq.3", "title": "refactor(refinery): remove exec.Command from engineer.go after formula migration", "description": "After test_command and GateConfig execution are moved to formula steps, remove the runGate(), runGates(), and runTests() methods from engineer.go. Keep MergeQueueConfig parsing and GateConfig structs (transport). The Engineer should become a pure state machine that the Refinery agent drives, not a command executor.", "status": "closed", "priority": 3, "issue_type": "task", "assignee": "gastown/polecats/slit", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-28T00:39:56Z", "created_by": "gastown/crew/max", "updated_at": "2026-02-28T01:58:11Z", "closed_at": "2026-02-28T01:56:35Z", "close_reason": "Closed", "labels": ["refactor", "refinery", "zfc"], "dependencies": [{"issue_id": "gt-p7uq.3", "depends_on_id": "gt-p7uq", "type": "parent-child", "created_at": "2026-02-27T16:39:56Z", "created_by": "gastown/crew/max", "metadata": "{}"}, {"issue_id": "gt-p7uq.3", "depends_on_id": "gt-wisp-bmfqr", "type": "blocks", "created_at": "2026-02-27T17:50:19Z", "created_by": "mayor", "metadata": "{}"}], "dependency_count": 1, "dependent_count": 0, "comment_count": 0, "parent": "gt-p7uq"}
{"id": "gt-yyod", "title": "Plugin: dolt-archive execution", "description": "Successfully archived 1 orphaned database (gt), reclaimed 574.5 KB. Dolt server health verified - query latency 1.192s (slightly elevated but within acceptable range).", "status": "closed", "priority": 3, "issue_type": "task", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-28T00:05:21Z", "created_by": "dog", "updated_at": "2026-02-28T00:47:50Z", "closed_at": "2026-02-28T00:47:50Z", "close_reason": "Plugin execution log, not a real issue", "labels": ["plugin:dolt-archive", "result:success", "rig:gastown", "type:plugin-run"], "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-ho9r", "title": "Tmux tests fail: AutoRespawnHook and NewSessionWithCommand", "description": "Pre-existing: 3 tmux tests fail - TestAutoRespawnHook_RespawnWorks, TestAutoRespawnHook_SkipsAlreadyAlive (no such window), TestNewSessionWithCommand_Success (empty output). Package: internal/tmux.", "status": "closed", "priority": 3, "issue_type": "bug", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-26T23:32:18Z", "created_by": "gastown/refinery", "updated_at": "2026-02-27T07:28:41Z", "closed_at": "2026-02-27T07:28:41Z", "close_reason": "Fixed in earlier commit: tmux tests use correct socket now", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-zfxt", "title": "TestDetectBeadsPrefixFromConfig_NoFallbackToJSONL fails on main", "description": "Pre-existing: manager_test.go:934 - detectBeadsPrefixFromConfig() returns 'gt' instead of empty. Package: internal/rig.", "status": "closed", "priority": 3, "issue_type": "bug", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-26T23:32:15Z", "created_by": "gastown/refinery", "updated_at": "2026-02-27T07:28:41Z", "closed_at": "2026-02-27T07:28:41Z", "close_reason": "Fixed: JSONL fallback removed from detectBeadsPrefixFromConfig", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-istm", "title": "TestAllEmbeddedFormulas_VariableValidation fails: mol-idea-to-plan missing review_id var", "description": "Pre-existing: variable_validation_test.go:228 - mol-idea-to-plan.formula.toml has undefined template variable review_id. Package: internal/formula.", "status": "closed", "priority": 3, "issue_type": "bug", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-26T23:32:13Z", "created_by": "gastown/refinery", "updated_at": "2026-02-27T07:19:20Z", "closed_at": "2026-02-27T07:19:20Z", "close_reason": "Fixed: root cause was missing review_id in mol-idea-to-plan.formula.toml, resolved in gt-x0z9", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-f7i2", "title": "TestFindTestSockets_Integration fails on main", "description": "Pre-existing: agents_test.go:578 - findTestSockets() returns empty list. Package: internal/cmd.", "status": "closed", "priority": 3, "issue_type": "bug", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-26T23:32:11Z", "created_by": "gastown/refinery", "updated_at": "2026-02-27T07:28:41Z", "closed_at": "2026-02-27T07:28:41Z", "close_reason": "Fixed: findTestSockets now uses /tmp instead of os.TempDir()", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-0k2ad", "title": "gt dolt status latency metric measures subprocess startup, not query time", "description": "MeasureQueryLatency() in doltserver.go spawns a dolt sql subprocess to run SELECT active_branch(). The 900ms+ it reports is mostly process startup time. Actual query latency via Go MySQL driver is ~15ms. Should use a direct TCP connection to measure real query latency.", "status": "closed", "priority": 3, "issue_type": "bug", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-26T17:28:35Z", "created_by": "mayor", "updated_at": "2026-02-27T07:33:22Z", "closed_at": "2026-02-27T07:33:22Z", "close_reason": "Fixed: MeasureQueryLatency now uses Go MySQL driver for direct TCP query instead of spawning dolt subprocess", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-08hf1", "title": "Evaluate Hosted Dolt (Tim offering free instance)", "description": "Tim Sehn offered a free Hosted Dolt instance for development. Benefits: they can hop on the box to diagnose issues, no local server management, eliminates test pollution risk. Evaluate whether Gas Town can run against a remote Dolt server. We already have IsRemote() support in doltserver.go. Main concerns: latency (network vs local), offline capability, data sovereignty.", "status": "open", "priority": 3, "issue_type": "task", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-26T05:16:49Z", "created_by": "mayor", "updated_at": "2026-02-26T05:16:49Z", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-p761k", "title": "Enable loglevel=debug on Dolt server for query diagnostics", "description": "Tim Sehn says loglevel=debug writes all queries and responses to the log. When diagnosing hangs, the last 1000 lines can reveal the problem. Add --loglevel debug to gt dolt start args (or make it configurable). Consider adding a gt dolt debug-log command that tails the log with query highlighting.", "status": "closed", "priority": 3, "issue_type": "task", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-26T05:16:37Z", "created_by": "mayor", "updated_at": "2026-02-27T07:34:39Z", "closed_at": "2026-02-27T07:34:39Z", "close_reason": "Done: default LogLevel set to debug in DefaultConfig. Override with GT_DOLT_LOGLEVEL.", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-2abltl.3", "title": "YAGNI: Redirect chain following conflicts with chain avoidance", "description": "## Location\ninternal/beads/beads_redirect.go:65-102, 223-235\n\n## Issue\nTwo conflicting approaches to redirect chains:\n\n1. resolveBeadsDirWithDepth (lines 71-102) recursively follows redirect chains up to depth 3\n\n2. SetupRedirect (lines 223-235) explicitly avoids creating chains by redirecting directly to the final destination:\n```go\n// Check if rig-level beads has a redirect...\n// Redirect worktree directly to the final destination.\nredirectPath = upPath + rigRedirectTarget\n```\n\n## Why it's YAGNI\nIf we're deliberately avoiding chains during setup, the recursive chain-following code (31 lines) may never execute. Pick one approach:\n- Either support chains (and don't flatten during setup)\n- Or flatten chains (and remove resolveBeadsDirWithDepth)\n\n## Action\nVerify if redirect chains can actually occur. If not, simplify to single-hop resolution.", "status": "closed", "priority": 3, "issue_type": "task", "owner": "steve.yegge@gmail.com", "created_at": "2026-01-22T03:20:59Z", "created_by": "gastown/crew/jack", "updated_at": "2026-02-27T02:56:18Z", "closed_at": "2026-02-27T02:56:18Z", "close_reason": "Stale code review cleanup epic — aspirational refactoring (Clown Show #21)", "dependencies": [{"issue_id": "gt-2abltl.3", "depends_on_id": "gt-2abltl", "type": "parent-child", "created_at": "2026-01-22T03:20:59Z", "created_by": "mayor", "metadata": "{}"}], "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-2abltl"}
{"id": "gt-2abltl.1", "title": "YAGNI: Reescalation feature may be unused", "description": "## Location\ninternal/beads/beads_escalation.go:26-29, 352-441\n\n## Issue\nThe reescalation feature adds ~90 lines of code:\n- 4 fields in EscalationFields: OriginalSeverity, ReescalationCount, LastReescalatedAt, LastReescalatedBy\n- ReescalationResult struct (6 fields including Skipped/SkipReason)\n- ReescalateEscalation() method with maxReescalations parameter\n- bumpSeverity() helper\n\n## Why it's YAGNI\nThis is speculative functionality for auto-bumping escalation severity over time. Before implementing:\n1. Is reescalation actually being called anywhere?\n2. If not used, remove the fields and ~90 lines of code\n3. If needed later, add it then\n\n## Action\nSearch for ReescalateEscalation usage. If unused, delete.", "status": "closed", "priority": 3, "issue_type": "task", "owner": "steve.yegge@gmail.com", "created_at": "2026-01-22T03:20:56Z", "created_by": "gastown/crew/jack", "updated_at": "2026-02-27T02:56:18Z", "closed_at": "2026-02-27T02:56:18Z", "close_reason": "Stale code review cleanup epic — aspirational refactoring (Clown Show #21)", "dependencies": [{"issue_id": "gt-2abltl.1", "depends_on_id": "gt-2abltl", "type": "parent-child", "created_at": "2026-01-22T03:20:56Z", "created_by": "mayor", "metadata": "{}"}], "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-2abltl"}
{"id": "gt-its8p9.8", "title": "Update ValidateMolecule to support new format in molecule.go", "description": "Lines 452-509: ValidateMolecule only validates old markdown format. Returns 'no steps defined' for new format molecules with child issues. Either update to support both formats or deprecate for new format.", "status": "closed", "priority": 3, "issue_type": "task", "owner": "steve.yegge@gmail.com", "created_at": "2026-01-22T03:20:30Z", "created_by": "gastown/crew/dennis", "updated_at": "2026-02-27T02:56:16Z", "closed_at": "2026-02-27T02:56:16Z", "close_reason": "Stale code review cleanup epic — aspirational refactoring (Clown Show #21)", "dependencies": [{"issue_id": "gt-its8p9.8", "depends_on_id": "gt-its8p9", "type": "parent-child", "created_at": "2026-01-22T03:20:30Z", "created_by": "mayor", "metadata": "{}"}], "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-its8p9"}
{"id": "gt-its8p9.5", "title": "Simplify GetAssignedIssue two-pass query in beads.go", "description": "Lines 316-343: GetAssignedIssue first queries 'open' status, then separately queries 'in_progress'. Could potentially be a single query if bd CLI supports OR on status, or combine in the wrapper layer.", "status": "closed", "priority": 3, "issue_type": "task", "owner": "steve.yegge@gmail.com", "created_at": "2026-01-22T03:20:26Z", "created_by": "gastown/crew/dennis", "updated_at": "2026-02-27T02:56:15Z", "closed_at": "2026-02-27T02:56:15Z", "close_reason": "Stale code review cleanup epic — aspirational refactoring (Clown Show #21)", "dependencies": [{"issue_id": "gt-its8p9.5", "depends_on_id": "gt-its8p9", "type": "parent-child", "created_at": "2026-01-22T03:20:26Z", "created_by": "mayor", "metadata": "{}"}], "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-its8p9"}
{"id": "gt-its8p9.4", "title": "Remove deprecated Type field from ListOptions in beads.go", "description": "Lines 73, 272-277: ListOptions.Type is deprecated in favor of Label but code still converts it. Legacy pattern that should be removed once all callers migrate to Label.", "status": "closed", "priority": 3, "issue_type": "task", "owner": "steve.yegge@gmail.com", "created_at": "2026-01-22T03:20:25Z", "created_by": "gastown/crew/dennis", "updated_at": "2026-02-27T02:56:15Z", "closed_at": "2026-02-27T02:56:15Z", "close_reason": "Stale code review cleanup epic — aspirational refactoring (Clown Show #21)", "dependencies": [{"issue_id": "gt-its8p9.4", "depends_on_id": "gt-its8p9", "type": "parent-child", "created_at": "2026-01-22T03:20:25Z", "created_by": "mayor", "metadata": "{}"}], "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-its8p9"}
{"id": "gt-its8p9.3", "title": "Extract embedded PRIME.md content to file in beads.go", "description": "Lines 695-739: Large multi-line primeContent constant embedded in code. Consider using go:embed to load from actual file for easier maintenance and editing.", "status": "closed", "priority": 3, "issue_type": "task", "owner": "steve.yegge@gmail.com", "created_at": "2026-01-22T03:20:24Z", "created_by": "gastown/crew/dennis", "updated_at": "2026-02-27T02:56:15Z", "closed_at": "2026-02-27T02:56:15Z", "close_reason": "Stale code review cleanup epic — aspirational refactoring (Clown Show #21)", "dependencies": [{"issue_id": "gt-its8p9.3", "depends_on_id": "gt-its8p9", "type": "parent-child", "created_at": "2026-01-22T03:20:24Z", "created_by": "mayor", "metadata": "{}"}], "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-its8p9"}
{"id": "gt-3ys14", "title": "Multi-agent session ID integration", "description": "## Context\n\ngt session-start handles Claude Code SessionStart hook but should support other agents.\n\n## Gaps\n\n1. **Hook Contract Abstraction**: Claude Code sends specific JSON; other agents may differ\n2. **Session ID in /resume**: Still not appearing in Claude Code's session picker  \n3. **Transcript Path**: Unused - could enable session correlation and crash recovery\n4. **Agent-Specific Config**: RuntimeConfig lacks hook configuration per agent type\n5. **Testing**: No way to test session-start without Claude Code running\n\n## Design Options\n\n- gt agent subcommand tree with per-agent adapters\n- Runtime detection via environment variables\n- Keep simple with documented extension points\n\n(Moved from hq-uik6x)", "status": "closed", "priority": 3, "issue_type": "feature", "created_at": "2026-01-21T01:39:29Z", "created_by": "mayor", "updated_at": "2026-02-27T02:56:08Z", "closed_at": "2026-02-27T02:56:08Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-u6tzw", "title": "Convoy timeout/SLA tracking", "description": "Optional deadline tracking for convoys.\n\n## Implementation\nAdd due_at field to convoy:\n\n    gt convoy create 'Sprint work' gt-abc --due=2026-01-15\n\n## Behavior\n- Overdue convoys surface in gt convoy stranded --overdue\n- Optional: escalation on overdue (integrate with escalation system)\n\n## Acceptance Criteria\n- --due flag on gt convoy create\n- gt convoy stranded --overdue lists overdue convoys\n- Overdue status visible in gt convoy status\n\n(Moved from hq-hh9i0)", "status": "closed", "priority": 3, "issue_type": "task", "created_at": "2026-01-21T01:39:25Z", "created_by": "mayor", "updated_at": "2026-02-27T02:56:08Z", "closed_at": "2026-02-27T02:56:08Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-1qyne", "title": "gt rig status shows polecats with dead tmux sessions", "description": "When a polecat's tmux session dies (or is killed externally), gt rig status still shows the polecat as existing. The status check should verify the tmux session exists and mark/remove orphaned polecats.\n\nRepro: furiosa showed as 'done' in rig status but had no tmux session. Had to manually nuke.\n\nFix: In polecat status detection, verify tmux session exists. If not, either auto-cleanup or show as 'orphaned'.\n\n(Moved from hq-nsse4)", "status": "closed", "priority": 3, "issue_type": "bug", "created_at": "2026-01-21T01:38:31Z", "created_by": "mayor", "updated_at": "2026-02-27T02:56:07Z", "closed_at": "2026-02-27T02:56:07Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-c5vvu", "title": "Add 'gt show' as pass-through to 'bd show'", "description": "For intuitive UX, add 'gt show <id>' that passes through to 'bd show'. Users naturally try 'gt show' when they want to view an issue.\n\n(Moved from hq-y12l0)", "status": "closed", "priority": 3, "issue_type": "task", "created_at": "2026-01-21T01:38:17Z", "created_by": "mayor", "updated_at": "2026-02-27T02:56:07Z", "closed_at": "2026-02-27T02:56:07Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "labels": ["gt"], "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-s4fcs", "title": "gt seance: support selecting sessions by row number or partial ID", "description": "## Problem\n\nWhen using `gt seance`, the table shows truncated session IDs like `bd390a00-eb…` but `--talk` requires the full UUID. This creates friction:\n\n1. Run `gt seance --role crew` - see truncated IDs\n2. Try `gt seance --talk bd390a00-eb` - fails: \"not a valid UUID\"\n3. Must pipe through `--json | jq` to extract full ID\n4. Then run again with full UUID\n\n## Proposed Solutions\n\n### Option A: Row number selection\n```bash\ngt seance --talk 1        # Talk to first row in list\ngt seance --role crew --talk 3  # Filter then pick row 3\n```\n\n### Option B: Partial ID matching\n```bash\ngt seance --talk bd390a00  # Auto-expand if unique prefix\n```\n\n### Option C: Interactive picker\n```bash\ngt seance --talk          # Opens fzf/selector with recent sessions\n```\n\n## Context\nDiscovered during handoff debugging - previous Emma's session was visible but required manual JSON extraction to talk to her.", "status": "closed", "priority": 3, "issue_type": "feature", "owner": "steve.yegge@gmail.com", "created_at": "2026-01-18T18:53:04Z", "created_by": "beads/crew/emma", "updated_at": "2026-02-27T02:56:06Z", "closed_at": "2026-02-27T02:56:06Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "labels": ["seance", "ux"], "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-cqspek", "title": "Patrol digest: use date filtering at query level", "description": "queryPatrolDigests() fetches ALL closed digests with the label, then filters by date in memory. For long-running systems with many digests, this is inefficient.\n\nShould use bd's date filtering if available, or at minimum filter by created_at range in the query.\n\nLocation: internal/cmd/patrol.go:168-232", "status": "closed", "priority": 3, "issue_type": "chore", "owner": "steve.yegge@gmail.com", "created_at": "2026-01-17T10:18:06Z", "created_by": "gastown/crew/jack", "updated_at": "2026-02-27T02:56:06Z", "closed_at": "2026-02-27T02:56:06Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-a5ufqa", "title": "Patrol digest: add --json output flag", "description": "The costs command has --json for scripting output, but patrol digest doesn't. Add --json flag for consistency and scripting support.\n\nShould output:\n```json\n{\n  \"digest_id\": \"gt-xxx\",\n  \"date\": \"2026-01-16\",\n  \"total_cycles\": 150,\n  \"by_role\": {\"deacon\": 50, \"witness\": 100},\n  \"deleted_count\": 150\n}\n```\n\nLocation: internal/cmd/patrol.go", "status": "closed", "priority": 3, "issue_type": "feature", "owner": "steve.yegge@gmail.com", "created_at": "2026-01-17T10:18:05Z", "created_by": "gastown/crew/jack", "updated_at": "2026-02-27T02:56:06Z", "closed_at": "2026-02-27T02:56:06Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-ze440h", "title": "Patrol digest: avoid duplicate query in delete", "description": "In patrol.go, deletePatrolDigests() calls queryPatrolDigests() again even though we already have the cycles from the main function. Should pass the already-queried cycles to avoid the duplicate query.\n\nLocation: internal/cmd/patrol.go:309-314", "status": "closed", "priority": 3, "issue_type": "chore", "owner": "steve.yegge@gmail.com", "created_at": "2026-01-17T10:17:50Z", "created_by": "gastown/crew/jack", "updated_at": "2026-02-27T02:56:06Z", "closed_at": "2026-02-27T02:56:06Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-430oy", "title": "Add PID tracking for spawned agents", "description": "Store spawned PIDs in session state files for explicit cleanup during shutdown.\n\nImplementation:\n1. After spawning, get PID via t.GetPanePID()\n2. Store in state file (e.g., witness/state.json, crew/<name>/state.json)\n3. During shutdown, read PIDs from state files\n4. Explicitly kill tracked PIDs before session kill\n\nThis is lowest priority - a defense-in-depth measure after fixes 1-3.", "status": "closed", "priority": 3, "issue_type": "task", "assignee": "gastown/polecats/capable", "created_at": "2026-01-13T01:59:47Z", "created_by": "gastown/crew/joe", "updated_at": "2026-02-27T02:56:04Z", "closed_at": "2026-02-27T02:56:04Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependencies": [{"issue_id": "gt-430oy", "depends_on_id": "gt-pbb5c", "type": "parent-child", "created_at": "2026-01-13T02:10:52Z", "created_by": "mayor", "metadata": "{}"}, {"issue_id": "gt-430oy", "depends_on_id": "gt-wd3ce", "type": "blocks", "created_at": "2026-01-13T01:59:47Z", "created_by": "mayor", "metadata": "{}"}], "dependency_count": 1, "dependent_count": 0, "comment_count": 0, "parent": "gt-pbb5c"}
{"id": "gt-2v3wl", "title": "plugin: Add --since flag to gt plugin history", "description": "gt plugin history has --limit but no way to filter by time. Add --since flag (e.g., --since 24h, --since 7d) to show only recent runs. The recording.go already supports the since parameter in GetRunsSince().", "status": "closed", "priority": 3, "issue_type": "task", "created_at": "2026-01-13T01:28:28Z", "created_by": "gastown/crew/george", "updated_at": "2026-02-27T02:56:04Z", "closed_at": "2026-02-27T02:56:04Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-s9no0", "title": "plugin: gt plugin history should verify plugin exists", "description": "gt plugin history queries for run beads by plugin name but doesn't first verify the plugin actually exists. If you typo the name, you get 'No execution history' rather than 'plugin not found'. Should check plugin existence first for better UX.", "status": "closed", "priority": 3, "issue_type": "task", "created_at": "2026-01-13T01:28:22Z", "created_by": "gastown/crew/george", "updated_at": "2026-02-27T02:56:04Z", "closed_at": "2026-02-27T02:56:04Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-oixof", "title": "plugin: Gate evaluation only supports cooldown type", "description": "gt plugin run only evaluates cooldown gates. Other gate types (cron, condition, event) are silently ignored, treating them as 'open'. Should either: (1) Log a warning for unsupported gate types, (2) Implement evaluation for other types, or (3) Document this limitation.", "status": "closed", "priority": 3, "issue_type": "task", "created_at": "2026-01-13T01:28:16Z", "created_by": "gastown/crew/george", "updated_at": "2026-02-27T02:55:41Z", "closed_at": "2026-02-27T02:55:41Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-sakt5", "title": "plugin: Scanner should not write to stderr directly", "description": "## Location\ninternal/plugin/scanner.go:46, 108\n\n## Issue\nThe Scanner writes warnings directly to stderr:\n```go\nfmt.Fprintf(os.Stderr, \"Warning: scanning plugins for rig %q: %v\\n\", rigName, err)\nfmt.Fprintf(os.Stderr, \"Warning: loading plugin %q: %v\\n\", entry.Name(), err)\n```\n\nLibrary code should not write directly to stderr. This makes testing difficult and prevents callers from controlling output.\n\n## Suggested Fix\nOptions:\n1. Return a structured result with warnings: `type ScanResult { Plugins []*Plugin; Warnings []string }`\n2. Accept a logger interface\n3. Return errors wrapped with context, let caller decide whether to continue\n\nOption 1 is cleanest for this use case.\n\n## Context\nFound during code review of plugin system implementation.", "status": "closed", "priority": 3, "issue_type": "task", "created_at": "2026-01-13T01:27:30Z", "created_by": "gastown/crew/george", "updated_at": "2026-02-27T02:55:41Z", "closed_at": "2026-02-27T02:55:41Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-wndrq", "title": "plugin: Remove unused PluginRun type from types.go", "description": "## Location\ninternal/plugin/types.go:157-165\n\n## Issue\nThe `PluginRun` struct is defined but never used. The recording.go uses `PluginRunRecord` and `PluginRunBead` instead.\n\n## Action\nRemove the dead code:\n```go\n// PluginRun represents a single execution of a plugin.\ntype PluginRun struct {\n    PluginName string    `json:\"plugin_name\"`\n    RigName    string    `json:\"rig_name,omitempty\"`\n    StartTime  time.Time `json:\"start_time\"`\n    EndTime    time.Time `json:\"end_time,omitempty\"`\n    Result     string    `json:\"result\"` // \"success\" or \"failure\"\n    Message    string    `json:\"message,omitempty\"`\n}\n```\n\n## Context\nFound during code review of plugin system implementation.", "status": "closed", "priority": 3, "issue_type": "task", "created_at": "2026-01-13T01:27:20Z", "created_by": "gastown/crew/george", "updated_at": "2026-02-27T02:55:41Z", "closed_at": "2026-02-27T02:55:41Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-rvj5w", "title": "gt plugin digest command", "description": "Squash old plugin-run beads to daily digest.\n\n## Parent Epic: gt-n08ix\n\n## Command\ngt plugin digest [--date YYYY-MM-DD] [--dry-run]\n\n## Behavior\n1. Find all ephemeral plugin-run beads for date\n2. Group by plugin name\n3. Create digest bead with summary (run count, success/failure, total time)\n4. Delete original ephemeral beads\n\n## ZFC Notes\nThis is TRANSPORT - data aggregation and cleanup.\n\n**What Go does (OK):**\n- Query beads by date and labels (data retrieval)\n- Aggregate counts and stats (data transformation)\n- Create digest bead (data write)\n- Delete source beads (cleanup)\n\nThis is purely mechanical data processing. No judgment calls about what's 'important' or whether digests 'should' be created.\n\n**Who triggers this?**\n- Deacon patrol (agent decides when to run digest)\n- Manual invocation (human/agent explicit decision)\n- NOT automatic cron in Go (that would be Go deciding)\n\n## Acceptance\n- Creates digest bead with summary\n- Removes individual run beads\n- --dry-run shows what would happen\n- Command is passive - only runs when invoked", "status": "closed", "priority": 3, "issue_type": "task", "created_at": "2026-01-12T10:50:37Z", "created_by": "mayor", "updated_at": "2026-02-27T02:55:40Z", "closed_at": "2026-02-27T02:55:40Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-n5ady", "title": "Additional gate types: cron, condition, event, manual", "description": "Implement additional gate types beyond cooldown.\n\n## Parent Epic: gt-n08ix\n\n## Gate Types\n\n### Cron Gate\n```toml\n[gate]\ntype = 'cron'\nschedule = '0 9 * * *'\n```\n\n### Condition Gate\n```toml\n[gate]\ntype = 'condition'\ncheck = 'gt stale --quiet'\n```\n\n### Event Gate\n```toml\n[gate]\ntype = 'event'\non = 'startup'\n```\n\n### Manual Gate\nNo gate section = only via gt plugin run --force\n\n## ZFC Notes\n\n**Cron gate**: Mechanical schedule matching. Could be Go helper or agent logic.\n- Helper OK: ParseCronSchedule(schedule, lastRun) → nextRun time\n- Decision in agent: 'Is now past nextRun?'\n\n**Condition gate**: CRITICAL - must use exit codes only.\n- Go runs command, returns exit code\n- Agent interprets: exit 0 = open, else = closed\n- NO output parsing in Go\n\n```go\n// OK - returns exit code only\nfunc RunConditionCheck(cmd string) (exitCode int, err error)\n\n// WRONG - Go interpreting output\nfunc EvaluateCondition(cmd string) (shouldRun bool, err error)\n```\n\n**Event gate**: Deacon knows what events occurred this cycle.\n- 'startup' = Deacon just started (first patrol after boot)\n- 'heartbeat' = regular patrol tick\n- Agent tracks event state, evaluates gate\n\n**Manual gate**: No evaluation needed. Only explicit --force triggers.\n\n## Acceptance\n- Cron: helper parses schedule, agent decides\n- Condition: commands evaluated by exit code ONLY\n- Event: agent tracks and evaluates\n- Manual: never auto-triggers\n- All decisions remain in agents", "status": "closed", "priority": 3, "issue_type": "task", "created_at": "2026-01-12T10:50:36Z", "created_by": "mayor", "updated_at": "2026-02-27T02:55:40Z", "closed_at": "2026-02-27T02:55:40Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-osr73", "title": "Shell integration: add fish shell support", "description": "The set-and-forget shell integration (PR #255) only supports bash and zsh. Fish shell users need manual setup. Add fish support with config.fish integration.", "status": "closed", "priority": 3, "issue_type": "feature", "created_at": "2026-01-09T04:32:57Z", "created_by": "gastown/crew/max", "updated_at": "2026-02-27T02:55:39Z", "closed_at": "2026-02-27T02:55:39Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-uxwyw", "title": "Update mail/daemon/TUI for label-based types", "description": "## Overview\n\nSupporting subsystems that query beads by type.\n\n## Files to update\n\n### Mail\n- internal/mail/router.go - agent bead queries\n\n### Daemon\n- internal/daemon/lifecycle.go - agent lifecycle\n\n### TUI/Web\n- internal/web/fetcher.go - convoy queries\n- internal/tui/convoy/model.go - convoy queries\n- internal/tui/feed/convoy.go - convoy listing", "status": "closed", "priority": 3, "issue_type": "task", "created_at": "2026-01-07T04:51:45Z", "created_by": "beads/crew/dave", "updated_at": "2026-02-27T02:55:38Z", "closed_at": "2026-02-27T02:55:38Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependencies": [{"issue_id": "gt-uxwyw", "depends_on_id": "gt-x0i2m", "type": "blocks", "created_at": "2026-01-07T04:52:13Z", "created_by": "mayor", "metadata": "{}"}], "dependency_count": 1, "dependent_count": 1, "comment_count": 0}
{"id": "gt-pisa8", "title": "Add --dry-run flag to polecat cleanup command", "description": "The polecat cleanup command should support --dry-run to preview what would be cleaned without actually doing it. Currently trying 'gt polecat cleanup --dry-run' returns 'unknown flag: --dry-run'.", "status": "closed", "priority": 3, "issue_type": "feature", "created_at": "2026-01-05T08:46:02Z", "created_by": "mayor", "updated_at": "2026-02-27T02:55:37Z", "closed_at": "2026-02-27T02:55:37Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "labels": ["desire-path"], "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-p7f14", "title": "Code Smell: Mailbox struct conflates two modes (legacy vs beads)", "description": "The Mailbox struct (mailbox.go:30-36) conflates two distinct operating modes:\n\n```go\ntype Mailbox struct {\n    identity string // beads identity (e.g., \"gastown/polecats/Toast\")\n    workDir  string // directory to run bd commands in\n    beadsDir string // explicit .beads directory path (set via BEADS_DIR)\n    path     string // for legacy JSONL mode (crew workers)\n    legacy   bool   // true = use JSONL files, false = use beads\n}\n```\n\nMost methods have `if m.legacy { ... } else { ... }` branches:\n- List(): listLegacy() vs listBeads()\n- Get(): getLegacy() vs getBeads()\n- MarkRead(): markReadLegacy() vs markReadBeads()\n- etc.\n\n**Recommendation**: Extract an interface and have two implementations:\n\n```go\ntype MailStore interface {\n    List() ([]*Message, error)\n    Get(id string) (*Message, error)\n    MarkRead(id string) error\n    MarkUnread(id string) error\n    Delete(id string) error\n    // ...\n}\n\ntype LegacyMailbox struct { ... }  // JSONL implementation\ntype BeadsMailbox struct { ... }   // beads implementation\n```\n\nThis would make the code cleaner and easier to test.\n\nFiles:\n- internal/mail/mailbox.go:30-36, 89-94, 251-267, 269-275, etc.\n\nSeverity: low", "status": "closed", "priority": 3, "issue_type": "task", "created_at": "2026-01-05T07:48:28Z", "created_by": "gastown/polecats/citadel", "updated_at": "2026-02-27T02:55:37Z", "closed_at": "2026-02-27T02:55:37Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-3qf4e", "title": "Dead Code: Unused parameter in mail/router.go resolveBeadsDir", "description": "The resolveBeadsDir function (router.go:187) has an unused parameter:\n\n```go\nfunc (r *Router) resolveBeadsDir(_ string) string { // address unused: all mail uses town-level beads\n```\n\nThe comment explains that the address parameter was previously used for routing but is now unused since all mail uses town-level beads.\n\nOptions:\n1. Remove the parameter entirely\n2. If backward compatibility is needed, mark as deprecated\n\nFiles:\n- internal/mail/router.go:187\n\nSeverity: low", "status": "closed", "priority": 3, "issue_type": "task", "created_at": "2026-01-05T07:47:56Z", "created_by": "gastown/polecats/citadel", "updated_at": "2026-02-27T02:55:37Z", "closed_at": "2026-02-27T02:55:37Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-xxcwm", "title": "Magic Numbers: Timing constants in session/manager.go", "description": "The session/manager.go file has several magic numbers for timing:\n\n- Line 207: `time.Sleep(8 * time.Second)` - Claude startup wait\n- Line 224: `time.Sleep(2 * time.Second)` - Beacon processing wait\n- Line 259: `time.Sleep(100 * time.Millisecond)` - Graceful shutdown wait\n- Line 429-432: Debounce calculation `200 + (len(message)/1024)*100` with cap at 1500\n\nThese should be named constants for clarity:\n\n```go\nconst (\n    ClaudeStartupDelay     = 8 * time.Second\n    BeaconProcessingDelay  = 2 * time.Second  \n    GracefulShutdownDelay  = 100 * time.Millisecond\n    DebounceBaseDelay      = 200 * time.Millisecond\n    DebouncePerKB          = 100 * time.Millisecond\n    DebounceMaxDelay       = 1500 * time.Millisecond\n)\n```\n\nFiles:\n- internal/session/manager.go:207, 224, 259, 429-432\n\nSeverity: low", "status": "closed", "priority": 3, "issue_type": "task", "created_at": "2026-01-05T07:47:54Z", "created_by": "gastown/polecats/citadel", "updated_at": "2026-02-27T02:55:37Z", "closed_at": "2026-02-27T02:55:37Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-0cu3o", "title": "[Refactor] Consolidate duplicate clone-with-reference-fallback pattern", "description": "The pattern of 'try CloneWithReference, warn, fallback to Clone' appears in 3+ locations:\n\n1. rig/manager.go:274-285: CloneBare with reference\n2. rig/manager.go:314-326: Clone for mayor  \n3. crew/manager.go:74-85: Clone for crew\n\nShould extract to a helper like:\n  func (g *Git) CloneWithReferenceFallback(url, dest, ref string, bare bool) error\n\nThis would reduce duplication and ensure consistent error messaging.", "status": "closed", "priority": 3, "issue_type": "task", "created_at": "2026-01-05T07:47:52Z", "created_by": "gastown/polecats/fury", "updated_at": "2026-02-27T02:55:37Z", "closed_at": "2026-02-27T02:55:37Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-xhjss", "title": "[Git] Missing context.Context support for cancellation", "description": "The internal/git package lacks context.Context support throughout. Long-running operations like Clone, Fetch, and Push cannot be cancelled. All run() and public methods should accept context and use exec.CommandContext(). Affected files: internal/git/git.go (all methods).", "status": "closed", "priority": 3, "issue_type": "task", "created_at": "2026-01-05T07:47:17Z", "created_by": "gastown/polecats/fury", "updated_at": "2026-02-27T02:55:37Z", "closed_at": "2026-02-27T02:55:37Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-iicbq", "title": "Code Smell: Large Connection interface (17 methods)", "description": "The Connection interface in connection/connection.go has 17 methods, violating the Interface Segregation Principle.\n\nCurrent interface groups:\n- Identification: Name(), IsLocal()\n- File operations: ReadFile, WriteFile, MkdirAll, Remove, RemoveAll, Stat, Glob, Exists\n- Command execution: Exec, ExecDir, ExecEnv\n- Tmux operations: TmuxNewSession, TmuxKillSession, TmuxSendKeys, TmuxCapturePane, TmuxHasSession, TmuxListSessions\n\n**Recommendation**: Split into focused interfaces:\n```go\ntype Identifier interface {\n    Name() string\n    IsLocal() bool\n}\n\ntype FileSystem interface {\n    ReadFile(path string) ([]byte, error)\n    WriteFile(path string, data []byte, perm fs.FileMode) error\n    // ...\n}\n\ntype CommandRunner interface {\n    Exec(cmd string, args ...string) ([]byte, error)\n    ExecDir(dir, cmd string, args ...string) ([]byte, error)\n    ExecEnv(env map[string]string, cmd string, args ...string) ([]byte, error)\n}\n\ntype TmuxManager interface {\n    TmuxNewSession(name, dir string) error\n    // ...\n}\n\ntype Connection interface {\n    Identifier\n    FileSystem\n    CommandRunner\n    TmuxManager\n}\n```\n\nThis allows consumers to depend only on what they need.\n\nFiles:\n- internal/connection/connection.go:13-78\n\nSeverity: low", "status": "closed", "priority": 3, "issue_type": "task", "created_at": "2026-01-05T07:47:07Z", "created_by": "gastown/polecats/citadel", "updated_at": "2026-02-27T02:55:36Z", "closed_at": "2026-02-27T02:55:36Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-jdt2t", "title": "DRY: Duplicate payload formatting/parsing in protocol/messages.go", "description": "The protocol/messages.go file has duplicate patterns:\n\n**Formatting functions** (lines 38-48, 78-90, 121-132, 163-180):\nformatMergeReadyBody, formatMergedBody, formatMergeFailedBody, formatReworkRequestBody all follow identical pattern:\n```go\nvar sb strings.Builder\nsb.WriteString(fmt.Sprintf(\"Field: %s\\n\", p.Field))\n// repeat for each field\nreturn sb.String()\n```\n\n**Parsing functions** (lines 195-272):\nParseMergeReadyPayload, ParseMergedPayload, ParseMergeFailedPayload, ParseReworkRequestPayload all call parseField repeatedly.\n\nConsider using struct tags with reflection or code generation.\n\nFiles:\n- internal/protocol/messages.go:38-48, 78-90, 121-132, 163-180, 195-272\n\nSeverity: low", "status": "closed", "priority": 3, "issue_type": "task", "created_at": "2026-01-05T07:47:04Z", "created_by": "gastown/polecats/citadel", "updated_at": "2026-02-27T02:55:36Z", "closed_at": "2026-02-27T02:55:36Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-hpotx", "title": "DRY: Duplicate address normalization logic in mail/types.go", "description": "The addressToIdentity and identityToAddress functions (types.go:329-390) have duplicated logic for:\n- Handling overseer special case\n- Handling mayor/ and deacon/ trailing slashes\n- Normalizing crew/ and polecats/ paths\n\nThe same transformations are applied with only slight variations. Consider extracting common normalization logic.\n\nFiles:\n- internal/mail/types.go:329-390\n\nSeverity: low", "status": "closed", "priority": 3, "issue_type": "task", "created_at": "2026-01-05T07:46:39Z", "created_by": "gastown/polecats/citadel", "updated_at": "2026-02-27T02:55:36Z", "closed_at": "2026-02-27T02:55:36Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-g1ev3", "title": "Refactor: Break up refinery/manager.go Start() function", "description": "Start() (lines 107-215, ~110 lines) handles both foreground and background modes with significant branching.\n\nSuggested split:\n- startForeground() - the deprecated foreground path\n- startBackground() - tmux session creation and Claude agent launch\n- ensureClaudeSettings() - settings setup (already exists as separate function)\n- configureSession() - environment and theme setup", "status": "closed", "priority": 3, "issue_type": "task", "created_at": "2026-01-05T07:46:17Z", "created_by": "gastown/polecats/buzzard", "updated_at": "2026-02-27T02:55:36Z", "closed_at": "2026-02-27T02:55:36Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-9oca7", "title": "Refactor: Extract mail notification builder pattern", "description": "refinery/manager.go has three nearly identical notification functions:\n- notifyWorkerConflict() (lines 610-628)\n- notifyWorkerMerged() (lines 631-644)\n- notifyWorkerRejected() (lines 787-804)\n\nExtract a fluent builder:\n```go\ntype NotificationBuilder struct { ... }\n\nfunc (m *Manager) NotifyWorker(worker string) *NotificationBuilder\n\n// Usage:\nm.NotifyWorker(mr.Worker).\n    Subject(\"Merge conflict - rebase required\").\n    Priority(mail.PriorityHigh).\n    Body(fmt.Sprintf(...)).\n    Send()\n```", "status": "closed", "priority": 3, "issue_type": "task", "created_at": "2026-01-05T07:46:15Z", "created_by": "gastown/polecats/buzzard", "updated_at": "2026-02-27T02:55:36Z", "closed_at": "2026-02-27T02:55:36Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-bqcsf", "title": "Refactor: Break up long functions in polecat/manager.go", "description": "Several functions exceed 50 lines and have too many responsibilities:\n\n1. Add() (lines 195-276, ~80 lines)\n   - Extract: createWorktree(), createAgentBead(), setupBeadsRedirect()\n\n2. RepairWorktreeWithOptions() (lines 405-500, ~95 lines)\n   - Near-duplicate of Add() logic - DRY violation\n   - Extract common setup to shared helper\n\n3. RemoveWithOptions() (lines 291-360, ~70 lines)\n   - Extract: checkRemovalSafety(), cleanupWorktree()\n\n4. setupSharedBeads() (lines 729-782, ~55 lines)\n   - Fairly focused but could be cleaner", "status": "closed", "priority": 3, "issue_type": "task", "created_at": "2026-01-05T07:46:14Z", "created_by": "gastown/polecats/buzzard", "updated_at": "2026-02-27T02:55:36Z", "closed_at": "2026-02-27T02:55:36Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-onh0a", "title": "gt polecat list: deduce rig from cwd", "description": "When running `gt polecat list` from within a rig directory, it should deduce the rig name automatically instead of requiring it as an argument.\n\nExample:\n```\ncd ~/gt/beads\ngt polecat list   # Should work, deducing rig=beads\n```\n\nCurrently requires explicit rig name or --all flag.", "status": "closed", "priority": 3, "issue_type": "feature", "created_at": "2026-01-04T02:01:51Z", "created_by": "mayor", "updated_at": "2026-02-27T02:55:36Z", "closed_at": "2026-02-27T02:55:36Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-l9k26", "title": "Exclude deacon from tmux rig count in status displays", "description": "Deacon is a town-level patrol agent, not a project rig. It shows up in tmux session counts alongside actual rigs (gastown, beads, wyvern), which is confusing.\n\nFix: Status/tmux reporting should exclude deacon from rig counts. Deacon is infrastructure, not a workspace.\n\nAffected: Any status displays that count tmux sessions as rigs.", "status": "closed", "priority": 3, "issue_type": "task", "created_at": "2026-01-02T09:44:19Z", "created_by": "mayor", "updated_at": "2026-02-27T02:55:35Z", "closed_at": "2026-02-27T02:55:35Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-si8rq.8", "title": "Documentation: Ephemeral Polecat Merge Workflow", "description": "Document the new rebase-as-work architecture.\n\n## Documents to Update\n\n### docs/understanding-gas-town.md\n- Polecat lifecycle (truly ephemeral)\n- MR submission as exit point\n\n### docs/refinery-workflow.md (new or update)\n- Priority scoring\n- Mechanical rebase handling\n- Conflict-resolution task creation\n\n### PRIMING.md\n- Update polecat section\n- Add note about rebase-as-work pattern\n\n## Key Concepts to Document\n- 'Polecat done at MR submit'\n- 'Conflicts are new work'\n- 'Convoy age creates pressure'\n- 'Priority function is deterministic'", "status": "closed", "priority": 3, "issue_type": "task", "created_at": "2026-01-02T07:55:48Z", "created_by": "mayor", "updated_at": "2026-02-27T02:55:35Z", "closed_at": "2026-02-27T02:55:35Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependencies": [{"issue_id": "gt-si8rq.8", "depends_on_id": "gt-si8rq", "type": "parent-child", "created_at": "2026-01-02T07:55:48Z", "created_by": "mayor", "metadata": "{}"}], "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-si8rq"}
{"id": "gt-6ubje", "title": "gt convoy merge: Consolidate multiple convoys into one", "description": "When work gets slung individually (e.g., due to gt swarm being broken), each issue gets its own convoy via auto-convoy. Need ability to merge these into a single tracking unit.\n\n## Use Case\n\n```bash\n# Current state: 5 convoys for one logical swarm\ngt convoy list\n  1. hq-cv-6svfs: Work: gt mail reply\n  2. hq-cv-2zdme: Work: gt mail search\n  3. hq-cv-k3v6u: Work: gt mail archive/purge\n  4. hq-cv-pc2ww: Work: gt mail mark/delete\n  5. hq-cv-xdf66: Work: gt mail check\n\n# Desired: merge into one\ngt convoy merge hq-cv-xdf66 hq-cv-pc2ww hq-cv-k3v6u hq-cv-2zdme hq-cv-6svfs --title \"Mail CLI Implementation\"\n# Result: single convoy tracking all 5 issues\n```\n\n## Implementation\n\n- Take target convoy (first arg) or create new one\n- Move tracked issues from source convoys to target\n- Close/delete source convoys\n- Update subscribers\n\n## Alternative\n\nCould also support:\n```bash\ngt convoy add hq-cv-xdf66 gt-d46.2 gt-d46.3 gt-d46.4 gt-d46.5\n# Then manually close the orphaned convoys\n```\n\nBut merge is cleaner UX.", "status": "closed", "priority": 3, "issue_type": "feature", "created_at": "2026-01-02T07:20:02Z", "created_by": "gastown/crew/gus", "updated_at": "2026-02-27T02:55:35Z", "closed_at": "2026-02-27T02:55:35Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-cqvgt", "title": "Implement announce:name address type for bulletin-board messaging", "description": "Add support for announce:name addresses for read-only bulletin boards.\n\nSEMANTICS:\n- Messages to announce:name create ONE copy in shared location\n- All eligible readers can read (no claiming, no removal)\n- Messages retained up to retain_count, oldest pruned\n- No inbox pollution - readers check the announce channel explicitly\n\nUSE CASE:\nLow urgency broadcast that does not need ack, e.g. clean up your branches.\n\nIMPLEMENTATION:\n1. Add isAnnounceAddress() / parseAnnounceName() helpers\n2. Add sendToAnnounce() - creates message in announce location\n3. Add gt mail announces - list available announce channels\n4. Add gt mail read-announce <channel> - read messages from channel\n5. Add retention pruning on new message\n\nCONFIG (already in messaging.json schema):\nannounces.alerts.readers = [@town]\nannounces.alerts.retain_count = 100", "status": "closed", "priority": 3, "issue_type": "feature", "created_at": "2025-12-31T02:09:49Z", "created_by": "gastown/crew/max", "updated_at": "2026-02-27T02:55:35Z", "closed_at": "2026-02-27T02:55:35Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependencies": [{"issue_id": "gt-cqvgt", "depends_on_id": "gt-27bzi", "type": "blocks", "created_at": "2025-12-31T02:17:27Z", "created_by": "mayor", "metadata": "{}"}], "dependency_count": 1, "dependent_count": 0, "comment_count": 0}
{"id": "gt-c0y43", "title": "Add convoy_test.go tests", "description": "convoy.go (525 lines) has no test coverage", "status": "closed", "priority": 3, "issue_type": "task", "created_at": "2025-12-30T22:14:28Z", "created_by": "mayor", "updated_at": "2026-02-27T02:55:21Z", "closed_at": "2026-02-27T02:55:21Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-jzmsj.5", "title": "RPG platform design: gamification layer", "description": "Design the RPG UX metaphor - the flagship consumer experience for HOP.\nMakes real work feel like a game because the game IS real work.\n\n**Reference**: ~/gt/docs/hop/PLATFORM-OF-PLATFORMS.md (lines 188-214)\n\n**Deliverable**: Design document defining:\n\n1. **Core metaphor mappings**:\n   - Quests = Work units (beads/issues)\n   - Skills = Stats derived from work history\n   - Leveling = Reputation accumulation\n   - Guilds = Organizations\n   - Loot = Payment/rewards\n\n2. **Progression mechanics**:\n   - XP calculation from work completions\n   - Skill tree visualization\n   - Level thresholds and prestige ranks\n   - Achievement system\n\n3. **Social features**:\n   - Guild formation and management\n   - Leaderboards (opt-in, privacy-aware)\n   - Cooperative quests (swarming as raids)\n   - Mentorship system\n\n4. **Engagement hooks**:\n   - Daily/weekly quest boards\n   - Streak bonuses\n   - Rare quest discovery\n   - Boss battles (epic issues)\n\n5. **Why it works**:\n   - Progress feels real because it IS real\n   - Stats are accurate because they're derived from actual work\n   - Social proof from genuine collaboration\n\n**Acceptance criteria**:\n1. Design doc in ~/gt/docs/hop/RPG-PLATFORM.md\n2. Core metaphor mappings defined\n3. UI/UX wireframes or mockup descriptions\n4. Privacy model (what's public vs. private\nEOF\n)", "status": "closed", "priority": 3, "issue_type": "task", "created_at": "2025-12-30T20:56:13Z", "created_by": "gastown/crew/joe", "updated_at": "2026-02-27T02:55:21Z", "closed_at": "2026-02-27T02:55:21Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependencies": [{"issue_id": "gt-jzmsj.5", "depends_on_id": "gt-jzmsj", "type": "parent-child", "created_at": "2025-12-30T20:56:13Z", "created_by": "mayor", "metadata": "{}"}], "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-jzmsj"}
{"id": "gt-jzmsj.4", "title": "Design skill ontology for cross-platform matching", "description": "Design the universal skill vocabulary that maps across platforms. This enables\nmatching workers to work across platform boundaries.\n\n**Reference**: ~/gt/docs/hop/PLATFORM-OF-PLATFORMS.md (lines 331-357)\n\n**Deliverable**: Design document defining:\n\n1. **Skill representation**:\n   - SkillVector struct (skill ID, level 0-5, evidence count, attestation count)\n   - How levels are derived from work history\n   - How attestations compound across platforms\n\n2. **Ontology structure**:\n   - Hierarchical skill taxonomy (e.g., Programming > Go > Concurrency)\n   - Cross-platform skill equivalence mappings\n   - Confidence scores for derived skills\n\n3. **Extraction algorithm**:\n   - How to derive skills from work units (keywords, labels, validation)\n   - How to aggregate across platforms\n   - Decay model for stale skills\n\n4. **Example mappings**:\n   - GitHub: languages, frameworks from commits/PRs\n   - Enterprise: role competencies, certifications\n   - Gas Town: labels, successful completions\n\n**Acceptance criteria**:\n1. Design doc in ~/gt/docs/hop/SKILL-ONTOLOGY.md\n2. SkillVector and SkillOntology types sketched\n3. Algorithm pseudocode for skill extraction\n4. Example aggregation scenario", "status": "closed", "priority": 3, "issue_type": "task", "created_at": "2025-12-30T20:56:11Z", "created_by": "gastown/crew/joe", "updated_at": "2026-02-27T02:55:21Z", "closed_at": "2026-02-27T02:55:21Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependencies": [{"issue_id": "gt-jzmsj.4", "depends_on_id": "gt-jzmsj", "type": "parent-child", "created_at": "2025-12-30T20:56:11Z", "created_by": "mayor", "metadata": "{}"}], "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-jzmsj"}
{"id": "gt-6r18e.7", "title": "Beads schema: Add overseer field for team scenarios", "description": "For future team support: overseer field identifies human owner when multiple humans share a workspace. For now, email in git commits serves this purpose. Low priority until teams needed.", "status": "closed", "priority": 3, "issue_type": "task", "created_at": "2025-12-30T19:08:46Z", "created_by": "gastown/crew/joe", "updated_at": "2026-02-27T02:55:20Z", "closed_at": "2026-02-27T02:55:20Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependencies": [{"issue_id": "gt-6r18e.7", "depends_on_id": "gt-6r18e", "type": "parent-child", "created_at": "2025-12-30T19:08:46Z", "created_by": "mayor", "metadata": "{}"}], "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-6r18e"}
{"id": "gt-3eqof", "title": "Overseer inbox for strategic notifications", "description": "New address overseer/ for strategic notifications.\n\nReceives:\n- Convoy completions\n- Cross-rig dependency resolutions\n- Escalations from Deacon\n- Daily digests (optional)\n\nSeparate from operational mail - this is the executive dashboard.\n\nRelated: hq-7h8jx (Convoy System epic in town beads)", "status": "closed", "priority": 3, "issue_type": "task", "created_at": "2025-12-30T02:47:34Z", "created_by": "mayor", "updated_at": "2026-02-27T02:55:20Z", "closed_at": "2026-02-27T02:55:20Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependencies": [{"issue_id": "gt-3eqof", "depends_on_id": "gt-wthcc", "type": "blocks", "created_at": "2025-12-30T02:47:51Z", "created_by": "mayor", "metadata": "{}"}], "dependency_count": 1, "dependent_count": 0, "comment_count": 0}
{"id": "gt-c4b83", "title": "Consider gt polecats --status=idle for swarm dispatch", "description": "The dispatch-swarm-work step in mol-witness-patrol uses a complex jq command to find idle polecats:\n\n```bash\nbd list --type=agent --json | jq '[.[] | select(.description | contains(\"role_type: polecat\") and contains(\"agent_state: idle\"))]'\n```\n\nConsider adding a dedicated command:\n```bash\ngt polecats <rig> --status=idle\n```\n\nBenefits:\n- Simpler for formula authors\n- Encapsulates agent bead schema details\n- Could add --json output for programmatic use\n\nLow priority - the jq approach works, this is just ergonomics.", "status": "closed", "priority": 3, "issue_type": "task", "created_at": "2025-12-29T22:36:18Z", "created_by": "mayor", "updated_at": "2026-02-27T02:55:20Z", "closed_at": "2026-02-27T02:55:20Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-hdzct", "title": "gt mail send to self: Auto-detect from cwd for handoff mail", "description": "When sending mail to yourself (common for handoffs), gt mail send from an agent directory should auto-detect both sender and recipient. Example: gt mail send -s 'HANDOFF' -m '...' from mayor/rig should send to mayor/.", "status": "closed", "priority": 3, "issue_type": "feature", "created_at": "2025-12-29T06:27:42Z", "created_by": "stevey", "updated_at": "2026-02-27T02:55:19Z", "closed_at": "2026-02-27T02:55:19Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-h3skz", "title": "Remove os.Exit calls from Cobra RunE handlers", "description": "attached_args: Remove os.Exit calls from Cobra RunE handlers\n\nReplace os.Exit() calls with proper error returns in Cobra commands.\n\n## Files to modify\n- internal/cmd/mail.go (lines 546, 554, 561, 808-812)\n- Any other files with os.Exit in RunE\n\n## Problem\nSome RunE handlers call os.Exit() directly:\n```go\nRunE: func(cmd *cobra.Command, args []string) error {\n    ...\n    os.Exit(1)  // BAD: bypasses Cobra error handling\n}\n```\n\n## Fix\nReturn errors instead:\n```go\nRunE: func(cmd *cobra.Command, args []string) error {\n    ...\n    return fmt.Errorf(\"not in workspace\")\n}\n```\n\n## Acceptance criteria\n- [ ] No os.Exit calls inside RunE functions\n- [ ] Errors returned with proper context\n- [ ] grep -n 'os.Exit' internal/cmd/*.go shows no RunE matches\n- [ ] go build ./... passes\n- [ ] Commands still exit with correct codes", "status": "closed", "priority": 3, "issue_type": "task", "created_at": "2025-12-28T23:49:20Z", "created_by": "gastown/crew/max", "updated_at": "2026-02-27T02:55:19Z", "closed_at": "2026-02-27T02:55:19Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-dsqxw", "title": "Refactor runStartCrew into focused helper functions", "description": "attached_args: Refactor runStartCrew into focused helper functions\n\nBreak up the 155-line runStartCrew function in start.go.\n\n## Files to modify\n- internal/cmd/start.go\n\n## Current structure (lines 638-792)\nrunStartCrew does:\n1. Parse crew target (rig/name)\n2. Load rig config\n3. Get/create crew workspace\n4. Create/attach tmux session\n5. Set environment variables\n6. Apply theming\n7. Start Claude\n\n## Refactoring plan\nExtract these helpers:\n```go\nfunc parseCrewTarget(args []string) (rigName, crewName string, err error)\nfunc ensureCrewWorkspace(rig *rig.Rig, crewName string) (*crew.CrewWorker, error)\nfunc startCrewSession(worker *crew.CrewWorker, opts CrewStartOpts) error\n```\n\n## Acceptance criteria\n- [ ] runStartCrew reduced to <60 lines\n- [ ] 3 helper functions extracted\n- [ ] Each helper is <50 lines\n- [ ] No change in behavior\n- [ ] go test ./internal/cmd/... passes\n- [ ] Manual test: gt start crew works correctly", "status": "closed", "priority": 3, "issue_type": "task", "created_at": "2025-12-28T23:49:15Z", "created_by": "gastown/crew/max", "updated_at": "2026-02-27T02:55:18Z", "closed_at": "2026-02-27T02:55:18Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-26pib", "title": "Day 3.6: Polecat closes steps for activity feed", "description": "**REVISED**: Step completion is for visibility, not session control.\n\nPolecats close molecule steps as they complete them:\n```bash\n# After completing implement step:\nbd close <step-bead-id>  # Or: mol step done implement\n```\n\nThis provides:\n1. **Activity feed visibility** - Observers see progress in real-time\n2. **Audit trail** - Step completion timestamps in beads\n3. **Stuck detection** - Witness can see 'long time on same step'\n\nWhat this does NOT do:\n- Trigger session recycle (polecat self-manages)\n- Block next step (polecat continues immediately)\n- Require Witness intervention\n\nImplementation options:\n- Option A: Polecat runs `bd close <step-id>` manually\n- Option B: Formula `on_complete` hook auto-closes step bead\n- Option C: `mol step done <step>` convenience command\n\nPriority lowered: Nice-to-have for visibility, not launch-blocking.\n\n**Dependency removed**: No longer depends on gt-zb0io (recycle between steps).", "status": "closed", "priority": 3, "issue_type": "task", "created_at": "2025-12-28T06:02:13Z", "created_by": "mayor", "updated_at": "2026-02-27T02:55:17Z", "closed_at": "2026-02-27T02:55:17Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependencies": [{"issue_id": "gt-26pib", "depends_on_id": "gt-zb0io", "type": "blocks", "created_at": "2025-12-28T06:02:45Z", "created_by": "mayor", "metadata": "{}"}], "dependency_count": 1, "dependent_count": 0, "comment_count": 0}
{"id": "gt-xj9e5", "title": "ZFC #7: Make message age filtering configurable", "description": "**ZFC Violation:** internal/daemon/lifecycle.go:64-75\n\nGo hardcodes 6-hour max message age:\n```go\nconst MaxLifecycleMessageAge = 6 * time.Hour\n```\n\n**ZFC-compliant solution:**\n- Make this configurable per message type\n- Or let agents decide message relevance\n- Low priority - not blocking liftoff\n\nReference: ~/gt/docs/zfc-violations-audit.md #7", "status": "closed", "priority": 3, "issue_type": "task", "created_at": "2025-12-28T05:32:55Z", "created_by": "mayor", "updated_at": "2026-02-27T02:55:17Z", "closed_at": "2026-02-27T02:55:17Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-xpgh8", "title": "Support space-separated rig/polecat syntax in gt polecat commands", "description": "## Problem\n`gt polecat remove beads obsidian` fails with:\n```\nError: invalid address 'beads': invalid address format: expected 'rig/polecat', got 'beads'\n```\n\nRequires slash syntax: `gt polecat remove beads/obsidian`\n\n## Proposal\nSupport both syntaxes for ergonomics:\n```bash\ngt polecat remove beads/obsidian    # address syntax (current)\ngt polecat remove beads obsidian    # positional syntax (proposed)\n```\n\n## Implementation\nIn polecat subcommands that take rig/polecat addresses:\n- If arg contains `/`, use as-is\n- If two args without `/`, join with `/`\n- Apply to: remove, status, sync, reset, done\n\n```go\nfunc normalizePolecatAddress(args []string) string {\n    if len(args) == 1 && strings.Contains(args[0], \"/\") {\n        return args[0]\n    }\n    if len(args) == 2 {\n        return args[0] + \"/\" + args[1]\n    }\n    // error handling...\n}\n```\n\n## Rationale\n- Unambiguous context - polecat commands always take rig + name\n- Matches positional arg patterns in docker, kubectl, etc.\n- Reduces agent friction (natural first guess is space-separated)\n- Slash syntax remains valid for consistency with mail addresses\n", "status": "closed", "priority": 3, "issue_type": "feature", "created_at": "2025-12-28T00:06:30Z", "created_by": "mayor", "updated_at": "2026-02-27T02:55:17Z", "closed_at": "2026-02-27T02:55:17Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "labels": ["desire-path"], "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-1kljv", "title": "Add tests for gt crew restart --all", "description": "Add integration tests for the crew restart flow:\n\n- Test getAgentSessions() correctly identifies crew sessions\n- Test --rig filtering works correctly  \n- Test --dry-run outputs correct targets\n- Test session kill/recreate cycle (without Claude)\n\nConsider extracting a SessionStarter interface to mock the claude-launching bit.\n\nRelated: gt crew restart --all was just implemented.", "status": "closed", "priority": 3, "issue_type": "task", "created_at": "2025-12-27T22:45:36Z", "created_by": "mayor", "updated_at": "2026-02-27T02:55:17Z", "closed_at": "2026-02-27T02:55:17Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-fy11w", "title": "Daemon patrol should clean stale locks", "description": "The gt daemon patrol cycle should detect and clean up stale locks.\n\n## Problem\nIf daemon crashes or there are orphaned locks, they can block operations indefinitely.\n\n## Proposed Solution\nDuring patrol cycle:\n1. Check for lock files older than threshold (e.g., 5 minutes)\n2. Verify owning process is dead (check PID if stored)\n3. Remove stale locks\n4. Log cleanup for audit", "status": "closed", "priority": 3, "issue_type": "feature", "created_at": "2025-12-27T07:13:38Z", "created_by": "mayor", "updated_at": "2026-02-27T02:55:17Z", "closed_at": "2026-02-27T02:55:17Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-051cr", "title": "gt channel publish command", "description": "New CLI command for ephemeral broadcast to channels.\n\n## Deliverables\n\n1. New command: gt channel publish <channel> <message>\n   - Example: gt channel publish #witnesses \"Swarm incoming\"\n2. Resolve channel to running sessions\n3. Nudge each session with message\n4. Report delivery status\n\n## Usage\n```bash\ngt channel publish #town \"Handoff in 5 minutes\"\ngt channel publish #rig/gastown \"Merge queue paused\"\n```\n\n## Dependencies\n- #channel resolution (gt-???)\n\n## Acceptance\n- Command works with #channel syntax\n- Message delivered to running sessions\n- Clear output showing delivery status", "status": "closed", "priority": 3, "issue_type": "task", "created_at": "2025-12-26T22:52:35Z", "updated_at": "2026-02-27T02:55:17Z", "closed_at": "2026-02-27T02:55:17Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependencies": [{"issue_id": "gt-051cr", "depends_on_id": "gt-zk7wl", "type": "blocks", "created_at": "2025-12-26T22:53:13Z", "created_by": "mayor", "metadata": "{}"}], "dependency_count": 1, "dependent_count": 0, "comment_count": 0}
{"id": "gt-zk7wl", "title": "#channel resolution for real-time broadcast", "description": "Wire tmux scanner into nudge system for #channel addresses.\n\n## Deliverables\n\n1. Parse #channel syntax in nudge:\n   - #rig/gastown → nudge all running gastown agents\n   - #town → nudge all running agents\n   - #witnesses → nudge all running witnesses\n\n2. Broadcast logic:\n   - Resolve #channel to running sessions\n   - Nudge each session\n   - Ephemeral (no storage)\n\n## Dependencies\n- Tmux session scanner (gt-???)\n\n## Acceptance\n- #rig/gastown nudges all running gastown agents\n- Ephemeral, no message storage\n- Graceful handling of no-sessions", "status": "closed", "priority": 3, "issue_type": "task", "created_at": "2025-12-26T22:52:33Z", "updated_at": "2026-02-27T02:55:16Z", "closed_at": "2026-02-27T02:55:16Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependencies": [{"issue_id": "gt-zk7wl", "depends_on_id": "gt-7grh6", "type": "blocks", "created_at": "2025-12-26T22:53:11Z", "created_by": "mayor", "metadata": "{}"}], "dependency_count": 1, "dependent_count": 1, "comment_count": 0}
{"id": "gt-7grh6", "title": "Tmux session scanner for running agents", "description": "Scan tmux for running Gas Town agent sessions.\n\n## Deliverables\n\n1. Function: ScanRunningSessions() -> []AgentAddr\n   - Parse tmux list-sessions\n   - Filter for Gas Town session naming pattern\n   - Return addresses of running agents\n\n2. Function: ScanRigSessions(rig) -> []AgentAddr\n   - Filter running sessions by rig prefix\n\n3. Alias resolution:\n   - #rig/gastown → running sessions in gastown\n   - #town → all running Gas Town sessions\n   - #witnesses → running witness sessions\n\n## Location\ninternal/discovery/tmux.go\n\n## Acceptance\n- Scanner finds running sessions\n- Correctly parses session names to addresses\n- Handles no-sessions case gracefully", "status": "closed", "priority": 3, "issue_type": "task", "created_at": "2025-12-26T22:52:32Z", "updated_at": "2026-02-27T02:55:16Z", "closed_at": "2026-02-27T02:55:16Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependency_count": 0, "dependent_count": 1, "comment_count": 0}
{"id": "gt-xka9x", "title": "announce: shared bulletin board", "description": "Announcement channel with shared single-copy storage.\n\n## Deliverables\n\n1. Parse announce:name syntax\n2. Shared storage model (like queue, but no claim):\n   - Single message copy\n   - Multiple readers can view\n   - Informational, not work-creating\n3. Configuration in ~/gt/config/announce.json\n4. Read tracking (optional): who has seen it\n\n## Key semantics\n- Informational broadcast\n- Missing is OK (not critical)\n- Use case: \"Bob refactoring logging, be aware\"\n\n## Dependencies\n- Config directory (gt-i6jvc)\n- queue: implementation (pattern reference)\n\n## Acceptance\n- announce:status creates single shared message\n- Multiple agents can read\n- No claim semantics (read-only)", "status": "closed", "priority": 3, "issue_type": "task", "created_at": "2025-12-26T22:52:31Z", "updated_at": "2026-02-27T02:55:16Z", "closed_at": "2026-02-27T02:55:16Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependencies": [{"issue_id": "gt-xka9x", "depends_on_id": "gt-i6jvc", "type": "blocks", "created_at": "2025-12-26T22:53:10Z", "created_by": "mayor", "metadata": "{}"}], "dependency_count": 1, "dependent_count": 0, "comment_count": 0}
{"id": "gt-zlro5", "title": "Refactor patrol context functions to reduce duplication", "description": "In prime.go, three patrol context functions are nearly identical (~100 lines each):\n- outputDeaconPatrolContext() - L797-940\n- outputWitnessPatrolContext() - L942-1106\n- outputRefineryPatrolContext() - L1108-1272\n\nThey all:\n1. Check for existing patrol molecule\n2. Auto-spawn if none exists\n3. Display patrol work loop instructions\n\n**Suggested refactor**:\nExtract common logic into a helper:\n```go\nfunc outputPatrolContext(ctx RoleContext, patrolName string, assignee string) {\n    // shared logic\n}\n```\n\nThen each role-specific function just calls the helper with appropriate parameters.", "status": "closed", "priority": 3, "issue_type": "task", "created_at": "2025-12-26T06:03:14Z", "updated_at": "2026-02-27T02:55:16Z", "closed_at": "2026-02-27T02:55:16Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-t5mz", "title": "Hardcoded session ID prefixes and paths", "description": "Multiple hardcoded values throughout code:\n- internal/mail/router.go: 'gt-mayor', 'gt-' session prefixes\n- internal/lock/lock.go: '.runtime', 'agent.lock' paths\n- Session ID generation uses string literals\n\nShould move to:\n- constants package for prefixes\n- config for customizable paths\n\nLow priority but improves maintainability.", "status": "closed", "priority": 3, "issue_type": "task", "created_at": "2025-12-24T20:51:21Z", "updated_at": "2026-02-27T02:55:15Z", "closed_at": "2026-02-27T02:55:15Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-jhsa", "title": "Deacon has no rig-level presence - only global gt-deacon", "description": "The Deacon patrol role exists only at the global level (~/gt/deacon) but doesn't have per-rig presence like Witness and Refinery.\n\nCurrent structure:\n```\n~/gt/\n├── deacon/           ← Global deacon only\n├── beads/\n│   ├── witness/      ← Per-rig witness\n│   ├── refinery/     ← Per-rig refinery\n│   └── (no deacon)   ← Missing\n└── gastown/\n    ├── witness/\n    ├── refinery/\n    └── (no deacon)   ← Missing\n```\n\nQuestion: Should Deacon be per-rig like Witness/Refinery, or is global-only intentional?\n\nIf per-rig is needed: Create beads/deacon and gastown/deacon with appropriate CLAUDE.md files.", "status": "closed", "priority": 3, "issue_type": "task", "created_at": "2025-12-24T04:29:59Z", "updated_at": "2026-02-27T02:55:15Z", "closed_at": "2026-02-27T02:55:15Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-h0v5", "title": "Add keyboard navigation and filtering", "description": "Keyboard navigation: j/k or arrows to move, enter to expand/collapse, q to quit. Filtering: by rig name, worker name, event type. Search within activity stream.", "status": "closed", "priority": 3, "issue_type": "task", "created_at": "2025-12-24T00:27:20Z", "updated_at": "2026-02-27T02:55:01Z", "closed_at": "2026-02-27T02:55:01Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependencies": [{"issue_id": "gt-h0v5", "depends_on_id": "gt-55kx", "type": "blocks", "created_at": "2025-12-24T00:27:40Z", "created_by": "mayor", "metadata": "{}"}, {"issue_id": "gt-h0v5", "depends_on_id": "gt-tr0a", "type": "blocks", "created_at": "2025-12-24T00:27:40Z", "created_by": "mayor", "metadata": "{}"}], "dependency_count": 2, "dependent_count": 0, "comment_count": 0}
{"id": "gt-ia0s", "title": "Review: Beads Universal Data Plane documentation", "description": "Review new docs/beads-data-plane.md (275 lines) for accuracy.\n\n## Commit\n- 54c8269: Add Beads Universal Data Plane documentation\n\n## Review focus\n- Accuracy of beads architecture description\n- Correct field mappings (mail → beads fields)\n- Two-level architecture (town vs rig beads) correctly explained", "status": "closed", "priority": 3, "issue_type": "task", "created_at": "2025-12-23T22:27:49Z", "updated_at": "2026-02-27T02:54:59Z", "closed_at": "2026-02-27T02:54:59Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-s148", "title": "Clean up stale children on deacon handoff bead", "description": "The deacon handoff bead hq-8r8 has 7 stale children (hq-8r8.1 through hq-8r8.7) from a previous patrol that got incorrectly parented. These should be cleaned up.\n\nThe handoff bead should only contain the attached_molecule reference, not instantiated steps.", "status": "closed", "priority": 3, "issue_type": "task", "created_at": "2025-12-23T21:16:52Z", "updated_at": "2026-02-27T02:54:59Z", "closed_at": "2026-02-27T02:54:59Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-hj9e", "title": "Remove pinned field workaround after beads fix", "description": "## Summary\n\nOnce bd-phtv is fixed in beads, we can remove the workaround documentation and potentially simplify the pinToHook() implementation.\n\n## Current Workaround\n\nThe handoff bead attachment mechanism (AttachMolecule) is used as the primary work assignment mechanism instead of the pinned field. This works correctly but adds complexity.\n\n## Changes After Beads Fix\n\n1. Remove the NOTE comment in internal/beads/beads.go:Pin() explaining the bug\n2. Consider simplifying pinToHook() if the pinned field becomes reliable\n3. Update gt-o3is to reference the fix\n\n## Blocked By\n\nThis issue is blocked by external:beads:pinned-field-fix (bd-phtv).\nWhen that capability is shipped, this issue becomes ready.\n\n## Related\n\n- gt-o3is: Original investigation that found this bug\n- bd-phtv: The beads fix (in ~/gt/beads)", "notes": "BLOCKED: Can't add external:beads:pinned-field-fix dependency due to bd-ucgz (migration invariants bug). Once that's fixed, add: bd dep add gt-hj9e external:beads:pinned-field-fix", "status": "closed", "priority": 3, "issue_type": "task", "created_at": "2025-12-23T20:35:32Z", "updated_at": "2026-02-27T02:54:58Z", "closed_at": "2026-02-27T02:54:58Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-nc9y", "title": "gt polecat done should auto-stop running session", "description": "Currently 'gt polecat done' fails if session is running, requiring a separate 'gt session stop' first. This is unnecessary friction - done should just stop the session automatically since that's always what you want.", "status": "closed", "priority": 3, "issue_type": "task", "created_at": "2025-12-23T12:12:13Z", "updated_at": "2026-02-27T02:54:58Z", "closed_at": "2026-02-27T02:54:58Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-s9im", "title": "Remove gt context --usage estimation", "description": "The external context estimation approach doesn't work:\n- tmux scrollback trick breaks with --cycle\n- Can't see actual context usage from outside\n- Only the agent knows its internal state\n\nRemove or deprecate:\n- gt context --usage flag\n- Any external context monitoring logic\n\nDocument why in comments: 'Context management is agent-initiated, not externally monitored.\nSee self-check guidance in role templates.'\n\nThis is P3 because it's cleanup - the feature just doesn't work, not actively harmful.", "status": "closed", "priority": 3, "issue_type": "task", "created_at": "2025-12-23T09:46:43Z", "updated_at": "2026-02-27T02:54:57Z", "closed_at": "2026-02-27T02:54:57Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-p2l2", "title": "gt doctor: add Claude settings.json validation", "description": "Add a new doctor check to validate Claude Code settings in worker directories:\n\n**Check for:**\n1. .claude/settings.json exists in polecats/*, crew/*, witness/rig, refinery/rig\n2. SessionStart hook has 'gt prime' command\n3. Autonomous roles (polecat, witness, refinery) have 'gt mail check --inject' in SessionStart\n4. Interactive roles (crew, mayor) have mail check in UserPromptSubmit only\n\n**Auto-fix capability:**\nUse internal/claude.EnsureSettingsForRole() to create missing settings files.\n\nContext: The spawn priming race condition fix (gt-6957) added embedded settings templates. Doctor should validate these are in place.", "status": "closed", "priority": 3, "issue_type": "task", "created_at": "2025-12-23T01:59:02Z", "updated_at": "2026-02-27T02:54:55Z", "closed_at": "2026-02-27T02:54:55Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-7tt8", "title": "Default crew name should be something better than 'main'", "description": "When creating a new rig, the default crew worker name is 'main'. This is confusing since:\n\n1. 'main' is also the git branch name\n2. It doesn't convey that this is the user's personal workspace\n3. Crew names should feel more personal/distinct\n\nConsider alternatives like:\n- 'home' - the user's home base\n- 'desk' - their personal desk\n- 'joe/max/etc' - actual name-based defaults\n- Let user pick during rig init", "status": "closed", "priority": 3, "issue_type": "task", "created_at": "2025-12-22T00:46:51Z", "updated_at": "2026-02-27T02:54:45Z", "closed_at": "2026-02-27T02:54:45Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-5v29", "title": "Add 'wit' alias for witness command", "description": "ref works as alias for refinery, but wit doesn't work for witness. Add Aliases: []string{\"wit\"} to witnessCmd.", "status": "closed", "priority": 3, "issue_type": "task", "created_at": "2025-12-21T07:11:53Z", "updated_at": "2026-02-27T02:54:45Z", "closed_at": "2026-02-27T02:54:45Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "labels": ["desire-path"], "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-bnch", "title": "Human escalation: notify overseer when self-heal fails", "description": "Lightweight escalation extracted from Deacon epic (gt-5af).\n\n**Implementation**: Config in town.json or similar:\n```yaml\nescalation:\n  contact: steve@example.com  # or slack webhook\n  triggers:\n    - daemon_cant_restart\n    - session_missing_5min\n```\n\n**Trigger points**:\n- Go daemon can't restart a session after N attempts\n- Agent detects it's stuck and can't recover\n- Witness can't reach polecat\n\n**Mechanism**: \n- Simple: `gt mail send --human` already exists\n- Enhanced: email/slack via external script\n\n**Weight**: Small config + one code path in daemon\n**Value**: High for unattended operation - human gets notified instead of silent failure", "status": "closed", "priority": 3, "issue_type": "task", "created_at": "2025-12-21T04:40:47Z", "updated_at": "2026-02-27T02:54:45Z", "closed_at": "2026-02-27T02:54:45Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-htto", "title": "Heartbeat convention: simple liveness signal for agents", "description": "Lightweight liveness signal extracted from Deacon epic (gt-5af).\n\n**Implementation**: Each agent writes a timestamp file on activity:\n```bash\necho '{\"ts\":\"'$(date -Iseconds)'\"}' > ~/gt/<role>/heartbeat.json\n```\n\n**Integration points**:\n- SessionStart hook writes heartbeat\n- Periodic activity (mail check, work completion) refreshes it\n- `gt status` shows staleness (e.g., 'mayor: 5m ago')\n\n**Weight**: ~5 lines per agent\n**Value**: Quick debugging - see which agents are active at a glance\n\nNo monitoring daemon needed - human checks `gt status` when curious.", "status": "closed", "priority": 3, "issue_type": "task", "created_at": "2025-12-21T04:40:45Z", "updated_at": "2026-02-27T02:54:45Z", "closed_at": "2026-02-27T02:54:45Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-th7", "title": "Add agent abstraction layer to support non-Claude agents", "description": "Currently Gas Town hardcodes 'claude --dangerously-skip-permissions' throughout the codebase for spawning agents. We should add an abstraction layer to support other AI agents (e.g., Gemini CLI, OpenAI agents, local models).\n\nLocations that spawn Claude:\n- internal/cmd/mayor.go:131\n- internal/cmd/deacon.go:150  \n- internal/cmd/witness.go:280\n- internal/cmd/crew.go (multiple locations)\n- internal/cmd/up.go:190, 229\n- internal/session/manager.go:146\n- internal/refinery/manager.go:207\n\nSuggested approach:\n1. Create an agent package with an interface\n2. Add configuration for agent type in town/rig config\n3. Replace hardcoded claude commands with agent.Spawn() calls\n4. Support agents: claude, gemini, openai, local (ollama, etc.)", "status": "closed", "priority": 3, "issue_type": "feature", "created_at": "2025-12-20T23:11:16Z", "updated_at": "2026-02-27T02:54:44Z", "closed_at": "2026-02-27T02:54:44Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-zivp", "title": "mol-outpost-assign: Intelligent work routing to outposts", "description": "The federation design shows outposts.yaml with a static policy section. Simple preference ordering is fine as config, but intelligent work routing should be a molecule.\n\nCurrent static approach:\n```yaml\npolicy:\n  default_preference: [local, gce-burst, cloudrun-burst]\n```\n\nCases requiring cognition:\n- \"This is a long-running research task, route to VM not CloudRun\"\n- \"This touches sensitive code, keep local\"\n- \"These 5 issues are related, batch them to same outpost\"\n- \"CloudRun cost is high today, prefer local even if slower\"\n\n## Molecule: outpost-assign\nIntelligent work-to-outpost routing.\n\n## Step: classify-work\nAnalyze the issue/work item:\n- Expected duration (quick fix vs multi-hour)\n- Resource requirements\n- Sensitivity/security tier\n- Related work (same epic?)\n\n## Step: check-capacity\nQuery outpost status:\n- Current load on each\n- Cost accrued today\n- Health status\n\n## Step: select-outpost\nChoose optimal outpost based on:\n- Work classification\n- Capacity/cost\n- Policy constraints\nNeeds: classify-work, check-capacity\n\n## Step: emit-assignment\nRecord decision in beads for audit.\nNeeds: select-outpost\n\n## Notes\n- This molecule is invoked by Mayor/Witness when spawning\n- Simple cases can short-circuit to static policy\n- Full analysis only for ambiguous cases", "status": "closed", "priority": 3, "issue_type": "feature", "created_at": "2025-12-20T11:26:18Z", "updated_at": "2026-02-27T02:54:43Z", "closed_at": "2026-02-27T02:54:43Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-rr1i", "title": "mol-swarm-cleanup: Post-swarm debris cleanup molecule", "description": "After a 20+ worker swarm completed, found significant beads debris:\n- 18 stale messages (work assignments, lifecycle requests, swarm instructions)\n- 3 completed issues still open/in_progress\n- Test messages accumulated\n\nNeed: Document a post-swarm checklist or create gt swarm cleanup command that:\n1. Closes stale work assignment messages\n2. Reviews in_progress issues for completion\n3. Closes orphaned lifecycle messages\n4. Optionally archives test messages", "status": "closed", "priority": 3, "issue_type": "chore", "created_at": "2025-12-20T11:12:29Z", "updated_at": "2026-02-27T02:54:43Z", "closed_at": "2026-02-27T02:54:43Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-2sw", "title": "Plugin surface for daemon lifecycle hooks", "description": "Allow rigs to customize daemon behavior via hooks/plugins.\n\n## Hook Points\n\n- on_heartbeat: Called during daemon heartbeat cycle\n- on_worker_idle: Called when worker goes idle\n- on_worker_stuck: Called when stuck detection triggers\n- on_lifecycle_request: Called before processing lifecycle\n\n## Configuration\n\n```\n<rig>/config/daemon-hooks.json\n{\n  \"on_heartbeat\": \"./hooks/check-ci-status.sh\",\n  \"on_worker_idle\": \"./hooks/maybe-assign-work.sh\",\n  \"idle_threshold\": \"5m\",\n  \"custom_signals\": [\n    {\"name\": \"ci_status\", \"command\": \"./hooks/get-ci.sh\"}\n  ]\n}\n```\n\n## Signal Contribution\n\nHooks can return signals that feed into decision engine:\n- SKIP_POKE: Don't poke this agent\n- FORCE_POKE: Override backoff, poke now\n- CUSTOM_DATA: Extra context for logging\n\n## Use Cases\n\n- Check CI status before interrupting test runs\n- Auto-assign work when worker becomes idle\n- Custom stuck detection for specific workflows", "status": "closed", "priority": 3, "issue_type": "feature", "created_at": "2025-12-18T22:19:35Z", "updated_at": "2026-02-27T02:54:43Z", "closed_at": "2026-02-27T02:54:43Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-d0a", "title": "Haiku-based smart stuck detection", "description": "Use Haiku to analyze tmux state when signals are ambiguous.\n\n## When to Invoke\n\nOnly as escalation tier:\n1. Keepalive is stale (> 2 min)\n2. Tmux shows claude is running (not idle shell)\n3. Heuristics can't determine state\n\n## Prompt\n\nCapture last 50 lines of tmux pane, ask Haiku:\n'Is this Claude agent: WORKING | STUCK | IDLE | WAITING_FOR_HUMAN?'\n\n## Cost\n\n~$0.001 per check. At 1 check/min worst case = $0.06/hour.\nIn practice, most checks avoided by keepalive signal.\n\n## Configuration\n\n```toml\n[daemon]\nsmart_detection = true\nsmart_model = \"haiku\"\nsmart_threshold = \"2m\"  # only check if stale > 2min\n```", "status": "closed", "priority": 3, "issue_type": "task", "created_at": "2025-12-18T22:19:31Z", "updated_at": "2026-02-27T02:54:43Z", "closed_at": "2026-02-27T02:54:43Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-us8", "title": "Daemon: configurable heartbeat interval", "description": "Heartbeat interval is hardcoded to 60s. Should be configurable via:\n- town.json config\n- Command line flag\n- Environment variable\n\nDefault 60s is reasonable but some deployments may want faster/slower.", "status": "closed", "priority": 3, "issue_type": "task", "created_at": "2025-12-18T21:38:14Z", "updated_at": "2026-02-27T02:54:32Z", "closed_at": "2026-02-27T02:54:32Z", "close_reason": "Stale early design issues — features shipped or superseded (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-3cu", "title": "Default polecat names: Mad Max theme instead of AdjectiveNoun", "description": "Current default naming for new polecats uses AdjectiveNoun convention.\nSince rigs already provide namespacing, we can use more thematic names.\n\nSuggestion: Use Mad Max / Fury Road character and vehicle names as defaults.\nExamples: Furiosa, Nux, Slit, Morsov, Toast, Rictus, Warboy, etc.\n\nCould also include:\n- War Rig parts: Guzzler, Tanker, Pursuit\n- Citadel roles: Imperator, Blackthumb, Organic\n- Wasteland terms: Chrome, Witness, Shiny\n\nImplementation:\n- Add name generator in internal/polecat/ or similar\n- Use when --create flag is used without explicit name\n- Cycle through pool to avoid duplicates within a rig", "status": "closed", "priority": 3, "issue_type": "task", "created_at": "2025-12-17T22:50:43Z", "updated_at": "2026-02-27T02:54:43Z", "closed_at": "2026-02-27T02:54:43Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-7q4", "title": "HOP: Skill vectors on work items", "description": "Add skill embeddings to work items for capability-based matching. See ~/ai/stevey-gastown/hop/CONTEXT.md. Post-v0.1 work.", "status": "closed", "priority": 3, "issue_type": "feature", "created_at": "2025-12-17T09:00:43Z", "updated_at": "2026-02-27T02:54:54Z", "closed_at": "2026-02-27T02:54:54Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-ry8", "title": "HOP: Entity chain tracking for agents", "description": "Track work history per-entity (CV chains). See ~/ai/stevey-gastown/hop/decisions/002-entity-chains.md for design. Post-v0.1 work.", "status": "closed", "priority": 3, "issue_type": "feature", "created_at": "2025-12-17T09:00:41Z", "updated_at": "2026-02-27T02:54:54Z", "closed_at": "2026-02-27T02:54:54Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-8lz", "title": "Comprehensive help text and examples", "description": "Improve help text with examples and cross-references.\n\n## Improvements\n\n### 1. Examples Section\nAdd to Long description:\n```go\nvar spawnCmd = &cobra.Command{\n    Long: `Spawn a polecat with work assignment.\n\nExamples:\n  gt spawn gastown/Toast --issue gt-abc\n  gt spawn gastown --issue gt-def          # auto-select polecat\n  gt spawn gastown/Nux -m \"Fix the tests\"  # free-form task`,\n}\n```\n\n### 2. Cross-References\nReference related commands:\n```\nSee also:\n  gt polecat list    List available polecats\n  gt session attach  Attach to spawned session\n```\n\n### 3. Flag Descriptions\nMore detail on flags:\n```go\ncmd.Flags().StringVar(&issue, \"issue\", \"\", \n    \"Beads issue ID to assign. The polecat will work on this issue.\")\n```\n\n### 4. Common Workflows\nAdd workflow docs to gt --help:\n```\nCommon Workflows:\n  Start a swarm:\n    gt swarm preflight\n    gt swarm create gastown --epic gt-abc --worker Toast --worker Nux --start\n    gt refinery start gastown\n    \n  Check status:\n    gt status\n    gt swarm status <id>\n```\n\n## Files to Update\nAll internal/cmd/*.go files\n\n## Acceptance Criteria\n- [ ] All commands have Examples\n- [ ] Related commands cross-referenced\n- [ ] Flags have detailed descriptions\n- [ ] Root help shows workflows", "status": "closed", "priority": 3, "issue_type": "task", "created_at": "2025-12-16T22:48:53Z", "updated_at": "2026-02-27T02:54:42Z", "closed_at": "2026-02-27T02:54:42Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-1u9", "title": "Interactive prompts for destructive operations", "description": "Add interactive confirmations for destructive operations.\n\n## Operations Needing Confirmation\n- `gt swarm cancel` - Cancels active swarm\n- `gt swarm land --force` - Force landing\n- `gt polecat decommission` - Removes polecat\n- `gt rig remove` - Removes rig\n- `gt stop --all` - Stops all sessions\n- `gt mail purge` - Permanently deletes mail\n\n## Implementation Options\n\n### Option 1: promptui library\n```go\nimport \"github.com/manifoldco/promptui\"\n\nprompt := promptui.Prompt{\n    Label:     \"Delete polecat Toast\",\n    IsConfirm: true,\n}\nresult, err := prompt.Run()\n```\n\n### Option 2: Simple stdin\n```go\nfunc confirm(prompt string) bool {\n    fmt.Printf(\"%s [y/N]: \", prompt)\n    var response string\n    fmt.Scanln(&response)\n    return strings.ToLower(response) == \"y\"\n}\n```\n\n## Bypass Flags\nAll confirmations skippable with --force or --yes:\n```go\nif !force && !confirm(\"Really cancel swarm?\") {\n    return nil\n}\n```\n\n## Acceptance Criteria\n- [ ] Destructive ops prompt by default\n- [ ] --force or --yes bypasses\n- [ ] Clear prompt text explaining action\n- [ ] Non-interactive mode (piped input) auto-fails", "status": "closed", "priority": 3, "issue_type": "task", "created_at": "2025-12-16T22:48:52Z", "updated_at": "2026-02-27T02:54:42Z", "closed_at": "2026-02-27T02:54:42Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-ebl", "title": "CLI: names commands for polecat naming pool", "description": "Polecat naming pool for auto-generated names.\n\n## Commands\n\n### gt names generate\n```\ngt names generate [--count N]\n```\nGenerate N names from pool.\n\n### gt names add\n```\ngt names add <name>...\n```\nAdd custom names to pool.\n\n### gt names list\n```\ngt names list\n```\nShow available and used names.\n\n### gt names reset\n```\ngt names reset [--keep-used]\n```\nReset pool to defaults.\n\n## Config File\n<rig>/town/naming.json:\n```json\n{\n  \"enabled\": true,\n  \"auto_refill\": true,\n  \"refill_threshold\": 5,\n  \"pool\": {\n    \"available\": [\"Toast\", \"Nux\", \"Capable\", ...],\n    \"used\": [\"Alice\", \"Bob\"]\n  }\n}\n```\n\n## Default Pool\nMad Max themed: Toast, Nux, Capable, Furiosa, Immortan, etc.\n\n## Integration\ngt polecat add calls naming pool if no name given:\n```go\nif name == \"\" {\n    name, err = naming.Generate(rigPath)\n}\n```\n\n## New Package\ninternal/naming/\n├── pool.go     # Pool management\n└── defaults.go # Default name lists\n\n## Acceptance Criteria\n- [ ] Auto-generate names on polecat add\n- [ ] Track used vs available\n- [ ] Auto-refill when low\n- [ ] Custom names addable", "status": "closed", "priority": 3, "issue_type": "task", "created_at": "2025-12-16T22:48:34Z", "updated_at": "2026-02-27T02:54:32Z", "closed_at": "2026-02-27T02:54:32Z", "close_reason": "Stale early design issues — features shipped or superseded (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-2kz", "title": "CLI: cleanup commands for stale state", "description": "Cleanup commands for recovering from stale state.\n\n## Commands\n\n### gt cleanup <polecat>\nClean stale state for specific polecat.\n```\ngt cleanup <rig>/<polecat> [--dry-run]\n```\n\nActions:\n- Remove orphaned state.json if clone missing\n- Clear stale session references\n- Reset stuck state (working → idle after timeout)\n\n### gt cleanup --all\nClean all polecats in workspace.\n```\ngt cleanup --all [--dry-run]\n```\n\n## Implementation\n```go\nfunc CleanupPolecat(rigName, polecatName string, dryRun bool) (*CleanupResult, error)\n\ntype CleanupResult struct {\n    OrphanedStateRemoved bool\n    SessionsCleared      int\n    StateReset           bool\n    Warnings             []string\n}\n```\n\n## Overlap with Doctor\n- Doctor diagnoses and offers --fix\n- Cleanup is more aggressive state recovery\n- Consider merging into doctor --fix\n\n## New File\ninternal/cmd/cleanup.go\n\n## Acceptance Criteria\n- [ ] Removes orphaned state files\n- [ ] Clears stale session refs\n- [ ] --dry-run shows what would happen\n- [ ] Reports all actions taken", "status": "closed", "priority": 3, "issue_type": "task", "created_at": "2025-12-16T22:48:32Z", "updated_at": "2026-02-27T02:54:31Z", "closed_at": "2026-02-27T02:54:31Z", "close_reason": "Stale early design issues — features shipped or superseded (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-3fm", "title": "Mail orchestrator daemon", "description": "Background mail orchestrator daemon.\n\n## Command\n```\ngt mail orchestrate [--interval N] [--once] [--verbose]\n```\n\n## Purpose\nBackground process that:\n1. Monitors outbox for pending mail\n2. Delivers to recipient inboxes\n3. Handles offline recipients (retry later)\n4. Cleans delivered messages from outbox\n\n## Why Needed?\nCurrent mail is synchronous. If recipient is offline or mailbox locked, send fails.\nOrchestrator enables async delivery with retry.\n\n## Implementation\n```go\nfunc (o *Orchestrator) Run(interval time.Duration) error {\n    ticker := time.NewTicker(interval)\n    for range ticker.C {\n        o.processOutbox()\n    }\n}\n\nfunc (o *Orchestrator) processOutbox() {\n    // List outbox/*.json\n    // For each, attempt delivery\n    // On success, delete from outbox\n    // On failure, increment retry count\n}\n```\n\n## Outbox Structure\n```\n<town>/mayor/mail/outbox/\n├── msg-abc123.json\n└── msg-def456.json\n```\n\n## Lower Priority\nCurrent synchronous delivery works. Orchestrator is optimization.\n\n## Acceptance Criteria\n- [ ] Background daemon mode\n- [ ] Retry failed deliveries\n- [ ] --once for single pass\n- [ ] Configurable interval", "status": "closed", "priority": 3, "issue_type": "task", "created_at": "2025-12-16T22:48:30Z", "updated_at": "2026-02-27T02:54:42Z", "closed_at": "2026-02-27T02:54:42Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-35x", "title": "Plugin: plan-oracle (work decomposition)", "description": "Plugin that helps decompose epics/issues into sub-tasks. Analyzes scope, identifies dependencies, estimates complexity for parallelization, creates beads for sub-tasks with dependency links.", "status": "closed", "priority": 3, "issue_type": "feature", "created_at": "2025-12-16T06:53:06Z", "updated_at": "2026-02-27T02:54:32Z", "closed_at": "2026-02-27T02:54:32Z", "close_reason": "Stale early design issues — features shipped or superseded (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-pio", "title": "Plugin: merge-oracle (merge queue analysis)", "description": "Example plugin that analyzes changesets before Refinery processes them. Builds overlap graph, classifies disjointness (parallel-safe vs needs-sequencing), uses LLM for semantic complexity, identifies high-risk patterns. Based on merge-orchestration proposal. See docs/architecture.md.", "status": "closed", "priority": 3, "issue_type": "feature", "created_at": "2025-12-16T06:53:04Z", "updated_at": "2026-02-27T02:54:32Z", "closed_at": "2026-02-27T02:54:32Z", "close_reason": "Stale early design issues — features shipped or superseded (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-8dv", "title": "CLI: plugin commands (list, status)", "description": "Add gt plugins <rig> to list plugins and gt plugin status <name> to check plugin state. Simple directory scan of <rig>/plugins/.", "status": "closed", "priority": 3, "issue_type": "task", "created_at": "2025-12-16T06:53:03Z", "updated_at": "2026-02-27T02:54:32Z", "closed_at": "2026-02-27T02:54:32Z", "close_reason": "Stale early design issues — features shipped or superseded (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-2abltl.5", "title": "YAGNI: EscalationState constants appear unused", "description": "## Location\ninternal/beads/beads_escalation.go:32-37\n\n## Issue\n```go\nconst (\n    EscalationOpen   = \"open\"   // Unacknowledged\n    EscalationAcked  = \"acked\"  // Acknowledged but not resolved\n    EscalationClosed = \"closed\" // Resolved/closed\n)\n```\n\nThese constants are defined but not used in this file. They don't appear in any of the methods.\n\n## Why it's YAGNI\n- Constants defined 'just in case' but never used\n- The actual code uses label strings directly (\"acked\", \"resolved\")\n- Dead code should be removed\n\n## Action\nSearch for usage of EscalationOpen/EscalationAcked/EscalationClosed. If unused, delete.", "status": "closed", "priority": 4, "issue_type": "task", "owner": "steve.yegge@gmail.com", "created_at": "2026-01-22T03:21:10Z", "created_by": "gastown/crew/jack", "updated_at": "2026-02-27T02:56:18Z", "closed_at": "2026-02-27T02:56:18Z", "close_reason": "Stale code review cleanup epic — aspirational refactoring (Clown Show #21)", "dependencies": [{"issue_id": "gt-2abltl.5", "depends_on_id": "gt-2abltl", "type": "parent-child", "created_at": "2026-01-22T03:21:10Z", "created_by": "mayor", "metadata": "{}"}], "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-2abltl"}
{"id": "gt-2abltl.4", "title": "Over-engineering: cleanBeadsRuntimeFiles with 13 hardcoded patterns", "description": "## Location\ninternal/beads/beads_redirect.go:104-149\n\n## Issue\ncleanBeadsRuntimeFiles has 13 hardcoded glob patterns for cleanup:\n```go\nruntimePatterns := []string{\n    \"*.db\", \"*.db-*\", \"*.db?*\",\n    \"daemon.lock\", \"daemon.log\", \"daemon.pid\", \"bd.sock\",\n    \"sync-state.json\", \"last-touched\", \"metadata.json\",\n    \".local_version\",\n    \"redirect\",\n    \"beads.base.*\", \"beads.left.*\", \"beads.right.*\",\n    \"issues.jsonl\", \"interactions.jsonl\",\n    \"mq\",\n}\n```\n\n## Why it's over-engineered\n- This duplicates knowledge from .gitignore\n- Maintaining two lists of 'what to ignore' is error-prone\n- Simpler approach: rm -rf the whole .beads dir and recreate, OR just create redirect file (let git handle the rest)\n\n## Action\nConsider if this elaborate cleanup is needed, or if simpler approaches work.", "status": "closed", "priority": 4, "issue_type": "task", "owner": "steve.yegge@gmail.com", "created_at": "2026-01-22T03:21:01Z", "created_by": "gastown/crew/jack", "updated_at": "2026-02-27T02:56:18Z", "closed_at": "2026-02-27T02:56:18Z", "close_reason": "Stale code review cleanup epic — aspirational refactoring (Clown Show #21)", "dependencies": [{"issue_id": "gt-2abltl.4", "depends_on_id": "gt-2abltl", "type": "parent-child", "created_at": "2026-01-22T03:21:01Z", "created_by": "mayor", "metadata": "{}"}], "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-2abltl"}
{"id": "gt-2abltl.2", "title": "Over-engineering: Explicit null serialization in escalation fields", "description": "## Location\ninternal/beads/beads_escalation.go:52-104\n\n## Issue\nFormatEscalationDescription explicitly writes 'key: null' for empty values:\n```go\nif fields.Source != \"\" {\n    lines = append(lines, fmt.Sprintf(\"source: %s\", fields.Source))\n} else {\n    lines = append(lines, \"source: null\")\n}\n```\n\nThen ParseEscalationFields converts 'null' back to empty string (line 126-128).\n\n## Why it's over-engineered\n- Simpler: Just omit empty fields entirely\n- The 'null' values add no information - empty string is already the zero value\n- ~30 lines of if/else could become ~10 lines with a helper\n\n## Action\nSimplify by omitting empty fields instead of writing 'null'.", "status": "closed", "priority": 4, "issue_type": "task", "owner": "steve.yegge@gmail.com", "created_at": "2026-01-22T03:20:58Z", "created_by": "gastown/crew/jack", "updated_at": "2026-02-27T02:56:18Z", "closed_at": "2026-02-27T02:56:18Z", "close_reason": "Stale code review cleanup epic — aspirational refactoring (Clown Show #21)", "dependencies": [{"issue_id": "gt-2abltl.2", "depends_on_id": "gt-2abltl", "type": "parent-child", "created_at": "2026-01-22T03:20:58Z", "created_by": "mayor", "metadata": "{}"}], "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-2abltl"}
{"id": "gt-2aycy6", "title": "Patrol digest: include date in close reason", "description": "The cost digest close reason includes context: 'daily cost digest'. The patrol digest should be more specific: 'daily patrol digest for 2026-01-16'.\n\nLocation: internal/cmd/patrol.go:302", "status": "closed", "priority": 4, "issue_type": "chore", "owner": "steve.yegge@gmail.com", "created_at": "2026-01-17T10:18:08Z", "created_by": "gastown/crew/jack", "updated_at": "2026-02-27T02:56:06Z", "closed_at": "2026-02-27T02:56:06Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-0vvo1", "title": "[Go Idiom] Remove panic in MustGetTownName", "description": "workspace/find.go:155-158 uses panic in MustGetTownName(). Panics in library code are an anti-pattern - they make error handling impossible for callers. Either:\n1. Remove the Must* variant entirely (callers use GetTownName with proper error handling)\n2. If convenience function needed, return empty string on error with logging\n\nCurrent usage should be audited to ensure callers can handle errors gracefully.", "status": "closed", "priority": 4, "issue_type": "task", "created_at": "2026-01-05T07:48:06Z", "created_by": "gastown/polecats/fury", "updated_at": "2026-02-27T02:55:37Z", "closed_at": "2026-02-27T02:55:37Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-nqq5k", "title": "[Refactor] Extract bd command wrapper package", "description": "Multiple exec.Command(\"bd\", ...) calls scattered across rig/manager.go and crew/manager.go:\n\n- rig/manager.go: bd init (x2), bd migrate, bd mol seed, bd list, bd create\n- crew/manager.go: bd sync\n\nShould create internal/bdclient package with typed methods:\n  bdclient.Init(dir, prefix string) error\n  bdclient.Sync(dir string) error\n  bdclient.Create(dir string, opts CreateOpts) error\n\nBenefits: consistent error handling, easier testing/mocking, single place for bd interaction patterns.", "status": "closed", "priority": 4, "issue_type": "task", "created_at": "2026-01-05T07:47:55Z", "created_by": "gastown/polecats/fury", "updated_at": "2026-02-27T02:55:37Z", "closed_at": "2026-02-27T02:55:37Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-miwvn", "title": "Review: Consider extracting Agent base struct", "description": "Both Witness and Refinery structs share common fields:\n- RigName string\n- State State  \n- PID int\n- StartedAt *time.Time\n\nConsider embedding a common AgentBase:\n```go\ntype AgentBase struct {\n    RigName   string\n    State     State\n    PID       int\n    StartedAt *time.Time\n}\n\ntype Witness struct {\n    AgentBase\n    MonitoredPolecats []string\n    Config            WitnessConfig\n    ...\n}\n```\n\nLower priority since the duplication is small.", "status": "closed", "priority": 4, "issue_type": "task", "created_at": "2026-01-05T07:46:19Z", "created_by": "gastown/polecats/buzzard", "updated_at": "2026-02-27T02:55:36Z", "closed_at": "2026-02-27T02:55:36Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-ocjdi", "title": "gt crew add: CLAUDE.md customization leaves git dirty", "description": "When gt crew add generates a customized CLAUDE.md for crew workers, it differs from the repo version (Crew Worker Context vs Polecat Context, personalized footer). This leaves the git state 'dirty'.\n\nOptions:\n1. Add CLAUDE.md to .gitignore in crew workspaces\n2. Auto-commit the customized CLAUDE.md locally  \n3. Store crew CLAUDE.md content elsewhere (e.g., .claude/CLAUDE.md)\n\nCurrent behavior is functional but 'gt crew list' shows 'Git: dirty' for new crew.\n\nFound during: adding crew workers grip, fang, wolf", "status": "closed", "priority": 4, "issue_type": "task", "created_at": "2025-12-29T21:03:53Z", "created_by": "gastown/crew/max", "updated_at": "2026-02-27T02:55:19Z", "closed_at": "2026-02-27T02:55:19Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-dfeho", "title": "P4: Graceful degradation without tmux", "description": "Low-priority: Add graceful degradation for environments without tmux.\n\nCurrent state: Patrol formulas use tmux capture-pane for observing agent state.\n\ntmux-independent alternatives (degraded mode):\n1. Tail Claude Code session logs if available\n2. Rely solely on agent bead state (less real-time)\n3. Use claude --output-file and tail that\n4. IPC mechanisms (named pipes, sockets)\n\nNOT launch-blocking. By summer 2025, Claude Code is expected to add signaling and reflection features that will obviate tmux scraping.\n\nFor now:\n- Keep tmux as primary observation mechanism\n- Document the tmux dependency\n- Add --no-tmux flag that falls back to bead-only observation\n\nThis is P4 backlog - address after liftoff.", "status": "closed", "priority": 4, "issue_type": "task", "created_at": "2025-12-28T06:02:33Z", "created_by": "mayor", "updated_at": "2026-02-27T02:55:18Z", "closed_at": "2026-02-27T02:55:18Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-4d98p", "title": "Improve looksLikeFormulaName heuristic in mol_bond", "description": "The looksLikeFormulaName() function in mol_bond.go uses simple heuristics that could have edge cases:\n\nCurrent checks:\n- starts with 'mol-'\n- contains '.formula'\n- contains path separators\n\nPotential improvements:\n- Check if operand matches issue ID format (prefix-hash pattern)\n- Consider formula search paths when determining if something could be a formula\n- Add --formula flag to explicitly mark an operand as a formula name\n\nLow priority since edge cases are rare in practice.", "status": "closed", "priority": 4, "issue_type": "task", "created_at": "2025-12-26T00:50:57Z", "updated_at": "2026-02-27T02:55:16Z", "closed_at": "2026-02-27T02:55:16Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-gpgdv", "title": "Optimize: Share stepMap across control flow operators", "description": "In ApplyControlFlow, both ApplyBranches and ApplyGates call buildStepMap() separately:\n\n```go\nfunc ApplyBranches(steps []*Step, compose *ComposeRules) ([]*Step, error) {\n    stepMap := buildStepMap(steps)  // Called here\n    ...\n}\n\nfunc ApplyGates(steps []*Step, compose *ComposeRules) ([]*Step, error) {\n    stepMap := buildStepMap(steps)  // Called again here\n    ...\n}\n```\n\nThis is inefficient for large formulas. Options:\n\n1. Pass stepMap as a parameter to ApplyBranches/ApplyGates\n2. Create an internal version that accepts stepMap, keep public API unchanged\n3. Build once in ApplyControlFlow and pass down\n\nLow priority since formula sizes are typically small.", "status": "closed", "priority": 4, "issue_type": "chore", "created_at": "2025-12-25T23:14:11Z", "updated_at": "2026-02-27T02:55:16Z", "closed_at": "2026-02-27T02:55:16Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-e3ya", "title": "Remove redundant gt prime SendKeys from crew commands", "description": "The crew commands (gt crew at, gt crew restart) still send 'gt prime' via SendKeys after session creation:\n- internal/cmd/crew_at.go:97, 121\n- internal/cmd/crew_lifecycle.go:202\n\nThis is now redundant because SessionStart hook handles priming automatically.\n\n**Low priority** - these aren't causing bugs (just duplicate work), unlike the spawn race condition that was fixed. Can be cleaned up when convenient.", "status": "closed", "priority": 4, "issue_type": "task", "created_at": "2025-12-23T02:00:06Z", "updated_at": "2026-02-27T02:54:55Z", "closed_at": "2026-02-27T02:54:55Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-vg4n", "title": "Use Beads issue status as spawn source of truth", "description": "Currently witness tracks spawned issues in .gastown/witness.json to prevent re-spawning:\n\n{\"spawned_issues\": [\"gt-abc1\", \"gt-def2\", ...]}\n\nThis is redundant with Beads issue status (in_progress). The witness could query:\n  bd list --status=in_progress\n\nThe local list serves as a performance cache to avoid querying beads every cycle. Consider:\n1. Use Beads as source of truth\n2. Keep local cache with TTL\n3. Sync cache on witness start\n\nThis simplifies state management and ensures consistency.", "status": "closed", "priority": 4, "issue_type": "task", "created_at": "2025-12-22T06:07:32Z", "updated_at": "2026-02-27T02:54:55Z", "closed_at": "2026-02-27T02:54:55Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-tubn", "title": "Track operational stats as entity/audit beads", "description": "Witness and refinery track operational stats in JSON files:\n- total_merged, today_merged, total_failed (refinery)\n- total_checks, total_nudges, total_escalations (witness)\n\nFor HOP entity CV tracking, these could become:\n- type=audit beads (daily roll-ups of operational metrics)\n- Entity chain entries showing validator activity\n\nThis provides observability and contributes to entity reputation tracking (e.g., refinery X has merged 500 PRs with 2% failure rate).\n\nNot critical for launch but aligns with HOP Platform of Platforms vision.", "status": "closed", "priority": 4, "issue_type": "feature", "created_at": "2025-12-22T06:07:30Z", "updated_at": "2026-02-27T02:54:54Z", "closed_at": "2026-02-27T02:54:54Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-hcsz", "title": "Track merge requests as beads (type=merge-request)", "description": "Currently MRs are tracked in .gastown/refinery.json. For HOP audit trail and entity CV tracking, merge requests should be Beads entries with type=merge-request. This enables:\n- Full audit trail of what was merged, when, by whom\n- Entity chain contributions (who validated what)\n- Cross-rig visibility of merge activity\n\nThe refinery would create an MR bead when work enters the queue, update status as it progresses (open → in_progress → merged/rejected).\n\nPart of Beads-as-data-plane vision from HOP.", "status": "closed", "priority": 4, "issue_type": "feature", "created_at": "2025-12-22T06:07:29Z", "updated_at": "2026-02-27T02:54:45Z", "closed_at": "2026-02-27T02:54:45Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-qh2", "title": "Session cycling UX: smooth transitions via TUI wrapper", "description": "## Problem\n\nCurrent CLI agent session cycling is painful:\n- Shell → CC starts → priming → context loads → ready → work → exit/crash → repeat\n- Each cycle is 30-60 seconds of cold boot\n- No continuity between shell and agent's inner state\n- Raw \"session not running, starting...\" loop is the baseline\n\n## GGT Advantages (already have)\n\n- Beads: Work state survives session death completely\n- Mail: Handoff notes from past-self to future-self  \n- Prime commands: Structured context reload\n\n## Gap: Transition Mechanics\n\nIdeas to explore when actively using CLI:\n\n1. **In-band cycling** - `/restart` or `/cycle` command, agent handles own restart without dropping to shell\n\n2. **Hot standby** - TUI maintains pre-warmed session in background, switch to already-primed agent\n\n3. **Persistent wrapper** - Bubbletea TUI stays running across session cycles, CC sessions come/go inside it\n\n4. **Session pooling** - Keep 2-3 primed sessions ready, never wait for cold start\n\n## Deferred\n\nDeliberately P4 until we're actively using the simpler CLI and feel the pain firsthand.", "status": "closed", "priority": 4, "issue_type": "task", "created_at": "2025-12-16T04:38:13Z", "updated_at": "2026-02-27T02:54:41Z", "closed_at": "2026-02-27T02:54:41Z", "close_reason": "Stale backlog — shipped, superseded, or no longer relevant (Clown Show #21)", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-gastown-polecat-valkyrie", "title": "gt-gastown-polecat-valkyrie", "description": "gt-gastown-polecat-valkyrie\n\nrole_type: polecat\nrig: gastown\nagent_state: nuked\nhook_bead: null\ncleanup_status: null\nactive_mr: null\nnotification_level: null", "status": "open", "priority": 2, "issue_type": "agent", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-28T02:53:00Z", "created_by": "mayor", "updated_at": "2026-02-28T03:04:51Z", "labels": ["gt:agent"], "ephemeral": true, "agent_state": "done", "last_activity": "2026-02-28T03:03:31Z", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-wisp-034tx", "title": "Burn and respawn or loop", "description": "End of patrol cycle decision.\n\n**Step 1: Estimate remaining context**\n\nAsk yourself:\n- Have I processed many branches this cycle?\n- Is the conversation getting long?\n- Am I starting to lose track of earlier context?\n\nRule of thumb: If you've done 3+ merges or processed significant cleanup work,\nit's time for a fresh session.\n\n**Step 2: Decision tree**\n\nIf queue non-empty AND context LOW:\n- Squash this wisp to digest\n- Spawn fresh patrol wisp\n- Return to inbox-check\n\nIf queue empty OR context HIGH OR good stopping point:\n- Squash wisp with summary digest\n- Use `gt handoff` for clean session transition:\n\n```bash\ngt handoff -s \"Patrol complete\" -m \"Merged X branches, Y tests passed.\nQueue: empty/N remaining\nNext: [any notes for successor]\"\n```\n\n**Why gt handoff?**\n- Sends handoff mail to yourself with context\n- Respawns with fresh Claude instance\n- SessionStart hook runs gt prime\n- Successor picks up from your hook\n\n**DO NOT just exit.** Always use `gt handoff` for proper lifecycle.", "status": "open", "priority": 2, "issue_type": "task", "created_at": "2026-02-28T03:00:55Z", "updated_at": "2026-02-28T03:00:55Z", "dependencies": [{"issue_id": "gt-wisp-034tx", "depends_on_id": "gt-wisp-8r5es", "type": "blocks", "created_at": "2026-02-27T19:00:55Z", "created_by": "refinery", "metadata": "{}"}, {"issue_id": "gt-wisp-034tx", "depends_on_id": "gt-wisp-ybyhe", "type": "parent-child", "created_at": "2026-02-27T19:00:55Z", "created_by": "refinery", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-ybyhe"}
{"id": "gt-wisp-03rto", "title": "Check for more work", "description": "More branches to process?\n\n**Entry paths:**\n- Normal: After successful merge-push\n- Conflict-skip: After process-branch created conflict-resolution task\n\nIf yes: Return to process-branch with next branch.\nIf no: Continue to generate-summary.\n\n**Track for this cycle:**\n- branches_merged: count and names of successfully merged branches\n- branches_conflict: count and names of branches skipped due to conflicts\n- conflict_tasks: IDs of conflict-resolution tasks created\n\nThis tracking feeds into generate-summary for the patrol digest.", "status": "open", "priority": 2, "issue_type": "task", "created_at": "2026-02-28T03:19:24Z", "updated_at": "2026-02-28T03:19:24Z", "dependencies": [{"issue_id": "gt-wisp-03rto", "depends_on_id": "gt-wisp-2qln1", "type": "blocks", "created_at": "2026-02-27T19:19:24Z", "created_by": "refinery", "metadata": "{}"}, {"issue_id": "gt-wisp-03rto", "depends_on_id": "gt-wisp-gt024", "type": "parent-child", "created_at": "2026-02-27T19:19:24Z", "created_by": "refinery", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-gt024"}
{"id": "gt-wisp-0ap91", "title": "mol-polecat-work", "description": "Full polecat work lifecycle from assignment through completion.\n\nThis molecule guides a polecat through a complete work assignment. Each step\nhas clear entry/exit criteria and specific commands to run. A polecat can\ncrash after any step and resume from the last completed step.\n\n## Polecat Contract (Self-Cleaning Model)\n\nYou are a self-cleaning worker. You:\n1. Receive work via your hook (pinned molecule + issue)\n2. Work through molecule steps using `bd ready` / `bd close <step>`\n3. Complete and self-clean via `gt done` (submit + nuke yourself)\n4. You are GONE - Refinery merges from MQ\n\n**Self-cleaning:** When you run `gt done`, you push your work, submit to MQ,\nnuke your sandbox, and exit. There is no idle state. Done means gone.\n\n**Important:** This formula defines the template. Your molecule already has step\nbeads created from it. Use `bd ready` to find them - do NOT read this file directly.\n\n**You do NOT:**\n- Push directly to main (Refinery merges from MQ)\n- Close your own issue (Refinery closes after merge)\n- Wait for merge (you're gone after `gt done`)\n- Handle rebase conflicts (Refinery spawns fresh polecats for that)\n\n## Variables\n\n| Variable | Source | Description |\n|----------|--------|-------------|\n| issue | hook_bead | The issue ID you're assigned to work on |\n\n## Failure Modes\n\n| Situation | Action |\n|-----------|--------|\n| Tests fail | Fix them. Do not proceed with failures. |\n| Blocked on external | Mail Witness for help, mark yourself stuck |\n| Context filling | Use gt handoff to cycle to fresh session |\n| Unsure what to do | Mail Witness, don't guess |", "status": "closed", "priority": 2, "issue_type": "epic", "created_at": "2026-02-28T02:53:06Z", "updated_at": "2026-02-28T03:04:48Z", "closed_at": "2026-02-28T03:04:48Z", "close_reason": "burned: polecat nuked", "ephemeral": true, "dependency_count": 0, "dependent_count": 1, "comment_count": 0}
{"id": "gt-wisp-0ifrl", "title": "Scan merge queue", "description": "Check the beads merge queue - this is the SOURCE OF TRUTH for pending merges.\n\n```bash\ngit fetch --prune origin\ngt mq list <rig>\n```\n\nThe beads MQ tracks all pending merge requests. Do NOT rely on `git branch -r | grep polecat`\nas branches may exist without MR beads, or MR beads may exist for already-merged work.\n\nIf queue empty, skip to context-check step.\n\nFor each MR in the queue, verify the branch still exists:\n```bash\ngit branch -r | grep <branch>\n```\n\nIf branch doesn't exist for a queued MR:\n- Close the MR bead: `bd close <mr-id> --reason \"Branch no longer exists\"`\n- Remove from processing queue\n\nTrack verified MR list for this cycle.", "status": "open", "priority": 2, "issue_type": "task", "created_at": "2026-02-28T03:18:49Z", "updated_at": "2026-02-28T03:18:49Z", "dependencies": [{"issue_id": "gt-wisp-0ifrl", "depends_on_id": "gt-wisp-8wpns", "type": "blocks", "created_at": "2026-02-27T19:18:49Z", "created_by": "refinery", "metadata": "{}"}, {"issue_id": "gt-wisp-0ifrl", "depends_on_id": "gt-wisp-iwq01", "type": "parent-child", "created_at": "2026-02-27T19:18:49Z", "created_by": "refinery", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-iwq01"}
{"id": "gt-wisp-0md58", "title": "Check own context limit", "description": "Check own context usage.\n\nIf context is HIGH (>80%):\n- Write handoff summary\n- Prepare for burn/respawn\n\nIf context is LOW:\n- Can continue processing", "status": "open", "priority": 2, "issue_type": "task", "created_at": "2026-02-28T03:19:06Z", "updated_at": "2026-02-28T03:19:06Z", "dependencies": [{"issue_id": "gt-wisp-0md58", "depends_on_id": "gt-wisp-lamkm", "type": "parent-child", "created_at": "2026-02-27T19:19:06Z", "created_by": "refinery", "metadata": "{}"}, {"issue_id": "gt-wisp-0md58", "depends_on_id": "gt-wisp-yuozm", "type": "blocks", "created_at": "2026-02-27T19:19:06Z", "created_by": "refinery", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-lamkm"}
{"id": "gt-wisp-0mw60", "title": "mol-polecat-work", "description": "Full polecat work lifecycle from assignment through completion.\n\nThis molecule guides a polecat through a complete work assignment. Each step\nhas clear entry/exit criteria and specific commands to run. A polecat can\ncrash after any step and resume from the last completed step.\n\n## Polecat Contract (Self-Cleaning Model)\n\nYou are a self-cleaning worker. You:\n1. Receive work via your hook (pinned molecule + issue)\n2. Work through molecule steps using `bd ready` / `bd close <step>`\n3. Complete and self-clean via `gt done` (submit + nuke yourself)\n4. You are GONE - Refinery merges from MQ\n\n**Self-cleaning:** When you run `gt done`, you push your work, submit to MQ,\nnuke your sandbox, and exit. There is no idle state. Done means gone.\n\n**Important:** This formula defines the template. Your molecule already has step\nbeads created from it. Use `bd ready` to find them - do NOT read this file directly.\n\n**You do NOT:**\n- Push directly to main (Refinery merges from MQ)\n- Close your own issue (Refinery closes after merge)\n- Wait for merge (you're gone after `gt done`)\n- Handle rebase conflicts (Refinery spawns fresh polecats for that)\n\n## Variables\n\n| Variable | Source | Description |\n|----------|--------|-------------|\n| issue | hook_bead | The issue ID you're assigned to work on |\n\n## Failure Modes\n\n| Situation | Action |\n|-----------|--------|\n| Tests fail | Fix them. Do not proceed with failures. |\n| Blocked on external | Mail Witness for help, mark yourself stuck |\n| Context filling | Use gt handoff to cycle to fresh session |\n| Unsure what to do | Mail Witness, don't guess |", "status": "closed", "priority": 2, "issue_type": "epic", "created_at": "2026-02-28T02:52:14Z", "updated_at": "2026-02-28T03:02:51Z", "closed_at": "2026-02-28T03:02:51Z", "close_reason": "burned: force re-sling", "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-wisp-0nnb2", "title": "Burn and respawn or loop", "description": "End of patrol cycle decision.\n\n**Step 1: Estimate remaining context**\n\nAsk yourself:\n- Have I processed many branches this cycle?\n- Is the conversation getting long?\n- Am I starting to lose track of earlier context?\n\nRule of thumb: If you've done 3+ merges or processed significant cleanup work,\nit's time for a fresh session.\n\n**Step 2: Decision tree**\n\nIf queue non-empty AND context LOW:\n- Squash this wisp to digest\n- Spawn fresh patrol wisp\n- Return to inbox-check\n\nIf queue empty OR context HIGH OR good stopping point:\n- Squash wisp with summary digest\n- Use `gt handoff` for clean session transition:\n\n```bash\ngt handoff -s \"Patrol complete\" -m \"Merged X branches, Y tests passed.\nQueue: empty/N remaining\nNext: [any notes for successor]\"\n```\n\n**Why gt handoff?**\n- Sends handoff mail to yourself with context\n- Respawns with fresh Claude instance\n- SessionStart hook runs gt prime\n- Successor picks up from your hook\n\n**DO NOT just exit.** Always use `gt handoff` for proper lifecycle.", "status": "open", "priority": 2, "issue_type": "task", "created_at": "2026-02-28T03:00:29Z", "updated_at": "2026-02-28T03:00:29Z", "dependencies": [{"issue_id": "gt-wisp-0nnb2", "depends_on_id": "gt-wisp-76pw5", "type": "parent-child", "created_at": "2026-02-27T19:00:29Z", "created_by": "refinery", "metadata": "{}"}, {"issue_id": "gt-wisp-0nnb2", "depends_on_id": "gt-wisp-88mou", "type": "blocks", "created_at": "2026-02-27T19:00:29Z", "created_by": "refinery", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-76pw5"}
{"id": "gt-wisp-0q360", "title": "Handle test failures", "description": "**VERIFICATION GATE**: This step enforces the Beads Promise.\n\nIf tests PASSED: This step auto-completes. Proceed to merge.\n\nIf tests FAILED:\n1. Diagnose: Is this a branch regression or pre-existing on main?\n2. If branch caused it:\n   - Abort merge\n   - Notify polecat: \"Tests failing. Please fix and resubmit.\"\n   - Skip to loop-check\n3. If pre-existing on main:\n   - File a bead: bd create --type=bug --priority=1 --title=\"...\"\n   - FORBIDDEN: Writing code to fix test failures. You merge branches, you do not develop.\n   - Proceed with the merge if the failure is pre-existing (not caused by the branch).\n\n**GATE REQUIREMENT**: You CANNOT proceed to merge-push without:\n- Tests passing, OR\n- Bead filed for the pre-existing failure\n\nFORBIDDEN: Writing application code, exploring polecat implementations, or\nre-implementing fixes. You are a mechanical merge processor.\n\nThis is non-negotiable. Never disavow. Never \"note and proceed.\" ", "status": "open", "priority": 2, "issue_type": "task", "created_at": "2026-02-28T03:00:55Z", "updated_at": "2026-02-28T03:00:55Z", "dependencies": [{"issue_id": "gt-wisp-0q360", "depends_on_id": "gt-wisp-b56tw", "type": "blocks", "created_at": "2026-02-27T19:00:55Z", "created_by": "refinery", "metadata": "{}"}, {"issue_id": "gt-wisp-0q360", "depends_on_id": "gt-wisp-ybyhe", "type": "parent-child", "created_at": "2026-02-27T19:00:55Z", "created_by": "refinery", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-ybyhe"}
{"id": "gt-wisp-0scln", "title": "mol-polecat-work", "description": "Full polecat work lifecycle from assignment through completion.\n\nThis molecule guides a polecat through a complete work assignment. Each step\nhas clear entry/exit criteria and specific commands to run. A polecat can\ncrash after any step and resume from the last completed step.\n\n## Polecat Contract (Self-Cleaning Model)\n\nYou are a self-cleaning worker. You:\n1. Receive work via your hook (pinned molecule + issue)\n2. Work through molecule steps using `bd ready` / `bd close <step>`\n3. Complete and self-clean via `gt done` (submit + nuke yourself)\n4. You are GONE - Refinery merges from MQ\n\n**Self-cleaning:** When you run `gt done`, you push your work, submit to MQ,\nnuke your sandbox, and exit. There is no idle state. Done means gone.\n\n**Important:** This formula defines the template. Your molecule already has step\nbeads created from it. Use `bd ready` to find them - do NOT read this file directly.\n\n**You do NOT:**\n- Push directly to main (Refinery merges from MQ)\n- Close your own issue (Refinery closes after merge)\n- Wait for merge (you're gone after `gt done`)\n- Handle rebase conflicts (Refinery spawns fresh polecats for that)\n\n## Variables\n\n| Variable | Source | Description |\n|----------|--------|-------------|\n| issue | hook_bead | The issue ID you're assigned to work on |\n\n## Failure Modes\n\n| Situation | Action |\n|-----------|--------|\n| Tests fail | Fix them. Do not proceed with failures. |\n| Blocked on external | Mail Witness for help, mark yourself stuck |\n| Context filling | Use gt handoff to cycle to fresh session |\n| Unsure what to do | Mail Witness, don't guess |", "status": "closed", "priority": 2, "issue_type": "epic", "created_at": "2026-02-28T03:03:25Z", "updated_at": "2026-02-28T03:18:48Z", "closed_at": "2026-02-28T03:18:48Z", "close_reason": "burned: force re-sling", "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-wisp-0sob8", "title": "Mechanical rebase", "description": "Pick next branch from queue. Attempt mechanical rebase on current main.\n\n**Step 1: Checkout and attempt rebase**\n```bash\ngit checkout -b temp origin/<polecat-branch>\ngit rebase origin/main\n```\n\n**Step 2: Check rebase result**\n\nThe rebase exits with:\n- Exit code 0: Success - proceed to run-tests\n- Exit code 1 (conflicts): Conflict detected - proceed to Step 3\n\nTo detect conflict state after rebase fails:\n```bash\n# Check if we're in a conflicted rebase state\nls .git/rebase-merge 2>/dev/null && echo \"CONFLICT_STATE\"\n```\n\n**Step 3: Handle conflicts (if any)**\n\nIf rebase SUCCEEDED (exit code 0):\n- Skip to run-tests step (continue normal merge flow)\n\nIf rebase FAILED with conflicts:\n\n1. **Abort the rebase** (DO NOT leave repo in conflicted state):\n```bash\ngit rebase --abort\n```\n\n2. **Record conflict metadata**:\n```bash\n# Capture main SHA for reference\nMAIN_SHA=$(git rev-parse origin/main)\nBRANCH_SHA=$(git rev-parse origin/<polecat-branch>)\n```\n\n3. **Create conflict-resolution task**:\n```bash\nbd create --type=task --priority=1 --title=\"Resolve merge conflicts: <original-issue-title>\" --description=\"## Conflict Resolution Required\n\nOriginal MR: <mr-bead-id>\nBranch: <polecat-branch>\nOriginal Issue: <issue-id>\nConflict with main at: ${MAIN_SHA}\nBranch SHA: ${BRANCH_SHA}\n\n## Instructions\n1. Clone/checkout the branch\n2. Rebase on current main: git rebase origin/main\n3. Resolve conflicts\n4. Force push: git push -f origin <branch>\n5. Close this task when done\n\nThe MR will be re-queued for processing after conflicts are resolved.\"\n```\n\n4. **Skip this MR** (do NOT delete branch or close MR bead):\n- Leave branch intact for conflict resolution\n- Leave MR bead open (will be re-processed after resolution)\n- Continue to loop-check for next branch\n\n**CRITICAL**: Never delete a branch that has conflicts. The branch contains\nthe original work and must be preserved for conflict resolution.\n\nTrack: rebase result (success/conflict), conflict task ID if created.", "status": "open", "priority": 2, "issue_type": "task", "created_at": "2026-02-28T03:19:24Z", "updated_at": "2026-02-28T03:19:24Z", "dependencies": [{"issue_id": "gt-wisp-0sob8", "depends_on_id": "gt-wisp-gt024", "type": "parent-child", "created_at": "2026-02-27T19:19:24Z", "created_by": "refinery", "metadata": "{}"}, {"issue_id": "gt-wisp-0sob8", "depends_on_id": "gt-wisp-pc42n", "type": "blocks", "created_at": "2026-02-27T19:19:24Z", "created_by": "refinery", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-gt024"}
{"id": "gt-wisp-0w110", "title": "Check for more work", "description": "More branches to process?\n\n**Entry paths:**\n- Normal: After successful merge-push\n- Conflict-skip: After process-branch created conflict-resolution task\n\nIf yes: Return to process-branch with next branch.\nIf no: Continue to generate-summary.\n\n**Track for this cycle:**\n- branches_merged: count and names of successfully merged branches\n- branches_conflict: count and names of branches skipped due to conflicts\n- conflict_tasks: IDs of conflict-resolution tasks created\n\nThis tracking feeds into generate-summary for the patrol digest.", "status": "open", "priority": 2, "issue_type": "task", "created_at": "2026-02-28T03:19:06Z", "updated_at": "2026-02-28T03:19:06Z", "dependencies": [{"issue_id": "gt-wisp-0w110", "depends_on_id": "gt-wisp-lamkm", "type": "parent-child", "created_at": "2026-02-27T19:19:06Z", "created_by": "refinery", "metadata": "{}"}, {"issue_id": "gt-wisp-0w110", "depends_on_id": "gt-wisp-yctcs", "type": "blocks", "created_at": "2026-02-27T19:19:06Z", "created_by": "refinery", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-lamkm"}
{"id": "gt-wisp-0wdlo", "title": "Generate handoff summary", "description": "Summarize this patrol cycle.\n\n**VERIFICATION**: Before generating summary, confirm for each merged branch:\n- [ ] MERGED mail was sent to witness\n- [ ] MR bead was closed\n- [ ] MERGE_READY mail archived\n\nIf any notifications or archiving were missed, do them now!\n\nInclude in summary:\n- Branches merged (count, names)\n- MERGED mails sent (count - should match branches merged)\n- MR beads closed (count - should match branches merged)\n- MERGE_READY mails archived (count - should match branches merged)\n- Test results (pass/fail)\n- Branches with conflicts (count, names)\n- Conflict-resolution tasks created (IDs)\n- Issues filed (if any)\n- Any escalations sent\n\n**Conflict tracking is important** for monitoring MQ health. If many branches\nconflict, it may indicate main is moving too fast or branches are too stale.\n\nThis becomes the digest when the patrol is squashed.", "status": "open", "priority": 2, "issue_type": "task", "created_at": "2026-02-28T03:00:29Z", "updated_at": "2026-02-28T03:00:29Z", "dependencies": [{"issue_id": "gt-wisp-0wdlo", "depends_on_id": "gt-wisp-76pw5", "type": "parent-child", "created_at": "2026-02-27T19:00:29Z", "created_by": "refinery", "metadata": "{}"}, {"issue_id": "gt-wisp-0wdlo", "depends_on_id": "gt-wisp-wps27", "type": "blocks", "created_at": "2026-02-27T19:00:29Z", "created_by": "refinery", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-76pw5"}
{"id": "gt-wisp-0wzfx", "title": "rebuild-gt: build succeeded", "description": "Rebuilt gt binary:  → ", "status": "open", "priority": 2, "issue_type": "chore", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-28T02:45:25Z", "created_by": "dog", "updated_at": "2026-02-28T02:45:25Z", "labels": ["plugin:rebuild-gt", "result:success", "rig:gastown", "type:plugin-run"], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-wisp-0z7eh", "title": "Check own context limit", "description": "Check own context usage.\n\nIf context is HIGH (>80%):\n- Write handoff summary\n- Prepare for burn/respawn\n\nIf context is LOW:\n- Can continue processing", "status": "open", "priority": 2, "issue_type": "task", "created_at": "2026-02-28T03:49:11Z", "updated_at": "2026-02-28T03:49:11Z", "dependencies": [{"issue_id": "gt-wisp-0z7eh", "depends_on_id": "gt-wisp-kxctl", "type": "blocks", "created_at": "2026-02-27T19:49:11Z", "created_by": "refinery", "metadata": "{}"}, {"issue_id": "gt-wisp-0z7eh", "depends_on_id": "gt-wisp-s2vyx", "type": "parent-child", "created_at": "2026-02-27T19:49:11Z", "created_by": "refinery", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-s2vyx"}
{"id": "gt-wisp-1bmva", "title": "Merge: gt-w0br", "description": "branch: polecat/nux/gt-w0br@mm5n4urn\ntarget: main\nsource_issue: gt-w0br\nrig: gastown\nworker: nux\nagent_bead: gt-gastown-polecat-nux\nretry_count: 0\nlast_conflict_sha: null\nconflict_task_id: null", "status": "closed", "priority": 1, "issue_type": "task", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-28T01:37:36Z", "created_by": "gastown/polecats/nux", "updated_at": "2026-02-28T01:42:27Z", "closed_at": "2026-02-28T01:42:27Z", "close_reason": "Branch polecat/nux/gt-w0br@mm5n4urn no longer exists (polecat re-sessioned, current branch has no unique commits)", "labels": ["gt:merge-request"], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-wisp-1dx0k", "title": "Implement the solution", "description": "Do the actual implementation work.\n\n**Working principles:**\n- Follow existing codebase conventions\n- Make atomic, focused commits\n- Keep changes scoped to the assigned issue\n- Don't gold-plate or scope-creep\n\n**Commit frequently:**\n```bash\n# After each logical unit of work:\ngit add <files>\ngit commit -m \"<type>: <description> (gt-y8x4)\"\n```\n\nCommit types: feat, fix, refactor, test, docs, chore\n\n**Discovered work:**\nIf you find bugs or improvements outside your scope:\n```bash\nbd create --title \"Found: <description>\" --type bug --priority 2\n# Note the ID, continue with your work\n```\n\nDo NOT fix unrelated issues in this branch.\n\n**If stuck:**\nDon't spin for more than 15 minutes. Mail Witness:\n```bash\ngt mail send <rig>/witness -s \"HELP: Stuck on implementation\" -m \"Issue: gt-y8x4\nTrying to: <what you're attempting>\nProblem: <what's blocking you>\nTried: <what you've attempted>\"\n```\n\n**Exit criteria:** Implementation complete, all changes committed.", "status": "closed", "priority": 2, "issue_type": "task", "assignee": "gastown/polecats/furiosa", "created_at": "2026-02-28T02:42:12Z", "updated_at": "2026-02-28T02:46:44Z", "closed_at": "2026-02-28T02:46:44Z", "close_reason": "Closed", "dependencies": [{"issue_id": "gt-wisp-1dx0k", "depends_on_id": "gt-wisp-2vlrx", "type": "parent-child", "created_at": "2026-02-27T18:42:12Z", "created_by": "mayor", "metadata": "{}"}, {"issue_id": "gt-wisp-1dx0k", "depends_on_id": "gt-wisp-xplya", "type": "blocks", "created_at": "2026-02-27T18:42:12Z", "created_by": "mayor", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-2vlrx"}
{"id": "gt-wisp-1r5at", "title": "Merge and push to main", "description": "Merge to main and push. CRITICAL: Notifications come IMMEDIATELY after push.\n\n**Step 1: Merge and Push**\n```bash\ngit checkout main\ngit merge --ff-only temp\ngit push origin main\n```\n\n⚠️ **STOP HERE - DO NOT PROCEED UNTIL STEPS 2-3 COMPLETE**\n\n**Step 2: Send MERGED Notification (REQUIRED - DO THIS IMMEDIATELY)**\n\nRIGHT NOW, before any cleanup, send MERGED mail to Witness:\n\n```bash\ngt mail send <rig>/witness -s \"MERGED <polecat-name>\" -m \"Branch: <branch>\nIssue: <issue-id>\nMerged-At: $(date -u +%Y-%m-%dT%H:%M:%SZ)\"\n```\n\nThis signals the Witness to nuke the polecat worktree. WITHOUT THIS NOTIFICATION,\nPOLECAT WORKTREES ACCUMULATE INDEFINITELY AND THE LIFECYCLE BREAKS.\n\n**Step 3: Close MR Bead (REQUIRED - DO THIS IMMEDIATELY)**\n\n⚠️ **VERIFICATION BEFORE CLOSING**: Confirm the work is actually on main:\n```bash\n# Get the commit message/issue from the branch\ngit log origin/main --oneline | grep \"<issue-id>\"\n# OR verify the commit SHA is on main:\ngit branch --contains <commit-sha> | grep main\n```\n\nIf work is NOT on main, DO NOT close the MR bead. Investigate first.\n\n```bash\nbd close <mr-bead-id> --reason \"Merged to main at $(git rev-parse --short HEAD)\"\n```\n\nThe MR bead ID was in the MERGE_READY message or find via:\n```bash\nbd list --type=merge-request --status=open | grep <polecat-name>\n```\n\n**VALIDATION**: The MR bead's source_issue should be a valid bead ID (gt-xxxxx),\nnot a branch name. If source_issue contains a branch name, flag for investigation.\n\n**Step 4: Archive the MERGE_READY mail (REQUIRED)**\n```bash\ngt mail archive <merge-ready-message-id>\n```\nThe message ID was tracked when you processed inbox-check.\n\n**Step 5: Cleanup (only after Steps 2-4 confirmed)**\n```bash\ngit branch -d temp\ngit push origin --delete <polecat-branch>\n```\n\n**VERIFICATION GATE**: You CANNOT proceed to loop-check without:\n- [x] MERGED mail sent to witness\n- [x] MR bead closed\n- [x] MERGE_READY mail archived\n\nIf you skipped notifications or archiving, GO BACK AND DO THEM NOW.\n\nMain has moved. Any remaining branches need rebasing on new baseline.", "status": "open", "priority": 2, "issue_type": "task", "created_at": "2026-02-28T03:49:11Z", "updated_at": "2026-02-28T03:49:11Z", "dependencies": [{"issue_id": "gt-wisp-1r5at", "depends_on_id": "gt-wisp-gtgp7", "type": "blocks", "created_at": "2026-02-27T19:49:11Z", "created_by": "refinery", "metadata": "{}"}, {"issue_id": "gt-wisp-1r5at", "depends_on_id": "gt-wisp-s2vyx", "type": "parent-child", "created_at": "2026-02-27T19:49:11Z", "created_by": "refinery", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-s2vyx"}
{"id": "gt-wisp-1t0wj", "title": "Burn and respawn or loop", "description": "End of patrol cycle decision.\n\n**Step 1: Estimate remaining context**\n\nAsk yourself:\n- Have I processed many branches this cycle?\n- Is the conversation getting long?\n- Am I starting to lose track of earlier context?\n\nRule of thumb: If you've done 3+ merges or processed significant cleanup work,\nit's time for a fresh session.\n\n**Step 2: Decision tree**\n\nIf queue non-empty AND context LOW:\n- Squash this wisp to digest\n- Spawn fresh patrol wisp\n- Return to inbox-check\n\nIf queue empty OR context HIGH OR good stopping point:\n- Squash wisp with summary digest\n- Use `gt handoff` for clean session transition:\n\n```bash\ngt handoff -s \"Patrol complete\" -m \"Merged X branches, Y tests passed.\nQueue: empty/N remaining\nNext: [any notes for successor]\"\n```\n\n**Why gt handoff?**\n- Sends handoff mail to yourself with context\n- Respawns with fresh Claude instance\n- SessionStart hook runs gt prime\n- Successor picks up from your hook\n\n**DO NOT just exit.** Always use `gt handoff` for proper lifecycle.", "status": "open", "priority": 2, "issue_type": "task", "created_at": "2026-02-28T03:18:49Z", "updated_at": "2026-02-28T03:18:49Z", "dependencies": [{"issue_id": "gt-wisp-1t0wj", "depends_on_id": "gt-wisp-iwq01", "type": "parent-child", "created_at": "2026-02-27T19:18:49Z", "created_by": "refinery", "metadata": "{}"}, {"issue_id": "gt-wisp-1t0wj", "depends_on_id": "gt-wisp-zx2ed", "type": "blocks", "created_at": "2026-02-27T19:18:49Z", "created_by": "refinery", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-iwq01"}
{"id": "gt-wisp-1ucpg", "title": "Merge: gt-a6gp", "description": "branch: polecat/furiosa/gt-a6gp@mm5n4o99\ntarget: main\nsource_issue: gt-a6gp\nrig: gastown\nworker: furiosa\nagent_bead: gt-gastown-polecat-furiosa\nretry_count: 0\nlast_conflict_sha: null\nconflict_task_id: null", "status": "closed", "priority": 1, "issue_type": "task", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-28T01:42:23Z", "created_by": "gastown/polecats/furiosa", "updated_at": "2026-02-28T01:45:15Z", "closed_at": "2026-02-28T01:45:15Z", "close_reason": "Merged to main at b45d1511", "labels": ["gt:merge-request"], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-wisp-1wrrq", "title": "Run test suite", "description": "Run the test suite.\n\n```bash\ngo test ./...\n```\n\nTrack results: pass count, fail count, specific failures.", "status": "open", "priority": 2, "issue_type": "task", "created_at": "2026-02-28T03:18:01Z", "updated_at": "2026-02-28T03:18:01Z", "dependencies": [{"issue_id": "gt-wisp-1wrrq", "depends_on_id": "gt-wisp-u6jwn", "type": "blocks", "created_at": "2026-02-27T19:18:01Z", "created_by": "refinery", "metadata": "{}"}, {"issue_id": "gt-wisp-1wrrq", "depends_on_id": "gt-wisp-y6e5z", "type": "parent-child", "created_at": "2026-02-27T19:18:01Z", "created_by": "refinery", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-y6e5z"}
{"id": "gt-wisp-1zuel", "title": "Generate handoff summary", "description": "Summarize this patrol cycle.\n\n**VERIFICATION**: Before generating summary, confirm for each merged branch:\n- [ ] MERGED mail was sent to witness\n- [ ] MR bead was closed\n- [ ] MERGE_READY mail archived\n\nIf any notifications or archiving were missed, do them now!\n\nInclude in summary:\n- Branches merged (count, names)\n- MERGED mails sent (count - should match branches merged)\n- MR beads closed (count - should match branches merged)\n- MERGE_READY mails archived (count - should match branches merged)\n- Test results (pass/fail)\n- Branches with conflicts (count, names)\n- Conflict-resolution tasks created (IDs)\n- Issues filed (if any)\n- Any escalations sent\n\n**Conflict tracking is important** for monitoring MQ health. If many branches\nconflict, it may indicate main is moving too fast or branches are too stale.\n\nThis becomes the digest when the patrol is squashed.", "status": "open", "priority": 2, "issue_type": "task", "created_at": "2026-02-28T03:18:21Z", "updated_at": "2026-02-28T03:18:21Z", "dependencies": [{"issue_id": "gt-wisp-1zuel", "depends_on_id": "gt-wisp-6c0pn", "type": "parent-child", "created_at": "2026-02-27T19:18:20Z", "created_by": "refinery", "metadata": "{}"}, {"issue_id": "gt-wisp-1zuel", "depends_on_id": "gt-wisp-enlzb", "type": "blocks", "created_at": "2026-02-27T19:18:20Z", "created_by": "refinery", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-6c0pn"}
{"id": "gt-wisp-2gzt8", "title": "Set up working branch", "description": "Ensure you're on a clean feature branch ready for work.\n\n**1. Check current branch state:**\n```bash\ngit status\ngit branch --show-current\n```\n\n**2. If not on a feature branch, create one:**\n```bash\n# Standard naming: polecat/<your-name> or feature/<issue-id>\ngit checkout -b polecat/<name>\n```\n\n**3. Ensure clean working state:**\n```bash\ngit status                  # Should show \"working tree clean\"\ngit stash list              # Should be empty\n```\n\nIf dirty state from previous work:\n```bash\n# If changes are relevant to this issue:\ngit add -A && git commit -m \"WIP: <description>\"\n\n# If changes are unrelated cruft:\ngit stash push -m \"unrelated changes before gt-08iv\"\n# Or discard if truly garbage:\ngit checkout -- .\n```\n\n**4. Sync with main:**\n```bash\ngit fetch origin\ngit rebase origin/main      # Get latest, rebase your branch\n```\n\nIf rebase conflicts:\n- Resolve them carefully\n- Test after resolution\n- If stuck, mail Witness\n\n**Exit criteria:** You're on a clean feature branch, rebased on latest main.", "status": "closed", "priority": 2, "issue_type": "task", "created_at": "2026-02-28T02:42:25Z", "updated_at": "2026-02-28T02:43:20Z", "closed_at": "2026-02-28T02:43:20Z", "close_reason": "Closed", "dependencies": [{"issue_id": "gt-wisp-2gzt8", "depends_on_id": "gt-wisp-st5bf", "type": "parent-child", "created_at": "2026-02-27T18:42:25Z", "created_by": "mayor", "metadata": "{}"}, {"issue_id": "gt-wisp-2gzt8", "depends_on_id": "gt-wisp-vr84c", "type": "blocks", "created_at": "2026-02-27T18:42:25Z", "created_by": "mayor", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-st5bf"}
{"id": "gt-wisp-2qln1", "title": "Merge and push to main", "description": "Merge to main and push. CRITICAL: Notifications come IMMEDIATELY after push.\n\n**Step 1: Merge and Push**\n```bash\ngit checkout main\ngit merge --ff-only temp\ngit push origin main\n```\n\n⚠️ **STOP HERE - DO NOT PROCEED UNTIL STEPS 2-3 COMPLETE**\n\n**Step 2: Send MERGED Notification (REQUIRED - DO THIS IMMEDIATELY)**\n\nRIGHT NOW, before any cleanup, send MERGED mail to Witness:\n\n```bash\ngt mail send <rig>/witness -s \"MERGED <polecat-name>\" -m \"Branch: <branch>\nIssue: <issue-id>\nMerged-At: $(date -u +%Y-%m-%dT%H:%M:%SZ)\"\n```\n\nThis signals the Witness to nuke the polecat worktree. WITHOUT THIS NOTIFICATION,\nPOLECAT WORKTREES ACCUMULATE INDEFINITELY AND THE LIFECYCLE BREAKS.\n\n**Step 3: Close MR Bead (REQUIRED - DO THIS IMMEDIATELY)**\n\n⚠️ **VERIFICATION BEFORE CLOSING**: Confirm the work is actually on main:\n```bash\n# Get the commit message/issue from the branch\ngit log origin/main --oneline | grep \"<issue-id>\"\n# OR verify the commit SHA is on main:\ngit branch --contains <commit-sha> | grep main\n```\n\nIf work is NOT on main, DO NOT close the MR bead. Investigate first.\n\n```bash\nbd close <mr-bead-id> --reason \"Merged to main at $(git rev-parse --short HEAD)\"\n```\n\nThe MR bead ID was in the MERGE_READY message or find via:\n```bash\nbd list --type=merge-request --status=open | grep <polecat-name>\n```\n\n**VALIDATION**: The MR bead's source_issue should be a valid bead ID (gt-xxxxx),\nnot a branch name. If source_issue contains a branch name, flag for investigation.\n\n**Step 4: Archive the MERGE_READY mail (REQUIRED)**\n```bash\ngt mail archive <merge-ready-message-id>\n```\nThe message ID was tracked when you processed inbox-check.\n\n**Step 5: Cleanup (only after Steps 2-4 confirmed)**\n```bash\ngit branch -d temp\ngit push origin --delete <polecat-branch>\n```\n\n**VERIFICATION GATE**: You CANNOT proceed to loop-check without:\n- [x] MERGED mail sent to witness\n- [x] MR bead closed\n- [x] MERGE_READY mail archived\n\nIf you skipped notifications or archiving, GO BACK AND DO THEM NOW.\n\nMain has moved. Any remaining branches need rebasing on new baseline.", "status": "open", "priority": 2, "issue_type": "task", "created_at": "2026-02-28T03:19:24Z", "updated_at": "2026-02-28T03:19:24Z", "dependencies": [{"issue_id": "gt-wisp-2qln1", "depends_on_id": "gt-wisp-gt024", "type": "parent-child", "created_at": "2026-02-27T19:19:24Z", "created_by": "refinery", "metadata": "{}"}, {"issue_id": "gt-wisp-2qln1", "depends_on_id": "gt-wisp-nwzrp", "type": "blocks", "created_at": "2026-02-27T19:19:24Z", "created_by": "refinery", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-gt024"}
{"id": "gt-wisp-2vch9", "title": "Merge and push to main", "description": "Merge to main and push. CRITICAL: Notifications come IMMEDIATELY after push.\n\n**Step 1: Merge and Push**\n```bash\ngit checkout main\ngit merge --ff-only temp\ngit push origin main\n```\n\n⚠️ **STOP HERE - DO NOT PROCEED UNTIL STEPS 2-3 COMPLETE**\n\n**Step 2: Send MERGED Notification (REQUIRED - DO THIS IMMEDIATELY)**\n\nRIGHT NOW, before any cleanup, send MERGED mail to Witness:\n\n```bash\ngt mail send <rig>/witness -s \"MERGED <polecat-name>\" -m \"Branch: <branch>\nIssue: <issue-id>\nMerged-At: $(date -u +%Y-%m-%dT%H:%M:%SZ)\"\n```\n\nThis signals the Witness to nuke the polecat worktree. WITHOUT THIS NOTIFICATION,\nPOLECAT WORKTREES ACCUMULATE INDEFINITELY AND THE LIFECYCLE BREAKS.\n\n**Step 3: Close MR Bead (REQUIRED - DO THIS IMMEDIATELY)**\n\n⚠️ **VERIFICATION BEFORE CLOSING**: Confirm the work is actually on main:\n```bash\n# Get the commit message/issue from the branch\ngit log origin/main --oneline | grep \"<issue-id>\"\n# OR verify the commit SHA is on main:\ngit branch --contains <commit-sha> | grep main\n```\n\nIf work is NOT on main, DO NOT close the MR bead. Investigate first.\n\n```bash\nbd close <mr-bead-id> --reason \"Merged to main at $(git rev-parse --short HEAD)\"\n```\n\nThe MR bead ID was in the MERGE_READY message or find via:\n```bash\nbd list --type=merge-request --status=open | grep <polecat-name>\n```\n\n**VALIDATION**: The MR bead's source_issue should be a valid bead ID (gt-xxxxx),\nnot a branch name. If source_issue contains a branch name, flag for investigation.\n\n**Step 4: Archive the MERGE_READY mail (REQUIRED)**\n```bash\ngt mail archive <merge-ready-message-id>\n```\nThe message ID was tracked when you processed inbox-check.\n\n**Step 5: Cleanup (only after Steps 2-4 confirmed)**\n```bash\ngit branch -d temp\ngit push origin --delete <polecat-branch>\n```\n\n**VERIFICATION GATE**: You CANNOT proceed to loop-check without:\n- [x] MERGED mail sent to witness\n- [x] MR bead closed\n- [x] MERGE_READY mail archived\n\nIf you skipped notifications or archiving, GO BACK AND DO THEM NOW.\n\nMain has moved. Any remaining branches need rebasing on new baseline.", "status": "open", "priority": 2, "issue_type": "task", "created_at": "2026-02-28T03:17:40Z", "updated_at": "2026-02-28T03:17:40Z", "dependencies": [{"issue_id": "gt-wisp-2vch9", "depends_on_id": "gt-wisp-edwlt", "type": "parent-child", "created_at": "2026-02-27T19:17:39Z", "created_by": "refinery", "metadata": "{}"}, {"issue_id": "gt-wisp-2vch9", "depends_on_id": "gt-wisp-npw2r", "type": "blocks", "created_at": "2026-02-27T19:17:39Z", "created_by": "refinery", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-edwlt"}
{"id": "gt-wisp-2vlrx", "title": "mol-polecat-work", "description": "Full polecat work lifecycle from assignment through completion.\n\nThis molecule guides a polecat through a complete work assignment. Each step\nhas clear entry/exit criteria and specific commands to run. A polecat can\ncrash after any step and resume from the last completed step.\n\n## Polecat Contract (Self-Cleaning Model)\n\nYou are a self-cleaning worker. You:\n1. Receive work via your hook (pinned molecule + issue)\n2. Work through molecule steps using `bd ready` / `bd close <step>`\n3. Complete and self-clean via `gt done` (submit + nuke yourself)\n4. You are GONE - Refinery merges from MQ\n\n**Self-cleaning:** When you run `gt done`, you push your work, submit to MQ,\nnuke your sandbox, and exit. There is no idle state. Done means gone.\n\n**Important:** This formula defines the template. Your molecule already has step\nbeads created from it. Use `bd ready` to find them - do NOT read this file directly.\n\n**You do NOT:**\n- Push directly to main (Refinery merges from MQ)\n- Close your own issue (Refinery closes after merge)\n- Wait for merge (you're gone after `gt done`)\n- Handle rebase conflicts (Refinery spawns fresh polecats for that)\n\n## Variables\n\n| Variable | Source | Description |\n|----------|--------|-------------|\n| issue | hook_bead | The issue ID you're assigned to work on |\n\n## Failure Modes\n\n| Situation | Action |\n|-----------|--------|\n| Tests fail | Fix them. Do not proceed with failures. |\n| Blocked on external | Mail Witness for help, mark yourself stuck |\n| Context filling | Use gt handoff to cycle to fresh session |\n| Unsure what to do | Mail Witness, don't guess |", "status": "closed", "priority": 2, "issue_type": "epic", "created_at": "2026-02-28T02:42:12Z", "updated_at": "2026-02-28T02:54:00Z", "closed_at": "2026-02-28T02:54:00Z", "close_reason": "burned: polecat nuked", "ephemeral": true, "dependency_count": 0, "dependent_count": 1, "comment_count": 0}
{"id": "gt-wisp-3e3yx", "title": "Mechanical rebase", "description": "Pick next branch from queue. Attempt mechanical rebase on current main.\n\n**Step 1: Checkout and attempt rebase**\n```bash\ngit checkout -b temp origin/<polecat-branch>\ngit rebase origin/main\n```\n\n**Step 2: Check rebase result**\n\nThe rebase exits with:\n- Exit code 0: Success - proceed to run-tests\n- Exit code 1 (conflicts): Conflict detected - proceed to Step 3\n\nTo detect conflict state after rebase fails:\n```bash\n# Check if we're in a conflicted rebase state\nls .git/rebase-merge 2>/dev/null && echo \"CONFLICT_STATE\"\n```\n\n**Step 3: Handle conflicts (if any)**\n\nIf rebase SUCCEEDED (exit code 0):\n- Skip to run-tests step (continue normal merge flow)\n\nIf rebase FAILED with conflicts:\n\n1. **Abort the rebase** (DO NOT leave repo in conflicted state):\n```bash\ngit rebase --abort\n```\n\n2. **Record conflict metadata**:\n```bash\n# Capture main SHA for reference\nMAIN_SHA=$(git rev-parse origin/main)\nBRANCH_SHA=$(git rev-parse origin/<polecat-branch>)\n```\n\n3. **Create conflict-resolution task**:\n```bash\nbd create --type=task --priority=1 --title=\"Resolve merge conflicts: <original-issue-title>\" --description=\"## Conflict Resolution Required\n\nOriginal MR: <mr-bead-id>\nBranch: <polecat-branch>\nOriginal Issue: <issue-id>\nConflict with main at: ${MAIN_SHA}\nBranch SHA: ${BRANCH_SHA}\n\n## Instructions\n1. Clone/checkout the branch\n2. Rebase on current main: git rebase origin/main\n3. Resolve conflicts\n4. Force push: git push -f origin <branch>\n5. Close this task when done\n\nThe MR will be re-queued for processing after conflicts are resolved.\"\n```\n\n4. **Skip this MR** (do NOT delete branch or close MR bead):\n- Leave branch intact for conflict resolution\n- Leave MR bead open (will be re-processed after resolution)\n- Continue to loop-check for next branch\n\n**CRITICAL**: Never delete a branch that has conflicts. The branch contains\nthe original work and must be preserved for conflict resolution.\n\nTrack: rebase result (success/conflict), conflict task ID if created.", "status": "open", "priority": 2, "issue_type": "task", "created_at": "2026-02-28T03:17:24Z", "updated_at": "2026-02-28T03:17:24Z", "dependencies": [{"issue_id": "gt-wisp-3e3yx", "depends_on_id": "gt-wisp-f7cqp", "type": "parent-child", "created_at": "2026-02-27T19:17:24Z", "created_by": "refinery", "metadata": "{}"}, {"issue_id": "gt-wisp-3e3yx", "depends_on_id": "gt-wisp-k7vim", "type": "blocks", "created_at": "2026-02-27T19:17:24Z", "created_by": "refinery", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-f7cqp"}
{"id": "gt-wisp-3fcwn", "title": "mol-polecat-work", "description": "Full polecat work lifecycle from assignment through completion.\n\nThis molecule guides a polecat through a complete work assignment. Each step\nhas clear entry/exit criteria and specific commands to run. A polecat can\ncrash after any step and resume from the last completed step.\n\n## Polecat Contract (Self-Cleaning Model)\n\nYou are a self-cleaning worker. You:\n1. Receive work via your hook (pinned molecule + issue)\n2. Work through molecule steps using `bd ready` / `bd close <step>`\n3. Complete and self-clean via `gt done` (submit + nuke yourself)\n4. You are GONE - Refinery merges from MQ\n\n**Self-cleaning:** When you run `gt done`, you push your work, submit to MQ,\nnuke your sandbox, and exit. There is no idle state. Done means gone.\n\n**Important:** This formula defines the template. Your molecule already has step\nbeads created from it. Use `bd ready` to find them - do NOT read this file directly.\n\n**You do NOT:**\n- Push directly to main (Refinery merges from MQ)\n- Close your own issue (Refinery closes after merge)\n- Wait for merge (you're gone after `gt done`)\n- Handle rebase conflicts (Refinery spawns fresh polecats for that)\n\n## Variables\n\n| Variable | Source | Description |\n|----------|--------|-------------|\n| issue | hook_bead | The issue ID you're assigned to work on |\n\n## Failure Modes\n\n| Situation | Action |\n|-----------|--------|\n| Tests fail | Fix them. Do not proceed with failures. |\n| Blocked on external | Mail Witness for help, mark yourself stuck |\n| Context filling | Use gt handoff to cycle to fresh session |\n| Unsure what to do | Mail Witness, don't guess |", "status": "closed", "priority": 2, "issue_type": "epic", "created_at": "2026-02-28T03:02:51Z", "updated_at": "2026-02-28T03:09:20Z", "closed_at": "2026-02-28T03:09:20Z", "close_reason": "burned: polecat nuked", "ephemeral": true, "dependency_count": 0, "dependent_count": 1, "comment_count": 0}
{"id": "gt-wisp-3pxql", "title": "mol-polecat-work", "description": "Full polecat work lifecycle from assignment through completion.\n\nThis molecule guides a polecat through a complete work assignment. Each step\nhas clear entry/exit criteria and specific commands to run. A polecat can\ncrash after any step and resume from the last completed step.\n\n## Polecat Contract (Self-Cleaning Model)\n\nYou are a self-cleaning worker. You:\n1. Receive work via your hook (pinned molecule + issue)\n2. Work through molecule steps using `bd ready` / `bd close <step>`\n3. Complete and self-clean via `gt done` (submit + nuke yourself)\n4. You are GONE - Refinery merges from MQ\n\n**Self-cleaning:** When you run `gt done`, you push your work, submit to MQ,\nnuke your sandbox, and exit. There is no idle state. Done means gone.\n\n**Important:** This formula defines the template. Your molecule already has step\nbeads created from it. Use `bd ready` to find them - do NOT read this file directly.\n\n**You do NOT:**\n- Push directly to main (Refinery merges from MQ)\n- Close your own issue (Refinery closes after merge)\n- Wait for merge (you're gone after `gt done`)\n- Handle rebase conflicts (Refinery spawns fresh polecats for that)\n\n## Variables\n\n| Variable | Source | Description |\n|----------|--------|-------------|\n| issue | hook_bead | The issue ID you're assigned to work on |\n\n## Failure Modes\n\n| Situation | Action |\n|-----------|--------|\n| Tests fail | Fix them. Do not proceed with failures. |\n| Blocked on external | Mail Witness for help, mark yourself stuck |\n| Context filling | Use gt handoff to cycle to fresh session |\n| Unsure what to do | Mail Witness, don't guess |", "status": "closed", "priority": 2, "issue_type": "epic", "created_at": "2026-02-28T02:53:25Z", "updated_at": "2026-02-28T03:04:38Z", "closed_at": "2026-02-28T03:04:38Z", "close_reason": "burned: polecat nuked", "ephemeral": true, "dependency_count": 0, "dependent_count": 1, "comment_count": 0}
{"id": "gt-wisp-45g0k", "title": "Merge and push to main", "description": "Merge to main and push. CRITICAL: Notifications come IMMEDIATELY after push.\n\n**Step 1: Merge and Push**\n```bash\ngit checkout main\ngit merge --ff-only temp\ngit push origin main\n```\n\n⚠️ **STOP HERE - DO NOT PROCEED UNTIL STEPS 2-3 COMPLETE**\n\n**Step 2: Send MERGED Notification (REQUIRED - DO THIS IMMEDIATELY)**\n\nRIGHT NOW, before any cleanup, send MERGED mail to Witness:\n\n```bash\ngt mail send <rig>/witness -s \"MERGED <polecat-name>\" -m \"Branch: <branch>\nIssue: <issue-id>\nMerged-At: $(date -u +%Y-%m-%dT%H:%M:%SZ)\"\n```\n\nThis signals the Witness to nuke the polecat worktree. WITHOUT THIS NOTIFICATION,\nPOLECAT WORKTREES ACCUMULATE INDEFINITELY AND THE LIFECYCLE BREAKS.\n\n**Step 3: Close MR Bead (REQUIRED - DO THIS IMMEDIATELY)**\n\n⚠️ **VERIFICATION BEFORE CLOSING**: Confirm the work is actually on main:\n```bash\n# Get the commit message/issue from the branch\ngit log origin/main --oneline | grep \"<issue-id>\"\n# OR verify the commit SHA is on main:\ngit branch --contains <commit-sha> | grep main\n```\n\nIf work is NOT on main, DO NOT close the MR bead. Investigate first.\n\n```bash\nbd close <mr-bead-id> --reason \"Merged to main at $(git rev-parse --short HEAD)\"\n```\n\nThe MR bead ID was in the MERGE_READY message or find via:\n```bash\nbd list --type=merge-request --status=open | grep <polecat-name>\n```\n\n**VALIDATION**: The MR bead's source_issue should be a valid bead ID (gt-xxxxx),\nnot a branch name. If source_issue contains a branch name, flag for investigation.\n\n**Step 4: Archive the MERGE_READY mail (REQUIRED)**\n```bash\ngt mail archive <merge-ready-message-id>\n```\nThe message ID was tracked when you processed inbox-check.\n\n**Step 5: Cleanup (only after Steps 2-4 confirmed)**\n```bash\ngit branch -d temp\ngit push origin --delete <polecat-branch>\n```\n\n**VERIFICATION GATE**: You CANNOT proceed to loop-check without:\n- [x] MERGED mail sent to witness\n- [x] MR bead closed\n- [x] MERGE_READY mail archived\n\nIf you skipped notifications or archiving, GO BACK AND DO THEM NOW.\n\nMain has moved. Any remaining branches need rebasing on new baseline.", "status": "open", "priority": 2, "issue_type": "task", "created_at": "2026-02-28T03:18:21Z", "updated_at": "2026-02-28T03:18:21Z", "dependencies": [{"issue_id": "gt-wisp-45g0k", "depends_on_id": "gt-wisp-6c0pn", "type": "parent-child", "created_at": "2026-02-27T19:18:20Z", "created_by": "refinery", "metadata": "{}"}, {"issue_id": "gt-wisp-45g0k", "depends_on_id": "gt-wisp-y353w", "type": "blocks", "created_at": "2026-02-27T19:18:20Z", "created_by": "refinery", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-6c0pn"}
{"id": "gt-wisp-4bijs", "title": "mol-polecat-work", "description": "Full polecat work lifecycle from assignment through completion.\n\nThis molecule guides a polecat through a complete work assignment. Each step\nhas clear entry/exit criteria and specific commands to run. A polecat can\ncrash after any step and resume from the last completed step.\n\n## Polecat Contract (Self-Cleaning Model)\n\nYou are a self-cleaning worker. You:\n1. Receive work via your hook (pinned molecule + issue)\n2. Work through molecule steps using `bd ready` / `bd close <step>`\n3. Complete and self-clean via `gt done` (submit + nuke yourself)\n4. You are GONE - Refinery merges from MQ\n\n**Self-cleaning:** When you run `gt done`, you push your work, submit to MQ,\nnuke your sandbox, and exit. There is no idle state. Done means gone.\n\n**Important:** This formula defines the template. Your molecule already has step\nbeads created from it. Use `bd ready` to find them - do NOT read this file directly.\n\n**You do NOT:**\n- Push directly to main (Refinery merges from MQ)\n- Close your own issue (Refinery closes after merge)\n- Wait for merge (you're gone after `gt done`)\n- Handle rebase conflicts (Refinery spawns fresh polecats for that)\n\n## Variables\n\n| Variable | Source | Description |\n|----------|--------|-------------|\n| issue | hook_bead | The issue ID you're assigned to work on |\n\n## Failure Modes\n\n| Situation | Action |\n|-----------|--------|\n| Tests fail | Fix them. Do not proceed with failures. |\n| Blocked on external | Mail Witness for help, mark yourself stuck |\n| Context filling | Use gt handoff to cycle to fresh session |\n| Unsure what to do | Mail Witness, don't guess |", "status": "closed", "priority": 2, "issue_type": "epic", "created_at": "2026-02-28T03:15:39Z", "updated_at": "2026-02-28T03:43:03Z", "closed_at": "2026-02-28T03:43:03Z", "close_reason": "burned: polecat nuked", "ephemeral": true, "dependency_count": 0, "dependent_count": 1, "comment_count": 0}
{"id": "gt-wisp-4gqph", "title": "Merge: gt-w0br", "description": "branch: polecat/nux/gt-w0br@mm5nm8lz\ntarget: main\nsource_issue: gt-w0br\nrig: gastown\nworker: nux\nagent_bead: gt-gastown-polecat-nux\nretry_count: 0\nlast_conflict_sha: null\nconflict_task_id: null", "status": "closed", "priority": 1, "issue_type": "task", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-28T01:51:29Z", "created_by": "gastown/polecats/nux", "updated_at": "2026-02-28T02:03:19Z", "closed_at": "2026-02-28T02:03:19Z", "close_reason": "merged to main", "labels": ["gt:merge-request"], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-wisp-4h8es", "title": "mol-polecat-work", "description": "Full polecat work lifecycle from assignment through completion.\n\nThis molecule guides a polecat through a complete work assignment. Each step\nhas clear entry/exit criteria and specific commands to run. A polecat can\ncrash after any step and resume from the last completed step.\n\n## Polecat Contract (Self-Cleaning Model)\n\nYou are a self-cleaning worker. You:\n1. Receive work via your hook (pinned molecule + issue)\n2. Work through molecule steps using `bd ready` / `bd close <step>`\n3. Complete and self-clean via `gt done` (submit + nuke yourself)\n4. You are GONE - Refinery merges from MQ\n\n**Self-cleaning:** When you run `gt done`, you push your work, submit to MQ,\nnuke your sandbox, and exit. There is no idle state. Done means gone.\n\n**Important:** This formula defines the template. Your molecule already has step\nbeads created from it. Use `bd ready` to find them - do NOT read this file directly.\n\n**You do NOT:**\n- Push directly to main (Refinery merges from MQ)\n- Close your own issue (Refinery closes after merge)\n- Wait for merge (you're gone after `gt done`)\n- Handle rebase conflicts (Refinery spawns fresh polecats for that)\n\n## Variables\n\n| Variable | Source | Description |\n|----------|--------|-------------|\n| issue | hook_bead | The issue ID you're assigned to work on |\n\n## Failure Modes\n\n| Situation | Action |\n|-----------|--------|\n| Tests fail | Fix them. Do not proceed with failures. |\n| Blocked on external | Mail Witness for help, mark yourself stuck |\n| Context filling | Use gt handoff to cycle to fresh session |\n| Unsure what to do | Mail Witness, don't guess |", "status": "closed", "priority": 2, "issue_type": "epic", "created_at": "2026-02-28T03:18:48Z", "updated_at": "2026-02-28T03:43:32Z", "closed_at": "2026-02-28T03:43:32Z", "close_reason": "burned: force re-sling", "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-wisp-4pvf9", "title": "End-of-cycle inbox hygiene", "description": "Verify inbox hygiene before ending patrol cycle.\n\n**Step 1: Check inbox state**\n```bash\ngt mail inbox\n```\n\nInbox should contain ONLY:\n- Unprocessed MERGE_READY messages (will process next cycle)\n- Active work items\n\n**Step 2: Archive any stale messages**\n\nLook for messages that were processed but not archived:\n- PATROL: Wake up that was acknowledged → archive\n- HELP/Blocked that was handled → archive\n- MERGE_READY where merge completed but archive was missed → archive\n\n```bash\n# For each stale message found:\ngt mail archive <message-id>\n```\n\n**Step 3: Check for orphaned MR beads**\n\nLook for open MR beads with no corresponding branch:\n```bash\nbd list --type=merge-request --status=open\n```\n\nFor each open MR bead:\n1. Check if branch exists: `git ls-remote origin refs/heads/<branch>`\n2. If branch gone, verify work is on main: `git log origin/main --oneline | grep \"<source_issue>\"`\n3. If work on main → close MR with reason \"Merged (verified on main)\"\n4. If work NOT on main → investigate before closing:\n   - Check source_issue validity (should be gt-xxxxx, not branch name)\n   - Search reflog/dangling commits if possible\n   - If unverifiable, close with reason \"Unverifiable - no audit trail\"\n   - File bead if this indicates lost work\n\n**NEVER close an MR bead without verifying the work landed or is unrecoverable.**\n\n**Goal**: Inbox should have ≤3 active messages at end of cycle.\nKeep only: pending MRs in queue.", "status": "open", "priority": 2, "issue_type": "task", "created_at": "2026-02-28T03:18:01Z", "updated_at": "2026-02-28T03:18:01Z", "dependencies": [{"issue_id": "gt-wisp-4pvf9", "depends_on_id": "gt-wisp-n5zz5", "type": "blocks", "created_at": "2026-02-27T19:18:01Z", "created_by": "refinery", "metadata": "{}"}, {"issue_id": "gt-wisp-4pvf9", "depends_on_id": "gt-wisp-y6e5z", "type": "parent-child", "created_at": "2026-02-27T19:18:01Z", "created_by": "refinery", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-y6e5z"}
{"id": "gt-wisp-4tv4x", "title": "Check own context limit", "description": "Check own context usage.\n\nIf context is HIGH (>80%):\n- Write handoff summary\n- Prepare for burn/respawn\n\nIf context is LOW:\n- Can continue processing", "status": "open", "priority": 2, "issue_type": "task", "created_at": "2026-02-28T03:18:21Z", "updated_at": "2026-02-28T03:18:21Z", "dependencies": [{"issue_id": "gt-wisp-4tv4x", "depends_on_id": "gt-wisp-1zuel", "type": "blocks", "created_at": "2026-02-27T19:18:20Z", "created_by": "refinery", "metadata": "{}"}, {"issue_id": "gt-wisp-4tv4x", "depends_on_id": "gt-wisp-6c0pn", "type": "parent-child", "created_at": "2026-02-27T19:18:20Z", "created_by": "refinery", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-6c0pn"}
{"id": "gt-wisp-4wgug", "title": "Scan merge queue", "description": "Check the beads merge queue - this is the SOURCE OF TRUTH for pending merges.\n\n```bash\ngit fetch --prune origin\ngt mq list <rig>\n```\n\nThe beads MQ tracks all pending merge requests. Do NOT rely on `git branch -r | grep polecat`\nas branches may exist without MR beads, or MR beads may exist for already-merged work.\n\nIf queue empty, skip to context-check step.\n\nFor each MR in the queue, verify the branch still exists:\n```bash\ngit branch -r | grep <branch>\n```\n\nIf branch doesn't exist for a queued MR:\n- Close the MR bead: `bd close <mr-id> --reason \"Branch no longer exists\"`\n- Remove from processing queue\n\nTrack verified MR list for this cycle.", "status": "open", "priority": 2, "issue_type": "task", "created_at": "2026-02-28T03:19:06Z", "updated_at": "2026-02-28T03:19:06Z", "dependencies": [{"issue_id": "gt-wisp-4wgug", "depends_on_id": "gt-wisp-lamkm", "type": "parent-child", "created_at": "2026-02-27T19:19:06Z", "created_by": "refinery", "metadata": "{}"}, {"issue_id": "gt-wisp-4wgug", "depends_on_id": "gt-wisp-qmdxe", "type": "blocks", "created_at": "2026-02-27T19:19:06Z", "created_by": "refinery", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-lamkm"}
{"id": "gt-wisp-4wt5o", "title": "Merge and push to main", "description": "Merge to main and push. CRITICAL: Notifications come IMMEDIATELY after push.\n\n**Step 1: Merge and Push**\n```bash\ngit checkout main\ngit merge --ff-only temp\ngit push origin main\n```\n\n⚠️ **STOP HERE - DO NOT PROCEED UNTIL STEPS 2-3 COMPLETE**\n\n**Step 2: Send MERGED Notification (REQUIRED - DO THIS IMMEDIATELY)**\n\nRIGHT NOW, before any cleanup, send MERGED mail to Witness:\n\n```bash\ngt mail send <rig>/witness -s \"MERGED <polecat-name>\" -m \"Branch: <branch>\nIssue: <issue-id>\nMerged-At: $(date -u +%Y-%m-%dT%H:%M:%SZ)\"\n```\n\nThis signals the Witness to nuke the polecat worktree. WITHOUT THIS NOTIFICATION,\nPOLECAT WORKTREES ACCUMULATE INDEFINITELY AND THE LIFECYCLE BREAKS.\n\n**Step 3: Close MR Bead (REQUIRED - DO THIS IMMEDIATELY)**\n\n⚠️ **VERIFICATION BEFORE CLOSING**: Confirm the work is actually on main:\n```bash\n# Get the commit message/issue from the branch\ngit log origin/main --oneline | grep \"<issue-id>\"\n# OR verify the commit SHA is on main:\ngit branch --contains <commit-sha> | grep main\n```\n\nIf work is NOT on main, DO NOT close the MR bead. Investigate first.\n\n```bash\nbd close <mr-bead-id> --reason \"Merged to main at $(git rev-parse --short HEAD)\"\n```\n\nThe MR bead ID was in the MERGE_READY message or find via:\n```bash\nbd list --type=merge-request --status=open | grep <polecat-name>\n```\n\n**VALIDATION**: The MR bead's source_issue should be a valid bead ID (gt-xxxxx),\nnot a branch name. If source_issue contains a branch name, flag for investigation.\n\n**Step 4: Archive the MERGE_READY mail (REQUIRED)**\n```bash\ngt mail archive <merge-ready-message-id>\n```\nThe message ID was tracked when you processed inbox-check.\n\n**Step 5: Cleanup (only after Steps 2-4 confirmed)**\n```bash\ngit branch -d temp\ngit push origin --delete <polecat-branch>\n```\n\n**VERIFICATION GATE**: You CANNOT proceed to loop-check without:\n- [x] MERGED mail sent to witness\n- [x] MR bead closed\n- [x] MERGE_READY mail archived\n\nIf you skipped notifications or archiving, GO BACK AND DO THEM NOW.\n\nMain has moved. Any remaining branches need rebasing on new baseline.", "status": "open", "priority": 2, "issue_type": "task", "created_at": "2026-02-28T03:48:28Z", "updated_at": "2026-02-28T03:48:28Z", "dependencies": [{"issue_id": "gt-wisp-4wt5o", "depends_on_id": "gt-wisp-fbkga", "type": "parent-child", "created_at": "2026-02-27T19:48:28Z", "created_by": "refinery", "metadata": "{}"}, {"issue_id": "gt-wisp-4wt5o", "depends_on_id": "gt-wisp-tg5pr", "type": "blocks", "created_at": "2026-02-27T19:48:28Z", "created_by": "refinery", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-fbkga"}
{"id": "gt-wisp-54l1v", "title": "Check refinery mail", "description": "Check mail for MERGE_READY submissions, escalations, and messages.\n\n```bash\ngt mail inbox\n```\n\nFor each message:\n\n**MERGE_READY**:\nA polecat's work is ready for merge. Extract details and track for processing.\n\n```bash\n# Parse MERGE_READY message body:\n# Branch: <branch>\n# Issue: <issue-id>\n# Polecat: <polecat-name>\n# MR: <mr-bead-id>\n# Verified: clean git state, issue closed\n\n# Track in your merge queue for this patrol cycle:\n# - Branch name\n# - Issue ID\n# - Polecat name (REQUIRED for MERGED notification)\n# - MR bead ID (REQUIRED for closing after merge)\n```\n\n**IMPORTANT**: You MUST track the polecat name, MR bead ID, AND message ID - you will need them\nin merge-push step to send MERGED notification, close the MR bead, and archive the mail.\n\nMark as read. The work will be processed in queue-scan/process-branch.\n**Do NOT archive yet** - archive after merge/reject decision in merge-push step.\n\n**PATROL: Wake up**:\nWitness detected MRs waiting but refinery idle. Acknowledge and archive:\n```bash\ngt mail archive <message-id>\n```\n\n**HELP / Blocked**:\nAssess and respond. If you can't help, escalate to Mayor.\nArchive after handling:\n```bash\ngt mail archive <message-id>\n```\n\n**HANDOFF**:\nRead predecessor context. Check for in-flight merges.\nArchive after absorbing context:\n```bash\ngt mail archive <message-id>\n```\n\n**Hygiene principle**: Archive messages after they're fully processed.\nKeep only: pending MRs in queue. Inbox should be near-empty.", "status": "open", "priority": 2, "issue_type": "task", "created_at": "2026-02-28T03:49:11Z", "updated_at": "2026-02-28T03:49:11Z", "dependencies": [{"issue_id": "gt-wisp-54l1v", "depends_on_id": "gt-wisp-s2vyx", "type": "parent-child", "created_at": "2026-02-27T19:49:11Z", "created_by": "refinery", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-s2vyx"}
{"id": "gt-wisp-5avt0", "title": "Merge: gt-kk21", "description": "branch: polecat/furiosa/gt-kk21@mm5olv04\ntarget: main\nsource_issue: gt-kk21\nrig: gastown\nworker: furiosa\nagent_bead: gt-gastown-polecat-furiosa\nretry_count: 0\nlast_conflict_sha: null\nconflict_task_id: null", "status": "closed", "priority": 1, "issue_type": "task", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-28T02:15:50Z", "created_by": "gastown/polecats/furiosa", "updated_at": "2026-02-28T02:17:51Z", "closed_at": "2026-02-28T02:17:51Z", "close_reason": "Stale MR: branch polecat/furiosa/gt-kk21@mm5olv04 not on any remote. Source issue gt-kk21 already closed. Work product (plugins/compactor-dog/plugin.md) exists locally in gitignored refinery dir — does not need git merge.", "labels": ["gt:merge-request"], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-wisp-5iasc", "title": "Merge: gt-y8x4", "description": "branch: polecat/furiosa/gt-y8x4@mm5pto5s\ntarget: main\nsource_issue: gt-y8x4\nrig: gastown\nworker: furiosa\nagent_bead: gt-gastown-polecat-furiosa\nretry_count: 0\nlast_conflict_sha: null\nconflict_task_id: null", "status": "closed", "priority": 1, "issue_type": "task", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-28T02:49:01Z", "created_by": "gastown/polecats/furiosa", "updated_at": "2026-02-28T02:53:17Z", "closed_at": "2026-02-28T02:53:17Z", "close_reason": "merged", "labels": ["gt:merge-request"], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-wisp-5mg9u", "title": "Set up working branch", "description": "Ensure you're on a clean feature branch ready for work.\n\n**1. Check current branch state:**\n```bash\ngit status\ngit branch --show-current\n```\n\n**2. If not on a feature branch, create one:**\n```bash\n# Standard naming: polecat/<your-name> or feature/<issue-id>\ngit checkout -b polecat/<name>\n```\n\n**3. Ensure clean working state:**\n```bash\ngit status                  # Should show \"working tree clean\"\ngit stash list              # Should be empty\n```\n\nIf dirty state from previous work:\n```bash\n# If changes are relevant to this issue:\ngit add -A && git commit -m \"WIP: <description>\"\n\n# If changes are unrelated cruft:\ngit stash push -m \"unrelated changes before gt-y8x4\"\n# Or discard if truly garbage:\ngit checkout -- .\n```\n\n**4. Sync with main:**\n```bash\ngit fetch origin\ngit rebase origin/main      # Get latest, rebase your branch\n```\n\nIf rebase conflicts:\n- Resolve them carefully\n- Test after resolution\n- If stuck, mail Witness\n\n**Exit criteria:** You're on a clean feature branch, rebased on latest main.", "status": "closed", "priority": 2, "issue_type": "task", "assignee": "gastown/polecats/furiosa", "created_at": "2026-02-28T02:42:12Z", "updated_at": "2026-02-28T02:43:35Z", "closed_at": "2026-02-28T02:43:35Z", "close_reason": "Closed", "dependencies": [{"issue_id": "gt-wisp-5mg9u", "depends_on_id": "gt-wisp-2vlrx", "type": "parent-child", "created_at": "2026-02-27T18:42:12Z", "created_by": "mayor", "metadata": "{}"}, {"issue_id": "gt-wisp-5mg9u", "depends_on_id": "gt-wisp-mq5xo", "type": "blocks", "created_at": "2026-02-27T18:42:12Z", "created_by": "mayor", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-2vlrx"}
{"id": "gt-wisp-5x5ai", "title": "End-of-cycle inbox hygiene", "description": "Verify inbox hygiene before ending patrol cycle.\n\n**Step 1: Check inbox state**\n```bash\ngt mail inbox\n```\n\nInbox should contain ONLY:\n- Unprocessed MERGE_READY messages (will process next cycle)\n- Active work items\n\n**Step 2: Archive any stale messages**\n\nLook for messages that were processed but not archived:\n- PATROL: Wake up that was acknowledged → archive\n- HELP/Blocked that was handled → archive\n- MERGE_READY where merge completed but archive was missed → archive\n\n```bash\n# For each stale message found:\ngt mail archive <message-id>\n```\n\n**Step 3: Check for orphaned MR beads**\n\nLook for open MR beads with no corresponding branch:\n```bash\nbd list --type=merge-request --status=open\n```\n\nFor each open MR bead:\n1. Check if branch exists: `git ls-remote origin refs/heads/<branch>`\n2. If branch gone, verify work is on main: `git log origin/main --oneline | grep \"<source_issue>\"`\n3. If work on main → close MR with reason \"Merged (verified on main)\"\n4. If work NOT on main → investigate before closing:\n   - Check source_issue validity (should be gt-xxxxx, not branch name)\n   - Search reflog/dangling commits if possible\n   - If unverifiable, close with reason \"Unverifiable - no audit trail\"\n   - File bead if this indicates lost work\n\n**NEVER close an MR bead without verifying the work landed or is unrecoverable.**\n\n**Goal**: Inbox should have ≤3 active messages at end of cycle.\nKeep only: pending MRs in queue.", "status": "open", "priority": 2, "issue_type": "task", "created_at": "2026-02-28T03:17:40Z", "updated_at": "2026-02-28T03:17:40Z", "dependencies": [{"issue_id": "gt-wisp-5x5ai", "depends_on_id": "gt-wisp-9zxe2", "type": "blocks", "created_at": "2026-02-27T19:17:39Z", "created_by": "refinery", "metadata": "{}"}, {"issue_id": "gt-wisp-5x5ai", "depends_on_id": "gt-wisp-edwlt", "type": "parent-child", "created_at": "2026-02-27T19:17:39Z", "created_by": "refinery", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-edwlt"}
{"id": "gt-wisp-5yd37", "title": "Self-review changes", "description": "Review your own changes before running tests.\n\n**1. Review the diff:**\n```bash\ngit diff origin/main...HEAD     # All changes vs main\ngit log --oneline origin/main..HEAD  # All commits\n```\n\n**2. Check for common issues:**\n\n| Category | Look For |\n|----------|----------|\n| Bugs | Off-by-one, null handling, edge cases |\n| Security | Injection, auth bypass, exposed secrets |\n| Style | Naming, formatting, code organization |\n| Completeness | Missing error handling, incomplete paths |\n| Cruft | Debug prints, commented code, TODOs |\n\n**3. Fix issues found:**\nDon't just note them - fix them now. Amend or add commits as needed.\n\n**4. Verify no unintended changes:**\n```bash\ngit diff --stat origin/main...HEAD\n# Only files relevant to gt-y8x4 should appear\n```\n\nIf you accidentally modified unrelated files, remove those changes.\n\n**Exit criteria:** Changes are clean, reviewed, and ready for testing.", "status": "closed", "priority": 2, "issue_type": "task", "assignee": "gastown/polecats/furiosa", "created_at": "2026-02-28T02:42:12Z", "updated_at": "2026-02-28T02:46:59Z", "closed_at": "2026-02-28T02:46:59Z", "close_reason": "Closed", "dependencies": [{"issue_id": "gt-wisp-5yd37", "depends_on_id": "gt-wisp-1dx0k", "type": "blocks", "created_at": "2026-02-27T18:42:12Z", "created_by": "mayor", "metadata": "{}"}, {"issue_id": "gt-wisp-5yd37", "depends_on_id": "gt-wisp-2vlrx", "type": "parent-child", "created_at": "2026-02-27T18:42:12Z", "created_by": "mayor", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-2vlrx"}
{"id": "gt-wisp-6c0pn", "title": "mol-refinery-patrol", "description": "Patrol report: Cycle 6: Queue empty. nux/gt-0wkk completed (no code changes). 2 polecats active: furiosa/gt-l7uq, slit/gt-yxx0. Continuing.", "status": "closed", "priority": 2, "issue_type": "epic", "assignee": "gastown/refinery", "created_at": "2026-02-28T03:18:21Z", "updated_at": "2026-02-28T03:18:49Z", "closed_at": "2026-02-28T03:18:49Z", "close_reason": "patrol cycle complete: Cycle 6: Queue empty. nux/gt-0wkk completed (no code changes). 2 polecats active: furiosa/gt-l7uq, slit/gt-yxx0. Continuing.", "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-wisp-6da15", "title": "End-of-cycle inbox hygiene", "description": "Verify inbox hygiene before ending patrol cycle.\n\n**Step 1: Check inbox state**\n```bash\ngt mail inbox\n```\n\nInbox should contain ONLY:\n- Unprocessed MERGE_READY messages (will process next cycle)\n- Active work items\n\n**Step 2: Archive any stale messages**\n\nLook for messages that were processed but not archived:\n- PATROL: Wake up that was acknowledged → archive\n- HELP/Blocked that was handled → archive\n- MERGE_READY where merge completed but archive was missed → archive\n\n```bash\n# For each stale message found:\ngt mail archive <message-id>\n```\n\n**Step 3: Check for orphaned MR beads**\n\nLook for open MR beads with no corresponding branch:\n```bash\nbd list --type=merge-request --status=open\n```\n\nFor each open MR bead:\n1. Check if branch exists: `git ls-remote origin refs/heads/<branch>`\n2. If branch gone, verify work is on main: `git log origin/main --oneline | grep \"<source_issue>\"`\n3. If work on main → close MR with reason \"Merged (verified on main)\"\n4. If work NOT on main → investigate before closing:\n   - Check source_issue validity (should be gt-xxxxx, not branch name)\n   - Search reflog/dangling commits if possible\n   - If unverifiable, close with reason \"Unverifiable - no audit trail\"\n   - File bead if this indicates lost work\n\n**NEVER close an MR bead without verifying the work landed or is unrecoverable.**\n\n**Goal**: Inbox should have ≤3 active messages at end of cycle.\nKeep only: pending MRs in queue.", "status": "open", "priority": 2, "issue_type": "task", "created_at": "2026-02-28T03:19:06Z", "updated_at": "2026-02-28T03:19:06Z", "dependencies": [{"issue_id": "gt-wisp-6da15", "depends_on_id": "gt-wisp-0md58", "type": "blocks", "created_at": "2026-02-27T19:19:06Z", "created_by": "refinery", "metadata": "{}"}, {"issue_id": "gt-wisp-6da15", "depends_on_id": "gt-wisp-lamkm", "type": "parent-child", "created_at": "2026-02-27T19:19:06Z", "created_by": "refinery", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-lamkm"}
{"id": "gt-wisp-71ha", "title": "Merge: gt-olb4", "description": "branch: polecat/slit/gt-olb4@mm5jsq35\ntarget: main\nsource_issue: gt-olb4\nrig: gastown\nworker: slit\nagent_bead: gt-gastown-polecat-slit\nretry_count: 0\nlast_conflict_sha: null\nconflict_task_id: null", "status": "closed", "priority": 1, "issue_type": "task", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-28T00:05:45Z", "created_by": "gastown/polecats/slit", "updated_at": "2026-02-28T00:18:38Z", "closed_at": "2026-02-28T00:18:38Z", "labels": ["gt:merge-request"], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-wisp-76pw5", "title": "mol-refinery-patrol", "description": "Patrol report: Empty queue cycle 2. No signals. Session healthy (RSS 3MB).", "status": "closed", "priority": 2, "issue_type": "epic", "assignee": "gastown/refinery", "created_at": "2026-02-28T03:00:29Z", "updated_at": "2026-02-28T03:00:54Z", "closed_at": "2026-02-28T03:00:54Z", "close_reason": "patrol cycle complete: Empty queue cycle 2. No signals. Session healthy (RSS 3MB).", "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-wisp-7js3u", "title": "Check refinery mail", "description": "Check mail for MERGE_READY submissions, escalations, and messages.\n\n```bash\ngt mail inbox\n```\n\nFor each message:\n\n**MERGE_READY**:\nA polecat's work is ready for merge. Extract details and track for processing.\n\n```bash\n# Parse MERGE_READY message body:\n# Branch: <branch>\n# Issue: <issue-id>\n# Polecat: <polecat-name>\n# MR: <mr-bead-id>\n# Verified: clean git state, issue closed\n\n# Track in your merge queue for this patrol cycle:\n# - Branch name\n# - Issue ID\n# - Polecat name (REQUIRED for MERGED notification)\n# - MR bead ID (REQUIRED for closing after merge)\n```\n\n**IMPORTANT**: You MUST track the polecat name, MR bead ID, AND message ID - you will need them\nin merge-push step to send MERGED notification, close the MR bead, and archive the mail.\n\nMark as read. The work will be processed in queue-scan/process-branch.\n**Do NOT archive yet** - archive after merge/reject decision in merge-push step.\n\n**PATROL: Wake up**:\nWitness detected MRs waiting but refinery idle. Acknowledge and archive:\n```bash\ngt mail archive <message-id>\n```\n\n**HELP / Blocked**:\nAssess and respond. If you can't help, escalate to Mayor.\nArchive after handling:\n```bash\ngt mail archive <message-id>\n```\n\n**HANDOFF**:\nRead predecessor context. Check for in-flight merges.\nArchive after absorbing context:\n```bash\ngt mail archive <message-id>\n```\n\n**Hygiene principle**: Archive messages after they're fully processed.\nKeep only: pending MRs in queue. Inbox should be near-empty.", "status": "open", "priority": 2, "issue_type": "task", "created_at": "2026-02-28T03:00:29Z", "updated_at": "2026-02-28T03:00:29Z", "dependencies": [{"issue_id": "gt-wisp-7js3u", "depends_on_id": "gt-wisp-76pw5", "type": "parent-child", "created_at": "2026-02-27T19:00:29Z", "created_by": "refinery", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-76pw5"}
{"id": "gt-wisp-7nfa8", "title": "Scan merge queue", "description": "Check the beads merge queue - this is the SOURCE OF TRUTH for pending merges.\n\n```bash\ngit fetch --prune origin\ngt mq list <rig>\n```\n\nThe beads MQ tracks all pending merge requests. Do NOT rely on `git branch -r | grep polecat`\nas branches may exist without MR beads, or MR beads may exist for already-merged work.\n\nIf queue empty, skip to context-check step.\n\nFor each MR in the queue, verify the branch still exists:\n```bash\ngit branch -r | grep <branch>\n```\n\nIf branch doesn't exist for a queued MR:\n- Close the MR bead: `bd close <mr-id> --reason \"Branch no longer exists\"`\n- Remove from processing queue\n\nTrack verified MR list for this cycle.", "status": "open", "priority": 2, "issue_type": "task", "created_at": "2026-02-28T03:17:39Z", "updated_at": "2026-02-28T03:17:39Z", "dependencies": [{"issue_id": "gt-wisp-7nfa8", "depends_on_id": "gt-wisp-edwlt", "type": "parent-child", "created_at": "2026-02-27T19:17:39Z", "created_by": "refinery", "metadata": "{}"}, {"issue_id": "gt-wisp-7nfa8", "depends_on_id": "gt-wisp-w13gi", "type": "blocks", "created_at": "2026-02-27T19:17:39Z", "created_by": "refinery", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-edwlt"}
{"id": "gt-wisp-7sckw", "title": "Merge and push to main", "description": "Merge to main and push. CRITICAL: Notifications come IMMEDIATELY after push.\n\n**Step 1: Merge and Push**\n```bash\ngit checkout main\ngit merge --ff-only temp\ngit push origin main\n```\n\n⚠️ **STOP HERE - DO NOT PROCEED UNTIL STEPS 2-3 COMPLETE**\n\n**Step 2: Send MERGED Notification (REQUIRED - DO THIS IMMEDIATELY)**\n\nRIGHT NOW, before any cleanup, send MERGED mail to Witness:\n\n```bash\ngt mail send <rig>/witness -s \"MERGED <polecat-name>\" -m \"Branch: <branch>\nIssue: <issue-id>\nMerged-At: $(date -u +%Y-%m-%dT%H:%M:%SZ)\"\n```\n\nThis signals the Witness to nuke the polecat worktree. WITHOUT THIS NOTIFICATION,\nPOLECAT WORKTREES ACCUMULATE INDEFINITELY AND THE LIFECYCLE BREAKS.\n\n**Step 3: Close MR Bead (REQUIRED - DO THIS IMMEDIATELY)**\n\n⚠️ **VERIFICATION BEFORE CLOSING**: Confirm the work is actually on main:\n```bash\n# Get the commit message/issue from the branch\ngit log origin/main --oneline | grep \"<issue-id>\"\n# OR verify the commit SHA is on main:\ngit branch --contains <commit-sha> | grep main\n```\n\nIf work is NOT on main, DO NOT close the MR bead. Investigate first.\n\n```bash\nbd close <mr-bead-id> --reason \"Merged to main at $(git rev-parse --short HEAD)\"\n```\n\nThe MR bead ID was in the MERGE_READY message or find via:\n```bash\nbd list --type=merge-request --status=open | grep <polecat-name>\n```\n\n**VALIDATION**: The MR bead's source_issue should be a valid bead ID (gt-xxxxx),\nnot a branch name. If source_issue contains a branch name, flag for investigation.\n\n**Step 4: Archive the MERGE_READY mail (REQUIRED)**\n```bash\ngt mail archive <merge-ready-message-id>\n```\nThe message ID was tracked when you processed inbox-check.\n\n**Step 5: Cleanup (only after Steps 2-4 confirmed)**\n```bash\ngit branch -d temp\ngit push origin --delete <polecat-branch>\n```\n\n**VERIFICATION GATE**: You CANNOT proceed to loop-check without:\n- [x] MERGED mail sent to witness\n- [x] MR bead closed\n- [x] MERGE_READY mail archived\n\nIf you skipped notifications or archiving, GO BACK AND DO THEM NOW.\n\nMain has moved. Any remaining branches need rebasing on new baseline.", "status": "open", "priority": 2, "issue_type": "task", "created_at": "2026-02-28T03:18:01Z", "updated_at": "2026-02-28T03:18:01Z", "dependencies": [{"issue_id": "gt-wisp-7sckw", "depends_on_id": "gt-wisp-9djfo", "type": "blocks", "created_at": "2026-02-27T19:18:01Z", "created_by": "refinery", "metadata": "{}"}, {"issue_id": "gt-wisp-7sckw", "depends_on_id": "gt-wisp-y6e5z", "type": "parent-child", "created_at": "2026-02-27T19:18:01Z", "created_by": "refinery", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-y6e5z"}
{"id": "gt-wisp-7x62d", "title": "mol-polecat-work", "description": "Full polecat work lifecycle from assignment through completion.\n\nThis molecule guides a polecat through a complete work assignment. Each step\nhas clear entry/exit criteria and specific commands to run. A polecat can\ncrash after any step and resume from the last completed step.\n\n## Polecat Contract (Self-Cleaning Model)\n\nYou are a self-cleaning worker. You:\n1. Receive work via your hook (pinned molecule + issue)\n2. Work through molecule steps using `bd ready` / `bd close <step>`\n3. Complete and self-clean via `gt done` (submit + nuke yourself)\n4. You are GONE - Refinery merges from MQ\n\n**Self-cleaning:** When you run `gt done`, you push your work, submit to MQ,\nnuke your sandbox, and exit. There is no idle state. Done means gone.\n\n**Important:** This formula defines the template. Your molecule already has step\nbeads created from it. Use `bd ready` to find them - do NOT read this file directly.\n\n**You do NOT:**\n- Push directly to main (Refinery merges from MQ)\n- Close your own issue (Refinery closes after merge)\n- Wait for merge (you're gone after `gt done`)\n- Handle rebase conflicts (Refinery spawns fresh polecats for that)\n\n## Variables\n\n| Variable | Source | Description |\n|----------|--------|-------------|\n| issue | hook_bead | The issue ID you're assigned to work on |\n\n## Failure Modes\n\n| Situation | Action |\n|-----------|--------|\n| Tests fail | Fix them. Do not proceed with failures. |\n| Blocked on external | Mail Witness for help, mark yourself stuck |\n| Context filling | Use gt handoff to cycle to fresh session |\n| Unsure what to do | Mail Witness, don't guess |", "status": "closed", "priority": 2, "issue_type": "epic", "created_at": "2026-02-28T02:43:29Z", "updated_at": "2026-02-28T02:55:37Z", "closed_at": "2026-02-28T02:55:37Z", "close_reason": "burned: polecat nuked", "ephemeral": true, "dependency_count": 0, "dependent_count": 1, "comment_count": 0}
{"id": "gt-wisp-88mou", "title": "End-of-cycle inbox hygiene", "description": "Verify inbox hygiene before ending patrol cycle.\n\n**Step 1: Check inbox state**\n```bash\ngt mail inbox\n```\n\nInbox should contain ONLY:\n- Unprocessed MERGE_READY messages (will process next cycle)\n- Active work items\n\n**Step 2: Archive any stale messages**\n\nLook for messages that were processed but not archived:\n- PATROL: Wake up that was acknowledged → archive\n- HELP/Blocked that was handled → archive\n- MERGE_READY where merge completed but archive was missed → archive\n\n```bash\n# For each stale message found:\ngt mail archive <message-id>\n```\n\n**Step 3: Check for orphaned MR beads**\n\nLook for open MR beads with no corresponding branch:\n```bash\nbd list --type=merge-request --status=open\n```\n\nFor each open MR bead:\n1. Check if branch exists: `git ls-remote origin refs/heads/<branch>`\n2. If branch gone, verify work is on main: `git log origin/main --oneline | grep \"<source_issue>\"`\n3. If work on main → close MR with reason \"Merged (verified on main)\"\n4. If work NOT on main → investigate before closing:\n   - Check source_issue validity (should be gt-xxxxx, not branch name)\n   - Search reflog/dangling commits if possible\n   - If unverifiable, close with reason \"Unverifiable - no audit trail\"\n   - File bead if this indicates lost work\n\n**NEVER close an MR bead without verifying the work landed or is unrecoverable.**\n\n**Goal**: Inbox should have ≤3 active messages at end of cycle.\nKeep only: pending MRs in queue.", "status": "open", "priority": 2, "issue_type": "task", "created_at": "2026-02-28T03:00:29Z", "updated_at": "2026-02-28T03:00:29Z", "dependencies": [{"issue_id": "gt-wisp-88mou", "depends_on_id": "gt-wisp-76pw5", "type": "parent-child", "created_at": "2026-02-27T19:00:29Z", "created_by": "refinery", "metadata": "{}"}, {"issue_id": "gt-wisp-88mou", "depends_on_id": "gt-wisp-ayks1", "type": "blocks", "created_at": "2026-02-27T19:00:29Z", "created_by": "refinery", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-76pw5"}
{"id": "gt-wisp-8etvx", "title": "Commit all implementation changes", "description": "Ensure ALL implementation work is committed before cleanup.\n\n**CRITICAL: You MUST commit all changes from implementation.**\nNEVER use `git checkout -- .` or `git restore .` to discard implementation work.\nALWAYS commit ALL uncommitted changes from your implementation.\n\n**1. Check for uncommitted changes:**\n```bash\ngit status\n```\n\n**2. If there are ANY uncommitted changes, commit them now:**\n```bash\ngit add -A && git commit -m \"<type>: <descriptive message> (gt-08iv)\"\n```\n\n**3. If working tree is already clean, skip.**\n\n**4. VERIFY:**\n```bash\ngit status\n```\nMust show \"nothing to commit, working tree clean\".\n\n**5. Verify you have commits:**\n```bash\ngit log origin/main..HEAD --oneline\n```\nIf you made changes during implementation, this MUST show at least 1 commit.\n\n**Exit criteria:** All changes committed. Working tree clean.", "status": "closed", "priority": 2, "issue_type": "task", "created_at": "2026-02-28T02:42:25Z", "updated_at": "2026-02-28T02:51:21Z", "closed_at": "2026-02-28T02:51:21Z", "close_reason": "no-changes: review-only task, all deliverables are filed beads", "dependencies": [{"issue_id": "gt-wisp-8etvx", "depends_on_id": "gt-wisp-qpp1y", "type": "blocks", "created_at": "2026-02-27T18:42:25Z", "created_by": "mayor", "metadata": "{}"}, {"issue_id": "gt-wisp-8etvx", "depends_on_id": "gt-wisp-st5bf", "type": "parent-child", "created_at": "2026-02-27T18:42:25Z", "created_by": "mayor", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-st5bf"}
{"id": "gt-wisp-8ohti", "title": "Mechanical rebase", "description": "Pick next branch from queue. Attempt mechanical rebase on current main.\n\n**Step 1: Checkout and attempt rebase**\n```bash\ngit checkout -b temp origin/<polecat-branch>\ngit rebase origin/main\n```\n\n**Step 2: Check rebase result**\n\nThe rebase exits with:\n- Exit code 0: Success - proceed to run-tests\n- Exit code 1 (conflicts): Conflict detected - proceed to Step 3\n\nTo detect conflict state after rebase fails:\n```bash\n# Check if we're in a conflicted rebase state\nls .git/rebase-merge 2>/dev/null && echo \"CONFLICT_STATE\"\n```\n\n**Step 3: Handle conflicts (if any)**\n\nIf rebase SUCCEEDED (exit code 0):\n- Skip to run-tests step (continue normal merge flow)\n\nIf rebase FAILED with conflicts:\n\n1. **Abort the rebase** (DO NOT leave repo in conflicted state):\n```bash\ngit rebase --abort\n```\n\n2. **Record conflict metadata**:\n```bash\n# Capture main SHA for reference\nMAIN_SHA=$(git rev-parse origin/main)\nBRANCH_SHA=$(git rev-parse origin/<polecat-branch>)\n```\n\n3. **Create conflict-resolution task**:\n```bash\nbd create --type=task --priority=1 --title=\"Resolve merge conflicts: <original-issue-title>\" --description=\"## Conflict Resolution Required\n\nOriginal MR: <mr-bead-id>\nBranch: <polecat-branch>\nOriginal Issue: <issue-id>\nConflict with main at: ${MAIN_SHA}\nBranch SHA: ${BRANCH_SHA}\n\n## Instructions\n1. Clone/checkout the branch\n2. Rebase on current main: git rebase origin/main\n3. Resolve conflicts\n4. Force push: git push -f origin <branch>\n5. Close this task when done\n\nThe MR will be re-queued for processing after conflicts are resolved.\"\n```\n\n4. **Skip this MR** (do NOT delete branch or close MR bead):\n- Leave branch intact for conflict resolution\n- Leave MR bead open (will be re-processed after resolution)\n- Continue to loop-check for next branch\n\n**CRITICAL**: Never delete a branch that has conflicts. The branch contains\nthe original work and must be preserved for conflict resolution.\n\nTrack: rebase result (success/conflict), conflict task ID if created.", "status": "open", "priority": 2, "issue_type": "task", "created_at": "2026-02-28T03:00:55Z", "updated_at": "2026-02-28T03:00:55Z", "dependencies": [{"issue_id": "gt-wisp-8ohti", "depends_on_id": "gt-wisp-qxuap", "type": "blocks", "created_at": "2026-02-27T19:00:55Z", "created_by": "refinery", "metadata": "{}"}, {"issue_id": "gt-wisp-8ohti", "depends_on_id": "gt-wisp-ybyhe", "type": "parent-child", "created_at": "2026-02-27T19:00:55Z", "created_by": "refinery", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-ybyhe"}
{"id": "gt-wisp-8r5es", "title": "End-of-cycle inbox hygiene", "description": "Verify inbox hygiene before ending patrol cycle.\n\n**Step 1: Check inbox state**\n```bash\ngt mail inbox\n```\n\nInbox should contain ONLY:\n- Unprocessed MERGE_READY messages (will process next cycle)\n- Active work items\n\n**Step 2: Archive any stale messages**\n\nLook for messages that were processed but not archived:\n- PATROL: Wake up that was acknowledged → archive\n- HELP/Blocked that was handled → archive\n- MERGE_READY where merge completed but archive was missed → archive\n\n```bash\n# For each stale message found:\ngt mail archive <message-id>\n```\n\n**Step 3: Check for orphaned MR beads**\n\nLook for open MR beads with no corresponding branch:\n```bash\nbd list --type=merge-request --status=open\n```\n\nFor each open MR bead:\n1. Check if branch exists: `git ls-remote origin refs/heads/<branch>`\n2. If branch gone, verify work is on main: `git log origin/main --oneline | grep \"<source_issue>\"`\n3. If work on main → close MR with reason \"Merged (verified on main)\"\n4. If work NOT on main → investigate before closing:\n   - Check source_issue validity (should be gt-xxxxx, not branch name)\n   - Search reflog/dangling commits if possible\n   - If unverifiable, close with reason \"Unverifiable - no audit trail\"\n   - File bead if this indicates lost work\n\n**NEVER close an MR bead without verifying the work landed or is unrecoverable.**\n\n**Goal**: Inbox should have ≤3 active messages at end of cycle.\nKeep only: pending MRs in queue.", "status": "open", "priority": 2, "issue_type": "task", "created_at": "2026-02-28T03:00:55Z", "updated_at": "2026-02-28T03:00:55Z", "dependencies": [{"issue_id": "gt-wisp-8r5es", "depends_on_id": "gt-wisp-eeax0", "type": "blocks", "created_at": "2026-02-27T19:00:55Z", "created_by": "refinery", "metadata": "{}"}, {"issue_id": "gt-wisp-8r5es", "depends_on_id": "gt-wisp-ybyhe", "type": "parent-child", "created_at": "2026-02-27T19:00:55Z", "created_by": "refinery", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-ybyhe"}
{"id": "gt-wisp-8ukoo", "title": "Merge and push to main", "description": "Merge to main and push. CRITICAL: Notifications come IMMEDIATELY after push.\n\n**Step 1: Merge and Push**\n```bash\ngit checkout main\ngit merge --ff-only temp\ngit push origin main\n```\n\n⚠️ **STOP HERE - DO NOT PROCEED UNTIL STEPS 2-3 COMPLETE**\n\n**Step 2: Send MERGED Notification (REQUIRED - DO THIS IMMEDIATELY)**\n\nRIGHT NOW, before any cleanup, send MERGED mail to Witness:\n\n```bash\ngt mail send <rig>/witness -s \"MERGED <polecat-name>\" -m \"Branch: <branch>\nIssue: <issue-id>\nMerged-At: $(date -u +%Y-%m-%dT%H:%M:%SZ)\"\n```\n\nThis signals the Witness to nuke the polecat worktree. WITHOUT THIS NOTIFICATION,\nPOLECAT WORKTREES ACCUMULATE INDEFINITELY AND THE LIFECYCLE BREAKS.\n\n**Step 3: Close MR Bead (REQUIRED - DO THIS IMMEDIATELY)**\n\n⚠️ **VERIFICATION BEFORE CLOSING**: Confirm the work is actually on main:\n```bash\n# Get the commit message/issue from the branch\ngit log origin/main --oneline | grep \"<issue-id>\"\n# OR verify the commit SHA is on main:\ngit branch --contains <commit-sha> | grep main\n```\n\nIf work is NOT on main, DO NOT close the MR bead. Investigate first.\n\n```bash\nbd close <mr-bead-id> --reason \"Merged to main at $(git rev-parse --short HEAD)\"\n```\n\nThe MR bead ID was in the MERGE_READY message or find via:\n```bash\nbd list --type=merge-request --status=open | grep <polecat-name>\n```\n\n**VALIDATION**: The MR bead's source_issue should be a valid bead ID (gt-xxxxx),\nnot a branch name. If source_issue contains a branch name, flag for investigation.\n\n**Step 4: Archive the MERGE_READY mail (REQUIRED)**\n```bash\ngt mail archive <merge-ready-message-id>\n```\nThe message ID was tracked when you processed inbox-check.\n\n**Step 5: Cleanup (only after Steps 2-4 confirmed)**\n```bash\ngit branch -d temp\ngit push origin --delete <polecat-branch>\n```\n\n**VERIFICATION GATE**: You CANNOT proceed to loop-check without:\n- [x] MERGED mail sent to witness\n- [x] MR bead closed\n- [x] MERGE_READY mail archived\n\nIf you skipped notifications or archiving, GO BACK AND DO THEM NOW.\n\nMain has moved. Any remaining branches need rebasing on new baseline.", "status": "open", "priority": 2, "issue_type": "task", "created_at": "2026-02-28T03:17:24Z", "updated_at": "2026-02-28T03:17:24Z", "dependencies": [{"issue_id": "gt-wisp-8ukoo", "depends_on_id": "gt-wisp-f7cqp", "type": "parent-child", "created_at": "2026-02-27T19:17:24Z", "created_by": "refinery", "metadata": "{}"}, {"issue_id": "gt-wisp-8ukoo", "depends_on_id": "gt-wisp-o1zrc", "type": "blocks", "created_at": "2026-02-27T19:17:24Z", "created_by": "refinery", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-f7cqp"}
{"id": "gt-wisp-8wpns", "title": "Check refinery mail", "description": "Check mail for MERGE_READY submissions, escalations, and messages.\n\n```bash\ngt mail inbox\n```\n\nFor each message:\n\n**MERGE_READY**:\nA polecat's work is ready for merge. Extract details and track for processing.\n\n```bash\n# Parse MERGE_READY message body:\n# Branch: <branch>\n# Issue: <issue-id>\n# Polecat: <polecat-name>\n# MR: <mr-bead-id>\n# Verified: clean git state, issue closed\n\n# Track in your merge queue for this patrol cycle:\n# - Branch name\n# - Issue ID\n# - Polecat name (REQUIRED for MERGED notification)\n# - MR bead ID (REQUIRED for closing after merge)\n```\n\n**IMPORTANT**: You MUST track the polecat name, MR bead ID, AND message ID - you will need them\nin merge-push step to send MERGED notification, close the MR bead, and archive the mail.\n\nMark as read. The work will be processed in queue-scan/process-branch.\n**Do NOT archive yet** - archive after merge/reject decision in merge-push step.\n\n**PATROL: Wake up**:\nWitness detected MRs waiting but refinery idle. Acknowledge and archive:\n```bash\ngt mail archive <message-id>\n```\n\n**HELP / Blocked**:\nAssess and respond. If you can't help, escalate to Mayor.\nArchive after handling:\n```bash\ngt mail archive <message-id>\n```\n\n**HANDOFF**:\nRead predecessor context. Check for in-flight merges.\nArchive after absorbing context:\n```bash\ngt mail archive <message-id>\n```\n\n**Hygiene principle**: Archive messages after they're fully processed.\nKeep only: pending MRs in queue. Inbox should be near-empty.", "status": "open", "priority": 2, "issue_type": "task", "created_at": "2026-02-28T03:18:49Z", "updated_at": "2026-02-28T03:18:49Z", "dependencies": [{"issue_id": "gt-wisp-8wpns", "depends_on_id": "gt-wisp-iwq01", "type": "parent-child", "created_at": "2026-02-27T19:18:49Z", "created_by": "refinery", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-iwq01"}
{"id": "gt-wisp-98yee", "title": "mol-polecat-work", "description": "Full polecat work lifecycle from assignment through completion.\n\nThis molecule guides a polecat through a complete work assignment. Each step\nhas clear entry/exit criteria and specific commands to run. A polecat can\ncrash after any step and resume from the last completed step.\n\n## Polecat Contract (Self-Cleaning Model)\n\nYou are a self-cleaning worker. You:\n1. Receive work via your hook (pinned molecule + issue)\n2. Work through molecule steps using `bd ready` / `bd close <step>`\n3. Complete and self-clean via `gt done` (submit + nuke yourself)\n4. You are GONE - Refinery merges from MQ\n\n**Self-cleaning:** When you run `gt done`, you push your work, submit to MQ,\nnuke your sandbox, and exit. There is no idle state. Done means gone.\n\n**Important:** This formula defines the template. Your molecule already has step\nbeads created from it. Use `bd ready` to find them - do NOT read this file directly.\n\n**You do NOT:**\n- Push directly to main (Refinery merges from MQ)\n- Close your own issue (Refinery closes after merge)\n- Wait for merge (you're gone after `gt done`)\n- Handle rebase conflicts (Refinery spawns fresh polecats for that)\n\n## Variables\n\n| Variable | Source | Description |\n|----------|--------|-------------|\n| issue | hook_bead | The issue ID you're assigned to work on |\n\n## Failure Modes\n\n| Situation | Action |\n|-----------|--------|\n| Tests fail | Fix them. Do not proceed with failures. |\n| Blocked on external | Mail Witness for help, mark yourself stuck |\n| Context filling | Use gt handoff to cycle to fresh session |\n| Unsure what to do | Mail Witness, don't guess |", "status": "closed", "priority": 2, "issue_type": "epic", "created_at": "2026-02-28T03:12:16Z", "updated_at": "2026-02-28T03:43:23Z", "closed_at": "2026-02-28T03:43:23Z", "close_reason": "burned: force re-sling", "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-wisp-999zp", "title": "Handle test failures", "description": "**VERIFICATION GATE**: This step enforces the Beads Promise.\n\nIf tests PASSED: This step auto-completes. Proceed to merge.\n\nIf tests FAILED:\n1. Diagnose: Is this a branch regression or pre-existing on main?\n2. If branch caused it:\n   - Abort merge\n   - Notify polecat: \"Tests failing. Please fix and resubmit.\"\n   - Skip to loop-check\n3. If pre-existing on main:\n   - File a bead: bd create --type=bug --priority=1 --title=\"...\"\n   - FORBIDDEN: Writing code to fix test failures. You merge branches, you do not develop.\n   - Proceed with the merge if the failure is pre-existing (not caused by the branch).\n\n**GATE REQUIREMENT**: You CANNOT proceed to merge-push without:\n- Tests passing, OR\n- Bead filed for the pre-existing failure\n\nFORBIDDEN: Writing application code, exploring polecat implementations, or\nre-implementing fixes. You are a mechanical merge processor.\n\nThis is non-negotiable. Never disavow. Never \"note and proceed.\" ", "status": "open", "priority": 2, "issue_type": "task", "created_at": "2026-02-28T03:18:49Z", "updated_at": "2026-02-28T03:18:49Z", "dependencies": [{"issue_id": "gt-wisp-999zp", "depends_on_id": "gt-wisp-iwq01", "type": "parent-child", "created_at": "2026-02-27T19:18:49Z", "created_by": "refinery", "metadata": "{}"}, {"issue_id": "gt-wisp-999zp", "depends_on_id": "gt-wisp-p2ccb", "type": "blocks", "created_at": "2026-02-27T19:18:49Z", "created_by": "refinery", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-iwq01"}
{"id": "gt-wisp-9bzu1", "title": "Merge: gt-rcrt", "description": "branch: polecat/keeper/gt-rcrt@mm5q81dx\ntarget: main\nsource_issue: gt-rcrt\nrig: gastown\nworker: keeper\nagent_bead: gt-gastown-polecat-keeper\nretry_count: 0\nlast_conflict_sha: null\nconflict_task_id: null", "status": "closed", "priority": 2, "issue_type": "task", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-28T03:02:59Z", "created_by": "gastown/polecats/keeper", "updated_at": "2026-02-28T03:10:02Z", "closed_at": "2026-02-28T03:10:02Z", "close_reason": "rejected: Source issue gt-rcrt already closed - stale MR from recycled polecat", "labels": ["gt:merge-request"], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-wisp-9djfo", "title": "Handle test failures", "description": "**VERIFICATION GATE**: This step enforces the Beads Promise.\n\nIf tests PASSED: This step auto-completes. Proceed to merge.\n\nIf tests FAILED:\n1. Diagnose: Is this a branch regression or pre-existing on main?\n2. If branch caused it:\n   - Abort merge\n   - Notify polecat: \"Tests failing. Please fix and resubmit.\"\n   - Skip to loop-check\n3. If pre-existing on main:\n   - File a bead: bd create --type=bug --priority=1 --title=\"...\"\n   - FORBIDDEN: Writing code to fix test failures. You merge branches, you do not develop.\n   - Proceed with the merge if the failure is pre-existing (not caused by the branch).\n\n**GATE REQUIREMENT**: You CANNOT proceed to merge-push without:\n- Tests passing, OR\n- Bead filed for the pre-existing failure\n\nFORBIDDEN: Writing application code, exploring polecat implementations, or\nre-implementing fixes. You are a mechanical merge processor.\n\nThis is non-negotiable. Never disavow. Never \"note and proceed.\" ", "status": "open", "priority": 2, "issue_type": "task", "created_at": "2026-02-28T03:18:01Z", "updated_at": "2026-02-28T03:18:01Z", "dependencies": [{"issue_id": "gt-wisp-9djfo", "depends_on_id": "gt-wisp-1wrrq", "type": "blocks", "created_at": "2026-02-27T19:18:01Z", "created_by": "refinery", "metadata": "{}"}, {"issue_id": "gt-wisp-9djfo", "depends_on_id": "gt-wisp-y6e5z", "type": "parent-child", "created_at": "2026-02-27T19:18:01Z", "created_by": "refinery", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-y6e5z"}
{"id": "gt-wisp-9gj9e", "title": "Generate handoff summary", "description": "Summarize this patrol cycle.\n\n**VERIFICATION**: Before generating summary, confirm for each merged branch:\n- [ ] MERGED mail was sent to witness\n- [ ] MR bead was closed\n- [ ] MERGE_READY mail archived\n\nIf any notifications or archiving were missed, do them now!\n\nInclude in summary:\n- Branches merged (count, names)\n- MERGED mails sent (count - should match branches merged)\n- MR beads closed (count - should match branches merged)\n- MERGE_READY mails archived (count - should match branches merged)\n- Test results (pass/fail)\n- Branches with conflicts (count, names)\n- Conflict-resolution tasks created (IDs)\n- Issues filed (if any)\n- Any escalations sent\n\n**Conflict tracking is important** for monitoring MQ health. If many branches\nconflict, it may indicate main is moving too fast or branches are too stale.\n\nThis becomes the digest when the patrol is squashed.", "status": "open", "priority": 2, "issue_type": "task", "created_at": "2026-02-28T03:19:24Z", "updated_at": "2026-02-28T03:19:24Z", "dependencies": [{"issue_id": "gt-wisp-9gj9e", "depends_on_id": "gt-wisp-03rto", "type": "blocks", "created_at": "2026-02-27T19:19:24Z", "created_by": "refinery", "metadata": "{}"}, {"issue_id": "gt-wisp-9gj9e", "depends_on_id": "gt-wisp-gt024", "type": "parent-child", "created_at": "2026-02-27T19:19:24Z", "created_by": "refinery", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-gt024"}
{"id": "gt-wisp-9syf0", "title": "Generate handoff summary", "description": "Summarize this patrol cycle.\n\n**VERIFICATION**: Before generating summary, confirm for each merged branch:\n- [ ] MERGED mail was sent to witness\n- [ ] MR bead was closed\n- [ ] MERGE_READY mail archived\n\nIf any notifications or archiving were missed, do them now!\n\nInclude in summary:\n- Branches merged (count, names)\n- MERGED mails sent (count - should match branches merged)\n- MR beads closed (count - should match branches merged)\n- MERGE_READY mails archived (count - should match branches merged)\n- Test results (pass/fail)\n- Branches with conflicts (count, names)\n- Conflict-resolution tasks created (IDs)\n- Issues filed (if any)\n- Any escalations sent\n\n**Conflict tracking is important** for monitoring MQ health. If many branches\nconflict, it may indicate main is moving too fast or branches are too stale.\n\nThis becomes the digest when the patrol is squashed.", "status": "open", "priority": 2, "issue_type": "task", "created_at": "2026-02-28T03:18:49Z", "updated_at": "2026-02-28T03:18:49Z", "dependencies": [{"issue_id": "gt-wisp-9syf0", "depends_on_id": "gt-wisp-iwq01", "type": "parent-child", "created_at": "2026-02-27T19:18:49Z", "created_by": "refinery", "metadata": "{}"}, {"issue_id": "gt-wisp-9syf0", "depends_on_id": "gt-wisp-y15xi", "type": "blocks", "created_at": "2026-02-27T19:18:49Z", "created_by": "refinery", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-iwq01"}
{"id": "gt-wisp-9x0e8", "title": "Burn and respawn or loop", "description": "End of patrol cycle decision.\n\n**Step 1: Estimate remaining context**\n\nAsk yourself:\n- Have I processed many branches this cycle?\n- Is the conversation getting long?\n- Am I starting to lose track of earlier context?\n\nRule of thumb: If you've done 3+ merges or processed significant cleanup work,\nit's time for a fresh session.\n\n**Step 2: Decision tree**\n\nIf queue non-empty AND context LOW:\n- Squash this wisp to digest\n- Spawn fresh patrol wisp\n- Return to inbox-check\n\nIf queue empty OR context HIGH OR good stopping point:\n- Squash wisp with summary digest\n- Use `gt handoff` for clean session transition:\n\n```bash\ngt handoff -s \"Patrol complete\" -m \"Merged X branches, Y tests passed.\nQueue: empty/N remaining\nNext: [any notes for successor]\"\n```\n\n**Why gt handoff?**\n- Sends handoff mail to yourself with context\n- Respawns with fresh Claude instance\n- SessionStart hook runs gt prime\n- Successor picks up from your hook\n\n**DO NOT just exit.** Always use `gt handoff` for proper lifecycle.", "status": "open", "priority": 2, "issue_type": "task", "created_at": "2026-02-28T03:18:01Z", "updated_at": "2026-02-28T03:18:01Z", "dependencies": [{"issue_id": "gt-wisp-9x0e8", "depends_on_id": "gt-wisp-4pvf9", "type": "blocks", "created_at": "2026-02-27T19:18:01Z", "created_by": "refinery", "metadata": "{}"}, {"issue_id": "gt-wisp-9x0e8", "depends_on_id": "gt-wisp-y6e5z", "type": "parent-child", "created_at": "2026-02-27T19:18:01Z", "created_by": "refinery", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-y6e5z"}
{"id": "gt-wisp-9zxe2", "title": "Check own context limit", "description": "Check own context usage.\n\nIf context is HIGH (>80%):\n- Write handoff summary\n- Prepare for burn/respawn\n\nIf context is LOW:\n- Can continue processing", "status": "open", "priority": 2, "issue_type": "task", "created_at": "2026-02-28T03:17:40Z", "updated_at": "2026-02-28T03:17:40Z", "dependencies": [{"issue_id": "gt-wisp-9zxe2", "depends_on_id": "gt-wisp-edwlt", "type": "parent-child", "created_at": "2026-02-27T19:17:39Z", "created_by": "refinery", "metadata": "{}"}, {"issue_id": "gt-wisp-9zxe2", "depends_on_id": "gt-wisp-hz2um", "type": "blocks", "created_at": "2026-02-27T19:17:39Z", "created_by": "refinery", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-edwlt"}
{"id": "gt-wisp-a1aa1", "title": "Self-review changes", "description": "Review your own changes before running tests.\n\n**1. Review the diff:**\n```bash\ngit diff origin/main...HEAD     # All changes vs main\ngit log --oneline origin/main..HEAD  # All commits\n```\n\n**2. Check for common issues:**\n\n| Category | Look For |\n|----------|----------|\n| Bugs | Off-by-one, null handling, edge cases |\n| Security | Injection, auth bypass, exposed secrets |\n| Style | Naming, formatting, code organization |\n| Completeness | Missing error handling, incomplete paths |\n| Cruft | Debug prints, commented code, TODOs |\n\n**3. Fix issues found:**\nDon't just note them - fix them now. Amend or add commits as needed.\n\n**4. Verify no unintended changes:**\n```bash\ngit diff --stat origin/main...HEAD\n# Only files relevant to gt-08iv should appear\n```\n\nIf you accidentally modified unrelated files, remove those changes.\n\n**Exit criteria:** Changes are clean, reviewed, and ready for testing.", "status": "closed", "priority": 2, "issue_type": "task", "created_at": "2026-02-28T02:42:25Z", "updated_at": "2026-02-28T02:51:12Z", "closed_at": "2026-02-28T02:51:12Z", "close_reason": "no-changes: review-only task, no code to self-review", "dependencies": [{"issue_id": "gt-wisp-a1aa1", "depends_on_id": "gt-wisp-st5bf", "type": "parent-child", "created_at": "2026-02-27T18:42:25Z", "created_by": "mayor", "metadata": "{}"}, {"issue_id": "gt-wisp-a1aa1", "depends_on_id": "gt-wisp-yp1j3", "type": "blocks", "created_at": "2026-02-27T18:42:25Z", "created_by": "mayor", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-st5bf"}
{"id": "gt-wisp-a7w8s", "title": "mol-polecat-work", "description": "Full polecat work lifecycle from assignment through completion.\n\nThis molecule guides a polecat through a complete work assignment. Each step\nhas clear entry/exit criteria and specific commands to run. A polecat can\ncrash after any step and resume from the last completed step.\n\n## Polecat Contract (Self-Cleaning Model)\n\nYou are a self-cleaning worker. You:\n1. Receive work via your hook (pinned molecule + issue)\n2. Work through molecule steps using `bd ready` / `bd close <step>`\n3. Complete and self-clean via `gt done` (submit + nuke yourself)\n4. You are GONE - Refinery merges from MQ\n\n**Self-cleaning:** When you run `gt done`, you push your work, submit to MQ,\nnuke your sandbox, and exit. There is no idle state. Done means gone.\n\n**Important:** This formula defines the template. Your molecule already has step\nbeads created from it. Use `bd ready` to find them - do NOT read this file directly.\n\n**You do NOT:**\n- Push directly to main (Refinery merges from MQ)\n- Close your own issue (Refinery closes after merge)\n- Wait for merge (you're gone after `gt done`)\n- Handle rebase conflicts (Refinery spawns fresh polecats for that)\n\n## Variables\n\n| Variable | Source | Description |\n|----------|--------|-------------|\n| issue | hook_bead | The issue ID you're assigned to work on |\n\n## Failure Modes\n\n| Situation | Action |\n|-----------|--------|\n| Tests fail | Fix them. Do not proceed with failures. |\n| Blocked on external | Mail Witness for help, mark yourself stuck |\n| Context filling | Use gt handoff to cycle to fresh session |\n| Unsure what to do | Mail Witness, don't guess |", "status": "closed", "priority": 2, "issue_type": "epic", "created_at": "2026-02-28T02:52:37Z", "updated_at": "2026-02-28T03:05:00Z", "closed_at": "2026-02-28T03:05:00Z", "close_reason": "burned: force re-sling", "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-wisp-a83ty", "title": "Merge: gt-0jh0", "description": "branch: polecat/slit/gt-0jh0@mm5oq01w\ntarget: main\nsource_issue: gt-0jh0\nrig: gastown\nworker: slit\nagent_bead: gt-gastown-polecat-slit\nretry_count: 0\nlast_conflict_sha: null\nconflict_task_id: null", "status": "closed", "priority": 1, "issue_type": "task", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-28T02:13:34Z", "created_by": "gastown/polecats/slit", "updated_at": "2026-02-28T02:15:43Z", "closed_at": "2026-02-28T02:15:43Z", "close_reason": "Stale MR: branch polecat/slit/gt-0jh0@mm5oq01w does not exist on any remote. Source issue gt-0jh0 already closed. Polecat slit no longer running.", "labels": ["gt:merge-request"], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-wisp-aigid", "title": "Submit work and self-clean", "description": "Submit your work and clean up. You cease to exist after this step.\n\n**Self-Cleaning Model:**\nOnce you run `gt done`, you're gone. The command:\n1. Pushes your branch to origin\n2. Creates an MR bead in the merge queue\n3. Nukes your sandbox (worktree removal)\n4. Exits your session immediately\n\n**Run gt done:**\n```bash\ngt done\n```\n\nYou should see output like:\n```\n✓ Work submitted to merge queue\n  MR ID: gt-xxxxx\n  Source: polecat/<name>\n  Target: main\n  Issue: gt-y8x4\n✓ Sandbox nuked\n✓ Session exiting\n```\n\n**What happens next (not your concern):**\n- Refinery processes your MR from the queue\n- Refinery rebases and merges to main\n- Refinery closes the issue\n- If conflicts: Refinery spawns a FRESH polecat to re-implement\n\nYou are NOT involved in any of that. You're gone. Done means gone.\n\n**Exit criteria:** Work submitted, sandbox nuked, session exited.", "status": "closed", "priority": 2, "issue_type": "task", "assignee": "gastown/polecats/furiosa", "created_at": "2026-02-28T02:42:12Z", "updated_at": "2026-02-28T02:48:47Z", "closed_at": "2026-02-28T02:48:47Z", "close_reason": "Closed", "dependencies": [{"issue_id": "gt-wisp-aigid", "depends_on_id": "gt-wisp-2vlrx", "type": "parent-child", "created_at": "2026-02-27T18:42:12Z", "created_by": "mayor", "metadata": "{}"}, {"issue_id": "gt-wisp-aigid", "depends_on_id": "gt-wisp-pmsyb", "type": "blocks", "created_at": "2026-02-27T18:42:12Z", "created_by": "mayor", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-2vlrx"}
{"id": "gt-wisp-ayks1", "title": "Check own context limit", "description": "Check own context usage.\n\nIf context is HIGH (>80%):\n- Write handoff summary\n- Prepare for burn/respawn\n\nIf context is LOW:\n- Can continue processing", "status": "open", "priority": 2, "issue_type": "task", "created_at": "2026-02-28T03:00:29Z", "updated_at": "2026-02-28T03:00:29Z", "dependencies": [{"issue_id": "gt-wisp-ayks1", "depends_on_id": "gt-wisp-0wdlo", "type": "blocks", "created_at": "2026-02-27T19:00:29Z", "created_by": "refinery", "metadata": "{}"}, {"issue_id": "gt-wisp-ayks1", "depends_on_id": "gt-wisp-76pw5", "type": "parent-child", "created_at": "2026-02-27T19:00:29Z", "created_by": "refinery", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-76pw5"}
{"id": "gt-wisp-b4wwx", "title": "Prepare work for review", "description": "Verify work is complete and ready for merge queue.\n\n**Note:** Do NOT close the issue. The Refinery will close it after successful merge.\nThis enables conflict-resolution retries without reopening closed issues.\n\n**1. Verify the issue shows your work:**\n```bash\nbd show gt-08iv\n# Status should still be 'in_progress' (you're working on it)\n```\n\n**2. Add completion notes:**\n```bash\nbd update gt-08iv --notes \"Implemented: <brief summary of what was done>\"\n```\n\n**3. Sync beads:**\n```bash\nbd sync\n```\n\n**Exit criteria:** Issue updated with completion notes, beads synced.", "status": "closed", "priority": 2, "issue_type": "task", "created_at": "2026-02-28T02:42:25Z", "updated_at": "2026-02-28T02:51:28Z", "closed_at": "2026-02-28T02:51:28Z", "close_reason": "no-changes: review-only task, findings persisted to beads", "dependencies": [{"issue_id": "gt-wisp-b4wwx", "depends_on_id": "gt-wisp-st5bf", "type": "parent-child", "created_at": "2026-02-27T18:42:25Z", "created_by": "mayor", "metadata": "{}"}, {"issue_id": "gt-wisp-b4wwx", "depends_on_id": "gt-wisp-uw5av", "type": "blocks", "created_at": "2026-02-27T18:42:25Z", "created_by": "mayor", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-st5bf"}
{"id": "gt-wisp-b56tw", "title": "Run test suite", "description": "Run the test suite.\n\n```bash\ngo test ./...\n```\n\nTrack results: pass count, fail count, specific failures.", "status": "open", "priority": 2, "issue_type": "task", "created_at": "2026-02-28T03:00:55Z", "updated_at": "2026-02-28T03:00:55Z", "dependencies": [{"issue_id": "gt-wisp-b56tw", "depends_on_id": "gt-wisp-8ohti", "type": "blocks", "created_at": "2026-02-27T19:00:55Z", "created_by": "refinery", "metadata": "{}"}, {"issue_id": "gt-wisp-b56tw", "depends_on_id": "gt-wisp-ybyhe", "type": "parent-child", "created_at": "2026-02-27T19:00:55Z", "created_by": "refinery", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-ybyhe"}
{"id": "gt-wisp-b8o8v", "title": "Burn and respawn or loop", "description": "End of patrol cycle decision.\n\n**Step 1: Estimate remaining context**\n\nAsk yourself:\n- Have I processed many branches this cycle?\n- Is the conversation getting long?\n- Am I starting to lose track of earlier context?\n\nRule of thumb: If you've done 3+ merges or processed significant cleanup work,\nit's time for a fresh session.\n\n**Step 2: Decision tree**\n\nIf queue non-empty AND context LOW:\n- Squash this wisp to digest\n- Spawn fresh patrol wisp\n- Return to inbox-check\n\nIf queue empty OR context HIGH OR good stopping point:\n- Squash wisp with summary digest\n- Use `gt handoff` for clean session transition:\n\n```bash\ngt handoff -s \"Patrol complete\" -m \"Merged X branches, Y tests passed.\nQueue: empty/N remaining\nNext: [any notes for successor]\"\n```\n\n**Why gt handoff?**\n- Sends handoff mail to yourself with context\n- Respawns with fresh Claude instance\n- SessionStart hook runs gt prime\n- Successor picks up from your hook\n\n**DO NOT just exit.** Always use `gt handoff` for proper lifecycle.", "status": "open", "priority": 2, "issue_type": "task", "created_at": "2026-02-28T03:48:28Z", "updated_at": "2026-02-28T03:48:28Z", "dependencies": [{"issue_id": "gt-wisp-b8o8v", "depends_on_id": "gt-wisp-fbkga", "type": "parent-child", "created_at": "2026-02-27T19:48:28Z", "created_by": "refinery", "metadata": "{}"}, {"issue_id": "gt-wisp-b8o8v", "depends_on_id": "gt-wisp-gxnwv", "type": "blocks", "created_at": "2026-02-27T19:48:28Z", "created_by": "refinery", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-fbkga"}
{"id": "gt-wisp-b9ae7", "title": "Mechanical rebase", "description": "Pick next branch from queue. Attempt mechanical rebase on current main.\n\n**Step 1: Checkout and attempt rebase**\n```bash\ngit checkout -b temp origin/<polecat-branch>\ngit rebase origin/main\n```\n\n**Step 2: Check rebase result**\n\nThe rebase exits with:\n- Exit code 0: Success - proceed to run-tests\n- Exit code 1 (conflicts): Conflict detected - proceed to Step 3\n\nTo detect conflict state after rebase fails:\n```bash\n# Check if we're in a conflicted rebase state\nls .git/rebase-merge 2>/dev/null && echo \"CONFLICT_STATE\"\n```\n\n**Step 3: Handle conflicts (if any)**\n\nIf rebase SUCCEEDED (exit code 0):\n- Skip to run-tests step (continue normal merge flow)\n\nIf rebase FAILED with conflicts:\n\n1. **Abort the rebase** (DO NOT leave repo in conflicted state):\n```bash\ngit rebase --abort\n```\n\n2. **Record conflict metadata**:\n```bash\n# Capture main SHA for reference\nMAIN_SHA=$(git rev-parse origin/main)\nBRANCH_SHA=$(git rev-parse origin/<polecat-branch>)\n```\n\n3. **Create conflict-resolution task**:\n```bash\nbd create --type=task --priority=1 --title=\"Resolve merge conflicts: <original-issue-title>\" --description=\"## Conflict Resolution Required\n\nOriginal MR: <mr-bead-id>\nBranch: <polecat-branch>\nOriginal Issue: <issue-id>\nConflict with main at: ${MAIN_SHA}\nBranch SHA: ${BRANCH_SHA}\n\n## Instructions\n1. Clone/checkout the branch\n2. Rebase on current main: git rebase origin/main\n3. Resolve conflicts\n4. Force push: git push -f origin <branch>\n5. Close this task when done\n\nThe MR will be re-queued for processing after conflicts are resolved.\"\n```\n\n4. **Skip this MR** (do NOT delete branch or close MR bead):\n- Leave branch intact for conflict resolution\n- Leave MR bead open (will be re-processed after resolution)\n- Continue to loop-check for next branch\n\n**CRITICAL**: Never delete a branch that has conflicts. The branch contains\nthe original work and must be preserved for conflict resolution.\n\nTrack: rebase result (success/conflict), conflict task ID if created.", "status": "open", "priority": 2, "issue_type": "task", "created_at": "2026-02-28T03:48:28Z", "updated_at": "2026-02-28T03:48:28Z", "dependencies": [{"issue_id": "gt-wisp-b9ae7", "depends_on_id": "gt-wisp-fbkga", "type": "parent-child", "created_at": "2026-02-27T19:48:28Z", "created_by": "refinery", "metadata": "{}"}, {"issue_id": "gt-wisp-b9ae7", "depends_on_id": "gt-wisp-lnhf5", "type": "blocks", "created_at": "2026-02-27T19:48:28Z", "created_by": "refinery", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-fbkga"}
{"id": "gt-wisp-bkx9h", "title": "Merge: gt-7uhc", "description": "branch: polecat/toast/gt-7uhc@mm5q6kht\ntarget: main\nsource_issue: gt-7uhc\nrig: gastown\nworker: toast\nagent_bead: gt-gastown-polecat-toast\nretry_count: 0\nlast_conflict_sha: null\nconflict_task_id: null", "status": "closed", "priority": 1, "issue_type": "task", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-28T03:00:58Z", "created_by": "gastown/polecats/toast", "updated_at": "2026-02-28T03:04:43Z", "closed_at": "2026-02-28T03:04:43Z", "close_reason": "merged", "labels": ["gt:merge-request"], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-wisp-c91dr", "title": "mol-polecat-work", "description": "Full polecat work lifecycle from assignment through completion.\n\nThis molecule guides a polecat through a complete work assignment. Each step\nhas clear entry/exit criteria and specific commands to run. A polecat can\ncrash after any step and resume from the last completed step.\n\n## Polecat Contract (Self-Cleaning Model)\n\nYou are a self-cleaning worker. You:\n1. Receive work via your hook (pinned molecule + issue)\n2. Work through molecule steps using `bd ready` / `bd close <step>`\n3. Complete and self-clean via `gt done` (submit + nuke yourself)\n4. You are GONE - Refinery merges from MQ\n\n**Self-cleaning:** When you run `gt done`, you push your work, submit to MQ,\nnuke your sandbox, and exit. There is no idle state. Done means gone.\n\n**Important:** This formula defines the template. Your molecule already has step\nbeads created from it. Use `bd ready` to find them - do NOT read this file directly.\n\n**You do NOT:**\n- Push directly to main (Refinery merges from MQ)\n- Close your own issue (Refinery closes after merge)\n- Wait for merge (you're gone after `gt done`)\n- Handle rebase conflicts (Refinery spawns fresh polecats for that)\n\n## Variables\n\n| Variable | Source | Description |\n|----------|--------|-------------|\n| issue | hook_bead | The issue ID you're assigned to work on |\n\n## Failure Modes\n\n| Situation | Action |\n|-----------|--------|\n| Tests fail | Fix them. Do not proceed with failures. |\n| Blocked on external | Mail Witness for help, mark yourself stuck |\n| Context filling | Use gt handoff to cycle to fresh session |\n| Unsure what to do | Mail Witness, don't guess |", "status": "open", "priority": 2, "issue_type": "epic", "created_at": "2026-02-28T03:43:32Z", "updated_at": "2026-02-28T03:43:32Z", "ephemeral": true, "dependency_count": 0, "dependent_count": 1, "comment_count": 0}
{"id": "gt-wisp-ckxd2", "title": "Burn and respawn or loop", "description": "End of patrol cycle decision.\n\n**Step 1: Estimate remaining context**\n\nAsk yourself:\n- Have I processed many branches this cycle?\n- Is the conversation getting long?\n- Am I starting to lose track of earlier context?\n\nRule of thumb: If you've done 3+ merges or processed significant cleanup work,\nit's time for a fresh session.\n\n**Step 2: Decision tree**\n\nIf queue non-empty AND context LOW:\n- Squash this wisp to digest\n- Spawn fresh patrol wisp\n- Return to inbox-check\n\nIf queue empty OR context HIGH OR good stopping point:\n- Squash wisp with summary digest\n- Use `gt handoff` for clean session transition:\n\n```bash\ngt handoff -s \"Patrol complete\" -m \"Merged X branches, Y tests passed.\nQueue: empty/N remaining\nNext: [any notes for successor]\"\n```\n\n**Why gt handoff?**\n- Sends handoff mail to yourself with context\n- Respawns with fresh Claude instance\n- SessionStart hook runs gt prime\n- Successor picks up from your hook\n\n**DO NOT just exit.** Always use `gt handoff` for proper lifecycle.", "status": "open", "priority": 2, "issue_type": "task", "created_at": "2026-02-28T03:49:11Z", "updated_at": "2026-02-28T03:49:11Z", "dependencies": [{"issue_id": "gt-wisp-ckxd2", "depends_on_id": "gt-wisp-s2vyx", "type": "parent-child", "created_at": "2026-02-27T19:49:11Z", "created_by": "refinery", "metadata": "{}"}, {"issue_id": "gt-wisp-ckxd2", "depends_on_id": "gt-wisp-welo5", "type": "blocks", "created_at": "2026-02-27T19:49:11Z", "created_by": "refinery", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-s2vyx"}
{"id": "gt-wisp-dgfek", "title": "Check own context limit", "description": "Check own context usage.\n\nIf context is HIGH (>80%):\n- Write handoff summary\n- Prepare for burn/respawn\n\nIf context is LOW:\n- Can continue processing", "status": "open", "priority": 2, "issue_type": "task", "created_at": "2026-02-28T03:18:49Z", "updated_at": "2026-02-28T03:18:49Z", "dependencies": [{"issue_id": "gt-wisp-dgfek", "depends_on_id": "gt-wisp-9syf0", "type": "blocks", "created_at": "2026-02-27T19:18:49Z", "created_by": "refinery", "metadata": "{}"}, {"issue_id": "gt-wisp-dgfek", "depends_on_id": "gt-wisp-iwq01", "type": "parent-child", "created_at": "2026-02-27T19:18:49Z", "created_by": "refinery", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-iwq01"}
{"id": "gt-wisp-dm0m9", "title": "Burn and respawn or loop", "description": "End of patrol cycle decision.\n\n**Step 1: Estimate remaining context**\n\nAsk yourself:\n- Have I processed many branches this cycle?\n- Is the conversation getting long?\n- Am I starting to lose track of earlier context?\n\nRule of thumb: If you've done 3+ merges or processed significant cleanup work,\nit's time for a fresh session.\n\n**Step 2: Decision tree**\n\nIf queue non-empty AND context LOW:\n- Squash this wisp to digest\n- Spawn fresh patrol wisp\n- Return to inbox-check\n\nIf queue empty OR context HIGH OR good stopping point:\n- Squash wisp with summary digest\n- Use `gt handoff` for clean session transition:\n\n```bash\ngt handoff -s \"Patrol complete\" -m \"Merged X branches, Y tests passed.\nQueue: empty/N remaining\nNext: [any notes for successor]\"\n```\n\n**Why gt handoff?**\n- Sends handoff mail to yourself with context\n- Respawns with fresh Claude instance\n- SessionStart hook runs gt prime\n- Successor picks up from your hook\n\n**DO NOT just exit.** Always use `gt handoff` for proper lifecycle.", "status": "open", "priority": 2, "issue_type": "task", "created_at": "2026-02-28T03:19:06Z", "updated_at": "2026-02-28T03:19:06Z", "dependencies": [{"issue_id": "gt-wisp-dm0m9", "depends_on_id": "gt-wisp-6da15", "type": "blocks", "created_at": "2026-02-27T19:19:06Z", "created_by": "refinery", "metadata": "{}"}, {"issue_id": "gt-wisp-dm0m9", "depends_on_id": "gt-wisp-lamkm", "type": "parent-child", "created_at": "2026-02-27T19:19:06Z", "created_by": "refinery", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-lamkm"}
{"id": "gt-wisp-dq4pf", "title": "Check own context limit", "description": "Check own context usage.\n\nIf context is HIGH (>80%):\n- Write handoff summary\n- Prepare for burn/respawn\n\nIf context is LOW:\n- Can continue processing", "status": "open", "priority": 2, "issue_type": "task", "created_at": "2026-02-28T03:17:24Z", "updated_at": "2026-02-28T03:17:24Z", "dependencies": [{"issue_id": "gt-wisp-dq4pf", "depends_on_id": "gt-wisp-f7cqp", "type": "parent-child", "created_at": "2026-02-27T19:17:24Z", "created_by": "refinery", "metadata": "{}"}, {"issue_id": "gt-wisp-dq4pf", "depends_on_id": "gt-wisp-iy655", "type": "blocks", "created_at": "2026-02-27T19:17:24Z", "created_by": "refinery", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-f7cqp"}
{"id": "gt-wisp-dqbgl", "title": "Generate handoff summary", "description": "Summarize this patrol cycle.\n\n**VERIFICATION**: Before generating summary, confirm for each merged branch:\n- [ ] MERGED mail was sent to witness\n- [ ] MR bead was closed\n- [ ] MERGE_READY mail archived\n\nIf any notifications or archiving were missed, do them now!\n\nInclude in summary:\n- Branches merged (count, names)\n- MERGED mails sent (count - should match branches merged)\n- MR beads closed (count - should match branches merged)\n- MERGE_READY mails archived (count - should match branches merged)\n- Test results (pass/fail)\n- Branches with conflicts (count, names)\n- Conflict-resolution tasks created (IDs)\n- Issues filed (if any)\n- Any escalations sent\n\n**Conflict tracking is important** for monitoring MQ health. If many branches\nconflict, it may indicate main is moving too fast or branches are too stale.\n\nThis becomes the digest when the patrol is squashed.", "status": "open", "priority": 2, "issue_type": "task", "created_at": "2026-02-28T03:48:28Z", "updated_at": "2026-02-28T03:48:28Z", "dependencies": [{"issue_id": "gt-wisp-dqbgl", "depends_on_id": "gt-wisp-fbkga", "type": "parent-child", "created_at": "2026-02-27T19:48:28Z", "created_by": "refinery", "metadata": "{}"}, {"issue_id": "gt-wisp-dqbgl", "depends_on_id": "gt-wisp-jc7km", "type": "blocks", "created_at": "2026-02-27T19:48:28Z", "created_by": "refinery", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-fbkga"}
{"id": "gt-wisp-drwmf", "title": "Run tests and verify coverage", "description": "Verify your changes don't break anything and are properly tested.\n\n**1. Run the full test suite:**\n```bash\ngo test ./...               # For Go projects\n# Or appropriate command for your stack\n```\n\n**ALL TESTS MUST PASS.** Do not proceed with failures.\n\n**2. If tests fail:**\n- Read the failure output carefully\n- Determine if your change caused it:\n  - If yes: Fix it. Return to implement step if needed.\n  - If no (pre-existing): File a bead, but still must pass for your PR\n\n```bash\n# Check if failure exists on main:\ngit stash\ngit checkout main\ngo test ./...\ngit checkout -\ngit stash pop\n```\n\n**3. Verify test coverage for new code:**\n- New features should have tests\n- Bug fixes should have regression tests\n- If you added significant code without tests, add them now\n\n**4. Run any other quality checks:**\n```bash\n# Linting (if configured)\ngolangci-lint run ./...\n\n# Build check\ngo build ./...\n```\n\n**Exit criteria:** All tests pass, new code has appropriate test coverage.", "status": "closed", "priority": 2, "issue_type": "task", "assignee": "gastown/polecats/furiosa", "created_at": "2026-02-28T02:42:12Z", "updated_at": "2026-02-28T02:48:11Z", "closed_at": "2026-02-28T02:48:11Z", "close_reason": "Closed", "dependencies": [{"issue_id": "gt-wisp-drwmf", "depends_on_id": "gt-wisp-2vlrx", "type": "parent-child", "created_at": "2026-02-27T18:42:12Z", "created_by": "mayor", "metadata": "{}"}, {"issue_id": "gt-wisp-drwmf", "depends_on_id": "gt-wisp-5yd37", "type": "blocks", "created_at": "2026-02-27T18:42:12Z", "created_by": "mayor", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-2vlrx"}
{"id": "gt-wisp-dxgw4", "title": "Check for more work", "description": "More branches to process?\n\n**Entry paths:**\n- Normal: After successful merge-push\n- Conflict-skip: After process-branch created conflict-resolution task\n\nIf yes: Return to process-branch with next branch.\nIf no: Continue to generate-summary.\n\n**Track for this cycle:**\n- branches_merged: count and names of successfully merged branches\n- branches_conflict: count and names of branches skipped due to conflicts\n- conflict_tasks: IDs of conflict-resolution tasks created\n\nThis tracking feeds into generate-summary for the patrol digest.", "status": "open", "priority": 2, "issue_type": "task", "created_at": "2026-02-28T03:49:11Z", "updated_at": "2026-02-28T03:49:11Z", "dependencies": [{"issue_id": "gt-wisp-dxgw4", "depends_on_id": "gt-wisp-1r5at", "type": "blocks", "created_at": "2026-02-27T19:49:11Z", "created_by": "refinery", "metadata": "{}"}, {"issue_id": "gt-wisp-dxgw4", "depends_on_id": "gt-wisp-s2vyx", "type": "parent-child", "created_at": "2026-02-27T19:49:11Z", "created_by": "refinery", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-s2vyx"}
{"id": "gt-wisp-e4q2g", "title": "Burn and respawn or loop", "description": "End of patrol cycle decision.\n\n**Step 1: Estimate remaining context**\n\nAsk yourself:\n- Have I processed many branches this cycle?\n- Is the conversation getting long?\n- Am I starting to lose track of earlier context?\n\nRule of thumb: If you've done 3+ merges or processed significant cleanup work,\nit's time for a fresh session.\n\n**Step 2: Decision tree**\n\nIf queue non-empty AND context LOW:\n- Squash this wisp to digest\n- Spawn fresh patrol wisp\n- Return to inbox-check\n\nIf queue empty OR context HIGH OR good stopping point:\n- Squash wisp with summary digest\n- Use `gt handoff` for clean session transition:\n\n```bash\ngt handoff -s \"Patrol complete\" -m \"Merged X branches, Y tests passed.\nQueue: empty/N remaining\nNext: [any notes for successor]\"\n```\n\n**Why gt handoff?**\n- Sends handoff mail to yourself with context\n- Respawns with fresh Claude instance\n- SessionStart hook runs gt prime\n- Successor picks up from your hook\n\n**DO NOT just exit.** Always use `gt handoff` for proper lifecycle.", "status": "open", "priority": 2, "issue_type": "task", "created_at": "2026-02-28T03:19:24Z", "updated_at": "2026-02-28T03:19:24Z", "dependencies": [{"issue_id": "gt-wisp-e4q2g", "depends_on_id": "gt-wisp-gt024", "type": "parent-child", "created_at": "2026-02-27T19:19:24Z", "created_by": "refinery", "metadata": "{}"}, {"issue_id": "gt-wisp-e4q2g", "depends_on_id": "gt-wisp-w706w", "type": "blocks", "created_at": "2026-02-27T19:19:24Z", "created_by": "refinery", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-gt024"}
{"id": "gt-wisp-edwlt", "title": "mol-refinery-patrol", "description": "Patrol report: Cycle 4: No new work. Polecat rotation detected — furiosa/gt-l7uq, nux/gt-0wkk, slit/gt-yxx0. Awaiting completions.", "status": "closed", "priority": 2, "issue_type": "epic", "assignee": "gastown/refinery", "created_at": "2026-02-28T03:17:39Z", "updated_at": "2026-02-28T03:18:01Z", "closed_at": "2026-02-28T03:18:01Z", "close_reason": "patrol cycle complete: Cycle 4: No new work. Polecat rotation detected — furiosa/gt-l7uq, nux/gt-0wkk, slit/gt-yxx0. Awaiting completions.", "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-wisp-eeax0", "title": "Check own context limit", "description": "Check own context usage.\n\nIf context is HIGH (>80%):\n- Write handoff summary\n- Prepare for burn/respawn\n\nIf context is LOW:\n- Can continue processing", "status": "open", "priority": 2, "issue_type": "task", "created_at": "2026-02-28T03:00:55Z", "updated_at": "2026-02-28T03:00:55Z", "dependencies": [{"issue_id": "gt-wisp-eeax0", "depends_on_id": "gt-wisp-if9qk", "type": "blocks", "created_at": "2026-02-27T19:00:55Z", "created_by": "refinery", "metadata": "{}"}, {"issue_id": "gt-wisp-eeax0", "depends_on_id": "gt-wisp-ybyhe", "type": "parent-child", "created_at": "2026-02-27T19:00:55Z", "created_by": "refinery", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-ybyhe"}
{"id": "gt-wisp-elxmf", "title": "Scan merge queue", "description": "Check the beads merge queue - this is the SOURCE OF TRUTH for pending merges.\n\n```bash\ngit fetch --prune origin\ngt mq list <rig>\n```\n\nThe beads MQ tracks all pending merge requests. Do NOT rely on `git branch -r | grep polecat`\nas branches may exist without MR beads, or MR beads may exist for already-merged work.\n\nIf queue empty, skip to context-check step.\n\nFor each MR in the queue, verify the branch still exists:\n```bash\ngit branch -r | grep <branch>\n```\n\nIf branch doesn't exist for a queued MR:\n- Close the MR bead: `bd close <mr-id> --reason \"Branch no longer exists\"`\n- Remove from processing queue\n\nTrack verified MR list for this cycle.", "status": "open", "priority": 2, "issue_type": "task", "created_at": "2026-02-28T03:18:21Z", "updated_at": "2026-02-28T03:18:21Z", "dependencies": [{"issue_id": "gt-wisp-elxmf", "depends_on_id": "gt-wisp-6c0pn", "type": "parent-child", "created_at": "2026-02-27T19:18:20Z", "created_by": "refinery", "metadata": "{}"}, {"issue_id": "gt-wisp-elxmf", "depends_on_id": "gt-wisp-utz9w", "type": "blocks", "created_at": "2026-02-27T19:18:20Z", "created_by": "refinery", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-6c0pn"}
{"id": "gt-wisp-enlzb", "title": "Check for more work", "description": "More branches to process?\n\n**Entry paths:**\n- Normal: After successful merge-push\n- Conflict-skip: After process-branch created conflict-resolution task\n\nIf yes: Return to process-branch with next branch.\nIf no: Continue to generate-summary.\n\n**Track for this cycle:**\n- branches_merged: count and names of successfully merged branches\n- branches_conflict: count and names of branches skipped due to conflicts\n- conflict_tasks: IDs of conflict-resolution tasks created\n\nThis tracking feeds into generate-summary for the patrol digest.", "status": "open", "priority": 2, "issue_type": "task", "created_at": "2026-02-28T03:18:21Z", "updated_at": "2026-02-28T03:18:21Z", "dependencies": [{"issue_id": "gt-wisp-enlzb", "depends_on_id": "gt-wisp-45g0k", "type": "blocks", "created_at": "2026-02-27T19:18:20Z", "created_by": "refinery", "metadata": "{}"}, {"issue_id": "gt-wisp-enlzb", "depends_on_id": "gt-wisp-6c0pn", "type": "parent-child", "created_at": "2026-02-27T19:18:20Z", "created_by": "refinery", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-6c0pn"}
{"id": "gt-wisp-eojz", "title": "Merge: gt-ghl6", "description": "branch: polecat/rictus/gt-ghl6@mm5ltxro\ntarget: main\nsource_issue: gt-ghl6\nrig: gastown\nworker: rictus\nagent_bead: gt-gastown-polecat-rictus\nretry_count: 0\nlast_conflict_sha: null\nconflict_task_id: null", "status": "closed", "priority": 1, "issue_type": "task", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-28T01:02:00Z", "created_by": "gastown/polecats/rictus", "updated_at": "2026-02-28T01:04:17Z", "closed_at": "2026-02-28T01:04:17Z", "close_reason": "Merged to main (36540017). Tests pass.", "labels": ["gt:merge-request"], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-wisp-eq6yh", "title": "Run test suite", "description": "Run the test suite.\n\n```bash\ngo test ./...\n```\n\nTrack results: pass count, fail count, specific failures.", "status": "open", "priority": 2, "issue_type": "task", "created_at": "2026-02-28T03:49:11Z", "updated_at": "2026-02-28T03:49:11Z", "dependencies": [{"issue_id": "gt-wisp-eq6yh", "depends_on_id": "gt-wisp-s2vyx", "type": "parent-child", "created_at": "2026-02-27T19:49:11Z", "created_by": "refinery", "metadata": "{}"}, {"issue_id": "gt-wisp-eq6yh", "depends_on_id": "gt-wisp-xa548", "type": "blocks", "created_at": "2026-02-27T19:49:11Z", "created_by": "refinery", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-s2vyx"}
{"id": "gt-wisp-eslbx", "title": "Mechanical rebase", "description": "Pick next branch from queue. Attempt mechanical rebase on current main.\n\n**Step 1: Checkout and attempt rebase**\n```bash\ngit checkout -b temp origin/<polecat-branch>\ngit rebase origin/main\n```\n\n**Step 2: Check rebase result**\n\nThe rebase exits with:\n- Exit code 0: Success - proceed to run-tests\n- Exit code 1 (conflicts): Conflict detected - proceed to Step 3\n\nTo detect conflict state after rebase fails:\n```bash\n# Check if we're in a conflicted rebase state\nls .git/rebase-merge 2>/dev/null && echo \"CONFLICT_STATE\"\n```\n\n**Step 3: Handle conflicts (if any)**\n\nIf rebase SUCCEEDED (exit code 0):\n- Skip to run-tests step (continue normal merge flow)\n\nIf rebase FAILED with conflicts:\n\n1. **Abort the rebase** (DO NOT leave repo in conflicted state):\n```bash\ngit rebase --abort\n```\n\n2. **Record conflict metadata**:\n```bash\n# Capture main SHA for reference\nMAIN_SHA=$(git rev-parse origin/main)\nBRANCH_SHA=$(git rev-parse origin/<polecat-branch>)\n```\n\n3. **Create conflict-resolution task**:\n```bash\nbd create --type=task --priority=1 --title=\"Resolve merge conflicts: <original-issue-title>\" --description=\"## Conflict Resolution Required\n\nOriginal MR: <mr-bead-id>\nBranch: <polecat-branch>\nOriginal Issue: <issue-id>\nConflict with main at: ${MAIN_SHA}\nBranch SHA: ${BRANCH_SHA}\n\n## Instructions\n1. Clone/checkout the branch\n2. Rebase on current main: git rebase origin/main\n3. Resolve conflicts\n4. Force push: git push -f origin <branch>\n5. Close this task when done\n\nThe MR will be re-queued for processing after conflicts are resolved.\"\n```\n\n4. **Skip this MR** (do NOT delete branch or close MR bead):\n- Leave branch intact for conflict resolution\n- Leave MR bead open (will be re-processed after resolution)\n- Continue to loop-check for next branch\n\n**CRITICAL**: Never delete a branch that has conflicts. The branch contains\nthe original work and must be preserved for conflict resolution.\n\nTrack: rebase result (success/conflict), conflict task ID if created.", "status": "open", "priority": 2, "issue_type": "task", "created_at": "2026-02-28T03:18:49Z", "updated_at": "2026-02-28T03:18:49Z", "dependencies": [{"issue_id": "gt-wisp-eslbx", "depends_on_id": "gt-wisp-0ifrl", "type": "blocks", "created_at": "2026-02-27T19:18:49Z", "created_by": "refinery", "metadata": "{}"}, {"issue_id": "gt-wisp-eslbx", "depends_on_id": "gt-wisp-iwq01", "type": "parent-child", "created_at": "2026-02-27T19:18:49Z", "created_by": "refinery", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-iwq01"}
{"id": "gt-wisp-f1p0q", "title": "Run test suite", "description": "Run the test suite.\n\n```bash\ngo test ./...\n```\n\nTrack results: pass count, fail count, specific failures.", "status": "open", "priority": 2, "issue_type": "task", "created_at": "2026-02-28T03:17:24Z", "updated_at": "2026-02-28T03:17:24Z", "dependencies": [{"issue_id": "gt-wisp-f1p0q", "depends_on_id": "gt-wisp-3e3yx", "type": "blocks", "created_at": "2026-02-27T19:17:24Z", "created_by": "refinery", "metadata": "{}"}, {"issue_id": "gt-wisp-f1p0q", "depends_on_id": "gt-wisp-f7cqp", "type": "parent-child", "created_at": "2026-02-27T19:17:24Z", "created_by": "refinery", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-f7cqp"}
{"id": "gt-wisp-f3p0w", "title": "Merge: gt-idrl", "description": "branch: polecat/dag/gt-idrl@mm5q6sim\ntarget: main\nsource_issue: gt-idrl\nrig: gastown\nworker: dag\nagent_bead: gt-gastown-polecat-dag\nretry_count: 0\nlast_conflict_sha: null\nconflict_task_id: null", "status": "closed", "priority": 1, "issue_type": "task", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-28T03:01:23Z", "created_by": "gastown/polecats/dag", "updated_at": "2026-02-28T03:06:29Z", "closed_at": "2026-02-28T03:06:29Z", "close_reason": "rejected: Branch polecat/dag/gt-idrl@mm5q6sim does not exist on any remote. Issue gt-idrl appears reassigned to nux.", "labels": ["gt:merge-request"], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-wisp-f7cqp", "title": "mol-refinery-patrol", "description": "Patrol report: Cycle 3: No new work. Queue empty, inbox clear. 3 polecats active (nux/gt-idrl, slit/gt-l7uq, furiosa/gt-7uhc). Session healthy.", "status": "closed", "priority": 2, "issue_type": "epic", "assignee": "gastown/refinery", "created_at": "2026-02-28T03:17:24Z", "updated_at": "2026-02-28T03:17:39Z", "closed_at": "2026-02-28T03:17:39Z", "close_reason": "patrol cycle complete: Cycle 3: No new work. Queue empty, inbox clear. 3 polecats active (nux/gt-idrl, slit/gt-l7uq, furiosa/gt-7uhc). Session healthy.", "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-wisp-fbkga", "title": "mol-refinery-patrol", "description": "Patrol report: Cycle 2: Queue idle. Furiosa MR gt-wisp-zzh5 still has no commits, witness already notified. No new MRs submitted.", "status": "closed", "priority": 2, "issue_type": "epic", "assignee": "gastown/refinery", "created_at": "2026-02-28T03:48:28Z", "updated_at": "2026-02-28T03:49:11Z", "closed_at": "2026-02-28T03:49:11Z", "close_reason": "patrol cycle complete: Cycle 2: Queue idle. Furiosa MR gt-wisp-zzh5 still has no commits, witness already notified. No new MRs submitted.", "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-wisp-fbptp", "title": "Check refinery mail", "description": "Check mail for MERGE_READY submissions, escalations, and messages.\n\n```bash\ngt mail inbox\n```\n\nFor each message:\n\n**MERGE_READY**:\nA polecat's work is ready for merge. Extract details and track for processing.\n\n```bash\n# Parse MERGE_READY message body:\n# Branch: <branch>\n# Issue: <issue-id>\n# Polecat: <polecat-name>\n# MR: <mr-bead-id>\n# Verified: clean git state, issue closed\n\n# Track in your merge queue for this patrol cycle:\n# - Branch name\n# - Issue ID\n# - Polecat name (REQUIRED for MERGED notification)\n# - MR bead ID (REQUIRED for closing after merge)\n```\n\n**IMPORTANT**: You MUST track the polecat name, MR bead ID, AND message ID - you will need them\nin merge-push step to send MERGED notification, close the MR bead, and archive the mail.\n\nMark as read. The work will be processed in queue-scan/process-branch.\n**Do NOT archive yet** - archive after merge/reject decision in merge-push step.\n\n**PATROL: Wake up**:\nWitness detected MRs waiting but refinery idle. Acknowledge and archive:\n```bash\ngt mail archive <message-id>\n```\n\n**HELP / Blocked**:\nAssess and respond. If you can't help, escalate to Mayor.\nArchive after handling:\n```bash\ngt mail archive <message-id>\n```\n\n**HANDOFF**:\nRead predecessor context. Check for in-flight merges.\nArchive after absorbing context:\n```bash\ngt mail archive <message-id>\n```\n\n**Hygiene principle**: Archive messages after they're fully processed.\nKeep only: pending MRs in queue. Inbox should be near-empty.", "status": "open", "priority": 2, "issue_type": "task", "created_at": "2026-02-28T03:48:28Z", "updated_at": "2026-02-28T03:48:28Z", "dependencies": [{"issue_id": "gt-wisp-fbptp", "depends_on_id": "gt-wisp-fbkga", "type": "parent-child", "created_at": "2026-02-27T19:48:28Z", "created_by": "refinery", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-fbkga"}
{"id": "gt-wisp-fdc5o", "title": "Scan merge queue", "description": "Check the beads merge queue - this is the SOURCE OF TRUTH for pending merges.\n\n```bash\ngit fetch --prune origin\ngt mq list <rig>\n```\n\nThe beads MQ tracks all pending merge requests. Do NOT rely on `git branch -r | grep polecat`\nas branches may exist without MR beads, or MR beads may exist for already-merged work.\n\nIf queue empty, skip to context-check step.\n\nFor each MR in the queue, verify the branch still exists:\n```bash\ngit branch -r | grep <branch>\n```\n\nIf branch doesn't exist for a queued MR:\n- Close the MR bead: `bd close <mr-id> --reason \"Branch no longer exists\"`\n- Remove from processing queue\n\nTrack verified MR list for this cycle.", "status": "open", "priority": 2, "issue_type": "task", "created_at": "2026-02-28T03:00:29Z", "updated_at": "2026-02-28T03:00:29Z", "dependencies": [{"issue_id": "gt-wisp-fdc5o", "depends_on_id": "gt-wisp-76pw5", "type": "parent-child", "created_at": "2026-02-27T19:00:29Z", "created_by": "refinery", "metadata": "{}"}, {"issue_id": "gt-wisp-fdc5o", "depends_on_id": "gt-wisp-7js3u", "type": "blocks", "created_at": "2026-02-27T19:00:29Z", "created_by": "refinery", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-76pw5"}
{"id": "gt-wisp-fl473", "title": "mol-polecat-work", "description": "Full polecat work lifecycle from assignment through completion.\n\nThis molecule guides a polecat through a complete work assignment. Each step\nhas clear entry/exit criteria and specific commands to run. A polecat can\ncrash after any step and resume from the last completed step.\n\n## Polecat Contract (Self-Cleaning Model)\n\nYou are a self-cleaning worker. You:\n1. Receive work via your hook (pinned molecule + issue)\n2. Work through molecule steps using `bd ready` / `bd close <step>`\n3. Complete and self-clean via `gt done` (submit + nuke yourself)\n4. You are GONE - Refinery merges from MQ\n\n**Self-cleaning:** When you run `gt done`, you push your work, submit to MQ,\nnuke your sandbox, and exit. There is no idle state. Done means gone.\n\n**Important:** This formula defines the template. Your molecule already has step\nbeads created from it. Use `bd ready` to find them - do NOT read this file directly.\n\n**You do NOT:**\n- Push directly to main (Refinery merges from MQ)\n- Close your own issue (Refinery closes after merge)\n- Wait for merge (you're gone after `gt done`)\n- Handle rebase conflicts (Refinery spawns fresh polecats for that)\n\n## Variables\n\n| Variable | Source | Description |\n|----------|--------|-------------|\n| issue | hook_bead | The issue ID you're assigned to work on |\n\n## Failure Modes\n\n| Situation | Action |\n|-----------|--------|\n| Tests fail | Fix them. Do not proceed with failures. |\n| Blocked on external | Mail Witness for help, mark yourself stuck |\n| Context filling | Use gt handoff to cycle to fresh session |\n| Unsure what to do | Mail Witness, don't guess |", "status": "open", "priority": 2, "issue_type": "epic", "created_at": "2026-02-28T03:51:11Z", "updated_at": "2026-02-28T03:51:11Z", "ephemeral": true, "dependency_count": 0, "dependent_count": 1, "comment_count": 0}
{"id": "gt-wisp-fw0ca", "title": "mol-polecat-work", "description": "Full polecat work lifecycle from assignment through completion.\n\nThis molecule guides a polecat through a complete work assignment. Each step\nhas clear entry/exit criteria and specific commands to run. A polecat can\ncrash after any step and resume from the last completed step.\n\n## Polecat Contract (Self-Cleaning Model)\n\nYou are a self-cleaning worker. You:\n1. Receive work via your hook (pinned molecule + issue)\n2. Work through molecule steps using `bd ready` / `bd close <step>`\n3. Complete and self-clean via `gt done` (submit + nuke yourself)\n4. You are GONE - Refinery merges from MQ\n\n**Self-cleaning:** When you run `gt done`, you push your work, submit to MQ,\nnuke your sandbox, and exit. There is no idle state. Done means gone.\n\n**Important:** This formula defines the template. Your molecule already has step\nbeads created from it. Use `bd ready` to find them - do NOT read this file directly.\n\n**You do NOT:**\n- Push directly to main (Refinery merges from MQ)\n- Close your own issue (Refinery closes after merge)\n- Wait for merge (you're gone after `gt done`)\n- Handle rebase conflicts (Refinery spawns fresh polecats for that)\n\n## Variables\n\n| Variable | Source | Description |\n|----------|--------|-------------|\n| issue | hook_bead | The issue ID you're assigned to work on |\n\n## Failure Modes\n\n| Situation | Action |\n|-----------|--------|\n| Tests fail | Fix them. Do not proceed with failures. |\n| Blocked on external | Mail Witness for help, mark yourself stuck |\n| Context filling | Use gt handoff to cycle to fresh session |\n| Unsure what to do | Mail Witness, don't guess |", "status": "closed", "priority": 2, "issue_type": "epic", "created_at": "2026-02-28T02:52:25Z", "updated_at": "2026-02-28T03:03:25Z", "closed_at": "2026-02-28T03:03:25Z", "close_reason": "burned: force re-sling", "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-wisp-fx65j", "title": "Check refinery mail", "description": "Check mail for MERGE_READY submissions, escalations, and messages.\n\n```bash\ngt mail inbox\n```\n\nFor each message:\n\n**MERGE_READY**:\nA polecat's work is ready for merge. Extract details and track for processing.\n\n```bash\n# Parse MERGE_READY message body:\n# Branch: <branch>\n# Issue: <issue-id>\n# Polecat: <polecat-name>\n# MR: <mr-bead-id>\n# Verified: clean git state, issue closed\n\n# Track in your merge queue for this patrol cycle:\n# - Branch name\n# - Issue ID\n# - Polecat name (REQUIRED for MERGED notification)\n# - MR bead ID (REQUIRED for closing after merge)\n```\n\n**IMPORTANT**: You MUST track the polecat name, MR bead ID, AND message ID - you will need them\nin merge-push step to send MERGED notification, close the MR bead, and archive the mail.\n\nMark as read. The work will be processed in queue-scan/process-branch.\n**Do NOT archive yet** - archive after merge/reject decision in merge-push step.\n\n**PATROL: Wake up**:\nWitness detected MRs waiting but refinery idle. Acknowledge and archive:\n```bash\ngt mail archive <message-id>\n```\n\n**HELP / Blocked**:\nAssess and respond. If you can't help, escalate to Mayor.\nArchive after handling:\n```bash\ngt mail archive <message-id>\n```\n\n**HANDOFF**:\nRead predecessor context. Check for in-flight merges.\nArchive after absorbing context:\n```bash\ngt mail archive <message-id>\n```\n\n**Hygiene principle**: Archive messages after they're fully processed.\nKeep only: pending MRs in queue. Inbox should be near-empty.", "status": "open", "priority": 2, "issue_type": "task", "created_at": "2026-02-28T03:17:24Z", "updated_at": "2026-02-28T03:17:24Z", "dependencies": [{"issue_id": "gt-wisp-fx65j", "depends_on_id": "gt-wisp-f7cqp", "type": "parent-child", "created_at": "2026-02-27T19:17:24Z", "created_by": "refinery", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-f7cqp"}
{"id": "gt-wisp-gh5q8", "title": "Merge: gt-i6yv", "description": "branch: polecat/furiosa/gt-i6yv@mm5nyqs6\ntarget: main\nsource_issue: gt-i6yv\nrig: gastown\nworker: furiosa\nagent_bead: gt-gastown-polecat-furiosa\nretry_count: 0\nlast_conflict_sha: null\nconflict_task_id: null", "status": "closed", "priority": 1, "issue_type": "task", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-28T02:02:51Z", "created_by": "gastown/polecats/furiosa", "updated_at": "2026-02-28T02:06:18Z", "closed_at": "2026-02-28T02:06:18Z", "close_reason": "stale: branch has 0 commits ahead of main, no new work", "labels": ["gt:merge-request"], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-wisp-gsmbb", "title": "mol-polecat-work", "description": "Full polecat work lifecycle from assignment through completion.\n\nThis molecule guides a polecat through a complete work assignment. Each step\nhas clear entry/exit criteria and specific commands to run. A polecat can\ncrash after any step and resume from the last completed step.\n\n## Polecat Contract (Self-Cleaning Model)\n\nYou are a self-cleaning worker. You:\n1. Receive work via your hook (pinned molecule + issue)\n2. Work through molecule steps using `bd ready` / `bd close <step>`\n3. Complete and self-clean via `gt done` (submit + nuke yourself)\n4. You are GONE - Refinery merges from MQ\n\n**Self-cleaning:** When you run `gt done`, you push your work, submit to MQ,\nnuke your sandbox, and exit. There is no idle state. Done means gone.\n\n**Important:** This formula defines the template. Your molecule already has step\nbeads created from it. Use `bd ready` to find them - do NOT read this file directly.\n\n**You do NOT:**\n- Push directly to main (Refinery merges from MQ)\n- Close your own issue (Refinery closes after merge)\n- Wait for merge (you're gone after `gt done`)\n- Handle rebase conflicts (Refinery spawns fresh polecats for that)\n\n## Variables\n\n| Variable | Source | Description |\n|----------|--------|-------------|\n| issue | hook_bead | The issue ID you're assigned to work on |\n\n## Failure Modes\n\n| Situation | Action |\n|-----------|--------|\n| Tests fail | Fix them. Do not proceed with failures. |\n| Blocked on external | Mail Witness for help, mark yourself stuck |\n| Context filling | Use gt handoff to cycle to fresh session |\n| Unsure what to do | Mail Witness, don't guess |", "status": "closed", "priority": 2, "issue_type": "epic", "created_at": "2026-02-28T02:43:14Z", "updated_at": "2026-02-28T02:54:58Z", "closed_at": "2026-02-28T02:54:58Z", "close_reason": "burned: polecat nuked", "ephemeral": true, "dependency_count": 0, "dependent_count": 1, "comment_count": 0}
{"id": "gt-wisp-gt024", "title": "mol-refinery-patrol", "description": "Patrol report: Cycle 1: Merged nux/gt-idrl (ZFC screen-scraping fix) to main. Skipped furiosa/gt-l7uq (no commits, polecat has uncommitted work, notified witness). 2 pre-existing test failures tracked (gt-94i9, gt-eo8d).", "status": "closed", "priority": 2, "issue_type": "epic", "assignee": "gastown/refinery", "created_at": "2026-02-28T03:19:24Z", "updated_at": "2026-02-28T03:48:27Z", "closed_at": "2026-02-28T03:48:27Z", "close_reason": "patrol cycle complete: Cycle 1: Merged nux/gt-idrl (ZFC screen-scraping fix) to main. Skipped furiosa/gt-l7uq (no commits, polecat has uncommitted work, notified witness). 2 pre-existing test failures tracked (gt-94i9, gt-eo8d).", "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-wisp-gtgp7", "title": "Handle test failures", "description": "**VERIFICATION GATE**: This step enforces the Beads Promise.\n\nIf tests PASSED: This step auto-completes. Proceed to merge.\n\nIf tests FAILED:\n1. Diagnose: Is this a branch regression or pre-existing on main?\n2. If branch caused it:\n   - Abort merge\n   - Notify polecat: \"Tests failing. Please fix and resubmit.\"\n   - Skip to loop-check\n3. If pre-existing on main:\n   - File a bead: bd create --type=bug --priority=1 --title=\"...\"\n   - FORBIDDEN: Writing code to fix test failures. You merge branches, you do not develop.\n   - Proceed with the merge if the failure is pre-existing (not caused by the branch).\n\n**GATE REQUIREMENT**: You CANNOT proceed to merge-push without:\n- Tests passing, OR\n- Bead filed for the pre-existing failure\n\nFORBIDDEN: Writing application code, exploring polecat implementations, or\nre-implementing fixes. You are a mechanical merge processor.\n\nThis is non-negotiable. Never disavow. Never \"note and proceed.\" ", "status": "open", "priority": 2, "issue_type": "task", "created_at": "2026-02-28T03:49:11Z", "updated_at": "2026-02-28T03:49:11Z", "dependencies": [{"issue_id": "gt-wisp-gtgp7", "depends_on_id": "gt-wisp-eq6yh", "type": "blocks", "created_at": "2026-02-27T19:49:11Z", "created_by": "refinery", "metadata": "{}"}, {"issue_id": "gt-wisp-gtgp7", "depends_on_id": "gt-wisp-s2vyx", "type": "parent-child", "created_at": "2026-02-27T19:49:11Z", "created_by": "refinery", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-s2vyx"}
{"id": "gt-wisp-gwmen", "title": "Run test suite", "description": "Run the test suite.\n\n```bash\ngo test ./...\n```\n\nTrack results: pass count, fail count, specific failures.", "status": "open", "priority": 2, "issue_type": "task", "created_at": "2026-02-28T03:19:24Z", "updated_at": "2026-02-28T03:19:24Z", "dependencies": [{"issue_id": "gt-wisp-gwmen", "depends_on_id": "gt-wisp-0sob8", "type": "blocks", "created_at": "2026-02-27T19:19:24Z", "created_by": "refinery", "metadata": "{}"}, {"issue_id": "gt-wisp-gwmen", "depends_on_id": "gt-wisp-gt024", "type": "parent-child", "created_at": "2026-02-27T19:19:24Z", "created_by": "refinery", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-gt024"}
{"id": "gt-wisp-gxnwv", "title": "End-of-cycle inbox hygiene", "description": "Verify inbox hygiene before ending patrol cycle.\n\n**Step 1: Check inbox state**\n```bash\ngt mail inbox\n```\n\nInbox should contain ONLY:\n- Unprocessed MERGE_READY messages (will process next cycle)\n- Active work items\n\n**Step 2: Archive any stale messages**\n\nLook for messages that were processed but not archived:\n- PATROL: Wake up that was acknowledged → archive\n- HELP/Blocked that was handled → archive\n- MERGE_READY where merge completed but archive was missed → archive\n\n```bash\n# For each stale message found:\ngt mail archive <message-id>\n```\n\n**Step 3: Check for orphaned MR beads**\n\nLook for open MR beads with no corresponding branch:\n```bash\nbd list --type=merge-request --status=open\n```\n\nFor each open MR bead:\n1. Check if branch exists: `git ls-remote origin refs/heads/<branch>`\n2. If branch gone, verify work is on main: `git log origin/main --oneline | grep \"<source_issue>\"`\n3. If work on main → close MR with reason \"Merged (verified on main)\"\n4. If work NOT on main → investigate before closing:\n   - Check source_issue validity (should be gt-xxxxx, not branch name)\n   - Search reflog/dangling commits if possible\n   - If unverifiable, close with reason \"Unverifiable - no audit trail\"\n   - File bead if this indicates lost work\n\n**NEVER close an MR bead without verifying the work landed or is unrecoverable.**\n\n**Goal**: Inbox should have ≤3 active messages at end of cycle.\nKeep only: pending MRs in queue.", "status": "open", "priority": 2, "issue_type": "task", "created_at": "2026-02-28T03:48:28Z", "updated_at": "2026-02-28T03:48:28Z", "dependencies": [{"issue_id": "gt-wisp-gxnwv", "depends_on_id": "gt-wisp-fbkga", "type": "parent-child", "created_at": "2026-02-27T19:48:28Z", "created_by": "refinery", "metadata": "{}"}, {"issue_id": "gt-wisp-gxnwv", "depends_on_id": "gt-wisp-ntvpy", "type": "blocks", "created_at": "2026-02-27T19:48:28Z", "created_by": "refinery", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-fbkga"}
{"id": "gt-wisp-hfyxg", "title": "End-of-cycle inbox hygiene", "description": "Verify inbox hygiene before ending patrol cycle.\n\n**Step 1: Check inbox state**\n```bash\ngt mail inbox\n```\n\nInbox should contain ONLY:\n- Unprocessed MERGE_READY messages (will process next cycle)\n- Active work items\n\n**Step 2: Archive any stale messages**\n\nLook for messages that were processed but not archived:\n- PATROL: Wake up that was acknowledged → archive\n- HELP/Blocked that was handled → archive\n- MERGE_READY where merge completed but archive was missed → archive\n\n```bash\n# For each stale message found:\ngt mail archive <message-id>\n```\n\n**Step 3: Check for orphaned MR beads**\n\nLook for open MR beads with no corresponding branch:\n```bash\nbd list --type=merge-request --status=open\n```\n\nFor each open MR bead:\n1. Check if branch exists: `git ls-remote origin refs/heads/<branch>`\n2. If branch gone, verify work is on main: `git log origin/main --oneline | grep \"<source_issue>\"`\n3. If work on main → close MR with reason \"Merged (verified on main)\"\n4. If work NOT on main → investigate before closing:\n   - Check source_issue validity (should be gt-xxxxx, not branch name)\n   - Search reflog/dangling commits if possible\n   - If unverifiable, close with reason \"Unverifiable - no audit trail\"\n   - File bead if this indicates lost work\n\n**NEVER close an MR bead without verifying the work landed or is unrecoverable.**\n\n**Goal**: Inbox should have ≤3 active messages at end of cycle.\nKeep only: pending MRs in queue.", "status": "open", "priority": 2, "issue_type": "task", "created_at": "2026-02-28T03:18:21Z", "updated_at": "2026-02-28T03:18:21Z", "dependencies": [{"issue_id": "gt-wisp-hfyxg", "depends_on_id": "gt-wisp-4tv4x", "type": "blocks", "created_at": "2026-02-27T19:18:20Z", "created_by": "refinery", "metadata": "{}"}, {"issue_id": "gt-wisp-hfyxg", "depends_on_id": "gt-wisp-6c0pn", "type": "parent-child", "created_at": "2026-02-27T19:18:20Z", "created_by": "refinery", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-6c0pn"}
{"id": "gt-wisp-hohlh", "title": "Check for more work", "description": "More branches to process?\n\n**Entry paths:**\n- Normal: After successful merge-push\n- Conflict-skip: After process-branch created conflict-resolution task\n\nIf yes: Return to process-branch with next branch.\nIf no: Continue to generate-summary.\n\n**Track for this cycle:**\n- branches_merged: count and names of successfully merged branches\n- branches_conflict: count and names of branches skipped due to conflicts\n- conflict_tasks: IDs of conflict-resolution tasks created\n\nThis tracking feeds into generate-summary for the patrol digest.", "status": "open", "priority": 2, "issue_type": "task", "created_at": "2026-02-28T03:18:01Z", "updated_at": "2026-02-28T03:18:01Z", "dependencies": [{"issue_id": "gt-wisp-hohlh", "depends_on_id": "gt-wisp-7sckw", "type": "blocks", "created_at": "2026-02-27T19:18:01Z", "created_by": "refinery", "metadata": "{}"}, {"issue_id": "gt-wisp-hohlh", "depends_on_id": "gt-wisp-y6e5z", "type": "parent-child", "created_at": "2026-02-27T19:18:01Z", "created_by": "refinery", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-y6e5z"}
{"id": "gt-wisp-huatp", "title": "mol-polecat-work", "description": "Full polecat work lifecycle from assignment through completion.\n\nThis molecule guides a polecat through a complete work assignment. Each step\nhas clear entry/exit criteria and specific commands to run. A polecat can\ncrash after any step and resume from the last completed step.\n\n## Polecat Contract (Self-Cleaning Model)\n\nYou are a self-cleaning worker. You:\n1. Receive work via your hook (pinned molecule + issue)\n2. Work through molecule steps using `bd ready` / `bd close <step>`\n3. Complete and self-clean via `gt done` (submit + nuke yourself)\n4. You are GONE - Refinery merges from MQ\n\n**Self-cleaning:** When you run `gt done`, you push your work, submit to MQ,\nnuke your sandbox, and exit. There is no idle state. Done means gone.\n\n**Important:** This formula defines the template. Your molecule already has step\nbeads created from it. Use `bd ready` to find them - do NOT read this file directly.\n\n**You do NOT:**\n- Push directly to main (Refinery merges from MQ)\n- Close your own issue (Refinery closes after merge)\n- Wait for merge (you're gone after `gt done`)\n- Handle rebase conflicts (Refinery spawns fresh polecats for that)\n\n## Variables\n\n| Variable | Source | Description |\n|----------|--------|-------------|\n| issue | hook_bead | The issue ID you're assigned to work on |\n\n## Failure Modes\n\n| Situation | Action |\n|-----------|--------|\n| Tests fail | Fix them. Do not proceed with failures. |\n| Blocked on external | Mail Witness for help, mark yourself stuck |\n| Context filling | Use gt handoff to cycle to fresh session |\n| Unsure what to do | Mail Witness, don't guess |", "status": "closed", "priority": 2, "issue_type": "epic", "created_at": "2026-02-28T03:43:23Z", "updated_at": "2026-02-28T03:49:25Z", "closed_at": "2026-02-28T03:49:25Z", "close_reason": "done", "ephemeral": true, "dependency_count": 0, "dependent_count": 1, "comment_count": 0}
{"id": "gt-wisp-hz2um", "title": "Generate handoff summary", "description": "Summarize this patrol cycle.\n\n**VERIFICATION**: Before generating summary, confirm for each merged branch:\n- [ ] MERGED mail was sent to witness\n- [ ] MR bead was closed\n- [ ] MERGE_READY mail archived\n\nIf any notifications or archiving were missed, do them now!\n\nInclude in summary:\n- Branches merged (count, names)\n- MERGED mails sent (count - should match branches merged)\n- MR beads closed (count - should match branches merged)\n- MERGE_READY mails archived (count - should match branches merged)\n- Test results (pass/fail)\n- Branches with conflicts (count, names)\n- Conflict-resolution tasks created (IDs)\n- Issues filed (if any)\n- Any escalations sent\n\n**Conflict tracking is important** for monitoring MQ health. If many branches\nconflict, it may indicate main is moving too fast or branches are too stale.\n\nThis becomes the digest when the patrol is squashed.", "status": "open", "priority": 2, "issue_type": "task", "created_at": "2026-02-28T03:17:40Z", "updated_at": "2026-02-28T03:17:40Z", "dependencies": [{"issue_id": "gt-wisp-hz2um", "depends_on_id": "gt-wisp-edwlt", "type": "parent-child", "created_at": "2026-02-27T19:17:39Z", "created_by": "refinery", "metadata": "{}"}, {"issue_id": "gt-wisp-hz2um", "depends_on_id": "gt-wisp-n1i4h", "type": "blocks", "created_at": "2026-02-27T19:17:39Z", "created_by": "refinery", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-edwlt"}
{"id": "gt-wisp-if9qk", "title": "Generate handoff summary", "description": "Summarize this patrol cycle.\n\n**VERIFICATION**: Before generating summary, confirm for each merged branch:\n- [ ] MERGED mail was sent to witness\n- [ ] MR bead was closed\n- [ ] MERGE_READY mail archived\n\nIf any notifications or archiving were missed, do them now!\n\nInclude in summary:\n- Branches merged (count, names)\n- MERGED mails sent (count - should match branches merged)\n- MR beads closed (count - should match branches merged)\n- MERGE_READY mails archived (count - should match branches merged)\n- Test results (pass/fail)\n- Branches with conflicts (count, names)\n- Conflict-resolution tasks created (IDs)\n- Issues filed (if any)\n- Any escalations sent\n\n**Conflict tracking is important** for monitoring MQ health. If many branches\nconflict, it may indicate main is moving too fast or branches are too stale.\n\nThis becomes the digest when the patrol is squashed.", "status": "open", "priority": 2, "issue_type": "task", "created_at": "2026-02-28T03:00:55Z", "updated_at": "2026-02-28T03:00:55Z", "dependencies": [{"issue_id": "gt-wisp-if9qk", "depends_on_id": "gt-wisp-ybyhe", "type": "parent-child", "created_at": "2026-02-27T19:00:55Z", "created_by": "refinery", "metadata": "{}"}, {"issue_id": "gt-wisp-if9qk", "depends_on_id": "gt-wisp-zclv6", "type": "blocks", "created_at": "2026-02-27T19:00:55Z", "created_by": "refinery", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-ybyhe"}
{"id": "gt-wisp-iqdi8", "title": "Check refinery mail", "description": "Check mail for MERGE_READY submissions, escalations, and messages.\n\n```bash\ngt mail inbox\n```\n\nFor each message:\n\n**MERGE_READY**:\nA polecat's work is ready for merge. Extract details and track for processing.\n\n```bash\n# Parse MERGE_READY message body:\n# Branch: <branch>\n# Issue: <issue-id>\n# Polecat: <polecat-name>\n# MR: <mr-bead-id>\n# Verified: clean git state, issue closed\n\n# Track in your merge queue for this patrol cycle:\n# - Branch name\n# - Issue ID\n# - Polecat name (REQUIRED for MERGED notification)\n# - MR bead ID (REQUIRED for closing after merge)\n```\n\n**IMPORTANT**: You MUST track the polecat name, MR bead ID, AND message ID - you will need them\nin merge-push step to send MERGED notification, close the MR bead, and archive the mail.\n\nMark as read. The work will be processed in queue-scan/process-branch.\n**Do NOT archive yet** - archive after merge/reject decision in merge-push step.\n\n**PATROL: Wake up**:\nWitness detected MRs waiting but refinery idle. Acknowledge and archive:\n```bash\ngt mail archive <message-id>\n```\n\n**HELP / Blocked**:\nAssess and respond. If you can't help, escalate to Mayor.\nArchive after handling:\n```bash\ngt mail archive <message-id>\n```\n\n**HANDOFF**:\nRead predecessor context. Check for in-flight merges.\nArchive after absorbing context:\n```bash\ngt mail archive <message-id>\n```\n\n**Hygiene principle**: Archive messages after they're fully processed.\nKeep only: pending MRs in queue. Inbox should be near-empty.", "status": "open", "priority": 2, "issue_type": "task", "created_at": "2026-02-28T03:00:55Z", "updated_at": "2026-02-28T03:00:55Z", "dependencies": [{"issue_id": "gt-wisp-iqdi8", "depends_on_id": "gt-wisp-ybyhe", "type": "parent-child", "created_at": "2026-02-27T19:00:55Z", "created_by": "refinery", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-ybyhe"}
{"id": "gt-wisp-ivwzg", "title": "Run test suite", "description": "Run the test suite.\n\n```bash\ngo test ./...\n```\n\nTrack results: pass count, fail count, specific failures.", "status": "open", "priority": 2, "issue_type": "task", "created_at": "2026-02-28T03:00:29Z", "updated_at": "2026-02-28T03:00:29Z", "dependencies": [{"issue_id": "gt-wisp-ivwzg", "depends_on_id": "gt-wisp-76pw5", "type": "parent-child", "created_at": "2026-02-27T19:00:29Z", "created_by": "refinery", "metadata": "{}"}, {"issue_id": "gt-wisp-ivwzg", "depends_on_id": "gt-wisp-qtawo", "type": "blocks", "created_at": "2026-02-27T19:00:29Z", "created_by": "refinery", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-76pw5"}
{"id": "gt-wisp-iwmhr", "title": "Merge: gt-0wkk", "description": "branch: polecat/rictus/gt-0wkk@mm5qnve8\ntarget: main\nsource_issue: gt-0wkk\nrig: gastown\nworker: rictus\nagent_bead: gt-gastown-polecat-rictus\nretry_count: 0\nlast_conflict_sha: null\nconflict_task_id: null", "status": "closed", "priority": 1, "issue_type": "task", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-28T03:10:52Z", "created_by": "gastown/polecats/rictus", "updated_at": "2026-02-28T03:16:46Z", "closed_at": "2026-02-28T03:16:46Z", "close_reason": "merged", "labels": ["gt:merge-request"], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-wisp-iwq01", "title": "mol-refinery-patrol", "description": "Patrol report: Cycle 7: Queue empty. Nux reassigned to gt-idrl. 3 polecats active: furiosa/gt-l7uq, nux/gt-idrl, slit/gt-yxx0.", "status": "closed", "priority": 2, "issue_type": "epic", "assignee": "gastown/refinery", "created_at": "2026-02-28T03:18:49Z", "updated_at": "2026-02-28T03:19:06Z", "closed_at": "2026-02-28T03:19:06Z", "close_reason": "patrol cycle complete: Cycle 7: Queue empty. Nux reassigned to gt-idrl. 3 polecats active: furiosa/gt-l7uq, nux/gt-idrl, slit/gt-yxx0.", "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-wisp-iy655", "title": "Generate handoff summary", "description": "Summarize this patrol cycle.\n\n**VERIFICATION**: Before generating summary, confirm for each merged branch:\n- [ ] MERGED mail was sent to witness\n- [ ] MR bead was closed\n- [ ] MERGE_READY mail archived\n\nIf any notifications or archiving were missed, do them now!\n\nInclude in summary:\n- Branches merged (count, names)\n- MERGED mails sent (count - should match branches merged)\n- MR beads closed (count - should match branches merged)\n- MERGE_READY mails archived (count - should match branches merged)\n- Test results (pass/fail)\n- Branches with conflicts (count, names)\n- Conflict-resolution tasks created (IDs)\n- Issues filed (if any)\n- Any escalations sent\n\n**Conflict tracking is important** for monitoring MQ health. If many branches\nconflict, it may indicate main is moving too fast or branches are too stale.\n\nThis becomes the digest when the patrol is squashed.", "status": "open", "priority": 2, "issue_type": "task", "created_at": "2026-02-28T03:17:24Z", "updated_at": "2026-02-28T03:17:24Z", "dependencies": [{"issue_id": "gt-wisp-iy655", "depends_on_id": "gt-wisp-f7cqp", "type": "parent-child", "created_at": "2026-02-27T19:17:24Z", "created_by": "refinery", "metadata": "{}"}, {"issue_id": "gt-wisp-iy655", "depends_on_id": "gt-wisp-p13n3", "type": "blocks", "created_at": "2026-02-27T19:17:24Z", "created_by": "refinery", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-f7cqp"}
{"id": "gt-wisp-iyr4", "title": "Merge: gt-x7t9", "description": "branch: polecat/nux/gt-x7t9@mm5lq1th\ntarget: main\nsource_issue: gt-x7t9\nrig: gastown\nworker: nux\nagent_bead: gt-gastown-polecat-nux\nretry_count: 0\nlast_conflict_sha: null\nconflict_task_id: null", "status": "closed", "priority": 1, "issue_type": "task", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-28T00:56:57Z", "created_by": "gastown/polecats/nux", "updated_at": "2026-02-28T00:58:08Z", "closed_at": "2026-02-28T00:58:08Z", "close_reason": "Merged to main (c5ce08ed). Tests pass.", "labels": ["gt:merge-request"], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-wisp-j6655", "title": "mol-polecat-work", "description": "Full polecat work lifecycle from assignment through completion.\n\nThis molecule guides a polecat through a complete work assignment. Each step\nhas clear entry/exit criteria and specific commands to run. A polecat can\ncrash after any step and resume from the last completed step.\n\n## Polecat Contract (Self-Cleaning Model)\n\nYou are a self-cleaning worker. You:\n1. Receive work via your hook (pinned molecule + issue)\n2. Work through molecule steps using `bd ready` / `bd close <step>`\n3. Complete and self-clean via `gt done` (submit + nuke yourself)\n4. You are GONE - Refinery merges from MQ\n\n**Self-cleaning:** When you run `gt done`, you push your work, submit to MQ,\nnuke your sandbox, and exit. There is no idle state. Done means gone.\n\n**Important:** This formula defines the template. Your molecule already has step\nbeads created from it. Use `bd ready` to find them - do NOT read this file directly.\n\n**You do NOT:**\n- Push directly to main (Refinery merges from MQ)\n- Close your own issue (Refinery closes after merge)\n- Wait for merge (you're gone after `gt done`)\n- Handle rebase conflicts (Refinery spawns fresh polecats for that)\n\n## Variables\n\n| Variable | Source | Description |\n|----------|--------|-------------|\n| issue | hook_bead | The issue ID you're assigned to work on |\n\n## Failure Modes\n\n| Situation | Action |\n|-----------|--------|\n| Tests fail | Fix them. Do not proceed with failures. |\n| Blocked on external | Mail Witness for help, mark yourself stuck |\n| Context filling | Use gt handoff to cycle to fresh session |\n| Unsure what to do | Mail Witness, don't guess |", "status": "closed", "priority": 2, "issue_type": "epic", "created_at": "2026-02-28T02:42:42Z", "updated_at": "2026-02-28T02:54:11Z", "closed_at": "2026-02-28T02:54:11Z", "close_reason": "burned: polecat nuked", "ephemeral": true, "dependency_count": 0, "dependent_count": 1, "comment_count": 0}
{"id": "gt-wisp-jc7km", "title": "Check for more work", "description": "More branches to process?\n\n**Entry paths:**\n- Normal: After successful merge-push\n- Conflict-skip: After process-branch created conflict-resolution task\n\nIf yes: Return to process-branch with next branch.\nIf no: Continue to generate-summary.\n\n**Track for this cycle:**\n- branches_merged: count and names of successfully merged branches\n- branches_conflict: count and names of branches skipped due to conflicts\n- conflict_tasks: IDs of conflict-resolution tasks created\n\nThis tracking feeds into generate-summary for the patrol digest.", "status": "open", "priority": 2, "issue_type": "task", "created_at": "2026-02-28T03:48:28Z", "updated_at": "2026-02-28T03:48:28Z", "dependencies": [{"issue_id": "gt-wisp-jc7km", "depends_on_id": "gt-wisp-4wt5o", "type": "blocks", "created_at": "2026-02-27T19:48:28Z", "created_by": "refinery", "metadata": "{}"}, {"issue_id": "gt-wisp-jc7km", "depends_on_id": "gt-wisp-fbkga", "type": "parent-child", "created_at": "2026-02-27T19:48:28Z", "created_by": "refinery", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-fbkga"}
{"id": "gt-wisp-ju04f", "title": "mol-polecat-work", "description": "Full polecat work lifecycle from assignment through completion.\n\nThis molecule guides a polecat through a complete work assignment. Each step\nhas clear entry/exit criteria and specific commands to run. A polecat can\ncrash after any step and resume from the last completed step.\n\n## Polecat Contract (Self-Cleaning Model)\n\nYou are a self-cleaning worker. You:\n1. Receive work via your hook (pinned molecule + issue)\n2. Work through molecule steps using `bd ready` / `bd close <step>`\n3. Complete and self-clean via `gt done` (submit + nuke yourself)\n4. You are GONE - Refinery merges from MQ\n\n**Self-cleaning:** When you run `gt done`, you push your work, submit to MQ,\nnuke your sandbox, and exit. There is no idle state. Done means gone.\n\n**Important:** This formula defines the template. Your molecule already has step\nbeads created from it. Use `bd ready` to find them - do NOT read this file directly.\n\n**You do NOT:**\n- Push directly to main (Refinery merges from MQ)\n- Close your own issue (Refinery closes after merge)\n- Wait for merge (you're gone after `gt done`)\n- Handle rebase conflicts (Refinery spawns fresh polecats for that)\n\n## Variables\n\n| Variable | Source | Description |\n|----------|--------|-------------|\n| issue | hook_bead | The issue ID you're assigned to work on |\n\n## Failure Modes\n\n| Situation | Action |\n|-----------|--------|\n| Tests fail | Fix them. Do not proceed with failures. |\n| Blocked on external | Mail Witness for help, mark yourself stuck |\n| Context filling | Use gt handoff to cycle to fresh session |\n| Unsure what to do | Mail Witness, don't guess |", "status": "closed", "priority": 2, "issue_type": "epic", "created_at": "2026-02-28T03:05:49Z", "updated_at": "2026-02-28T03:13:07Z", "closed_at": "2026-02-28T03:13:07Z", "close_reason": "burned: force re-sling", "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-wisp-k7vim", "title": "Scan merge queue", "description": "Check the beads merge queue - this is the SOURCE OF TRUTH for pending merges.\n\n```bash\ngit fetch --prune origin\ngt mq list <rig>\n```\n\nThe beads MQ tracks all pending merge requests. Do NOT rely on `git branch -r | grep polecat`\nas branches may exist without MR beads, or MR beads may exist for already-merged work.\n\nIf queue empty, skip to context-check step.\n\nFor each MR in the queue, verify the branch still exists:\n```bash\ngit branch -r | grep <branch>\n```\n\nIf branch doesn't exist for a queued MR:\n- Close the MR bead: `bd close <mr-id> --reason \"Branch no longer exists\"`\n- Remove from processing queue\n\nTrack verified MR list for this cycle.", "status": "open", "priority": 2, "issue_type": "task", "created_at": "2026-02-28T03:17:24Z", "updated_at": "2026-02-28T03:17:24Z", "dependencies": [{"issue_id": "gt-wisp-k7vim", "depends_on_id": "gt-wisp-f7cqp", "type": "parent-child", "created_at": "2026-02-27T19:17:24Z", "created_by": "refinery", "metadata": "{}"}, {"issue_id": "gt-wisp-k7vim", "depends_on_id": "gt-wisp-fx65j", "type": "blocks", "created_at": "2026-02-27T19:17:24Z", "created_by": "refinery", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-f7cqp"}
{"id": "gt-wisp-kqtfo", "title": "Merge and push to main", "description": "Merge to main and push. CRITICAL: Notifications come IMMEDIATELY after push.\n\n**Step 1: Merge and Push**\n```bash\ngit checkout main\ngit merge --ff-only temp\ngit push origin main\n```\n\n⚠️ **STOP HERE - DO NOT PROCEED UNTIL STEPS 2-3 COMPLETE**\n\n**Step 2: Send MERGED Notification (REQUIRED - DO THIS IMMEDIATELY)**\n\nRIGHT NOW, before any cleanup, send MERGED mail to Witness:\n\n```bash\ngt mail send <rig>/witness -s \"MERGED <polecat-name>\" -m \"Branch: <branch>\nIssue: <issue-id>\nMerged-At: $(date -u +%Y-%m-%dT%H:%M:%SZ)\"\n```\n\nThis signals the Witness to nuke the polecat worktree. WITHOUT THIS NOTIFICATION,\nPOLECAT WORKTREES ACCUMULATE INDEFINITELY AND THE LIFECYCLE BREAKS.\n\n**Step 3: Close MR Bead (REQUIRED - DO THIS IMMEDIATELY)**\n\n⚠️ **VERIFICATION BEFORE CLOSING**: Confirm the work is actually on main:\n```bash\n# Get the commit message/issue from the branch\ngit log origin/main --oneline | grep \"<issue-id>\"\n# OR verify the commit SHA is on main:\ngit branch --contains <commit-sha> | grep main\n```\n\nIf work is NOT on main, DO NOT close the MR bead. Investigate first.\n\n```bash\nbd close <mr-bead-id> --reason \"Merged to main at $(git rev-parse --short HEAD)\"\n```\n\nThe MR bead ID was in the MERGE_READY message or find via:\n```bash\nbd list --type=merge-request --status=open | grep <polecat-name>\n```\n\n**VALIDATION**: The MR bead's source_issue should be a valid bead ID (gt-xxxxx),\nnot a branch name. If source_issue contains a branch name, flag for investigation.\n\n**Step 4: Archive the MERGE_READY mail (REQUIRED)**\n```bash\ngt mail archive <merge-ready-message-id>\n```\nThe message ID was tracked when you processed inbox-check.\n\n**Step 5: Cleanup (only after Steps 2-4 confirmed)**\n```bash\ngit branch -d temp\ngit push origin --delete <polecat-branch>\n```\n\n**VERIFICATION GATE**: You CANNOT proceed to loop-check without:\n- [x] MERGED mail sent to witness\n- [x] MR bead closed\n- [x] MERGE_READY mail archived\n\nIf you skipped notifications or archiving, GO BACK AND DO THEM NOW.\n\nMain has moved. Any remaining branches need rebasing on new baseline.", "status": "open", "priority": 2, "issue_type": "task", "created_at": "2026-02-28T03:00:55Z", "updated_at": "2026-02-28T03:00:55Z", "dependencies": [{"issue_id": "gt-wisp-kqtfo", "depends_on_id": "gt-wisp-0q360", "type": "blocks", "created_at": "2026-02-27T19:00:55Z", "created_by": "refinery", "metadata": "{}"}, {"issue_id": "gt-wisp-kqtfo", "depends_on_id": "gt-wisp-ybyhe", "type": "parent-child", "created_at": "2026-02-27T19:00:55Z", "created_by": "refinery", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-ybyhe"}
{"id": "gt-wisp-kxctl", "title": "Generate handoff summary", "description": "Summarize this patrol cycle.\n\n**VERIFICATION**: Before generating summary, confirm for each merged branch:\n- [ ] MERGED mail was sent to witness\n- [ ] MR bead was closed\n- [ ] MERGE_READY mail archived\n\nIf any notifications or archiving were missed, do them now!\n\nInclude in summary:\n- Branches merged (count, names)\n- MERGED mails sent (count - should match branches merged)\n- MR beads closed (count - should match branches merged)\n- MERGE_READY mails archived (count - should match branches merged)\n- Test results (pass/fail)\n- Branches with conflicts (count, names)\n- Conflict-resolution tasks created (IDs)\n- Issues filed (if any)\n- Any escalations sent\n\n**Conflict tracking is important** for monitoring MQ health. If many branches\nconflict, it may indicate main is moving too fast or branches are too stale.\n\nThis becomes the digest when the patrol is squashed.", "status": "open", "priority": 2, "issue_type": "task", "created_at": "2026-02-28T03:49:11Z", "updated_at": "2026-02-28T03:49:11Z", "dependencies": [{"issue_id": "gt-wisp-kxctl", "depends_on_id": "gt-wisp-dxgw4", "type": "blocks", "created_at": "2026-02-27T19:49:11Z", "created_by": "refinery", "metadata": "{}"}, {"issue_id": "gt-wisp-kxctl", "depends_on_id": "gt-wisp-s2vyx", "type": "parent-child", "created_at": "2026-02-27T19:49:11Z", "created_by": "refinery", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-s2vyx"}
{"id": "gt-wisp-l6poh", "title": "Scan merge queue", "description": "Check the beads merge queue - this is the SOURCE OF TRUTH for pending merges.\n\n```bash\ngit fetch --prune origin\ngt mq list <rig>\n```\n\nThe beads MQ tracks all pending merge requests. Do NOT rely on `git branch -r | grep polecat`\nas branches may exist without MR beads, or MR beads may exist for already-merged work.\n\nIf queue empty, skip to context-check step.\n\nFor each MR in the queue, verify the branch still exists:\n```bash\ngit branch -r | grep <branch>\n```\n\nIf branch doesn't exist for a queued MR:\n- Close the MR bead: `bd close <mr-id> --reason \"Branch no longer exists\"`\n- Remove from processing queue\n\nTrack verified MR list for this cycle.", "status": "open", "priority": 2, "issue_type": "task", "created_at": "2026-02-28T03:18:01Z", "updated_at": "2026-02-28T03:18:01Z", "dependencies": [{"issue_id": "gt-wisp-l6poh", "depends_on_id": "gt-wisp-m4rin", "type": "blocks", "created_at": "2026-02-27T19:18:01Z", "created_by": "refinery", "metadata": "{}"}, {"issue_id": "gt-wisp-l6poh", "depends_on_id": "gt-wisp-y6e5z", "type": "parent-child", "created_at": "2026-02-27T19:18:01Z", "created_by": "refinery", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-y6e5z"}
{"id": "gt-wisp-lamkm", "title": "mol-refinery-patrol", "description": "Patrol report: Cycle 8: Queue empty, no new work. Context moderate after 8 cycles. 1 merge completed (rictus/gt-0wkk), 3 stale MRs cleaned, 2 pre-existing test failures filed. Handing off if no work arrives.", "status": "closed", "priority": 2, "issue_type": "epic", "assignee": "gastown/refinery", "created_at": "2026-02-28T03:19:06Z", "updated_at": "2026-02-28T03:19:24Z", "closed_at": "2026-02-28T03:19:24Z", "close_reason": "patrol cycle complete: Cycle 8: Queue empty, no new work. Context moderate after 8 cycles. 1 merge completed (rictus/gt-0wkk), 3 stale MRs cleaned, 2 pre-existing test failures filed. Handing off if no work arrives.", "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-wisp-liwao", "title": "mol-polecat-work", "description": "Full polecat work lifecycle from assignment through completion.\n\nThis molecule guides a polecat through a complete work assignment. Each step\nhas clear entry/exit criteria and specific commands to run. A polecat can\ncrash after any step and resume from the last completed step.\n\n## Polecat Contract (Self-Cleaning Model)\n\nYou are a self-cleaning worker. You:\n1. Receive work via your hook (pinned molecule + issue)\n2. Work through molecule steps using `bd ready` / `bd close <step>`\n3. Complete and self-clean via `gt done` (submit + nuke yourself)\n4. You are GONE - Refinery merges from MQ\n\n**Self-cleaning:** When you run `gt done`, you push your work, submit to MQ,\nnuke your sandbox, and exit. There is no idle state. Done means gone.\n\n**Important:** This formula defines the template. Your molecule already has step\nbeads created from it. Use `bd ready` to find them - do NOT read this file directly.\n\n**You do NOT:**\n- Push directly to main (Refinery merges from MQ)\n- Close your own issue (Refinery closes after merge)\n- Wait for merge (you're gone after `gt done`)\n- Handle rebase conflicts (Refinery spawns fresh polecats for that)\n\n## Variables\n\n| Variable | Source | Description |\n|----------|--------|-------------|\n| issue | hook_bead | The issue ID you're assigned to work on |\n\n## Failure Modes\n\n| Situation | Action |\n|-----------|--------|\n| Tests fail | Fix them. Do not proceed with failures. |\n| Blocked on external | Mail Witness for help, mark yourself stuck |\n| Context filling | Use gt handoff to cycle to fresh session |\n| Unsure what to do | Mail Witness, don't guess |", "status": "open", "priority": 2, "issue_type": "epic", "created_at": "2026-02-28T03:42:30Z", "updated_at": "2026-02-28T03:42:30Z", "ephemeral": true, "dependency_count": 0, "dependent_count": 1, "comment_count": 0}
{"id": "gt-wisp-lnhf5", "title": "Scan merge queue", "description": "Check the beads merge queue - this is the SOURCE OF TRUTH for pending merges.\n\n```bash\ngit fetch --prune origin\ngt mq list <rig>\n```\n\nThe beads MQ tracks all pending merge requests. Do NOT rely on `git branch -r | grep polecat`\nas branches may exist without MR beads, or MR beads may exist for already-merged work.\n\nIf queue empty, skip to context-check step.\n\nFor each MR in the queue, verify the branch still exists:\n```bash\ngit branch -r | grep <branch>\n```\n\nIf branch doesn't exist for a queued MR:\n- Close the MR bead: `bd close <mr-id> --reason \"Branch no longer exists\"`\n- Remove from processing queue\n\nTrack verified MR list for this cycle.", "status": "open", "priority": 2, "issue_type": "task", "created_at": "2026-02-28T03:48:28Z", "updated_at": "2026-02-28T03:48:28Z", "dependencies": [{"issue_id": "gt-wisp-lnhf5", "depends_on_id": "gt-wisp-fbkga", "type": "parent-child", "created_at": "2026-02-27T19:48:28Z", "created_by": "refinery", "metadata": "{}"}, {"issue_id": "gt-wisp-lnhf5", "depends_on_id": "gt-wisp-fbptp", "type": "blocks", "created_at": "2026-02-27T19:48:28Z", "created_by": "refinery", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-fbkga"}
{"id": "gt-wisp-ls3zw", "title": "Burn and respawn or loop", "description": "End of patrol cycle decision.\n\n**Step 1: Estimate remaining context**\n\nAsk yourself:\n- Have I processed many branches this cycle?\n- Is the conversation getting long?\n- Am I starting to lose track of earlier context?\n\nRule of thumb: If you've done 3+ merges or processed significant cleanup work,\nit's time for a fresh session.\n\n**Step 2: Decision tree**\n\nIf queue non-empty AND context LOW:\n- Squash this wisp to digest\n- Spawn fresh patrol wisp\n- Return to inbox-check\n\nIf queue empty OR context HIGH OR good stopping point:\n- Squash wisp with summary digest\n- Use `gt handoff` for clean session transition:\n\n```bash\ngt handoff -s \"Patrol complete\" -m \"Merged X branches, Y tests passed.\nQueue: empty/N remaining\nNext: [any notes for successor]\"\n```\n\n**Why gt handoff?**\n- Sends handoff mail to yourself with context\n- Respawns with fresh Claude instance\n- SessionStart hook runs gt prime\n- Successor picks up from your hook\n\n**DO NOT just exit.** Always use `gt handoff` for proper lifecycle.", "status": "open", "priority": 2, "issue_type": "task", "created_at": "2026-02-28T03:17:24Z", "updated_at": "2026-02-28T03:17:24Z", "dependencies": [{"issue_id": "gt-wisp-ls3zw", "depends_on_id": "gt-wisp-f7cqp", "type": "parent-child", "created_at": "2026-02-27T19:17:24Z", "created_by": "refinery", "metadata": "{}"}, {"issue_id": "gt-wisp-ls3zw", "depends_on_id": "gt-wisp-tigww", "type": "blocks", "created_at": "2026-02-27T19:17:24Z", "created_by": "refinery", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-f7cqp"}
{"id": "gt-wisp-lz2m", "title": "Merge: gt-8qtk", "description": "branch: polecat/nux/gt-8qtk@mm5kz0fa\ntarget: main\nsource_issue: gt-8qtk\nrig: gastown\nworker: nux\nagent_bead: gt-gastown-polecat-nux\nretry_count: 0\nlast_conflict_sha: null\nconflict_task_id: null", "status": "closed", "priority": 1, "issue_type": "task", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-28T00:37:06Z", "created_by": "gastown/polecats/nux", "updated_at": "2026-02-28T00:39:19Z", "closed_at": "2026-02-28T00:39:19Z", "labels": ["gt:merge-request"], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-wisp-m0m6u", "title": "mol-polecat-work", "description": "Full polecat work lifecycle from assignment through completion.\n\nThis molecule guides a polecat through a complete work assignment. Each step\nhas clear entry/exit criteria and specific commands to run. A polecat can\ncrash after any step and resume from the last completed step.\n\n## Polecat Contract (Self-Cleaning Model)\n\nYou are a self-cleaning worker. You:\n1. Receive work via your hook (pinned molecule + issue)\n2. Work through molecule steps using `bd ready` / `bd close <step>`\n3. Complete and self-clean via `gt done` (submit + nuke yourself)\n4. You are GONE - Refinery merges from MQ\n\n**Self-cleaning:** When you run `gt done`, you push your work, submit to MQ,\nnuke your sandbox, and exit. There is no idle state. Done means gone.\n\n**Important:** This formula defines the template. Your molecule already has step\nbeads created from it. Use `bd ready` to find them - do NOT read this file directly.\n\n**You do NOT:**\n- Push directly to main (Refinery merges from MQ)\n- Close your own issue (Refinery closes after merge)\n- Wait for merge (you're gone after `gt done`)\n- Handle rebase conflicts (Refinery spawns fresh polecats for that)\n\n## Variables\n\n| Variable | Source | Description |\n|----------|--------|-------------|\n| issue | hook_bead | The issue ID you're assigned to work on |\n\n## Failure Modes\n\n| Situation | Action |\n|-----------|--------|\n| Tests fail | Fix them. Do not proceed with failures. |\n| Blocked on external | Mail Witness for help, mark yourself stuck |\n| Context filling | Use gt handoff to cycle to fresh session |\n| Unsure what to do | Mail Witness, don't guess |", "status": "closed", "priority": 2, "issue_type": "epic", "created_at": "2026-02-28T03:05:00Z", "updated_at": "2026-02-28T03:12:16Z", "closed_at": "2026-02-28T03:12:16Z", "close_reason": "burned: force re-sling", "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-wisp-m11oz", "title": "Mechanical rebase", "description": "Pick next branch from queue. Attempt mechanical rebase on current main.\n\n**Step 1: Checkout and attempt rebase**\n```bash\ngit checkout -b temp origin/<polecat-branch>\ngit rebase origin/main\n```\n\n**Step 2: Check rebase result**\n\nThe rebase exits with:\n- Exit code 0: Success - proceed to run-tests\n- Exit code 1 (conflicts): Conflict detected - proceed to Step 3\n\nTo detect conflict state after rebase fails:\n```bash\n# Check if we're in a conflicted rebase state\nls .git/rebase-merge 2>/dev/null && echo \"CONFLICT_STATE\"\n```\n\n**Step 3: Handle conflicts (if any)**\n\nIf rebase SUCCEEDED (exit code 0):\n- Skip to run-tests step (continue normal merge flow)\n\nIf rebase FAILED with conflicts:\n\n1. **Abort the rebase** (DO NOT leave repo in conflicted state):\n```bash\ngit rebase --abort\n```\n\n2. **Record conflict metadata**:\n```bash\n# Capture main SHA for reference\nMAIN_SHA=$(git rev-parse origin/main)\nBRANCH_SHA=$(git rev-parse origin/<polecat-branch>)\n```\n\n3. **Create conflict-resolution task**:\n```bash\nbd create --type=task --priority=1 --title=\"Resolve merge conflicts: <original-issue-title>\" --description=\"## Conflict Resolution Required\n\nOriginal MR: <mr-bead-id>\nBranch: <polecat-branch>\nOriginal Issue: <issue-id>\nConflict with main at: ${MAIN_SHA}\nBranch SHA: ${BRANCH_SHA}\n\n## Instructions\n1. Clone/checkout the branch\n2. Rebase on current main: git rebase origin/main\n3. Resolve conflicts\n4. Force push: git push -f origin <branch>\n5. Close this task when done\n\nThe MR will be re-queued for processing after conflicts are resolved.\"\n```\n\n4. **Skip this MR** (do NOT delete branch or close MR bead):\n- Leave branch intact for conflict resolution\n- Leave MR bead open (will be re-processed after resolution)\n- Continue to loop-check for next branch\n\n**CRITICAL**: Never delete a branch that has conflicts. The branch contains\nthe original work and must be preserved for conflict resolution.\n\nTrack: rebase result (success/conflict), conflict task ID if created.", "status": "open", "priority": 2, "issue_type": "task", "created_at": "2026-02-28T03:17:39Z", "updated_at": "2026-02-28T03:17:39Z", "dependencies": [{"issue_id": "gt-wisp-m11oz", "depends_on_id": "gt-wisp-7nfa8", "type": "blocks", "created_at": "2026-02-27T19:17:39Z", "created_by": "refinery", "metadata": "{}"}, {"issue_id": "gt-wisp-m11oz", "depends_on_id": "gt-wisp-edwlt", "type": "parent-child", "created_at": "2026-02-27T19:17:39Z", "created_by": "refinery", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-edwlt"}
{"id": "gt-wisp-m4rin", "title": "Check refinery mail", "description": "Check mail for MERGE_READY submissions, escalations, and messages.\n\n```bash\ngt mail inbox\n```\n\nFor each message:\n\n**MERGE_READY**:\nA polecat's work is ready for merge. Extract details and track for processing.\n\n```bash\n# Parse MERGE_READY message body:\n# Branch: <branch>\n# Issue: <issue-id>\n# Polecat: <polecat-name>\n# MR: <mr-bead-id>\n# Verified: clean git state, issue closed\n\n# Track in your merge queue for this patrol cycle:\n# - Branch name\n# - Issue ID\n# - Polecat name (REQUIRED for MERGED notification)\n# - MR bead ID (REQUIRED for closing after merge)\n```\n\n**IMPORTANT**: You MUST track the polecat name, MR bead ID, AND message ID - you will need them\nin merge-push step to send MERGED notification, close the MR bead, and archive the mail.\n\nMark as read. The work will be processed in queue-scan/process-branch.\n**Do NOT archive yet** - archive after merge/reject decision in merge-push step.\n\n**PATROL: Wake up**:\nWitness detected MRs waiting but refinery idle. Acknowledge and archive:\n```bash\ngt mail archive <message-id>\n```\n\n**HELP / Blocked**:\nAssess and respond. If you can't help, escalate to Mayor.\nArchive after handling:\n```bash\ngt mail archive <message-id>\n```\n\n**HANDOFF**:\nRead predecessor context. Check for in-flight merges.\nArchive after absorbing context:\n```bash\ngt mail archive <message-id>\n```\n\n**Hygiene principle**: Archive messages after they're fully processed.\nKeep only: pending MRs in queue. Inbox should be near-empty.", "status": "open", "priority": 2, "issue_type": "task", "created_at": "2026-02-28T03:18:01Z", "updated_at": "2026-02-28T03:18:01Z", "dependencies": [{"issue_id": "gt-wisp-m4rin", "depends_on_id": "gt-wisp-y6e5z", "type": "parent-child", "created_at": "2026-02-27T19:18:01Z", "created_by": "refinery", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-y6e5z"}
{"id": "gt-wisp-mcikm", "title": "Run test suite", "description": "Run the test suite.\n\n```bash\ngo test ./...\n```\n\nTrack results: pass count, fail count, specific failures.", "status": "open", "priority": 2, "issue_type": "task", "created_at": "2026-02-28T03:18:21Z", "updated_at": "2026-02-28T03:18:21Z", "dependencies": [{"issue_id": "gt-wisp-mcikm", "depends_on_id": "gt-wisp-6c0pn", "type": "parent-child", "created_at": "2026-02-27T19:18:20Z", "created_by": "refinery", "metadata": "{}"}, {"issue_id": "gt-wisp-mcikm", "depends_on_id": "gt-wisp-zfeec", "type": "blocks", "created_at": "2026-02-27T19:18:20Z", "created_by": "refinery", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-6c0pn"}
{"id": "gt-wisp-mq5xo", "title": "Load context and verify assignment", "description": "Initialize your session and understand your assignment.\n\n**1. Prime your environment:**\n```bash\ngt prime                    # Load role context\nbd prime                    # Load beads context\n```\n\n**2. Check your hook:**\n```bash\ngt hook               # Shows your pinned molecule and hook_bead\n```\n\nThe hook_bead is your assigned issue. Read it carefully:\n```bash\nbd show gt-y8x4           # Full issue details\n```\n\n**3. Check inbox for additional context:**\n```bash\ngt mail inbox\n# Read any HANDOFF or assignment messages\n```\n\n**4. Understand the requirements:**\n- What exactly needs to be done?\n- What files are likely involved?\n- Are there dependencies or blockers?\n- What does \"done\" look like?\n\n**5. Verify you can proceed:**\n- No unresolved blockers on the issue\n- You understand what to do\n- Required resources are available\n\nIf blocked or unclear, mail Witness immediately:\n```bash\ngt mail send <rig>/witness -s \"HELP: Unclear requirements\" -m \"Issue: gt-y8x4\nQuestion: <what you need clarified>\"\n```\n\n**Exit criteria:** You understand the work and can begin implementation.", "status": "closed", "priority": 2, "issue_type": "task", "assignee": "gastown/polecats/furiosa", "created_at": "2026-02-28T02:42:12Z", "updated_at": "2026-02-28T02:43:21Z", "closed_at": "2026-02-28T02:43:21Z", "close_reason": "Closed", "dependencies": [{"issue_id": "gt-wisp-mq5xo", "depends_on_id": "gt-wisp-2vlrx", "type": "parent-child", "created_at": "2026-02-27T18:42:12Z", "created_by": "mayor", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-2vlrx"}
{"id": "gt-wisp-mr2l3", "title": "Run test suite", "description": "Run the test suite.\n\n```bash\ngo test ./...\n```\n\nTrack results: pass count, fail count, specific failures.", "status": "open", "priority": 2, "issue_type": "task", "created_at": "2026-02-28T03:19:06Z", "updated_at": "2026-02-28T03:19:06Z", "dependencies": [{"issue_id": "gt-wisp-mr2l3", "depends_on_id": "gt-wisp-lamkm", "type": "parent-child", "created_at": "2026-02-27T19:19:06Z", "created_by": "refinery", "metadata": "{}"}, {"issue_id": "gt-wisp-mr2l3", "depends_on_id": "gt-wisp-zkg2o", "type": "blocks", "created_at": "2026-02-27T19:19:06Z", "created_by": "refinery", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-lamkm"}
{"id": "gt-wisp-n1i4h", "title": "Check for more work", "description": "More branches to process?\n\n**Entry paths:**\n- Normal: After successful merge-push\n- Conflict-skip: After process-branch created conflict-resolution task\n\nIf yes: Return to process-branch with next branch.\nIf no: Continue to generate-summary.\n\n**Track for this cycle:**\n- branches_merged: count and names of successfully merged branches\n- branches_conflict: count and names of branches skipped due to conflicts\n- conflict_tasks: IDs of conflict-resolution tasks created\n\nThis tracking feeds into generate-summary for the patrol digest.", "status": "open", "priority": 2, "issue_type": "task", "created_at": "2026-02-28T03:17:40Z", "updated_at": "2026-02-28T03:17:40Z", "dependencies": [{"issue_id": "gt-wisp-n1i4h", "depends_on_id": "gt-wisp-2vch9", "type": "blocks", "created_at": "2026-02-27T19:17:39Z", "created_by": "refinery", "metadata": "{}"}, {"issue_id": "gt-wisp-n1i4h", "depends_on_id": "gt-wisp-edwlt", "type": "parent-child", "created_at": "2026-02-27T19:17:39Z", "created_by": "refinery", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-edwlt"}
{"id": "gt-wisp-n4kzy", "title": "Verify tests pass on main", "description": "Check if the codebase is healthy BEFORE starting your work.\n\n**The Scotty Principle:** Don't walk past a broken warp core. But also don't\nlet someone else's mess consume your entire mission.\n\n**1. Check tests on main:**\n```bash\ngit stash                   # Save your branch state\ngit checkout origin/main\ngo test ./...               # Or appropriate test command\n```\n\n**2. If tests PASS:**\n```bash\ngit checkout -              # Back to your branch\ngit stash pop               # Restore state\n```\nContinue to implement step.\n\n**3. If tests FAIL on main:**\n\nFile a bead and proceed. Do NOT fix pre-existing failures yourself — that is\nnot your assignment. Your job is to fix the issue on your hook, not main.\n\n| Situation | Action |\n|-----------|--------|\n| Any pre-existing failure | File bead, proceed with your work |\n\nFORBIDDEN: Pushing to main. FORBIDDEN: Fixing pre-existing failures.\nYou work on YOUR feature branch only. `gt done` handles push/MR.\n\n**File and proceed path:**\n```bash\nbd create --title \"Pre-existing test failure: <description>\" --type bug --priority 1\n\ngt mail send <rig>/witness -s \"NOTICE: Main has failing tests\" -m \"Found pre-existing test failures on main.\nFiled: <bead-id>\nProceeding with my assigned work (gt-08iv).\"\n\ngit checkout -\ngit stash pop\n```\n\n**Context consideration:**\nIf fixing pre-existing failures consumed significant context:\n```bash\ngt handoff -s \"Fixed pre-existing failures, ready for assigned work\" -m \"Issue: gt-08iv\nFixed: <what you fixed>\nReady to start: implement step\"\n```\nFresh session continues from implement.\n\n**Exit criteria:** Tests pass on main (or issue filed), ready to implement.", "status": "closed", "priority": 2, "issue_type": "task", "created_at": "2026-02-28T02:42:25Z", "updated_at": "2026-02-28T02:47:13Z", "closed_at": "2026-02-28T02:47:13Z", "close_reason": "Closed", "dependencies": [{"issue_id": "gt-wisp-n4kzy", "depends_on_id": "gt-wisp-2gzt8", "type": "blocks", "created_at": "2026-02-27T18:42:25Z", "created_by": "mayor", "metadata": "{}"}, {"issue_id": "gt-wisp-n4kzy", "depends_on_id": "gt-wisp-st5bf", "type": "parent-child", "created_at": "2026-02-27T18:42:25Z", "created_by": "mayor", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-st5bf"}
{"id": "gt-wisp-n5zz5", "title": "Check own context limit", "description": "Check own context usage.\n\nIf context is HIGH (>80%):\n- Write handoff summary\n- Prepare for burn/respawn\n\nIf context is LOW:\n- Can continue processing", "status": "open", "priority": 2, "issue_type": "task", "created_at": "2026-02-28T03:18:01Z", "updated_at": "2026-02-28T03:18:01Z", "dependencies": [{"issue_id": "gt-wisp-n5zz5", "depends_on_id": "gt-wisp-y6e5z", "type": "parent-child", "created_at": "2026-02-27T19:18:01Z", "created_by": "refinery", "metadata": "{}"}, {"issue_id": "gt-wisp-n5zz5", "depends_on_id": "gt-wisp-zxhbi", "type": "blocks", "created_at": "2026-02-27T19:18:01Z", "created_by": "refinery", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-y6e5z"}
{"id": "gt-wisp-nlhan", "title": "Commit all implementation changes", "description": "Ensure ALL implementation work is committed before cleanup.\n\n**CRITICAL: You MUST commit all changes from implementation.**\nNEVER use `git checkout -- .` or `git restore .` to discard implementation work.\nALWAYS commit ALL uncommitted changes from your implementation.\n\n**1. Check for uncommitted changes:**\n```bash\ngit status\n```\n\n**2. If there are ANY uncommitted changes, commit them now:**\n```bash\ngit add -A && git commit -m \"<type>: <descriptive message> (gt-y8x4)\"\n```\n\n**3. If working tree is already clean, skip.**\n\n**4. VERIFY:**\n```bash\ngit status\n```\nMust show \"nothing to commit, working tree clean\".\n\n**5. Verify you have commits:**\n```bash\ngit log origin/main..HEAD --oneline\n```\nIf you made changes during implementation, this MUST show at least 1 commit.\n\n**Exit criteria:** All changes committed. Working tree clean.", "status": "closed", "priority": 2, "issue_type": "task", "assignee": "gastown/polecats/furiosa", "created_at": "2026-02-28T02:42:12Z", "updated_at": "2026-02-28T02:48:27Z", "closed_at": "2026-02-28T02:48:27Z", "close_reason": "Closed", "dependencies": [{"issue_id": "gt-wisp-nlhan", "depends_on_id": "gt-wisp-2vlrx", "type": "parent-child", "created_at": "2026-02-27T18:42:12Z", "created_by": "mayor", "metadata": "{}"}, {"issue_id": "gt-wisp-nlhan", "depends_on_id": "gt-wisp-drwmf", "type": "blocks", "created_at": "2026-02-27T18:42:12Z", "created_by": "mayor", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-2vlrx"}
{"id": "gt-wisp-npw2r", "title": "Handle test failures", "description": "**VERIFICATION GATE**: This step enforces the Beads Promise.\n\nIf tests PASSED: This step auto-completes. Proceed to merge.\n\nIf tests FAILED:\n1. Diagnose: Is this a branch regression or pre-existing on main?\n2. If branch caused it:\n   - Abort merge\n   - Notify polecat: \"Tests failing. Please fix and resubmit.\"\n   - Skip to loop-check\n3. If pre-existing on main:\n   - File a bead: bd create --type=bug --priority=1 --title=\"...\"\n   - FORBIDDEN: Writing code to fix test failures. You merge branches, you do not develop.\n   - Proceed with the merge if the failure is pre-existing (not caused by the branch).\n\n**GATE REQUIREMENT**: You CANNOT proceed to merge-push without:\n- Tests passing, OR\n- Bead filed for the pre-existing failure\n\nFORBIDDEN: Writing application code, exploring polecat implementations, or\nre-implementing fixes. You are a mechanical merge processor.\n\nThis is non-negotiable. Never disavow. Never \"note and proceed.\" ", "status": "open", "priority": 2, "issue_type": "task", "created_at": "2026-02-28T03:17:40Z", "updated_at": "2026-02-28T03:17:40Z", "dependencies": [{"issue_id": "gt-wisp-npw2r", "depends_on_id": "gt-wisp-edwlt", "type": "parent-child", "created_at": "2026-02-27T19:17:39Z", "created_by": "refinery", "metadata": "{}"}, {"issue_id": "gt-wisp-npw2r", "depends_on_id": "gt-wisp-z0u3b", "type": "blocks", "created_at": "2026-02-27T19:17:39Z", "created_by": "refinery", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-edwlt"}
{"id": "gt-wisp-ntvpy", "title": "Check own context limit", "description": "Check own context usage.\n\nIf context is HIGH (>80%):\n- Write handoff summary\n- Prepare for burn/respawn\n\nIf context is LOW:\n- Can continue processing", "status": "open", "priority": 2, "issue_type": "task", "created_at": "2026-02-28T03:48:28Z", "updated_at": "2026-02-28T03:48:28Z", "dependencies": [{"issue_id": "gt-wisp-ntvpy", "depends_on_id": "gt-wisp-dqbgl", "type": "blocks", "created_at": "2026-02-27T19:48:28Z", "created_by": "refinery", "metadata": "{}"}, {"issue_id": "gt-wisp-ntvpy", "depends_on_id": "gt-wisp-fbkga", "type": "parent-child", "created_at": "2026-02-27T19:48:28Z", "created_by": "refinery", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-fbkga"}
{"id": "gt-wisp-nwzrp", "title": "Handle test failures", "description": "**VERIFICATION GATE**: This step enforces the Beads Promise.\n\nIf tests PASSED: This step auto-completes. Proceed to merge.\n\nIf tests FAILED:\n1. Diagnose: Is this a branch regression or pre-existing on main?\n2. If branch caused it:\n   - Abort merge\n   - Notify polecat: \"Tests failing. Please fix and resubmit.\"\n   - Skip to loop-check\n3. If pre-existing on main:\n   - File a bead: bd create --type=bug --priority=1 --title=\"...\"\n   - FORBIDDEN: Writing code to fix test failures. You merge branches, you do not develop.\n   - Proceed with the merge if the failure is pre-existing (not caused by the branch).\n\n**GATE REQUIREMENT**: You CANNOT proceed to merge-push without:\n- Tests passing, OR\n- Bead filed for the pre-existing failure\n\nFORBIDDEN: Writing application code, exploring polecat implementations, or\nre-implementing fixes. You are a mechanical merge processor.\n\nThis is non-negotiable. Never disavow. Never \"note and proceed.\" ", "status": "open", "priority": 2, "issue_type": "task", "created_at": "2026-02-28T03:19:24Z", "updated_at": "2026-02-28T03:19:24Z", "dependencies": [{"issue_id": "gt-wisp-nwzrp", "depends_on_id": "gt-wisp-gt024", "type": "parent-child", "created_at": "2026-02-27T19:19:24Z", "created_by": "refinery", "metadata": "{}"}, {"issue_id": "gt-wisp-nwzrp", "depends_on_id": "gt-wisp-gwmen", "type": "blocks", "created_at": "2026-02-27T19:19:24Z", "created_by": "refinery", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-gt024"}
{"id": "gt-wisp-o1zrc", "title": "Handle test failures", "description": "**VERIFICATION GATE**: This step enforces the Beads Promise.\n\nIf tests PASSED: This step auto-completes. Proceed to merge.\n\nIf tests FAILED:\n1. Diagnose: Is this a branch regression or pre-existing on main?\n2. If branch caused it:\n   - Abort merge\n   - Notify polecat: \"Tests failing. Please fix and resubmit.\"\n   - Skip to loop-check\n3. If pre-existing on main:\n   - File a bead: bd create --type=bug --priority=1 --title=\"...\"\n   - FORBIDDEN: Writing code to fix test failures. You merge branches, you do not develop.\n   - Proceed with the merge if the failure is pre-existing (not caused by the branch).\n\n**GATE REQUIREMENT**: You CANNOT proceed to merge-push without:\n- Tests passing, OR\n- Bead filed for the pre-existing failure\n\nFORBIDDEN: Writing application code, exploring polecat implementations, or\nre-implementing fixes. You are a mechanical merge processor.\n\nThis is non-negotiable. Never disavow. Never \"note and proceed.\" ", "status": "open", "priority": 2, "issue_type": "task", "created_at": "2026-02-28T03:17:24Z", "updated_at": "2026-02-28T03:17:24Z", "dependencies": [{"issue_id": "gt-wisp-o1zrc", "depends_on_id": "gt-wisp-f1p0q", "type": "blocks", "created_at": "2026-02-27T19:17:24Z", "created_by": "refinery", "metadata": "{}"}, {"issue_id": "gt-wisp-o1zrc", "depends_on_id": "gt-wisp-f7cqp", "type": "parent-child", "created_at": "2026-02-27T19:17:24Z", "created_by": "refinery", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-f7cqp"}
{"id": "gt-wisp-o6t0", "title": "Merge: gt-2rj2", "description": "branch: polecat/furiosa/gt-2rj2@mm5lqt5d\ntarget: main\nsource_issue: gt-2rj2\nrig: gastown\nworker: furiosa\nagent_bead: gt-gastown-polecat-furiosa\nretry_count: 0\nlast_conflict_sha: null\nconflict_task_id: null", "status": "closed", "priority": 0, "issue_type": "task", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-28T01:01:00Z", "created_by": "gastown/polecats/furiosa", "updated_at": "2026-02-28T01:02:30Z", "closed_at": "2026-02-28T01:02:30Z", "close_reason": "Merged to main (655620a1). Tests pass.", "labels": ["gt:merge-request"], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-wisp-p13n3", "title": "Check for more work", "description": "More branches to process?\n\n**Entry paths:**\n- Normal: After successful merge-push\n- Conflict-skip: After process-branch created conflict-resolution task\n\nIf yes: Return to process-branch with next branch.\nIf no: Continue to generate-summary.\n\n**Track for this cycle:**\n- branches_merged: count and names of successfully merged branches\n- branches_conflict: count and names of branches skipped due to conflicts\n- conflict_tasks: IDs of conflict-resolution tasks created\n\nThis tracking feeds into generate-summary for the patrol digest.", "status": "open", "priority": 2, "issue_type": "task", "created_at": "2026-02-28T03:17:24Z", "updated_at": "2026-02-28T03:17:24Z", "dependencies": [{"issue_id": "gt-wisp-p13n3", "depends_on_id": "gt-wisp-8ukoo", "type": "blocks", "created_at": "2026-02-27T19:17:24Z", "created_by": "refinery", "metadata": "{}"}, {"issue_id": "gt-wisp-p13n3", "depends_on_id": "gt-wisp-f7cqp", "type": "parent-child", "created_at": "2026-02-27T19:17:24Z", "created_by": "refinery", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-f7cqp"}
{"id": "gt-wisp-p2ccb", "title": "Run test suite", "description": "Run the test suite.\n\n```bash\ngo test ./...\n```\n\nTrack results: pass count, fail count, specific failures.", "status": "open", "priority": 2, "issue_type": "task", "created_at": "2026-02-28T03:18:49Z", "updated_at": "2026-02-28T03:18:49Z", "dependencies": [{"issue_id": "gt-wisp-p2ccb", "depends_on_id": "gt-wisp-eslbx", "type": "blocks", "created_at": "2026-02-27T19:18:49Z", "created_by": "refinery", "metadata": "{}"}, {"issue_id": "gt-wisp-p2ccb", "depends_on_id": "gt-wisp-iwq01", "type": "parent-child", "created_at": "2026-02-27T19:18:49Z", "created_by": "refinery", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-iwq01"}
{"id": "gt-wisp-p9gv2", "title": "Merge and push to main", "description": "Merge to main and push. CRITICAL: Notifications come IMMEDIATELY after push.\n\n**Step 1: Merge and Push**\n```bash\ngit checkout main\ngit merge --ff-only temp\ngit push origin main\n```\n\n⚠️ **STOP HERE - DO NOT PROCEED UNTIL STEPS 2-3 COMPLETE**\n\n**Step 2: Send MERGED Notification (REQUIRED - DO THIS IMMEDIATELY)**\n\nRIGHT NOW, before any cleanup, send MERGED mail to Witness:\n\n```bash\ngt mail send <rig>/witness -s \"MERGED <polecat-name>\" -m \"Branch: <branch>\nIssue: <issue-id>\nMerged-At: $(date -u +%Y-%m-%dT%H:%M:%SZ)\"\n```\n\nThis signals the Witness to nuke the polecat worktree. WITHOUT THIS NOTIFICATION,\nPOLECAT WORKTREES ACCUMULATE INDEFINITELY AND THE LIFECYCLE BREAKS.\n\n**Step 3: Close MR Bead (REQUIRED - DO THIS IMMEDIATELY)**\n\n⚠️ **VERIFICATION BEFORE CLOSING**: Confirm the work is actually on main:\n```bash\n# Get the commit message/issue from the branch\ngit log origin/main --oneline | grep \"<issue-id>\"\n# OR verify the commit SHA is on main:\ngit branch --contains <commit-sha> | grep main\n```\n\nIf work is NOT on main, DO NOT close the MR bead. Investigate first.\n\n```bash\nbd close <mr-bead-id> --reason \"Merged to main at $(git rev-parse --short HEAD)\"\n```\n\nThe MR bead ID was in the MERGE_READY message or find via:\n```bash\nbd list --type=merge-request --status=open | grep <polecat-name>\n```\n\n**VALIDATION**: The MR bead's source_issue should be a valid bead ID (gt-xxxxx),\nnot a branch name. If source_issue contains a branch name, flag for investigation.\n\n**Step 4: Archive the MERGE_READY mail (REQUIRED)**\n```bash\ngt mail archive <merge-ready-message-id>\n```\nThe message ID was tracked when you processed inbox-check.\n\n**Step 5: Cleanup (only after Steps 2-4 confirmed)**\n```bash\ngit branch -d temp\ngit push origin --delete <polecat-branch>\n```\n\n**VERIFICATION GATE**: You CANNOT proceed to loop-check without:\n- [x] MERGED mail sent to witness\n- [x] MR bead closed\n- [x] MERGE_READY mail archived\n\nIf you skipped notifications or archiving, GO BACK AND DO THEM NOW.\n\nMain has moved. Any remaining branches need rebasing on new baseline.", "status": "open", "priority": 2, "issue_type": "task", "created_at": "2026-02-28T03:00:29Z", "updated_at": "2026-02-28T03:00:29Z", "dependencies": [{"issue_id": "gt-wisp-p9gv2", "depends_on_id": "gt-wisp-76pw5", "type": "parent-child", "created_at": "2026-02-27T19:00:29Z", "created_by": "refinery", "metadata": "{}"}, {"issue_id": "gt-wisp-p9gv2", "depends_on_id": "gt-wisp-zpis0", "type": "blocks", "created_at": "2026-02-27T19:00:29Z", "created_by": "refinery", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-76pw5"}
{"id": "gt-wisp-pc42n", "title": "Scan merge queue", "description": "Check the beads merge queue - this is the SOURCE OF TRUTH for pending merges.\n\n```bash\ngit fetch --prune origin\ngt mq list <rig>\n```\n\nThe beads MQ tracks all pending merge requests. Do NOT rely on `git branch -r | grep polecat`\nas branches may exist without MR beads, or MR beads may exist for already-merged work.\n\nIf queue empty, skip to context-check step.\n\nFor each MR in the queue, verify the branch still exists:\n```bash\ngit branch -r | grep <branch>\n```\n\nIf branch doesn't exist for a queued MR:\n- Close the MR bead: `bd close <mr-id> --reason \"Branch no longer exists\"`\n- Remove from processing queue\n\nTrack verified MR list for this cycle.", "status": "open", "priority": 2, "issue_type": "task", "created_at": "2026-02-28T03:19:24Z", "updated_at": "2026-02-28T03:19:24Z", "dependencies": [{"issue_id": "gt-wisp-pc42n", "depends_on_id": "gt-wisp-gt024", "type": "parent-child", "created_at": "2026-02-27T19:19:24Z", "created_by": "refinery", "metadata": "{}"}, {"issue_id": "gt-wisp-pc42n", "depends_on_id": "gt-wisp-y5s6q", "type": "blocks", "created_at": "2026-02-27T19:19:24Z", "created_by": "refinery", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-gt024"}
{"id": "gt-wisp-qmdxe", "title": "Check refinery mail", "description": "Check mail for MERGE_READY submissions, escalations, and messages.\n\n```bash\ngt mail inbox\n```\n\nFor each message:\n\n**MERGE_READY**:\nA polecat's work is ready for merge. Extract details and track for processing.\n\n```bash\n# Parse MERGE_READY message body:\n# Branch: <branch>\n# Issue: <issue-id>\n# Polecat: <polecat-name>\n# MR: <mr-bead-id>\n# Verified: clean git state, issue closed\n\n# Track in your merge queue for this patrol cycle:\n# - Branch name\n# - Issue ID\n# - Polecat name (REQUIRED for MERGED notification)\n# - MR bead ID (REQUIRED for closing after merge)\n```\n\n**IMPORTANT**: You MUST track the polecat name, MR bead ID, AND message ID - you will need them\nin merge-push step to send MERGED notification, close the MR bead, and archive the mail.\n\nMark as read. The work will be processed in queue-scan/process-branch.\n**Do NOT archive yet** - archive after merge/reject decision in merge-push step.\n\n**PATROL: Wake up**:\nWitness detected MRs waiting but refinery idle. Acknowledge and archive:\n```bash\ngt mail archive <message-id>\n```\n\n**HELP / Blocked**:\nAssess and respond. If you can't help, escalate to Mayor.\nArchive after handling:\n```bash\ngt mail archive <message-id>\n```\n\n**HANDOFF**:\nRead predecessor context. Check for in-flight merges.\nArchive after absorbing context:\n```bash\ngt mail archive <message-id>\n```\n\n**Hygiene principle**: Archive messages after they're fully processed.\nKeep only: pending MRs in queue. Inbox should be near-empty.", "status": "open", "priority": 2, "issue_type": "task", "created_at": "2026-02-28T03:19:06Z", "updated_at": "2026-02-28T03:19:06Z", "dependencies": [{"issue_id": "gt-wisp-qmdxe", "depends_on_id": "gt-wisp-lamkm", "type": "parent-child", "created_at": "2026-02-27T19:19:06Z", "created_by": "refinery", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-lamkm"}
{"id": "gt-wisp-qpp1y", "title": "Run tests and verify coverage", "description": "Verify your changes don't break anything and are properly tested.\n\n**1. Run the full test suite:**\n```bash\ngo test ./...               # For Go projects\n# Or appropriate command for your stack\n```\n\n**ALL TESTS MUST PASS.** Do not proceed with failures.\n\n**2. If tests fail:**\n- Read the failure output carefully\n- Determine if your change caused it:\n  - If yes: Fix it. Return to implement step if needed.\n  - If no (pre-existing): File a bead, but still must pass for your PR\n\n```bash\n# Check if failure exists on main:\ngit stash\ngit checkout main\ngo test ./...\ngit checkout -\ngit stash pop\n```\n\n**3. Verify test coverage for new code:**\n- New features should have tests\n- Bug fixes should have regression tests\n- If you added significant code without tests, add them now\n\n**4. Run any other quality checks:**\n```bash\n# Linting (if configured)\ngolangci-lint run ./...\n\n# Build check\ngo build ./...\n```\n\n**Exit criteria:** All tests pass, new code has appropriate test coverage.", "status": "closed", "priority": 2, "issue_type": "task", "created_at": "2026-02-28T02:42:25Z", "updated_at": "2026-02-28T02:51:13Z", "closed_at": "2026-02-28T02:51:13Z", "close_reason": "no-changes: review-only task, no code changes to test", "dependencies": [{"issue_id": "gt-wisp-qpp1y", "depends_on_id": "gt-wisp-a1aa1", "type": "blocks", "created_at": "2026-02-27T18:42:25Z", "created_by": "mayor", "metadata": "{}"}, {"issue_id": "gt-wisp-qpp1y", "depends_on_id": "gt-wisp-st5bf", "type": "parent-child", "created_at": "2026-02-27T18:42:25Z", "created_by": "mayor", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-st5bf"}
{"id": "gt-wisp-qtawo", "title": "Mechanical rebase", "description": "Pick next branch from queue. Attempt mechanical rebase on current main.\n\n**Step 1: Checkout and attempt rebase**\n```bash\ngit checkout -b temp origin/<polecat-branch>\ngit rebase origin/main\n```\n\n**Step 2: Check rebase result**\n\nThe rebase exits with:\n- Exit code 0: Success - proceed to run-tests\n- Exit code 1 (conflicts): Conflict detected - proceed to Step 3\n\nTo detect conflict state after rebase fails:\n```bash\n# Check if we're in a conflicted rebase state\nls .git/rebase-merge 2>/dev/null && echo \"CONFLICT_STATE\"\n```\n\n**Step 3: Handle conflicts (if any)**\n\nIf rebase SUCCEEDED (exit code 0):\n- Skip to run-tests step (continue normal merge flow)\n\nIf rebase FAILED with conflicts:\n\n1. **Abort the rebase** (DO NOT leave repo in conflicted state):\n```bash\ngit rebase --abort\n```\n\n2. **Record conflict metadata**:\n```bash\n# Capture main SHA for reference\nMAIN_SHA=$(git rev-parse origin/main)\nBRANCH_SHA=$(git rev-parse origin/<polecat-branch>)\n```\n\n3. **Create conflict-resolution task**:\n```bash\nbd create --type=task --priority=1 --title=\"Resolve merge conflicts: <original-issue-title>\" --description=\"## Conflict Resolution Required\n\nOriginal MR: <mr-bead-id>\nBranch: <polecat-branch>\nOriginal Issue: <issue-id>\nConflict with main at: ${MAIN_SHA}\nBranch SHA: ${BRANCH_SHA}\n\n## Instructions\n1. Clone/checkout the branch\n2. Rebase on current main: git rebase origin/main\n3. Resolve conflicts\n4. Force push: git push -f origin <branch>\n5. Close this task when done\n\nThe MR will be re-queued for processing after conflicts are resolved.\"\n```\n\n4. **Skip this MR** (do NOT delete branch or close MR bead):\n- Leave branch intact for conflict resolution\n- Leave MR bead open (will be re-processed after resolution)\n- Continue to loop-check for next branch\n\n**CRITICAL**: Never delete a branch that has conflicts. The branch contains\nthe original work and must be preserved for conflict resolution.\n\nTrack: rebase result (success/conflict), conflict task ID if created.", "status": "open", "priority": 2, "issue_type": "task", "created_at": "2026-02-28T03:00:29Z", "updated_at": "2026-02-28T03:00:29Z", "dependencies": [{"issue_id": "gt-wisp-qtawo", "depends_on_id": "gt-wisp-76pw5", "type": "parent-child", "created_at": "2026-02-27T19:00:29Z", "created_by": "refinery", "metadata": "{}"}, {"issue_id": "gt-wisp-qtawo", "depends_on_id": "gt-wisp-fdc5o", "type": "blocks", "created_at": "2026-02-27T19:00:29Z", "created_by": "refinery", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-76pw5"}
{"id": "gt-wisp-qxuap", "title": "Scan merge queue", "description": "Check the beads merge queue - this is the SOURCE OF TRUTH for pending merges.\n\n```bash\ngit fetch --prune origin\ngt mq list <rig>\n```\n\nThe beads MQ tracks all pending merge requests. Do NOT rely on `git branch -r | grep polecat`\nas branches may exist without MR beads, or MR beads may exist for already-merged work.\n\nIf queue empty, skip to context-check step.\n\nFor each MR in the queue, verify the branch still exists:\n```bash\ngit branch -r | grep <branch>\n```\n\nIf branch doesn't exist for a queued MR:\n- Close the MR bead: `bd close <mr-id> --reason \"Branch no longer exists\"`\n- Remove from processing queue\n\nTrack verified MR list for this cycle.", "status": "open", "priority": 2, "issue_type": "task", "created_at": "2026-02-28T03:00:55Z", "updated_at": "2026-02-28T03:00:55Z", "dependencies": [{"issue_id": "gt-wisp-qxuap", "depends_on_id": "gt-wisp-iqdi8", "type": "blocks", "created_at": "2026-02-27T19:00:55Z", "created_by": "refinery", "metadata": "{}"}, {"issue_id": "gt-wisp-qxuap", "depends_on_id": "gt-wisp-ybyhe", "type": "parent-child", "created_at": "2026-02-27T19:00:55Z", "created_by": "refinery", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-ybyhe"}
{"id": "gt-wisp-ripl6", "title": "mol-polecat-work", "description": "Full polecat work lifecycle from assignment through completion.\n\nThis molecule guides a polecat through a complete work assignment. Each step\nhas clear entry/exit criteria and specific commands to run. A polecat can\ncrash after any step and resume from the last completed step.\n\n## Polecat Contract (Self-Cleaning Model)\n\nYou are a self-cleaning worker. You:\n1. Receive work via your hook (pinned molecule + issue)\n2. Work through molecule steps using `bd ready` / `bd close <step>`\n3. Complete and self-clean via `gt done` (submit + nuke yourself)\n4. You are GONE - Refinery merges from MQ\n\n**Self-cleaning:** When you run `gt done`, you push your work, submit to MQ,\nnuke your sandbox, and exit. There is no idle state. Done means gone.\n\n**Important:** This formula defines the template. Your molecule already has step\nbeads created from it. Use `bd ready` to find them - do NOT read this file directly.\n\n**You do NOT:**\n- Push directly to main (Refinery merges from MQ)\n- Close your own issue (Refinery closes after merge)\n- Wait for merge (you're gone after `gt done`)\n- Handle rebase conflicts (Refinery spawns fresh polecats for that)\n\n## Variables\n\n| Variable | Source | Description |\n|----------|--------|-------------|\n| issue | hook_bead | The issue ID you're assigned to work on |\n\n## Failure Modes\n\n| Situation | Action |\n|-----------|--------|\n| Tests fail | Fix them. Do not proceed with failures. |\n| Blocked on external | Mail Witness for help, mark yourself stuck |\n| Context filling | Use gt handoff to cycle to fresh session |\n| Unsure what to do | Mail Witness, don't guess |", "status": "closed", "priority": 2, "issue_type": "epic", "created_at": "2026-02-28T03:46:57Z", "updated_at": "2026-02-28T03:51:11Z", "closed_at": "2026-02-28T03:51:11Z", "close_reason": "burned: force re-sling", "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-wisp-s2vyx", "title": "mol-refinery-patrol", "description": "Merge queue processor patrol loop.\n\nThe Refinery is the Engineer in the engine room. You process polecat branches, merging them to main one at a time with sequential rebasing.\n\n**The Scotty Test**: Before proceeding past any failure, ask yourself: \"Would Scotty walk past a warp core leak because it existed before his shift?\"\n\n## Merge Flow\n\nThe Refinery receives MERGE_READY mail from Witnesses when polecats complete work:\n\n```\nWitness                    Refinery                      Git\n   │                          │                           │\n   │ MERGE_READY              │                           │\n   │─────────────────────────>│                           │\n   │                          │                           │\n   │                    (verify branch)                   │\n   │                          │ fetch & rebase            │\n   │                          │──────────────────────────>│\n   │                          │                           │\n   │                    (run tests)                       │\n   │                          │                           │\n   │                    (if pass)                         │\n   │                          │ merge & push              │\n   │                          │──────────────────────────>│\n   │                          │                           │\n   │ MERGED                   │                           │\n   │<─────────────────────────│                           │\n   │                          │                           │\n```\n\nAfter successful merge, Refinery sends MERGED mail back to Witness so it can\ncomplete cleanup (nuke the polecat worktree).", "status": "hooked", "priority": 2, "issue_type": "epic", "assignee": "gastown/refinery", "created_at": "2026-02-28T03:49:11Z", "updated_at": "2026-02-28T03:49:12Z", "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-wisp-st5bf", "title": "mol-polecat-work", "description": "Full polecat work lifecycle from assignment through completion.\n\nThis molecule guides a polecat through a complete work assignment. Each step\nhas clear entry/exit criteria and specific commands to run. A polecat can\ncrash after any step and resume from the last completed step.\n\n## Polecat Contract (Self-Cleaning Model)\n\nYou are a self-cleaning worker. You:\n1. Receive work via your hook (pinned molecule + issue)\n2. Work through molecule steps using `bd ready` / `bd close <step>`\n3. Complete and self-clean via `gt done` (submit + nuke yourself)\n4. You are GONE - Refinery merges from MQ\n\n**Self-cleaning:** When you run `gt done`, you push your work, submit to MQ,\nnuke your sandbox, and exit. There is no idle state. Done means gone.\n\n**Important:** This formula defines the template. Your molecule already has step\nbeads created from it. Use `bd ready` to find them - do NOT read this file directly.\n\n**You do NOT:**\n- Push directly to main (Refinery merges from MQ)\n- Close your own issue (Refinery closes after merge)\n- Wait for merge (you're gone after `gt done`)\n- Handle rebase conflicts (Refinery spawns fresh polecats for that)\n\n## Variables\n\n| Variable | Source | Description |\n|----------|--------|-------------|\n| issue | hook_bead | The issue ID you're assigned to work on |\n\n## Failure Modes\n\n| Situation | Action |\n|-----------|--------|\n| Tests fail | Fix them. Do not proceed with failures. |\n| Blocked on external | Mail Witness for help, mark yourself stuck |\n| Context filling | Use gt handoff to cycle to fresh session |\n| Unsure what to do | Mail Witness, don't guess |", "status": "closed", "priority": 2, "issue_type": "epic", "created_at": "2026-02-28T02:42:25Z", "updated_at": "2026-02-28T02:54:22Z", "closed_at": "2026-02-28T02:54:22Z", "close_reason": "burned: polecat nuked", "ephemeral": true, "dependency_count": 0, "dependent_count": 1, "comment_count": 0}
{"id": "gt-wisp-tadjk", "title": "Merge: gt-ph6q", "description": "branch: polecat/valkyrie/gt-ph6q@mm5q7mxv\ntarget: main\nsource_issue: gt-ph6q\nrig: gastown\nworker: valkyrie\nagent_bead: gt-gastown-polecat-valkyrie\nretry_count: 0\nlast_conflict_sha: null\nconflict_task_id: null", "status": "closed", "priority": 2, "issue_type": "task", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-28T03:03:26Z", "created_by": "gastown/polecats/valkyrie", "updated_at": "2026-02-28T03:10:03Z", "closed_at": "2026-02-28T03:10:03Z", "close_reason": "rejected: Source issue gt-ph6q already closed - stale MR from recycled polecat", "labels": ["gt:merge-request"], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-wisp-tdwqh", "title": "Run test suite", "description": "Run the test suite.\n\n```bash\ngo test ./...\n```\n\nTrack results: pass count, fail count, specific failures.", "status": "open", "priority": 2, "issue_type": "task", "created_at": "2026-02-28T03:48:28Z", "updated_at": "2026-02-28T03:48:28Z", "dependencies": [{"issue_id": "gt-wisp-tdwqh", "depends_on_id": "gt-wisp-b9ae7", "type": "blocks", "created_at": "2026-02-27T19:48:28Z", "created_by": "refinery", "metadata": "{}"}, {"issue_id": "gt-wisp-tdwqh", "depends_on_id": "gt-wisp-fbkga", "type": "parent-child", "created_at": "2026-02-27T19:48:28Z", "created_by": "refinery", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-fbkga"}
{"id": "gt-wisp-tei0a", "title": "Handle test failures", "description": "**VERIFICATION GATE**: This step enforces the Beads Promise.\n\nIf tests PASSED: This step auto-completes. Proceed to merge.\n\nIf tests FAILED:\n1. Diagnose: Is this a branch regression or pre-existing on main?\n2. If branch caused it:\n   - Abort merge\n   - Notify polecat: \"Tests failing. Please fix and resubmit.\"\n   - Skip to loop-check\n3. If pre-existing on main:\n   - File a bead: bd create --type=bug --priority=1 --title=\"...\"\n   - FORBIDDEN: Writing code to fix test failures. You merge branches, you do not develop.\n   - Proceed with the merge if the failure is pre-existing (not caused by the branch).\n\n**GATE REQUIREMENT**: You CANNOT proceed to merge-push without:\n- Tests passing, OR\n- Bead filed for the pre-existing failure\n\nFORBIDDEN: Writing application code, exploring polecat implementations, or\nre-implementing fixes. You are a mechanical merge processor.\n\nThis is non-negotiable. Never disavow. Never \"note and proceed.\" ", "status": "open", "priority": 2, "issue_type": "task", "created_at": "2026-02-28T03:19:06Z", "updated_at": "2026-02-28T03:19:06Z", "dependencies": [{"issue_id": "gt-wisp-tei0a", "depends_on_id": "gt-wisp-lamkm", "type": "parent-child", "created_at": "2026-02-27T19:19:06Z", "created_by": "refinery", "metadata": "{}"}, {"issue_id": "gt-wisp-tei0a", "depends_on_id": "gt-wisp-mr2l3", "type": "blocks", "created_at": "2026-02-27T19:19:06Z", "created_by": "refinery", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-lamkm"}
{"id": "gt-wisp-tg5pr", "title": "Handle test failures", "description": "**VERIFICATION GATE**: This step enforces the Beads Promise.\n\nIf tests PASSED: This step auto-completes. Proceed to merge.\n\nIf tests FAILED:\n1. Diagnose: Is this a branch regression or pre-existing on main?\n2. If branch caused it:\n   - Abort merge\n   - Notify polecat: \"Tests failing. Please fix and resubmit.\"\n   - Skip to loop-check\n3. If pre-existing on main:\n   - File a bead: bd create --type=bug --priority=1 --title=\"...\"\n   - FORBIDDEN: Writing code to fix test failures. You merge branches, you do not develop.\n   - Proceed with the merge if the failure is pre-existing (not caused by the branch).\n\n**GATE REQUIREMENT**: You CANNOT proceed to merge-push without:\n- Tests passing, OR\n- Bead filed for the pre-existing failure\n\nFORBIDDEN: Writing application code, exploring polecat implementations, or\nre-implementing fixes. You are a mechanical merge processor.\n\nThis is non-negotiable. Never disavow. Never \"note and proceed.\" ", "status": "open", "priority": 2, "issue_type": "task", "created_at": "2026-02-28T03:48:28Z", "updated_at": "2026-02-28T03:48:28Z", "dependencies": [{"issue_id": "gt-wisp-tg5pr", "depends_on_id": "gt-wisp-fbkga", "type": "parent-child", "created_at": "2026-02-27T19:48:28Z", "created_by": "refinery", "metadata": "{}"}, {"issue_id": "gt-wisp-tg5pr", "depends_on_id": "gt-wisp-tdwqh", "type": "blocks", "created_at": "2026-02-27T19:48:28Z", "created_by": "refinery", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-fbkga"}
{"id": "gt-wisp-tigww", "title": "End-of-cycle inbox hygiene", "description": "Verify inbox hygiene before ending patrol cycle.\n\n**Step 1: Check inbox state**\n```bash\ngt mail inbox\n```\n\nInbox should contain ONLY:\n- Unprocessed MERGE_READY messages (will process next cycle)\n- Active work items\n\n**Step 2: Archive any stale messages**\n\nLook for messages that were processed but not archived:\n- PATROL: Wake up that was acknowledged → archive\n- HELP/Blocked that was handled → archive\n- MERGE_READY where merge completed but archive was missed → archive\n\n```bash\n# For each stale message found:\ngt mail archive <message-id>\n```\n\n**Step 3: Check for orphaned MR beads**\n\nLook for open MR beads with no corresponding branch:\n```bash\nbd list --type=merge-request --status=open\n```\n\nFor each open MR bead:\n1. Check if branch exists: `git ls-remote origin refs/heads/<branch>`\n2. If branch gone, verify work is on main: `git log origin/main --oneline | grep \"<source_issue>\"`\n3. If work on main → close MR with reason \"Merged (verified on main)\"\n4. If work NOT on main → investigate before closing:\n   - Check source_issue validity (should be gt-xxxxx, not branch name)\n   - Search reflog/dangling commits if possible\n   - If unverifiable, close with reason \"Unverifiable - no audit trail\"\n   - File bead if this indicates lost work\n\n**NEVER close an MR bead without verifying the work landed or is unrecoverable.**\n\n**Goal**: Inbox should have ≤3 active messages at end of cycle.\nKeep only: pending MRs in queue.", "status": "open", "priority": 2, "issue_type": "task", "created_at": "2026-02-28T03:17:24Z", "updated_at": "2026-02-28T03:17:24Z", "dependencies": [{"issue_id": "gt-wisp-tigww", "depends_on_id": "gt-wisp-dq4pf", "type": "blocks", "created_at": "2026-02-27T19:17:24Z", "created_by": "refinery", "metadata": "{}"}, {"issue_id": "gt-wisp-tigww", "depends_on_id": "gt-wisp-f7cqp", "type": "parent-child", "created_at": "2026-02-27T19:17:24Z", "created_by": "refinery", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-f7cqp"}
{"id": "gt-wisp-u0f9q", "title": "Burn and respawn or loop", "description": "End of patrol cycle decision.\n\n**Step 1: Estimate remaining context**\n\nAsk yourself:\n- Have I processed many branches this cycle?\n- Is the conversation getting long?\n- Am I starting to lose track of earlier context?\n\nRule of thumb: If you've done 3+ merges or processed significant cleanup work,\nit's time for a fresh session.\n\n**Step 2: Decision tree**\n\nIf queue non-empty AND context LOW:\n- Squash this wisp to digest\n- Spawn fresh patrol wisp\n- Return to inbox-check\n\nIf queue empty OR context HIGH OR good stopping point:\n- Squash wisp with summary digest\n- Use `gt handoff` for clean session transition:\n\n```bash\ngt handoff -s \"Patrol complete\" -m \"Merged X branches, Y tests passed.\nQueue: empty/N remaining\nNext: [any notes for successor]\"\n```\n\n**Why gt handoff?**\n- Sends handoff mail to yourself with context\n- Respawns with fresh Claude instance\n- SessionStart hook runs gt prime\n- Successor picks up from your hook\n\n**DO NOT just exit.** Always use `gt handoff` for proper lifecycle.", "status": "open", "priority": 2, "issue_type": "task", "created_at": "2026-02-28T03:18:21Z", "updated_at": "2026-02-28T03:18:21Z", "dependencies": [{"issue_id": "gt-wisp-u0f9q", "depends_on_id": "gt-wisp-6c0pn", "type": "parent-child", "created_at": "2026-02-27T19:18:20Z", "created_by": "refinery", "metadata": "{}"}, {"issue_id": "gt-wisp-u0f9q", "depends_on_id": "gt-wisp-hfyxg", "type": "blocks", "created_at": "2026-02-27T19:18:20Z", "created_by": "refinery", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-6c0pn"}
{"id": "gt-wisp-u6jwn", "title": "Mechanical rebase", "description": "Pick next branch from queue. Attempt mechanical rebase on current main.\n\n**Step 1: Checkout and attempt rebase**\n```bash\ngit checkout -b temp origin/<polecat-branch>\ngit rebase origin/main\n```\n\n**Step 2: Check rebase result**\n\nThe rebase exits with:\n- Exit code 0: Success - proceed to run-tests\n- Exit code 1 (conflicts): Conflict detected - proceed to Step 3\n\nTo detect conflict state after rebase fails:\n```bash\n# Check if we're in a conflicted rebase state\nls .git/rebase-merge 2>/dev/null && echo \"CONFLICT_STATE\"\n```\n\n**Step 3: Handle conflicts (if any)**\n\nIf rebase SUCCEEDED (exit code 0):\n- Skip to run-tests step (continue normal merge flow)\n\nIf rebase FAILED with conflicts:\n\n1. **Abort the rebase** (DO NOT leave repo in conflicted state):\n```bash\ngit rebase --abort\n```\n\n2. **Record conflict metadata**:\n```bash\n# Capture main SHA for reference\nMAIN_SHA=$(git rev-parse origin/main)\nBRANCH_SHA=$(git rev-parse origin/<polecat-branch>)\n```\n\n3. **Create conflict-resolution task**:\n```bash\nbd create --type=task --priority=1 --title=\"Resolve merge conflicts: <original-issue-title>\" --description=\"## Conflict Resolution Required\n\nOriginal MR: <mr-bead-id>\nBranch: <polecat-branch>\nOriginal Issue: <issue-id>\nConflict with main at: ${MAIN_SHA}\nBranch SHA: ${BRANCH_SHA}\n\n## Instructions\n1. Clone/checkout the branch\n2. Rebase on current main: git rebase origin/main\n3. Resolve conflicts\n4. Force push: git push -f origin <branch>\n5. Close this task when done\n\nThe MR will be re-queued for processing after conflicts are resolved.\"\n```\n\n4. **Skip this MR** (do NOT delete branch or close MR bead):\n- Leave branch intact for conflict resolution\n- Leave MR bead open (will be re-processed after resolution)\n- Continue to loop-check for next branch\n\n**CRITICAL**: Never delete a branch that has conflicts. The branch contains\nthe original work and must be preserved for conflict resolution.\n\nTrack: rebase result (success/conflict), conflict task ID if created.", "status": "open", "priority": 2, "issue_type": "task", "created_at": "2026-02-28T03:18:01Z", "updated_at": "2026-02-28T03:18:01Z", "dependencies": [{"issue_id": "gt-wisp-u6jwn", "depends_on_id": "gt-wisp-l6poh", "type": "blocks", "created_at": "2026-02-27T19:18:01Z", "created_by": "refinery", "metadata": "{}"}, {"issue_id": "gt-wisp-u6jwn", "depends_on_id": "gt-wisp-y6e5z", "type": "parent-child", "created_at": "2026-02-27T19:18:01Z", "created_by": "refinery", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-y6e5z"}
{"id": "gt-wisp-ukm4b", "title": "mol-polecat-work", "description": "Full polecat work lifecycle from assignment through completion.\n\nThis molecule guides a polecat through a complete work assignment. Each step\nhas clear entry/exit criteria and specific commands to run. A polecat can\ncrash after any step and resume from the last completed step.\n\n## Polecat Contract (Self-Cleaning Model)\n\nYou are a self-cleaning worker. You:\n1. Receive work via your hook (pinned molecule + issue)\n2. Work through molecule steps using `bd ready` / `bd close <step>`\n3. Complete and self-clean via `gt done` (submit + nuke yourself)\n4. You are GONE - Refinery merges from MQ\n\n**Self-cleaning:** When you run `gt done`, you push your work, submit to MQ,\nnuke your sandbox, and exit. There is no idle state. Done means gone.\n\n**Important:** This formula defines the template. Your molecule already has step\nbeads created from it. Use `bd ready` to find them - do NOT read this file directly.\n\n**You do NOT:**\n- Push directly to main (Refinery merges from MQ)\n- Close your own issue (Refinery closes after merge)\n- Wait for merge (you're gone after `gt done`)\n- Handle rebase conflicts (Refinery spawns fresh polecats for that)\n\n## Variables\n\n| Variable | Source | Description |\n|----------|--------|-------------|\n| issue | hook_bead | The issue ID you're assigned to work on |\n\n## Failure Modes\n\n| Situation | Action |\n|-----------|--------|\n| Tests fail | Fix them. Do not proceed with failures. |\n| Blocked on external | Mail Witness for help, mark yourself stuck |\n| Context filling | Use gt handoff to cycle to fresh session |\n| Unsure what to do | Mail Witness, don't guess |", "status": "closed", "priority": 2, "issue_type": "epic", "created_at": "2026-02-28T02:42:58Z", "updated_at": "2026-02-28T02:54:40Z", "closed_at": "2026-02-28T02:54:40Z", "close_reason": "burned: polecat nuked", "ephemeral": true, "dependency_count": 0, "dependent_count": 1, "comment_count": 0}
{"id": "gt-wisp-utz9w", "title": "Check refinery mail", "description": "Check mail for MERGE_READY submissions, escalations, and messages.\n\n```bash\ngt mail inbox\n```\n\nFor each message:\n\n**MERGE_READY**:\nA polecat's work is ready for merge. Extract details and track for processing.\n\n```bash\n# Parse MERGE_READY message body:\n# Branch: <branch>\n# Issue: <issue-id>\n# Polecat: <polecat-name>\n# MR: <mr-bead-id>\n# Verified: clean git state, issue closed\n\n# Track in your merge queue for this patrol cycle:\n# - Branch name\n# - Issue ID\n# - Polecat name (REQUIRED for MERGED notification)\n# - MR bead ID (REQUIRED for closing after merge)\n```\n\n**IMPORTANT**: You MUST track the polecat name, MR bead ID, AND message ID - you will need them\nin merge-push step to send MERGED notification, close the MR bead, and archive the mail.\n\nMark as read. The work will be processed in queue-scan/process-branch.\n**Do NOT archive yet** - archive after merge/reject decision in merge-push step.\n\n**PATROL: Wake up**:\nWitness detected MRs waiting but refinery idle. Acknowledge and archive:\n```bash\ngt mail archive <message-id>\n```\n\n**HELP / Blocked**:\nAssess and respond. If you can't help, escalate to Mayor.\nArchive after handling:\n```bash\ngt mail archive <message-id>\n```\n\n**HANDOFF**:\nRead predecessor context. Check for in-flight merges.\nArchive after absorbing context:\n```bash\ngt mail archive <message-id>\n```\n\n**Hygiene principle**: Archive messages after they're fully processed.\nKeep only: pending MRs in queue. Inbox should be near-empty.", "status": "open", "priority": 2, "issue_type": "task", "created_at": "2026-02-28T03:18:21Z", "updated_at": "2026-02-28T03:18:21Z", "dependencies": [{"issue_id": "gt-wisp-utz9w", "depends_on_id": "gt-wisp-6c0pn", "type": "parent-child", "created_at": "2026-02-27T19:18:20Z", "created_by": "refinery", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-6c0pn"}
{"id": "gt-wisp-uw5av", "title": "Clean up workspace", "description": "Ensure workspace is pristine before handoff.\n\n**IMPORTANT: Do NOT run `git push`. That is `gt done`'s job (next step).**\n**IMPORTANT: Do NOT discard implementation changes. They must already be committed.**\n\n**1. Check for untracked files:**\n```bash\ngit status --porcelain\n```\nShould be empty. If not:\n- Add to .gitignore if appropriate\n- Remove if temporary: `rm <file>`\n- Commit if needed: `git add <file> && git commit -m \"chore: add <file>\"`\n\n**2. Check stash:**\n```bash\ngit stash list\n```\nShould be empty. If not:\n- Pop and commit: `git stash pop && git add -A && git commit -m \"chore: unstash work (gt-08iv)\"`\n- Or drop if truly garbage: `git stash drop`\n\n**3. Verify clean state and commits:**\n```bash\ngit status                  # Must show \"working tree clean\"\ngit stash list              # Must be empty\ngit log origin/main..HEAD   # Your commits (should show your work)\n```\n\nIf `git log origin/main..HEAD` shows nothing but you DID make changes,\nsomething went wrong. Do NOT proceed — mail Witness for help.\n\n**Exit criteria:** Workspace clean, no cruft, all work committed. Do NOT push — `gt done` handles that.", "status": "closed", "priority": 2, "issue_type": "task", "created_at": "2026-02-28T02:42:25Z", "updated_at": "2026-02-28T02:51:28Z", "closed_at": "2026-02-28T02:51:28Z", "close_reason": "no-changes: workspace clean, review-only task", "dependencies": [{"issue_id": "gt-wisp-uw5av", "depends_on_id": "gt-wisp-8etvx", "type": "blocks", "created_at": "2026-02-27T18:42:25Z", "created_by": "mayor", "metadata": "{}"}, {"issue_id": "gt-wisp-uw5av", "depends_on_id": "gt-wisp-st5bf", "type": "parent-child", "created_at": "2026-02-27T18:42:25Z", "created_by": "mayor", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-st5bf"}
{"id": "gt-wisp-vr84c", "title": "Load context and verify assignment", "description": "Initialize your session and understand your assignment.\n\n**1. Prime your environment:**\n```bash\ngt prime                    # Load role context\nbd prime                    # Load beads context\n```\n\n**2. Check your hook:**\n```bash\ngt hook               # Shows your pinned molecule and hook_bead\n```\n\nThe hook_bead is your assigned issue. Read it carefully:\n```bash\nbd show gt-08iv           # Full issue details\n```\n\n**3. Check inbox for additional context:**\n```bash\ngt mail inbox\n# Read any HANDOFF or assignment messages\n```\n\n**4. Understand the requirements:**\n- What exactly needs to be done?\n- What files are likely involved?\n- Are there dependencies or blockers?\n- What does \"done\" look like?\n\n**5. Verify you can proceed:**\n- No unresolved blockers on the issue\n- You understand what to do\n- Required resources are available\n\nIf blocked or unclear, mail Witness immediately:\n```bash\ngt mail send <rig>/witness -s \"HELP: Unclear requirements\" -m \"Issue: gt-08iv\nQuestion: <what you need clarified>\"\n```\n\n**Exit criteria:** You understand the work and can begin implementation.", "status": "closed", "priority": 2, "issue_type": "task", "created_at": "2026-02-28T02:42:25Z", "updated_at": "2026-02-28T02:42:56Z", "closed_at": "2026-02-28T02:42:56Z", "close_reason": "Closed", "dependencies": [{"issue_id": "gt-wisp-vr84c", "depends_on_id": "gt-wisp-st5bf", "type": "parent-child", "created_at": "2026-02-27T18:42:25Z", "created_by": "mayor", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-st5bf"}
{"id": "gt-wisp-vyn0y", "title": "mol-polecat-work", "description": "Full polecat work lifecycle from assignment through completion.\n\nThis molecule guides a polecat through a complete work assignment. Each step\nhas clear entry/exit criteria and specific commands to run. A polecat can\ncrash after any step and resume from the last completed step.\n\n## Polecat Contract (Self-Cleaning Model)\n\nYou are a self-cleaning worker. You:\n1. Receive work via your hook (pinned molecule + issue)\n2. Work through molecule steps using `bd ready` / `bd close <step>`\n3. Complete and self-clean via `gt done` (submit + nuke yourself)\n4. You are GONE - Refinery merges from MQ\n\n**Self-cleaning:** When you run `gt done`, you push your work, submit to MQ,\nnuke your sandbox, and exit. There is no idle state. Done means gone.\n\n**Important:** This formula defines the template. Your molecule already has step\nbeads created from it. Use `bd ready` to find them - do NOT read this file directly.\n\n**You do NOT:**\n- Push directly to main (Refinery merges from MQ)\n- Close your own issue (Refinery closes after merge)\n- Wait for merge (you're gone after `gt done`)\n- Handle rebase conflicts (Refinery spawns fresh polecats for that)\n\n## Variables\n\n| Variable | Source | Description |\n|----------|--------|-------------|\n| issue | hook_bead | The issue ID you're assigned to work on |\n\n## Failure Modes\n\n| Situation | Action |\n|-----------|--------|\n| Tests fail | Fix them. Do not proceed with failures. |\n| Blocked on external | Mail Witness for help, mark yourself stuck |\n| Context filling | Use gt handoff to cycle to fresh session |\n| Unsure what to do | Mail Witness, don't guess |", "status": "closed", "priority": 2, "issue_type": "epic", "created_at": "2026-02-28T03:13:07Z", "updated_at": "2026-02-28T03:18:15Z", "closed_at": "2026-02-28T03:18:15Z", "close_reason": "burned: polecat nuked", "ephemeral": true, "dependency_count": 0, "dependent_count": 1, "comment_count": 0}
{"id": "gt-wisp-vz46k", "title": "Submit work and self-clean", "description": "Submit your work and clean up. You cease to exist after this step.\n\n**Self-Cleaning Model:**\nOnce you run `gt done`, you're gone. The command:\n1. Pushes your branch to origin\n2. Creates an MR bead in the merge queue\n3. Nukes your sandbox (worktree removal)\n4. Exits your session immediately\n\n**Run gt done:**\n```bash\ngt done\n```\n\nYou should see output like:\n```\n✓ Work submitted to merge queue\n  MR ID: gt-xxxxx\n  Source: polecat/<name>\n  Target: main\n  Issue: gt-08iv\n✓ Sandbox nuked\n✓ Session exiting\n```\n\n**What happens next (not your concern):**\n- Refinery processes your MR from the queue\n- Refinery rebases and merges to main\n- Refinery closes the issue\n- If conflicts: Refinery spawns a FRESH polecat to re-implement\n\nYou are NOT involved in any of that. You're gone. Done means gone.\n\n**Exit criteria:** Work submitted, sandbox nuked, session exited.", "status": "open", "priority": 2, "issue_type": "task", "created_at": "2026-02-28T02:42:25Z", "updated_at": "2026-02-28T02:42:25Z", "dependencies": [{"issue_id": "gt-wisp-vz46k", "depends_on_id": "gt-wisp-b4wwx", "type": "blocks", "created_at": "2026-02-27T18:42:25Z", "created_by": "mayor", "metadata": "{}"}, {"issue_id": "gt-wisp-vz46k", "depends_on_id": "gt-wisp-st5bf", "type": "parent-child", "created_at": "2026-02-27T18:42:25Z", "created_by": "mayor", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-st5bf"}
{"id": "gt-wisp-w13gi", "title": "Check refinery mail", "description": "Check mail for MERGE_READY submissions, escalations, and messages.\n\n```bash\ngt mail inbox\n```\n\nFor each message:\n\n**MERGE_READY**:\nA polecat's work is ready for merge. Extract details and track for processing.\n\n```bash\n# Parse MERGE_READY message body:\n# Branch: <branch>\n# Issue: <issue-id>\n# Polecat: <polecat-name>\n# MR: <mr-bead-id>\n# Verified: clean git state, issue closed\n\n# Track in your merge queue for this patrol cycle:\n# - Branch name\n# - Issue ID\n# - Polecat name (REQUIRED for MERGED notification)\n# - MR bead ID (REQUIRED for closing after merge)\n```\n\n**IMPORTANT**: You MUST track the polecat name, MR bead ID, AND message ID - you will need them\nin merge-push step to send MERGED notification, close the MR bead, and archive the mail.\n\nMark as read. The work will be processed in queue-scan/process-branch.\n**Do NOT archive yet** - archive after merge/reject decision in merge-push step.\n\n**PATROL: Wake up**:\nWitness detected MRs waiting but refinery idle. Acknowledge and archive:\n```bash\ngt mail archive <message-id>\n```\n\n**HELP / Blocked**:\nAssess and respond. If you can't help, escalate to Mayor.\nArchive after handling:\n```bash\ngt mail archive <message-id>\n```\n\n**HANDOFF**:\nRead predecessor context. Check for in-flight merges.\nArchive after absorbing context:\n```bash\ngt mail archive <message-id>\n```\n\n**Hygiene principle**: Archive messages after they're fully processed.\nKeep only: pending MRs in queue. Inbox should be near-empty.", "status": "open", "priority": 2, "issue_type": "task", "created_at": "2026-02-28T03:17:39Z", "updated_at": "2026-02-28T03:17:39Z", "dependencies": [{"issue_id": "gt-wisp-w13gi", "depends_on_id": "gt-wisp-edwlt", "type": "parent-child", "created_at": "2026-02-27T19:17:39Z", "created_by": "refinery", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-edwlt"}
{"id": "gt-wisp-w1649", "title": "Burn and respawn or loop", "description": "End of patrol cycle decision.\n\n**Step 1: Estimate remaining context**\n\nAsk yourself:\n- Have I processed many branches this cycle?\n- Is the conversation getting long?\n- Am I starting to lose track of earlier context?\n\nRule of thumb: If you've done 3+ merges or processed significant cleanup work,\nit's time for a fresh session.\n\n**Step 2: Decision tree**\n\nIf queue non-empty AND context LOW:\n- Squash this wisp to digest\n- Spawn fresh patrol wisp\n- Return to inbox-check\n\nIf queue empty OR context HIGH OR good stopping point:\n- Squash wisp with summary digest\n- Use `gt handoff` for clean session transition:\n\n```bash\ngt handoff -s \"Patrol complete\" -m \"Merged X branches, Y tests passed.\nQueue: empty/N remaining\nNext: [any notes for successor]\"\n```\n\n**Why gt handoff?**\n- Sends handoff mail to yourself with context\n- Respawns with fresh Claude instance\n- SessionStart hook runs gt prime\n- Successor picks up from your hook\n\n**DO NOT just exit.** Always use `gt handoff` for proper lifecycle.", "status": "open", "priority": 2, "issue_type": "task", "created_at": "2026-02-28T03:17:40Z", "updated_at": "2026-02-28T03:17:40Z", "dependencies": [{"issue_id": "gt-wisp-w1649", "depends_on_id": "gt-wisp-5x5ai", "type": "blocks", "created_at": "2026-02-27T19:17:39Z", "created_by": "refinery", "metadata": "{}"}, {"issue_id": "gt-wisp-w1649", "depends_on_id": "gt-wisp-edwlt", "type": "parent-child", "created_at": "2026-02-27T19:17:39Z", "created_by": "refinery", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-edwlt"}
{"id": "gt-wisp-w706w", "title": "End-of-cycle inbox hygiene", "description": "Verify inbox hygiene before ending patrol cycle.\n\n**Step 1: Check inbox state**\n```bash\ngt mail inbox\n```\n\nInbox should contain ONLY:\n- Unprocessed MERGE_READY messages (will process next cycle)\n- Active work items\n\n**Step 2: Archive any stale messages**\n\nLook for messages that were processed but not archived:\n- PATROL: Wake up that was acknowledged → archive\n- HELP/Blocked that was handled → archive\n- MERGE_READY where merge completed but archive was missed → archive\n\n```bash\n# For each stale message found:\ngt mail archive <message-id>\n```\n\n**Step 3: Check for orphaned MR beads**\n\nLook for open MR beads with no corresponding branch:\n```bash\nbd list --type=merge-request --status=open\n```\n\nFor each open MR bead:\n1. Check if branch exists: `git ls-remote origin refs/heads/<branch>`\n2. If branch gone, verify work is on main: `git log origin/main --oneline | grep \"<source_issue>\"`\n3. If work on main → close MR with reason \"Merged (verified on main)\"\n4. If work NOT on main → investigate before closing:\n   - Check source_issue validity (should be gt-xxxxx, not branch name)\n   - Search reflog/dangling commits if possible\n   - If unverifiable, close with reason \"Unverifiable - no audit trail\"\n   - File bead if this indicates lost work\n\n**NEVER close an MR bead without verifying the work landed or is unrecoverable.**\n\n**Goal**: Inbox should have ≤3 active messages at end of cycle.\nKeep only: pending MRs in queue.", "status": "open", "priority": 2, "issue_type": "task", "created_at": "2026-02-28T03:19:24Z", "updated_at": "2026-02-28T03:19:24Z", "dependencies": [{"issue_id": "gt-wisp-w706w", "depends_on_id": "gt-wisp-gt024", "type": "parent-child", "created_at": "2026-02-27T19:19:24Z", "created_by": "refinery", "metadata": "{}"}, {"issue_id": "gt-wisp-w706w", "depends_on_id": "gt-wisp-ykcjw", "type": "blocks", "created_at": "2026-02-27T19:19:24Z", "created_by": "refinery", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-gt024"}
{"id": "gt-wisp-welo5", "title": "End-of-cycle inbox hygiene", "description": "Verify inbox hygiene before ending patrol cycle.\n\n**Step 1: Check inbox state**\n```bash\ngt mail inbox\n```\n\nInbox should contain ONLY:\n- Unprocessed MERGE_READY messages (will process next cycle)\n- Active work items\n\n**Step 2: Archive any stale messages**\n\nLook for messages that were processed but not archived:\n- PATROL: Wake up that was acknowledged → archive\n- HELP/Blocked that was handled → archive\n- MERGE_READY where merge completed but archive was missed → archive\n\n```bash\n# For each stale message found:\ngt mail archive <message-id>\n```\n\n**Step 3: Check for orphaned MR beads**\n\nLook for open MR beads with no corresponding branch:\n```bash\nbd list --type=merge-request --status=open\n```\n\nFor each open MR bead:\n1. Check if branch exists: `git ls-remote origin refs/heads/<branch>`\n2. If branch gone, verify work is on main: `git log origin/main --oneline | grep \"<source_issue>\"`\n3. If work on main → close MR with reason \"Merged (verified on main)\"\n4. If work NOT on main → investigate before closing:\n   - Check source_issue validity (should be gt-xxxxx, not branch name)\n   - Search reflog/dangling commits if possible\n   - If unverifiable, close with reason \"Unverifiable - no audit trail\"\n   - File bead if this indicates lost work\n\n**NEVER close an MR bead without verifying the work landed or is unrecoverable.**\n\n**Goal**: Inbox should have ≤3 active messages at end of cycle.\nKeep only: pending MRs in queue.", "status": "open", "priority": 2, "issue_type": "task", "created_at": "2026-02-28T03:49:11Z", "updated_at": "2026-02-28T03:49:11Z", "dependencies": [{"issue_id": "gt-wisp-welo5", "depends_on_id": "gt-wisp-0z7eh", "type": "blocks", "created_at": "2026-02-27T19:49:11Z", "created_by": "refinery", "metadata": "{}"}, {"issue_id": "gt-wisp-welo5", "depends_on_id": "gt-wisp-s2vyx", "type": "parent-child", "created_at": "2026-02-27T19:49:11Z", "created_by": "refinery", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-s2vyx"}
{"id": "gt-wisp-wps27", "title": "Check for more work", "description": "More branches to process?\n\n**Entry paths:**\n- Normal: After successful merge-push\n- Conflict-skip: After process-branch created conflict-resolution task\n\nIf yes: Return to process-branch with next branch.\nIf no: Continue to generate-summary.\n\n**Track for this cycle:**\n- branches_merged: count and names of successfully merged branches\n- branches_conflict: count and names of branches skipped due to conflicts\n- conflict_tasks: IDs of conflict-resolution tasks created\n\nThis tracking feeds into generate-summary for the patrol digest.", "status": "open", "priority": 2, "issue_type": "task", "created_at": "2026-02-28T03:00:29Z", "updated_at": "2026-02-28T03:00:29Z", "dependencies": [{"issue_id": "gt-wisp-wps27", "depends_on_id": "gt-wisp-76pw5", "type": "parent-child", "created_at": "2026-02-27T19:00:29Z", "created_by": "refinery", "metadata": "{}"}, {"issue_id": "gt-wisp-wps27", "depends_on_id": "gt-wisp-p9gv2", "type": "blocks", "created_at": "2026-02-27T19:00:29Z", "created_by": "refinery", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-76pw5"}
{"id": "gt-wisp-wypf3", "title": "Merge and push to main", "description": "Merge to main and push. CRITICAL: Notifications come IMMEDIATELY after push.\n\n**Step 1: Merge and Push**\n```bash\ngit checkout main\ngit merge --ff-only temp\ngit push origin main\n```\n\n⚠️ **STOP HERE - DO NOT PROCEED UNTIL STEPS 2-3 COMPLETE**\n\n**Step 2: Send MERGED Notification (REQUIRED - DO THIS IMMEDIATELY)**\n\nRIGHT NOW, before any cleanup, send MERGED mail to Witness:\n\n```bash\ngt mail send <rig>/witness -s \"MERGED <polecat-name>\" -m \"Branch: <branch>\nIssue: <issue-id>\nMerged-At: $(date -u +%Y-%m-%dT%H:%M:%SZ)\"\n```\n\nThis signals the Witness to nuke the polecat worktree. WITHOUT THIS NOTIFICATION,\nPOLECAT WORKTREES ACCUMULATE INDEFINITELY AND THE LIFECYCLE BREAKS.\n\n**Step 3: Close MR Bead (REQUIRED - DO THIS IMMEDIATELY)**\n\n⚠️ **VERIFICATION BEFORE CLOSING**: Confirm the work is actually on main:\n```bash\n# Get the commit message/issue from the branch\ngit log origin/main --oneline | grep \"<issue-id>\"\n# OR verify the commit SHA is on main:\ngit branch --contains <commit-sha> | grep main\n```\n\nIf work is NOT on main, DO NOT close the MR bead. Investigate first.\n\n```bash\nbd close <mr-bead-id> --reason \"Merged to main at $(git rev-parse --short HEAD)\"\n```\n\nThe MR bead ID was in the MERGE_READY message or find via:\n```bash\nbd list --type=merge-request --status=open | grep <polecat-name>\n```\n\n**VALIDATION**: The MR bead's source_issue should be a valid bead ID (gt-xxxxx),\nnot a branch name. If source_issue contains a branch name, flag for investigation.\n\n**Step 4: Archive the MERGE_READY mail (REQUIRED)**\n```bash\ngt mail archive <merge-ready-message-id>\n```\nThe message ID was tracked when you processed inbox-check.\n\n**Step 5: Cleanup (only after Steps 2-4 confirmed)**\n```bash\ngit branch -d temp\ngit push origin --delete <polecat-branch>\n```\n\n**VERIFICATION GATE**: You CANNOT proceed to loop-check without:\n- [x] MERGED mail sent to witness\n- [x] MR bead closed\n- [x] MERGE_READY mail archived\n\nIf you skipped notifications or archiving, GO BACK AND DO THEM NOW.\n\nMain has moved. Any remaining branches need rebasing on new baseline.", "status": "open", "priority": 2, "issue_type": "task", "created_at": "2026-02-28T03:18:49Z", "updated_at": "2026-02-28T03:18:49Z", "dependencies": [{"issue_id": "gt-wisp-wypf3", "depends_on_id": "gt-wisp-999zp", "type": "blocks", "created_at": "2026-02-27T19:18:49Z", "created_by": "refinery", "metadata": "{}"}, {"issue_id": "gt-wisp-wypf3", "depends_on_id": "gt-wisp-iwq01", "type": "parent-child", "created_at": "2026-02-27T19:18:49Z", "created_by": "refinery", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-iwq01"}
{"id": "gt-wisp-xa548", "title": "Mechanical rebase", "description": "Pick next branch from queue. Attempt mechanical rebase on current main.\n\n**Step 1: Checkout and attempt rebase**\n```bash\ngit checkout -b temp origin/<polecat-branch>\ngit rebase origin/main\n```\n\n**Step 2: Check rebase result**\n\nThe rebase exits with:\n- Exit code 0: Success - proceed to run-tests\n- Exit code 1 (conflicts): Conflict detected - proceed to Step 3\n\nTo detect conflict state after rebase fails:\n```bash\n# Check if we're in a conflicted rebase state\nls .git/rebase-merge 2>/dev/null && echo \"CONFLICT_STATE\"\n```\n\n**Step 3: Handle conflicts (if any)**\n\nIf rebase SUCCEEDED (exit code 0):\n- Skip to run-tests step (continue normal merge flow)\n\nIf rebase FAILED with conflicts:\n\n1. **Abort the rebase** (DO NOT leave repo in conflicted state):\n```bash\ngit rebase --abort\n```\n\n2. **Record conflict metadata**:\n```bash\n# Capture main SHA for reference\nMAIN_SHA=$(git rev-parse origin/main)\nBRANCH_SHA=$(git rev-parse origin/<polecat-branch>)\n```\n\n3. **Create conflict-resolution task**:\n```bash\nbd create --type=task --priority=1 --title=\"Resolve merge conflicts: <original-issue-title>\" --description=\"## Conflict Resolution Required\n\nOriginal MR: <mr-bead-id>\nBranch: <polecat-branch>\nOriginal Issue: <issue-id>\nConflict with main at: ${MAIN_SHA}\nBranch SHA: ${BRANCH_SHA}\n\n## Instructions\n1. Clone/checkout the branch\n2. Rebase on current main: git rebase origin/main\n3. Resolve conflicts\n4. Force push: git push -f origin <branch>\n5. Close this task when done\n\nThe MR will be re-queued for processing after conflicts are resolved.\"\n```\n\n4. **Skip this MR** (do NOT delete branch or close MR bead):\n- Leave branch intact for conflict resolution\n- Leave MR bead open (will be re-processed after resolution)\n- Continue to loop-check for next branch\n\n**CRITICAL**: Never delete a branch that has conflicts. The branch contains\nthe original work and must be preserved for conflict resolution.\n\nTrack: rebase result (success/conflict), conflict task ID if created.", "status": "open", "priority": 2, "issue_type": "task", "created_at": "2026-02-28T03:49:11Z", "updated_at": "2026-02-28T03:49:11Z", "dependencies": [{"issue_id": "gt-wisp-xa548", "depends_on_id": "gt-wisp-s2vyx", "type": "parent-child", "created_at": "2026-02-27T19:49:11Z", "created_by": "refinery", "metadata": "{}"}, {"issue_id": "gt-wisp-xa548", "depends_on_id": "gt-wisp-xxo0n", "type": "blocks", "created_at": "2026-02-27T19:49:11Z", "created_by": "refinery", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-s2vyx"}
{"id": "gt-wisp-xwrg4", "title": "Merge: gt-idrl", "description": "branch: polecat/nux/gt-idrl@mm5r4qr6\ntarget: main\nsource_issue: gt-idrl\nrig: gastown\nworker: nux\nagent_bead: gt-gastown-polecat-nux\nretry_count: 0\nlast_conflict_sha: null\nconflict_task_id: null", "status": "closed", "priority": 1, "issue_type": "task", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-28T03:25:39Z", "created_by": "gastown/polecats/nux", "updated_at": "2026-02-28T03:46:02Z", "closed_at": "2026-02-28T03:46:02Z", "close_reason": "merged", "labels": ["gt:merge-request"], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-wisp-xxo0n", "title": "Scan merge queue", "description": "Check the beads merge queue - this is the SOURCE OF TRUTH for pending merges.\n\n```bash\ngit fetch --prune origin\ngt mq list <rig>\n```\n\nThe beads MQ tracks all pending merge requests. Do NOT rely on `git branch -r | grep polecat`\nas branches may exist without MR beads, or MR beads may exist for already-merged work.\n\nIf queue empty, skip to context-check step.\n\nFor each MR in the queue, verify the branch still exists:\n```bash\ngit branch -r | grep <branch>\n```\n\nIf branch doesn't exist for a queued MR:\n- Close the MR bead: `bd close <mr-id> --reason \"Branch no longer exists\"`\n- Remove from processing queue\n\nTrack verified MR list for this cycle.", "status": "open", "priority": 2, "issue_type": "task", "created_at": "2026-02-28T03:49:11Z", "updated_at": "2026-02-28T03:49:11Z", "dependencies": [{"issue_id": "gt-wisp-xxo0n", "depends_on_id": "gt-wisp-54l1v", "type": "blocks", "created_at": "2026-02-27T19:49:11Z", "created_by": "refinery", "metadata": "{}"}, {"issue_id": "gt-wisp-xxo0n", "depends_on_id": "gt-wisp-s2vyx", "type": "parent-child", "created_at": "2026-02-27T19:49:11Z", "created_by": "refinery", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-s2vyx"}
{"id": "gt-wisp-y15xi", "title": "Check for more work", "description": "More branches to process?\n\n**Entry paths:**\n- Normal: After successful merge-push\n- Conflict-skip: After process-branch created conflict-resolution task\n\nIf yes: Return to process-branch with next branch.\nIf no: Continue to generate-summary.\n\n**Track for this cycle:**\n- branches_merged: count and names of successfully merged branches\n- branches_conflict: count and names of branches skipped due to conflicts\n- conflict_tasks: IDs of conflict-resolution tasks created\n\nThis tracking feeds into generate-summary for the patrol digest.", "status": "open", "priority": 2, "issue_type": "task", "created_at": "2026-02-28T03:18:49Z", "updated_at": "2026-02-28T03:18:49Z", "dependencies": [{"issue_id": "gt-wisp-y15xi", "depends_on_id": "gt-wisp-iwq01", "type": "parent-child", "created_at": "2026-02-27T19:18:49Z", "created_by": "refinery", "metadata": "{}"}, {"issue_id": "gt-wisp-y15xi", "depends_on_id": "gt-wisp-wypf3", "type": "blocks", "created_at": "2026-02-27T19:18:49Z", "created_by": "refinery", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-iwq01"}
{"id": "gt-wisp-y353w", "title": "Handle test failures", "description": "**VERIFICATION GATE**: This step enforces the Beads Promise.\n\nIf tests PASSED: This step auto-completes. Proceed to merge.\n\nIf tests FAILED:\n1. Diagnose: Is this a branch regression or pre-existing on main?\n2. If branch caused it:\n   - Abort merge\n   - Notify polecat: \"Tests failing. Please fix and resubmit.\"\n   - Skip to loop-check\n3. If pre-existing on main:\n   - File a bead: bd create --type=bug --priority=1 --title=\"...\"\n   - FORBIDDEN: Writing code to fix test failures. You merge branches, you do not develop.\n   - Proceed with the merge if the failure is pre-existing (not caused by the branch).\n\n**GATE REQUIREMENT**: You CANNOT proceed to merge-push without:\n- Tests passing, OR\n- Bead filed for the pre-existing failure\n\nFORBIDDEN: Writing application code, exploring polecat implementations, or\nre-implementing fixes. You are a mechanical merge processor.\n\nThis is non-negotiable. Never disavow. Never \"note and proceed.\" ", "status": "open", "priority": 2, "issue_type": "task", "created_at": "2026-02-28T03:18:21Z", "updated_at": "2026-02-28T03:18:21Z", "dependencies": [{"issue_id": "gt-wisp-y353w", "depends_on_id": "gt-wisp-6c0pn", "type": "parent-child", "created_at": "2026-02-27T19:18:20Z", "created_by": "refinery", "metadata": "{}"}, {"issue_id": "gt-wisp-y353w", "depends_on_id": "gt-wisp-mcikm", "type": "blocks", "created_at": "2026-02-27T19:18:20Z", "created_by": "refinery", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-6c0pn"}
{"id": "gt-wisp-y5s6q", "title": "Check refinery mail", "description": "Check mail for MERGE_READY submissions, escalations, and messages.\n\n```bash\ngt mail inbox\n```\n\nFor each message:\n\n**MERGE_READY**:\nA polecat's work is ready for merge. Extract details and track for processing.\n\n```bash\n# Parse MERGE_READY message body:\n# Branch: <branch>\n# Issue: <issue-id>\n# Polecat: <polecat-name>\n# MR: <mr-bead-id>\n# Verified: clean git state, issue closed\n\n# Track in your merge queue for this patrol cycle:\n# - Branch name\n# - Issue ID\n# - Polecat name (REQUIRED for MERGED notification)\n# - MR bead ID (REQUIRED for closing after merge)\n```\n\n**IMPORTANT**: You MUST track the polecat name, MR bead ID, AND message ID - you will need them\nin merge-push step to send MERGED notification, close the MR bead, and archive the mail.\n\nMark as read. The work will be processed in queue-scan/process-branch.\n**Do NOT archive yet** - archive after merge/reject decision in merge-push step.\n\n**PATROL: Wake up**:\nWitness detected MRs waiting but refinery idle. Acknowledge and archive:\n```bash\ngt mail archive <message-id>\n```\n\n**HELP / Blocked**:\nAssess and respond. If you can't help, escalate to Mayor.\nArchive after handling:\n```bash\ngt mail archive <message-id>\n```\n\n**HANDOFF**:\nRead predecessor context. Check for in-flight merges.\nArchive after absorbing context:\n```bash\ngt mail archive <message-id>\n```\n\n**Hygiene principle**: Archive messages after they're fully processed.\nKeep only: pending MRs in queue. Inbox should be near-empty.", "status": "open", "priority": 2, "issue_type": "task", "created_at": "2026-02-28T03:19:24Z", "updated_at": "2026-02-28T03:19:24Z", "dependencies": [{"issue_id": "gt-wisp-y5s6q", "depends_on_id": "gt-wisp-gt024", "type": "parent-child", "created_at": "2026-02-27T19:19:24Z", "created_by": "refinery", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-gt024"}
{"id": "gt-wisp-y6e5z", "title": "mol-refinery-patrol", "description": "Patrol report: Cycle 5: Queue empty, inbox clear. Session healthy (3MB RSS). Polecats active: furiosa/gt-l7uq, nux/gt-0wkk, slit/gt-yxx0. Continuing patrol.", "status": "closed", "priority": 2, "issue_type": "epic", "assignee": "gastown/refinery", "created_at": "2026-02-28T03:18:01Z", "updated_at": "2026-02-28T03:18:20Z", "closed_at": "2026-02-28T03:18:20Z", "close_reason": "patrol cycle complete: Cycle 5: Queue empty, inbox clear. Session healthy (3MB RSS). Polecats active: furiosa/gt-l7uq, nux/gt-0wkk, slit/gt-yxx0. Continuing patrol.", "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-wisp-ybyhe", "title": "mol-refinery-patrol", "description": "Patrol report: Cycle 2: Merged rictus/gt-0wkk (docs) to main. Cleaned 3 stale MRs from recycled polecats. Filed 2 pre-existing test failures (gt-94i9, gt-eo8d). Queue empty, 3 polecats still working.", "status": "closed", "priority": 2, "issue_type": "epic", "assignee": "gastown/refinery", "created_at": "2026-02-28T03:00:55Z", "updated_at": "2026-02-28T03:17:24Z", "closed_at": "2026-02-28T03:17:24Z", "close_reason": "patrol cycle complete: Cycle 2: Merged rictus/gt-0wkk (docs) to main. Cleaned 3 stale MRs from recycled polecats. Filed 2 pre-existing test failures (gt-94i9, gt-eo8d). Queue empty, 3 polecats still working.", "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-wisp-yctcs", "title": "Merge and push to main", "description": "Merge to main and push. CRITICAL: Notifications come IMMEDIATELY after push.\n\n**Step 1: Merge and Push**\n```bash\ngit checkout main\ngit merge --ff-only temp\ngit push origin main\n```\n\n⚠️ **STOP HERE - DO NOT PROCEED UNTIL STEPS 2-3 COMPLETE**\n\n**Step 2: Send MERGED Notification (REQUIRED - DO THIS IMMEDIATELY)**\n\nRIGHT NOW, before any cleanup, send MERGED mail to Witness:\n\n```bash\ngt mail send <rig>/witness -s \"MERGED <polecat-name>\" -m \"Branch: <branch>\nIssue: <issue-id>\nMerged-At: $(date -u +%Y-%m-%dT%H:%M:%SZ)\"\n```\n\nThis signals the Witness to nuke the polecat worktree. WITHOUT THIS NOTIFICATION,\nPOLECAT WORKTREES ACCUMULATE INDEFINITELY AND THE LIFECYCLE BREAKS.\n\n**Step 3: Close MR Bead (REQUIRED - DO THIS IMMEDIATELY)**\n\n⚠️ **VERIFICATION BEFORE CLOSING**: Confirm the work is actually on main:\n```bash\n# Get the commit message/issue from the branch\ngit log origin/main --oneline | grep \"<issue-id>\"\n# OR verify the commit SHA is on main:\ngit branch --contains <commit-sha> | grep main\n```\n\nIf work is NOT on main, DO NOT close the MR bead. Investigate first.\n\n```bash\nbd close <mr-bead-id> --reason \"Merged to main at $(git rev-parse --short HEAD)\"\n```\n\nThe MR bead ID was in the MERGE_READY message or find via:\n```bash\nbd list --type=merge-request --status=open | grep <polecat-name>\n```\n\n**VALIDATION**: The MR bead's source_issue should be a valid bead ID (gt-xxxxx),\nnot a branch name. If source_issue contains a branch name, flag for investigation.\n\n**Step 4: Archive the MERGE_READY mail (REQUIRED)**\n```bash\ngt mail archive <merge-ready-message-id>\n```\nThe message ID was tracked when you processed inbox-check.\n\n**Step 5: Cleanup (only after Steps 2-4 confirmed)**\n```bash\ngit branch -d temp\ngit push origin --delete <polecat-branch>\n```\n\n**VERIFICATION GATE**: You CANNOT proceed to loop-check without:\n- [x] MERGED mail sent to witness\n- [x] MR bead closed\n- [x] MERGE_READY mail archived\n\nIf you skipped notifications or archiving, GO BACK AND DO THEM NOW.\n\nMain has moved. Any remaining branches need rebasing on new baseline.", "status": "open", "priority": 2, "issue_type": "task", "created_at": "2026-02-28T03:19:06Z", "updated_at": "2026-02-28T03:19:06Z", "dependencies": [{"issue_id": "gt-wisp-yctcs", "depends_on_id": "gt-wisp-lamkm", "type": "parent-child", "created_at": "2026-02-27T19:19:06Z", "created_by": "refinery", "metadata": "{}"}, {"issue_id": "gt-wisp-yctcs", "depends_on_id": "gt-wisp-tei0a", "type": "blocks", "created_at": "2026-02-27T19:19:06Z", "created_by": "refinery", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-lamkm"}
{"id": "gt-wisp-ykcjw", "title": "Check own context limit", "description": "Check own context usage.\n\nIf context is HIGH (>80%):\n- Write handoff summary\n- Prepare for burn/respawn\n\nIf context is LOW:\n- Can continue processing", "status": "open", "priority": 2, "issue_type": "task", "created_at": "2026-02-28T03:19:24Z", "updated_at": "2026-02-28T03:19:24Z", "dependencies": [{"issue_id": "gt-wisp-ykcjw", "depends_on_id": "gt-wisp-9gj9e", "type": "blocks", "created_at": "2026-02-27T19:19:24Z", "created_by": "refinery", "metadata": "{}"}, {"issue_id": "gt-wisp-ykcjw", "depends_on_id": "gt-wisp-gt024", "type": "parent-child", "created_at": "2026-02-27T19:19:24Z", "created_by": "refinery", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-gt024"}
{"id": "gt-wisp-yp1j3", "title": "Implement the solution", "description": "Do the actual implementation work.\n\n**Working principles:**\n- Follow existing codebase conventions\n- Make atomic, focused commits\n- Keep changes scoped to the assigned issue\n- Don't gold-plate or scope-creep\n\n**Commit frequently:**\n```bash\n# After each logical unit of work:\ngit add <files>\ngit commit -m \"<type>: <description> (gt-08iv)\"\n```\n\nCommit types: feat, fix, refactor, test, docs, chore\n\n**Discovered work:**\nIf you find bugs or improvements outside your scope:\n```bash\nbd create --title \"Found: <description>\" --type bug --priority 2\n# Note the ID, continue with your work\n```\n\nDo NOT fix unrelated issues in this branch.\n\n**If stuck:**\nDon't spin for more than 15 minutes. Mail Witness:\n```bash\ngt mail send <rig>/witness -s \"HELP: Stuck on implementation\" -m \"Issue: gt-08iv\nTrying to: <what you're attempting>\nProblem: <what's blocking you>\nTried: <what you've attempted>\"\n```\n\n**Exit criteria:** Implementation complete, all changes committed.", "status": "closed", "priority": 2, "issue_type": "task", "created_at": "2026-02-28T02:42:25Z", "updated_at": "2026-02-28T02:51:05Z", "closed_at": "2026-02-28T02:51:05Z", "close_reason": "Closed", "dependencies": [{"issue_id": "gt-wisp-yp1j3", "depends_on_id": "gt-wisp-n4kzy", "type": "blocks", "created_at": "2026-02-27T18:42:25Z", "created_by": "mayor", "metadata": "{}"}, {"issue_id": "gt-wisp-yp1j3", "depends_on_id": "gt-wisp-st5bf", "type": "parent-child", "created_at": "2026-02-27T18:42:25Z", "created_by": "mayor", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-st5bf"}
{"id": "gt-wisp-yuozm", "title": "Generate handoff summary", "description": "Summarize this patrol cycle.\n\n**VERIFICATION**: Before generating summary, confirm for each merged branch:\n- [ ] MERGED mail was sent to witness\n- [ ] MR bead was closed\n- [ ] MERGE_READY mail archived\n\nIf any notifications or archiving were missed, do them now!\n\nInclude in summary:\n- Branches merged (count, names)\n- MERGED mails sent (count - should match branches merged)\n- MR beads closed (count - should match branches merged)\n- MERGE_READY mails archived (count - should match branches merged)\n- Test results (pass/fail)\n- Branches with conflicts (count, names)\n- Conflict-resolution tasks created (IDs)\n- Issues filed (if any)\n- Any escalations sent\n\n**Conflict tracking is important** for monitoring MQ health. If many branches\nconflict, it may indicate main is moving too fast or branches are too stale.\n\nThis becomes the digest when the patrol is squashed.", "status": "open", "priority": 2, "issue_type": "task", "created_at": "2026-02-28T03:19:06Z", "updated_at": "2026-02-28T03:19:06Z", "dependencies": [{"issue_id": "gt-wisp-yuozm", "depends_on_id": "gt-wisp-0w110", "type": "blocks", "created_at": "2026-02-27T19:19:06Z", "created_by": "refinery", "metadata": "{}"}, {"issue_id": "gt-wisp-yuozm", "depends_on_id": "gt-wisp-lamkm", "type": "parent-child", "created_at": "2026-02-27T19:19:06Z", "created_by": "refinery", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-lamkm"}
{"id": "gt-wisp-z0u3b", "title": "Run test suite", "description": "Run the test suite.\n\n```bash\ngo test ./...\n```\n\nTrack results: pass count, fail count, specific failures.", "status": "open", "priority": 2, "issue_type": "task", "created_at": "2026-02-28T03:17:40Z", "updated_at": "2026-02-28T03:17:40Z", "dependencies": [{"issue_id": "gt-wisp-z0u3b", "depends_on_id": "gt-wisp-edwlt", "type": "parent-child", "created_at": "2026-02-27T19:17:39Z", "created_by": "refinery", "metadata": "{}"}, {"issue_id": "gt-wisp-z0u3b", "depends_on_id": "gt-wisp-m11oz", "type": "blocks", "created_at": "2026-02-27T19:17:39Z", "created_by": "refinery", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-edwlt"}
{"id": "gt-wisp-zclv6", "title": "Check for more work", "description": "More branches to process?\n\n**Entry paths:**\n- Normal: After successful merge-push\n- Conflict-skip: After process-branch created conflict-resolution task\n\nIf yes: Return to process-branch with next branch.\nIf no: Continue to generate-summary.\n\n**Track for this cycle:**\n- branches_merged: count and names of successfully merged branches\n- branches_conflict: count and names of branches skipped due to conflicts\n- conflict_tasks: IDs of conflict-resolution tasks created\n\nThis tracking feeds into generate-summary for the patrol digest.", "status": "open", "priority": 2, "issue_type": "task", "created_at": "2026-02-28T03:00:55Z", "updated_at": "2026-02-28T03:00:55Z", "dependencies": [{"issue_id": "gt-wisp-zclv6", "depends_on_id": "gt-wisp-kqtfo", "type": "blocks", "created_at": "2026-02-27T19:00:55Z", "created_by": "refinery", "metadata": "{}"}, {"issue_id": "gt-wisp-zclv6", "depends_on_id": "gt-wisp-ybyhe", "type": "parent-child", "created_at": "2026-02-27T19:00:55Z", "created_by": "refinery", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-ybyhe"}
{"id": "gt-wisp-zd8mo", "title": "Merge: gt-l7uq", "description": "branch: polecat/cheedo/gt-l7uq@mm5q71hi\ntarget: main\nsource_issue: gt-l7uq\nrig: gastown\nworker: cheedo\nagent_bead: gt-gastown-polecat-cheedo\nretry_count: 0\nlast_conflict_sha: null\nconflict_task_id: null", "status": "closed", "priority": 1, "issue_type": "task", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-28T03:03:00Z", "created_by": "gastown/polecats/cheedo", "updated_at": "2026-02-28T03:10:11Z", "closed_at": "2026-02-28T03:10:11Z", "close_reason": "rejected: Branch from recycled polecat cheedo no longer exists. Issue gt-l7uq reassigned to slit who has active branch.", "labels": ["gt:merge-request"], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-wisp-zfeec", "title": "Mechanical rebase", "description": "Pick next branch from queue. Attempt mechanical rebase on current main.\n\n**Step 1: Checkout and attempt rebase**\n```bash\ngit checkout -b temp origin/<polecat-branch>\ngit rebase origin/main\n```\n\n**Step 2: Check rebase result**\n\nThe rebase exits with:\n- Exit code 0: Success - proceed to run-tests\n- Exit code 1 (conflicts): Conflict detected - proceed to Step 3\n\nTo detect conflict state after rebase fails:\n```bash\n# Check if we're in a conflicted rebase state\nls .git/rebase-merge 2>/dev/null && echo \"CONFLICT_STATE\"\n```\n\n**Step 3: Handle conflicts (if any)**\n\nIf rebase SUCCEEDED (exit code 0):\n- Skip to run-tests step (continue normal merge flow)\n\nIf rebase FAILED with conflicts:\n\n1. **Abort the rebase** (DO NOT leave repo in conflicted state):\n```bash\ngit rebase --abort\n```\n\n2. **Record conflict metadata**:\n```bash\n# Capture main SHA for reference\nMAIN_SHA=$(git rev-parse origin/main)\nBRANCH_SHA=$(git rev-parse origin/<polecat-branch>)\n```\n\n3. **Create conflict-resolution task**:\n```bash\nbd create --type=task --priority=1 --title=\"Resolve merge conflicts: <original-issue-title>\" --description=\"## Conflict Resolution Required\n\nOriginal MR: <mr-bead-id>\nBranch: <polecat-branch>\nOriginal Issue: <issue-id>\nConflict with main at: ${MAIN_SHA}\nBranch SHA: ${BRANCH_SHA}\n\n## Instructions\n1. Clone/checkout the branch\n2. Rebase on current main: git rebase origin/main\n3. Resolve conflicts\n4. Force push: git push -f origin <branch>\n5. Close this task when done\n\nThe MR will be re-queued for processing after conflicts are resolved.\"\n```\n\n4. **Skip this MR** (do NOT delete branch or close MR bead):\n- Leave branch intact for conflict resolution\n- Leave MR bead open (will be re-processed after resolution)\n- Continue to loop-check for next branch\n\n**CRITICAL**: Never delete a branch that has conflicts. The branch contains\nthe original work and must be preserved for conflict resolution.\n\nTrack: rebase result (success/conflict), conflict task ID if created.", "status": "open", "priority": 2, "issue_type": "task", "created_at": "2026-02-28T03:18:21Z", "updated_at": "2026-02-28T03:18:21Z", "dependencies": [{"issue_id": "gt-wisp-zfeec", "depends_on_id": "gt-wisp-6c0pn", "type": "parent-child", "created_at": "2026-02-27T19:18:20Z", "created_by": "refinery", "metadata": "{}"}, {"issue_id": "gt-wisp-zfeec", "depends_on_id": "gt-wisp-elxmf", "type": "blocks", "created_at": "2026-02-27T19:18:20Z", "created_by": "refinery", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-6c0pn"}
{"id": "gt-wisp-zkg2o", "title": "Mechanical rebase", "description": "Pick next branch from queue. Attempt mechanical rebase on current main.\n\n**Step 1: Checkout and attempt rebase**\n```bash\ngit checkout -b temp origin/<polecat-branch>\ngit rebase origin/main\n```\n\n**Step 2: Check rebase result**\n\nThe rebase exits with:\n- Exit code 0: Success - proceed to run-tests\n- Exit code 1 (conflicts): Conflict detected - proceed to Step 3\n\nTo detect conflict state after rebase fails:\n```bash\n# Check if we're in a conflicted rebase state\nls .git/rebase-merge 2>/dev/null && echo \"CONFLICT_STATE\"\n```\n\n**Step 3: Handle conflicts (if any)**\n\nIf rebase SUCCEEDED (exit code 0):\n- Skip to run-tests step (continue normal merge flow)\n\nIf rebase FAILED with conflicts:\n\n1. **Abort the rebase** (DO NOT leave repo in conflicted state):\n```bash\ngit rebase --abort\n```\n\n2. **Record conflict metadata**:\n```bash\n# Capture main SHA for reference\nMAIN_SHA=$(git rev-parse origin/main)\nBRANCH_SHA=$(git rev-parse origin/<polecat-branch>)\n```\n\n3. **Create conflict-resolution task**:\n```bash\nbd create --type=task --priority=1 --title=\"Resolve merge conflicts: <original-issue-title>\" --description=\"## Conflict Resolution Required\n\nOriginal MR: <mr-bead-id>\nBranch: <polecat-branch>\nOriginal Issue: <issue-id>\nConflict with main at: ${MAIN_SHA}\nBranch SHA: ${BRANCH_SHA}\n\n## Instructions\n1. Clone/checkout the branch\n2. Rebase on current main: git rebase origin/main\n3. Resolve conflicts\n4. Force push: git push -f origin <branch>\n5. Close this task when done\n\nThe MR will be re-queued for processing after conflicts are resolved.\"\n```\n\n4. **Skip this MR** (do NOT delete branch or close MR bead):\n- Leave branch intact for conflict resolution\n- Leave MR bead open (will be re-processed after resolution)\n- Continue to loop-check for next branch\n\n**CRITICAL**: Never delete a branch that has conflicts. The branch contains\nthe original work and must be preserved for conflict resolution.\n\nTrack: rebase result (success/conflict), conflict task ID if created.", "status": "open", "priority": 2, "issue_type": "task", "created_at": "2026-02-28T03:19:06Z", "updated_at": "2026-02-28T03:19:06Z", "dependencies": [{"issue_id": "gt-wisp-zkg2o", "depends_on_id": "gt-wisp-4wgug", "type": "blocks", "created_at": "2026-02-27T19:19:06Z", "created_by": "refinery", "metadata": "{}"}, {"issue_id": "gt-wisp-zkg2o", "depends_on_id": "gt-wisp-lamkm", "type": "parent-child", "created_at": "2026-02-27T19:19:06Z", "created_by": "refinery", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-lamkm"}
{"id": "gt-wisp-zpis0", "title": "Handle test failures", "description": "**VERIFICATION GATE**: This step enforces the Beads Promise.\n\nIf tests PASSED: This step auto-completes. Proceed to merge.\n\nIf tests FAILED:\n1. Diagnose: Is this a branch regression or pre-existing on main?\n2. If branch caused it:\n   - Abort merge\n   - Notify polecat: \"Tests failing. Please fix and resubmit.\"\n   - Skip to loop-check\n3. If pre-existing on main:\n   - File a bead: bd create --type=bug --priority=1 --title=\"...\"\n   - FORBIDDEN: Writing code to fix test failures. You merge branches, you do not develop.\n   - Proceed with the merge if the failure is pre-existing (not caused by the branch).\n\n**GATE REQUIREMENT**: You CANNOT proceed to merge-push without:\n- Tests passing, OR\n- Bead filed for the pre-existing failure\n\nFORBIDDEN: Writing application code, exploring polecat implementations, or\nre-implementing fixes. You are a mechanical merge processor.\n\nThis is non-negotiable. Never disavow. Never \"note and proceed.\" ", "status": "open", "priority": 2, "issue_type": "task", "created_at": "2026-02-28T03:00:29Z", "updated_at": "2026-02-28T03:00:29Z", "dependencies": [{"issue_id": "gt-wisp-zpis0", "depends_on_id": "gt-wisp-76pw5", "type": "parent-child", "created_at": "2026-02-27T19:00:29Z", "created_by": "refinery", "metadata": "{}"}, {"issue_id": "gt-wisp-zpis0", "depends_on_id": "gt-wisp-ivwzg", "type": "blocks", "created_at": "2026-02-27T19:00:29Z", "created_by": "refinery", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-76pw5"}
{"id": "gt-wisp-zsh6g", "title": "mol-polecat-work", "description": "Full polecat work lifecycle from assignment through completion.\n\nThis molecule guides a polecat through a complete work assignment. Each step\nhas clear entry/exit criteria and specific commands to run. A polecat can\ncrash after any step and resume from the last completed step.\n\n## Polecat Contract (Self-Cleaning Model)\n\nYou are a self-cleaning worker. You:\n1. Receive work via your hook (pinned molecule + issue)\n2. Work through molecule steps using `bd ready` / `bd close <step>`\n3. Complete and self-clean via `gt done` (submit + nuke yourself)\n4. You are GONE - Refinery merges from MQ\n\n**Self-cleaning:** When you run `gt done`, you push your work, submit to MQ,\nnuke your sandbox, and exit. There is no idle state. Done means gone.\n\n**Important:** This formula defines the template. Your molecule already has step\nbeads created from it. Use `bd ready` to find them - do NOT read this file directly.\n\n**You do NOT:**\n- Push directly to main (Refinery merges from MQ)\n- Close your own issue (Refinery closes after merge)\n- Wait for merge (you're gone after `gt done`)\n- Handle rebase conflicts (Refinery spawns fresh polecats for that)\n\n## Variables\n\n| Variable | Source | Description |\n|----------|--------|-------------|\n| issue | hook_bead | The issue ID you're assigned to work on |\n\n## Failure Modes\n\n| Situation | Action |\n|-----------|--------|\n| Tests fail | Fix them. Do not proceed with failures. |\n| Blocked on external | Mail Witness for help, mark yourself stuck |\n| Context filling | Use gt handoff to cycle to fresh session |\n| Unsure what to do | Mail Witness, don't guess |", "status": "open", "priority": 2, "issue_type": "epic", "created_at": "2026-02-28T03:46:38Z", "updated_at": "2026-02-28T03:46:38Z", "ephemeral": true, "dependency_count": 0, "dependent_count": 1, "comment_count": 0}
{"id": "gt-wisp-zx2ed", "title": "End-of-cycle inbox hygiene", "description": "Verify inbox hygiene before ending patrol cycle.\n\n**Step 1: Check inbox state**\n```bash\ngt mail inbox\n```\n\nInbox should contain ONLY:\n- Unprocessed MERGE_READY messages (will process next cycle)\n- Active work items\n\n**Step 2: Archive any stale messages**\n\nLook for messages that were processed but not archived:\n- PATROL: Wake up that was acknowledged → archive\n- HELP/Blocked that was handled → archive\n- MERGE_READY where merge completed but archive was missed → archive\n\n```bash\n# For each stale message found:\ngt mail archive <message-id>\n```\n\n**Step 3: Check for orphaned MR beads**\n\nLook for open MR beads with no corresponding branch:\n```bash\nbd list --type=merge-request --status=open\n```\n\nFor each open MR bead:\n1. Check if branch exists: `git ls-remote origin refs/heads/<branch>`\n2. If branch gone, verify work is on main: `git log origin/main --oneline | grep \"<source_issue>\"`\n3. If work on main → close MR with reason \"Merged (verified on main)\"\n4. If work NOT on main → investigate before closing:\n   - Check source_issue validity (should be gt-xxxxx, not branch name)\n   - Search reflog/dangling commits if possible\n   - If unverifiable, close with reason \"Unverifiable - no audit trail\"\n   - File bead if this indicates lost work\n\n**NEVER close an MR bead without verifying the work landed or is unrecoverable.**\n\n**Goal**: Inbox should have ≤3 active messages at end of cycle.\nKeep only: pending MRs in queue.", "status": "open", "priority": 2, "issue_type": "task", "created_at": "2026-02-28T03:18:49Z", "updated_at": "2026-02-28T03:18:49Z", "dependencies": [{"issue_id": "gt-wisp-zx2ed", "depends_on_id": "gt-wisp-dgfek", "type": "blocks", "created_at": "2026-02-27T19:18:49Z", "created_by": "refinery", "metadata": "{}"}, {"issue_id": "gt-wisp-zx2ed", "depends_on_id": "gt-wisp-iwq01", "type": "parent-child", "created_at": "2026-02-27T19:18:49Z", "created_by": "refinery", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-iwq01"}
{"id": "gt-wisp-zxhbi", "title": "Generate handoff summary", "description": "Summarize this patrol cycle.\n\n**VERIFICATION**: Before generating summary, confirm for each merged branch:\n- [ ] MERGED mail was sent to witness\n- [ ] MR bead was closed\n- [ ] MERGE_READY mail archived\n\nIf any notifications or archiving were missed, do them now!\n\nInclude in summary:\n- Branches merged (count, names)\n- MERGED mails sent (count - should match branches merged)\n- MR beads closed (count - should match branches merged)\n- MERGE_READY mails archived (count - should match branches merged)\n- Test results (pass/fail)\n- Branches with conflicts (count, names)\n- Conflict-resolution tasks created (IDs)\n- Issues filed (if any)\n- Any escalations sent\n\n**Conflict tracking is important** for monitoring MQ health. If many branches\nconflict, it may indicate main is moving too fast or branches are too stale.\n\nThis becomes the digest when the patrol is squashed.", "status": "open", "priority": 2, "issue_type": "task", "created_at": "2026-02-28T03:18:01Z", "updated_at": "2026-02-28T03:18:01Z", "dependencies": [{"issue_id": "gt-wisp-zxhbi", "depends_on_id": "gt-wisp-hohlh", "type": "blocks", "created_at": "2026-02-27T19:18:01Z", "created_by": "refinery", "metadata": "{}"}, {"issue_id": "gt-wisp-zxhbi", "depends_on_id": "gt-wisp-y6e5z", "type": "parent-child", "created_at": "2026-02-27T19:18:01Z", "created_by": "refinery", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-y6e5z"}
{"id": "gt-wisp-zyd9", "title": "Merge: gt-8ubf", "description": "branch: polecat/furiosa/gt-8ubf@mm5jq0ew\ntarget: main\nsource_issue: gt-8ubf\nrig: gastown\nworker: furiosa\nagent_bead: gt-gastown-polecat-furiosa\nretry_count: 0\nlast_conflict_sha: null\nconflict_task_id: null", "status": "closed", "priority": 1, "issue_type": "task", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-28T00:09:14Z", "created_by": "gastown/polecats/furiosa", "updated_at": "2026-02-28T00:21:32Z", "closed_at": "2026-02-28T00:21:32Z", "labels": ["gt:merge-request"], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-wisp-zzh50", "title": "Merge: gt-l7uq", "description": "branch: polecat/furiosa/gt-l7uq@mm5qwb9i\ntarget: main\nsource_issue: gt-l7uq\nrig: gastown\nworker: furiosa\nagent_bead: gt-gastown-polecat-furiosa\nretry_count: 0\nlast_conflict_sha: null\nconflict_task_id: null", "status": "open", "priority": 1, "issue_type": "task", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-28T03:39:13Z", "created_by": "gastown/polecats/furiosa", "updated_at": "2026-02-28T03:39:13Z", "labels": ["gt:merge-request"], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-wisp-08kk9", "title": "mol-refinery-patrol", "description": "Patrol report: Cycle 3: Queue empty. Polecat done signal received but witness did not create MR. System noise signals consuming await cycles. Session still healthy.", "status": "closed", "priority": 2, "issue_type": "epic", "assignee": "gastown/refinery", "created_at": "2026-02-28T01:24:57Z", "updated_at": "2026-02-28T01:27:19Z", "closed_at": "2026-02-28T01:27:19Z", "close_reason": "patrol cycle complete: Cycle 3: Queue empty. Polecat done signal received but witness did not create MR. System noise signals consuming await cycles. Session still healthy.", "labels": ["backoff-until:1772242099"], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-wisp-11x74", "title": "Mechanical rebase", "description": "Pick next branch from queue. Attempt mechanical rebase on current main.\n\n**Step 1: Checkout and attempt rebase**\n```bash\ngit checkout -b temp origin/<polecat-branch>\ngit rebase origin/main\n```\n\n**Step 2: Check rebase result**\n\nThe rebase exits with:\n- Exit code 0: Success - proceed to run-tests\n- Exit code 1 (conflicts): Conflict detected - proceed to Step 3\n\nTo detect conflict state after rebase fails:\n```bash\n# Check if we're in a conflicted rebase state\nls .git/rebase-merge 2>/dev/null && echo \"CONFLICT_STATE\"\n```\n\n**Step 3: Handle conflicts (if any)**\n\nIf rebase SUCCEEDED (exit code 0):\n- Skip to run-tests step (continue normal merge flow)\n\nIf rebase FAILED with conflicts:\n\n1. **Abort the rebase** (DO NOT leave repo in conflicted state):\n```bash\ngit rebase --abort\n```\n\n2. **Record conflict metadata**:\n```bash\n# Capture main SHA for reference\nMAIN_SHA=$(git rev-parse origin/main)\nBRANCH_SHA=$(git rev-parse origin/<polecat-branch>)\n```\n\n3. **Create conflict-resolution task**:\n```bash\nbd create --type=task --priority=1 --title=\"Resolve merge conflicts: <original-issue-title>\" --description=\"## Conflict Resolution Required\n\nOriginal MR: <mr-bead-id>\nBranch: <polecat-branch>\nOriginal Issue: <issue-id>\nConflict with main at: ${MAIN_SHA}\nBranch SHA: ${BRANCH_SHA}\n\n## Instructions\n1. Clone/checkout the branch\n2. Rebase on current main: git rebase origin/main\n3. Resolve conflicts\n4. Force push: git push -f origin <branch>\n5. Close this task when done\n\nThe MR will be re-queued for processing after conflicts are resolved.\"\n```\n\n4. **Skip this MR** (do NOT delete branch or close MR bead):\n- Leave branch intact for conflict resolution\n- Leave MR bead open (will be re-processed after resolution)\n- Continue to loop-check for next branch\n\n**CRITICAL**: Never delete a branch that has conflicts. The branch contains\nthe original work and must be preserved for conflict resolution.\n\nTrack: rebase result (success/conflict), conflict task ID if created.", "status": "closed", "priority": 2, "issue_type": "task", "assignee": "gastown/refinery", "created_at": "2026-02-28T01:51:04Z", "updated_at": "2026-02-28T01:58:51Z", "closed_at": "2026-02-28T01:58:51Z", "close_reason": "Closed", "dependencies": [{"issue_id": "gt-wisp-11x74", "depends_on_id": "gt-wisp-mv5zs", "type": "parent-child", "created_at": "2026-02-27T17:51:03Z", "created_by": "refinery", "metadata": "{}"}, {"issue_id": "gt-wisp-11x74", "depends_on_id": "gt-wisp-o7xbz", "type": "blocks", "created_at": "2026-02-27T17:51:03Z", "created_by": "refinery", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-mv5zs"}
{"id": "gt-wisp-1db6e", "title": "mol-refinery-patrol", "description": "Patrol report: Queue empty, no merges.", "status": "closed", "priority": 2, "issue_type": "epic", "assignee": "gastown/refinery", "created_at": "2026-02-28T02:13:26Z", "updated_at": "2026-02-28T02:13:36Z", "closed_at": "2026-02-28T02:13:36Z", "close_reason": "patrol cycle complete: Queue empty, no merges.", "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-wisp-1hi6q", "title": "mol-refinery-patrol", "description": "Patrol report: Patrol cycle: queue empty, no merges. New polecat branch polecat/nux/gt-lpop seen but no MR submitted yet.", "status": "closed", "priority": 2, "issue_type": "epic", "assignee": "gastown/refinery", "created_at": "2026-02-28T02:11:03Z", "updated_at": "2026-02-28T02:11:22Z", "closed_at": "2026-02-28T02:11:22Z", "close_reason": "patrol cycle complete: Patrol cycle: queue empty, no merges. New polecat branch polecat/nux/gt-lpop seen but no MR submitted yet.", "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-wisp-1i6q5", "title": "mol-refinery-patrol", "description": "Patrol report: Cycle 1: Queue empty, inbox clear. Main advanced on origin (ac38b1c9..e5248e0f). No branches to merge. Session healthy (RSS 3MB).", "status": "closed", "priority": 2, "issue_type": "epic", "assignee": "gastown/refinery", "created_at": "2026-02-28T02:23:26Z", "updated_at": "2026-02-28T02:34:27Z", "closed_at": "2026-02-28T02:34:27Z", "close_reason": "patrol cycle complete: Cycle 1: Queue empty, inbox clear. Main advanced on origin (ac38b1c9..e5248e0f). No branches to merge. Session healthy (RSS 3MB).", "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-wisp-1qwdh", "title": "Self-review changes", "description": "Review your own changes before running tests.\n\n**1. Review the diff:**\n```bash\ngit diff origin/main...HEAD     # All changes vs main\ngit log --oneline origin/main..HEAD  # All commits\n```\n\n**2. Check for common issues:**\n\n| Category | Look For |\n|----------|----------|\n| Bugs | Off-by-one, null handling, edge cases |\n| Security | Injection, auth bypass, exposed secrets |\n| Style | Naming, formatting, code organization |\n| Completeness | Missing error handling, incomplete paths |\n| Cruft | Debug prints, commented code, TODOs |\n\n**3. Fix issues found:**\nDon't just note them - fix them now. Amend or add commits as needed.\n\n**4. Verify no unintended changes:**\n```bash\ngit diff --stat origin/main...HEAD\n# Only files relevant to gt-a6gp should appear\n```\n\nIf you accidentally modified unrelated files, remove those changes.\n\n**Exit criteria:** Changes are clean, reviewed, and ready for testing.", "status": "open", "priority": 2, "issue_type": "task", "created_at": "2026-02-28T01:44:54Z", "updated_at": "2026-02-28T01:44:54Z", "dependencies": [{"issue_id": "gt-wisp-1qwdh", "depends_on_id": "gt-wisp-ceiib", "type": "blocks", "created_at": "2026-02-27T17:44:54Z", "created_by": "dog", "metadata": "{}"}, {"issue_id": "gt-wisp-1qwdh", "depends_on_id": "gt-wisp-spqdu", "type": "parent-child", "created_at": "2026-02-27T17:44:54Z", "created_by": "dog", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-spqdu"}
{"id": "gt-wisp-1t9s", "title": "mol-refinery-patrol", "description": "Patrol report: Empty queue. No merges pending.", "status": "closed", "priority": 2, "issue_type": "epic", "assignee": "gastown/refinery", "created_at": "2026-02-28T00:59:24Z", "updated_at": "2026-02-28T00:59:35Z", "closed_at": "2026-02-28T00:59:35Z", "close_reason": "patrol cycle complete: Empty queue. No merges pending.", "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-wisp-2n66", "title": "mol-polecat-work", "description": "Full polecat work lifecycle from assignment through completion.\n\nThis molecule guides a polecat through a complete work assignment. Each step\nhas clear entry/exit criteria and specific commands to run. A polecat can\ncrash after any step and resume from the last completed step.\n\n## Polecat Contract (Self-Cleaning Model)\n\nYou are a self-cleaning worker. You:\n1. Receive work via your hook (pinned molecule + issue)\n2. Work through molecule steps using `bd ready` / `bd close <step>`\n3. Complete and self-clean via `gt done` (submit + nuke yourself)\n4. You are GONE - Refinery merges from MQ\n\n**Self-cleaning:** When you run `gt done`, you push your work, submit to MQ,\nnuke your sandbox, and exit. There is no idle state. Done means gone.\n\n**Important:** This formula defines the template. Your molecule already has step\nbeads created from it. Use `bd ready` to find them - do NOT read this file directly.\n\n**You do NOT:**\n- Push directly to main (Refinery merges from MQ)\n- Close your own issue (Refinery closes after merge)\n- Wait for merge (you're gone after `gt done`)\n- Handle rebase conflicts (Refinery spawns fresh polecats for that)\n\n## Variables\n\n| Variable | Source | Description |\n|----------|--------|-------------|\n| issue | hook_bead | The issue ID you're assigned to work on |\n\n## Failure Modes\n\n| Situation | Action |\n|-----------|--------|\n| Tests fail | Fix them. Do not proceed with failures. |\n| Blocked on external | Mail Witness for help, mark yourself stuck |\n| Context filling | Use gt handoff to cycle to fresh session |\n| Unsure what to do | Mail Witness, don't guess |", "status": "closed", "priority": 2, "issue_type": "epic", "created_at": "2026-02-28T00:26:33Z", "updated_at": "2026-02-28T01:21:39Z", "closed_at": "2026-02-28T01:21:39Z", "close_reason": "burned: force re-sling", "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-wisp-31us", "title": "mol-refinery-patrol", "description": "Patrol report: Empty queue cycle #12. Twelve idle cycles. Queue remains clear.", "status": "closed", "priority": 2, "issue_type": "epic", "assignee": "gastown/refinery", "created_at": "2026-02-28T00:48:40Z", "updated_at": "2026-02-28T00:48:48Z", "closed_at": "2026-02-28T00:48:48Z", "close_reason": "patrol cycle complete: Empty queue cycle #12. Twelve idle cycles. Queue remains clear.", "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-wisp-3ailn", "title": "mol-refinery-patrol", "description": "Patrol report: Empty queue. Standing by.", "status": "closed", "priority": 2, "issue_type": "epic", "assignee": "gastown/refinery", "created_at": "2026-02-28T01:07:22Z", "updated_at": "2026-02-28T01:07:32Z", "closed_at": "2026-02-28T01:07:32Z", "close_reason": "patrol cycle complete: Empty queue. Standing by.", "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-wisp-3vrn2", "title": "mol-polecat-work", "description": "Full polecat work lifecycle from assignment through completion.\n\nThis molecule guides a polecat through a complete work assignment. Each step\nhas clear entry/exit criteria and specific commands to run. A polecat can\ncrash after any step and resume from the last completed step.\n\n## Polecat Contract (Self-Cleaning Model)\n\nYou are a self-cleaning worker. You:\n1. Receive work via your hook (pinned molecule + issue)\n2. Work through molecule steps using `bd ready` / `bd close <step>`\n3. Complete and self-clean via `gt done` (submit + nuke yourself)\n4. You are GONE - Refinery merges from MQ\n\n**Self-cleaning:** When you run `gt done`, you push your work, submit to MQ,\nnuke your sandbox, and exit. There is no idle state. Done means gone.\n\n**Important:** This formula defines the template. Your molecule already has step\nbeads created from it. Use `bd ready` to find them - do NOT read this file directly.\n\n**You do NOT:**\n- Push directly to main (Refinery merges from MQ)\n- Close your own issue (Refinery closes after merge)\n- Wait for merge (you're gone after `gt done`)\n- Handle rebase conflicts (Refinery spawns fresh polecats for that)\n\n## Variables\n\n| Variable | Source | Description |\n|----------|--------|-------------|\n| issue | hook_bead | The issue ID you're assigned to work on |\n\n## Failure Modes\n\n| Situation | Action |\n|-----------|--------|\n| Tests fail | Fix them. Do not proceed with failures. |\n| Blocked on external | Mail Witness for help, mark yourself stuck |\n| Context filling | Use gt handoff to cycle to fresh session |\n| Unsure what to do | Mail Witness, don't guess |", "status": "closed", "priority": 2, "issue_type": "epic", "created_at": "2026-02-28T01:22:25Z", "updated_at": "2026-02-28T01:24:18Z", "closed_at": "2026-02-28T01:24:18Z", "close_reason": "burned: force re-sling", "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-wisp-3wqha", "title": "Check refinery mail", "description": "Check mail for MERGE_READY submissions, escalations, and messages.\n\n```bash\ngt mail inbox\n```\n\nFor each message:\n\n**MERGE_READY**:\nA polecat's work is ready for merge. Extract details and track for processing.\n\n```bash\n# Parse MERGE_READY message body:\n# Branch: <branch>\n# Issue: <issue-id>\n# Polecat: <polecat-name>\n# MR: <mr-bead-id>\n# Verified: clean git state, issue closed\n\n# Track in your merge queue for this patrol cycle:\n# - Branch name\n# - Issue ID\n# - Polecat name (REQUIRED for MERGED notification)\n# - MR bead ID (REQUIRED for closing after merge)\n```\n\n**IMPORTANT**: You MUST track the polecat name, MR bead ID, AND message ID - you will need them\nin merge-push step to send MERGED notification, close the MR bead, and archive the mail.\n\nMark as read. The work will be processed in queue-scan/process-branch.\n**Do NOT archive yet** - archive after merge/reject decision in merge-push step.\n\n**PATROL: Wake up**:\nWitness detected MRs waiting but refinery idle. Acknowledge and archive:\n```bash\ngt mail archive <message-id>\n```\n\n**HELP / Blocked**:\nAssess and respond. If you can't help, escalate to Mayor.\nArchive after handling:\n```bash\ngt mail archive <message-id>\n```\n\n**HANDOFF**:\nRead predecessor context. Check for in-flight merges.\nArchive after absorbing context:\n```bash\ngt mail archive <message-id>\n```\n\n**Hygiene principle**: Archive messages after they're fully processed.\nKeep only: pending MRs in queue. Inbox should be near-empty.", "status": "closed", "priority": 2, "issue_type": "task", "assignee": "gastown/refinery", "created_at": "2026-02-28T01:51:04Z", "updated_at": "2026-02-28T01:51:28Z", "closed_at": "2026-02-28T01:51:28Z", "close_reason": "Closed", "dependencies": [{"issue_id": "gt-wisp-3wqha", "depends_on_id": "gt-wisp-mv5zs", "type": "parent-child", "created_at": "2026-02-27T17:51:03Z", "created_by": "refinery", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-mv5zs"}
{"id": "gt-wisp-423z", "title": "mol-refinery-patrol", "description": "Patrol report: Empty queue. RSS 3MB, context growing. Many idle cycles since last merge (gt-wisp-ycc4).", "status": "closed", "priority": 2, "issue_type": "epic", "assignee": "gastown/refinery", "created_at": "2026-02-28T00:56:02Z", "updated_at": "2026-02-28T00:56:19Z", "closed_at": "2026-02-28T00:56:19Z", "close_reason": "patrol cycle complete: Empty queue. RSS 3MB, context growing. Many idle cycles since last merge (gt-wisp-ycc4).", "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-wisp-47k46", "title": "mol-refinery-patrol", "description": "Patrol report: Empty queue. Refinery idle, standing by.", "status": "closed", "priority": 2, "issue_type": "epic", "assignee": "gastown/refinery", "created_at": "2026-02-28T01:06:55Z", "updated_at": "2026-02-28T01:07:04Z", "closed_at": "2026-02-28T01:07:04Z", "close_reason": "patrol cycle complete: Empty queue. Refinery idle, standing by.", "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-wisp-4lb07", "title": "mol-polecat-work", "description": "Full polecat work lifecycle from assignment through completion.\n\nThis molecule guides a polecat through a complete work assignment. Each step\nhas clear entry/exit criteria and specific commands to run. A polecat can\ncrash after any step and resume from the last completed step.\n\n## Polecat Contract (Self-Cleaning Model)\n\nYou are a self-cleaning worker. You:\n1. Receive work via your hook (pinned molecule + issue)\n2. Work through molecule steps using `bd ready` / `bd close <step>`\n3. Complete and self-clean via `gt done` (submit + nuke yourself)\n4. You are GONE - Refinery merges from MQ\n\n**Self-cleaning:** When you run `gt done`, you push your work, submit to MQ,\nnuke your sandbox, and exit. There is no idle state. Done means gone.\n\n**Important:** This formula defines the template. Your molecule already has step\nbeads created from it. Use `bd ready` to find them - do NOT read this file directly.\n\n**You do NOT:**\n- Push directly to main (Refinery merges from MQ)\n- Close your own issue (Refinery closes after merge)\n- Wait for merge (you're gone after `gt done`)\n- Handle rebase conflicts (Refinery spawns fresh polecats for that)\n\n## Variables\n\n| Variable | Source | Description |\n|----------|--------|-------------|\n| issue | hook_bead | The issue ID you're assigned to work on |\n\n## Failure Modes\n\n| Situation | Action |\n|-----------|--------|\n| Tests fail | Fix them. Do not proceed with failures. |\n| Blocked on external | Mail Witness for help, mark yourself stuck |\n| Context filling | Use gt handoff to cycle to fresh session |\n| Unsure what to do | Mail Witness, don't guess |", "status": "closed", "priority": 2, "issue_type": "epic", "created_at": "2026-02-28T01:27:03Z", "updated_at": "2026-02-28T01:40:18Z", "closed_at": "2026-02-28T01:40:18Z", "close_reason": "burned: polecat nuked", "ephemeral": true, "dependency_count": 0, "dependent_count": 1, "comment_count": 0}
{"id": "gt-wisp-4od8j", "title": "Load context and verify assignment", "description": "Initialize your session and understand your assignment.\n\n**1. Prime your environment:**\n```bash\ngt prime                    # Load role context\nbd prime                    # Load beads context\n```\n\n**2. Check your hook:**\n```bash\ngt hook               # Shows your pinned molecule and hook_bead\n```\n\nThe hook_bead is your assigned issue. Read it carefully:\n```bash\nbd show gt-p7uq.3           # Full issue details\n```\n\n**3. Check inbox for additional context:**\n```bash\ngt mail inbox\n# Read any HANDOFF or assignment messages\n```\n\n**4. Understand the requirements:**\n- What exactly needs to be done?\n- What files are likely involved?\n- Are there dependencies or blockers?\n- What does \"done\" look like?\n\n**5. Verify you can proceed:**\n- No unresolved blockers on the issue\n- You understand what to do\n- Required resources are available\n\nIf blocked or unclear, mail Witness immediately:\n```bash\ngt mail send <rig>/witness -s \"HELP: Unclear requirements\" -m \"Issue: gt-p7uq.3\nQuestion: <what you need clarified>\"\n```\n\n**Exit criteria:** You understand the work and can begin implementation.", "status": "closed", "priority": 2, "issue_type": "task", "created_at": "2026-02-28T01:50:20Z", "updated_at": "2026-02-28T01:51:59Z", "closed_at": "2026-02-28T01:51:59Z", "close_reason": "Closed", "dependencies": [{"issue_id": "gt-wisp-4od8j", "depends_on_id": "gt-wisp-bmfqr", "type": "parent-child", "created_at": "2026-02-27T17:50:19Z", "created_by": "mayor", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-bmfqr"}
{"id": "gt-wisp-4st2", "title": "mol-refinery-patrol", "description": "Patrol report: Empty queue. Idle patrol continues.", "status": "closed", "priority": 2, "issue_type": "epic", "assignee": "gastown/refinery", "created_at": "2026-02-28T00:55:06Z", "updated_at": "2026-02-28T00:55:15Z", "closed_at": "2026-02-28T00:55:15Z", "close_reason": "patrol cycle complete: Empty queue. Idle patrol continues.", "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-wisp-52md4", "title": "Submit work and self-clean", "description": "Submit your work and clean up. You cease to exist after this step.\n\n**Self-Cleaning Model:**\nOnce you run `gt done`, you're gone. The command:\n1. Pushes your branch to origin\n2. Creates an MR bead in the merge queue\n3. Nukes your sandbox (worktree removal)\n4. Exits your session immediately\n\n**Run gt done:**\n```bash\ngt done\n```\n\nYou should see output like:\n```\n✓ Work submitted to merge queue\n  MR ID: gt-xxxxx\n  Source: polecat/<name>\n  Target: main\n  Issue: gt-w0br\n✓ Sandbox nuked\n✓ Session exiting\n```\n\n**What happens next (not your concern):**\n- Refinery processes your MR from the queue\n- Refinery rebases and merges to main\n- Refinery closes the issue\n- If conflicts: Refinery spawns a FRESH polecat to re-implement\n\nYou are NOT involved in any of that. You're gone. Done means gone.\n\n**Exit criteria:** Work submitted, sandbox nuked, session exited.", "status": "closed", "priority": 2, "issue_type": "task", "created_at": "2026-02-28T01:40:24Z", "updated_at": "2026-02-28T01:51:20Z", "closed_at": "2026-02-28T01:51:20Z", "close_reason": "Closed", "dependencies": [{"issue_id": "gt-wisp-52md4", "depends_on_id": "gt-wisp-ufzcr", "type": "parent-child", "created_at": "2026-02-27T17:40:24Z", "created_by": "dog", "metadata": "{}"}, {"issue_id": "gt-wisp-52md4", "depends_on_id": "gt-wisp-ygzue", "type": "blocks", "created_at": "2026-02-27T17:40:24Z", "created_by": "dog", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-ufzcr"}
{"id": "gt-wisp-5b73d", "title": "Verify tests pass on main", "description": "Check if the codebase is healthy BEFORE starting your work.\n\n**The Scotty Principle:** Don't walk past a broken warp core. But also don't\nlet someone else's mess consume your entire mission.\n\n**1. Check tests on main:**\n```bash\ngit stash                   # Save your branch state\ngit checkout origin/main\ngo test ./...               # Or appropriate test command\n```\n\n**2. If tests PASS:**\n```bash\ngit checkout -              # Back to your branch\ngit stash pop               # Restore state\n```\nContinue to implement step.\n\n**3. If tests FAIL on main:**\n\nFile a bead and proceed. Do NOT fix pre-existing failures yourself — that is\nnot your assignment. Your job is to fix the issue on your hook, not main.\n\n| Situation | Action |\n|-----------|--------|\n| Any pre-existing failure | File bead, proceed with your work |\n\nFORBIDDEN: Pushing to main. FORBIDDEN: Fixing pre-existing failures.\nYou work on YOUR feature branch only. `gt done` handles push/MR.\n\n**File and proceed path:**\n```bash\nbd create --title \"Pre-existing test failure: <description>\" --type bug --priority 1\n\ngt mail send <rig>/witness -s \"NOTICE: Main has failing tests\" -m \"Found pre-existing test failures on main.\nFiled: <bead-id>\nProceeding with my assigned work (gt-a6gp).\"\n\ngit checkout -\ngit stash pop\n```\n\n**Context consideration:**\nIf fixing pre-existing failures consumed significant context:\n```bash\ngt handoff -s \"Fixed pre-existing failures, ready for assigned work\" -m \"Issue: gt-a6gp\nFixed: <what you fixed>\nReady to start: implement step\"\n```\nFresh session continues from implement.\n\n**Exit criteria:** Tests pass on main (or issue filed), ready to implement.", "status": "open", "priority": 2, "issue_type": "task", "created_at": "2026-02-28T01:44:54Z", "updated_at": "2026-02-28T01:44:54Z", "dependencies": [{"issue_id": "gt-wisp-5b73d", "depends_on_id": "gt-wisp-q5c49", "type": "blocks", "created_at": "2026-02-27T17:44:54Z", "created_by": "dog", "metadata": "{}"}, {"issue_id": "gt-wisp-5b73d", "depends_on_id": "gt-wisp-spqdu", "type": "parent-child", "created_at": "2026-02-27T17:44:54Z", "created_by": "dog", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-spqdu"}
{"id": "gt-wisp-5m704", "title": "mol-polecat-work", "description": "Full polecat work lifecycle from assignment through completion.\n\nThis molecule guides a polecat through a complete work assignment. Each step\nhas clear entry/exit criteria and specific commands to run. A polecat can\ncrash after any step and resume from the last completed step.\n\n## Polecat Contract (Self-Cleaning Model)\n\nYou are a self-cleaning worker. You:\n1. Receive work via your hook (pinned molecule + issue)\n2. Work through molecule steps using `bd ready` / `bd close <step>`\n3. Complete and self-clean via `gt done` (submit + nuke yourself)\n4. You are GONE - Refinery merges from MQ\n\n**Self-cleaning:** When you run `gt done`, you push your work, submit to MQ,\nnuke your sandbox, and exit. There is no idle state. Done means gone.\n\n**Important:** This formula defines the template. Your molecule already has step\nbeads created from it. Use `bd ready` to find them - do NOT read this file directly.\n\n**You do NOT:**\n- Push directly to main (Refinery merges from MQ)\n- Close your own issue (Refinery closes after merge)\n- Wait for merge (you're gone after `gt done`)\n- Handle rebase conflicts (Refinery spawns fresh polecats for that)\n\n## Variables\n\n| Variable | Source | Description |\n|----------|--------|-------------|\n| issue | hook_bead | The issue ID you're assigned to work on |\n\n## Failure Modes\n\n| Situation | Action |\n|-----------|--------|\n| Tests fail | Fix them. Do not proceed with failures. |\n| Blocked on external | Mail Witness for help, mark yourself stuck |\n| Context filling | Use gt handoff to cycle to fresh session |\n| Unsure what to do | Mail Witness, don't guess |", "status": "closed", "priority": 2, "issue_type": "epic", "created_at": "2026-02-28T01:21:32Z", "updated_at": "2026-02-28T01:22:57Z", "closed_at": "2026-02-28T01:22:57Z", "close_reason": "burned: force re-sling", "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-wisp-5nzno", "title": "mol-refinery-patrol", "description": "Patrol report: Empty queue. Idle patrol.", "status": "closed", "priority": 2, "issue_type": "epic", "assignee": "gastown/refinery", "created_at": "2026-02-28T01:05:29Z", "updated_at": "2026-02-28T01:05:39Z", "closed_at": "2026-02-28T01:05:39Z", "close_reason": "patrol cycle complete: Empty queue. Idle patrol.", "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-wisp-5rot", "title": "mol-refinery-patrol", "description": "Patrol report: Empty queue cycle #10. Ten consecutive idle cycles. RSS: 3MB. Context healthy. Continuing patrol.", "status": "closed", "priority": 2, "issue_type": "epic", "assignee": "gastown/refinery", "created_at": "2026-02-28T00:48:12Z", "updated_at": "2026-02-28T00:48:31Z", "closed_at": "2026-02-28T00:48:31Z", "close_reason": "patrol cycle complete: Empty queue cycle #10. Ten consecutive idle cycles. RSS: 3MB. Context healthy. Continuing patrol.", "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-wisp-5wnf", "title": "mol-refinery-patrol", "description": "Patrol report: Empty queue. No work pending.", "status": "closed", "priority": 2, "issue_type": "epic", "assignee": "gastown/refinery", "created_at": "2026-02-28T00:52:57Z", "updated_at": "2026-02-28T00:53:07Z", "closed_at": "2026-02-28T00:53:07Z", "close_reason": "patrol cycle complete: Empty queue. No work pending.", "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-wisp-5y1q", "title": "mol-polecat-work", "description": "Full polecat work lifecycle from assignment through completion.\n\nThis molecule guides a polecat through a complete work assignment. Each step\nhas clear entry/exit criteria and specific commands to run. A polecat can\ncrash after any step and resume from the last completed step.\n\n## Polecat Contract (Self-Cleaning Model)\n\nYou are a self-cleaning worker. You:\n1. Receive work via your hook (pinned molecule + issue)\n2. Work through molecule steps using `bd ready` / `bd close <step>`\n3. Complete and self-clean via `gt done` (submit + nuke yourself)\n4. You are GONE - Refinery merges from MQ\n\n**Self-cleaning:** When you run `gt done`, you push your work, submit to MQ,\nnuke your sandbox, and exit. There is no idle state. Done means gone.\n\n**Important:** This formula defines the template. Your molecule already has step\nbeads created from it. Use `bd ready` to find them - do NOT read this file directly.\n\n**You do NOT:**\n- Push directly to main (Refinery merges from MQ)\n- Close your own issue (Refinery closes after merge)\n- Wait for merge (you're gone after `gt done`)\n- Handle rebase conflicts (Refinery spawns fresh polecats for that)\n\n## Variables\n\n| Variable | Source | Description |\n|----------|--------|-------------|\n| issue | hook_bead | The issue ID you're assigned to work on |\n\n## Failure Modes\n\n| Situation | Action |\n|-----------|--------|\n| Tests fail | Fix them. Do not proceed with failures. |\n| Blocked on external | Mail Witness for help, mark yourself stuck |\n| Context filling | Use gt handoff to cycle to fresh session |\n| Unsure what to do | Mail Witness, don't guess |", "status": "closed", "priority": 2, "issue_type": "epic", "created_at": "2026-02-28T00:31:08Z", "updated_at": "2026-02-28T00:43:08Z", "closed_at": "2026-02-28T00:43:08Z", "close_reason": "burned: polecat nuked", "ephemeral": true, "dependency_count": 0, "dependent_count": 1, "comment_count": 0}
{"id": "gt-wisp-622id", "title": "mol-refinery-patrol", "description": "Patrol report: Queue empty, no merges.", "status": "closed", "priority": 2, "issue_type": "epic", "assignee": "gastown/refinery", "created_at": "2026-02-28T02:19:14Z", "updated_at": "2026-02-28T02:19:24Z", "closed_at": "2026-02-28T02:19:24Z", "close_reason": "patrol cycle complete: Queue empty, no merges.", "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-wisp-672d", "title": "mol-refinery-patrol", "description": "Patrol report: Empty queue cycle. No merges pending.", "status": "closed", "priority": 2, "issue_type": "epic", "assignee": "gastown/refinery", "created_at": "2026-02-28T00:56:20Z", "updated_at": "2026-02-28T00:56:30Z", "closed_at": "2026-02-28T00:56:30Z", "close_reason": "patrol cycle complete: Empty queue cycle. No merges pending.", "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-wisp-67e1", "title": "mol-refinery-patrol", "description": "Patrol report: Empty queue. Refinery idle.", "status": "closed", "priority": 2, "issue_type": "epic", "assignee": "gastown/refinery", "created_at": "2026-02-28T00:53:38Z", "updated_at": "2026-02-28T00:53:48Z", "closed_at": "2026-02-28T00:53:48Z", "close_reason": "patrol cycle complete: Empty queue. Refinery idle.", "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-wisp-67js", "title": "mol-refinery-patrol", "description": "Patrol report: Merged 2 branches: gt-2rj2 (mail drain, P0) and gt-ghl6 (daemon maintenance window, P1). All tests pass. Queue now empty.", "status": "closed", "priority": 2, "issue_type": "epic", "assignee": "gastown/refinery", "created_at": "2026-02-28T01:00:55Z", "updated_at": "2026-02-28T01:04:32Z", "closed_at": "2026-02-28T01:04:32Z", "close_reason": "patrol cycle complete: Merged 2 branches: gt-2rj2 (mail drain, P0) and gt-ghl6 (daemon maintenance window, P1). All tests pass. Queue now empty.", "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-wisp-6v5e0", "title": "Clean up workspace", "description": "Ensure workspace is pristine before handoff.\n\n**IMPORTANT: Do NOT run `git push`. That is `gt done`'s job (next step).**\n**IMPORTANT: Do NOT discard implementation changes. They must already be committed.**\n\n**1. Check for untracked files:**\n```bash\ngit status --porcelain\n```\nShould be empty. If not:\n- Add to .gitignore if appropriate\n- Remove if temporary: `rm <file>`\n- Commit if needed: `git add <file> && git commit -m \"chore: add <file>\"`\n\n**2. Check stash:**\n```bash\ngit stash list\n```\nShould be empty. If not:\n- Pop and commit: `git stash pop && git add -A && git commit -m \"chore: unstash work (gt-a6gp)\"`\n- Or drop if truly garbage: `git stash drop`\n\n**3. Verify clean state and commits:**\n```bash\ngit status                  # Must show \"working tree clean\"\ngit stash list              # Must be empty\ngit log origin/main..HEAD   # Your commits (should show your work)\n```\n\nIf `git log origin/main..HEAD` shows nothing but you DID make changes,\nsomething went wrong. Do NOT proceed — mail Witness for help.\n\n**Exit criteria:** Workspace clean, no cruft, all work committed. Do NOT push — `gt done` handles that.", "status": "open", "priority": 2, "issue_type": "task", "created_at": "2026-02-28T01:44:54Z", "updated_at": "2026-02-28T01:44:54Z", "dependencies": [{"issue_id": "gt-wisp-6v5e0", "depends_on_id": "gt-wisp-fqckl", "type": "blocks", "created_at": "2026-02-27T17:44:54Z", "created_by": "dog", "metadata": "{}"}, {"issue_id": "gt-wisp-6v5e0", "depends_on_id": "gt-wisp-spqdu", "type": "parent-child", "created_at": "2026-02-27T17:44:54Z", "created_by": "dog", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-spqdu"}
{"id": "gt-wisp-6yryp", "title": "Merge: gt-p7uq.2", "description": "branch: polecat/rictus/gt-p7uq.2@mm5n58qa\ntarget: main\nsource_issue: gt-p7uq.2\nrig: gastown\nworker: rictus\nagent_bead: gt-gastown-polecat-rictus\nretry_count: 0\nlast_conflict_sha: null\nconflict_task_id: null", "status": "closed", "priority": 2, "issue_type": "task", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-28T01:51:26Z", "created_by": "gastown/polecats/rictus", "updated_at": "2026-02-28T02:04:26Z", "closed_at": "2026-02-28T02:04:26Z", "close_reason": "stale: branch has 0 commits ahead of main, all changes already in main", "labels": ["gt:merge-request"], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-wisp-71i6q", "title": "mol-refinery-patrol", "description": "Patrol report: Empty queue. Continuing patrol loop.", "status": "closed", "priority": 2, "issue_type": "epic", "assignee": "gastown/refinery", "created_at": "2026-02-28T01:06:15Z", "updated_at": "2026-02-28T01:06:24Z", "closed_at": "2026-02-28T01:06:24Z", "close_reason": "patrol cycle complete: Empty queue. Continuing patrol loop.", "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-wisp-73ee3", "title": "Clean up workspace", "description": "Ensure workspace is pristine before handoff.\n\n**IMPORTANT: Do NOT run `git push`. That is `gt done`'s job (next step).**\n**IMPORTANT: Do NOT discard implementation changes. They must already be committed.**\n\n**1. Check for untracked files:**\n```bash\ngit status --porcelain\n```\nShould be empty. If not:\n- Add to .gitignore if appropriate\n- Remove if temporary: `rm <file>`\n- Commit if needed: `git add <file> && git commit -m \"chore: add <file>\"`\n\n**2. Check stash:**\n```bash\ngit stash list\n```\nShould be empty. If not:\n- Pop and commit: `git stash pop && git add -A && git commit -m \"chore: unstash work (gt-p7uq.3)\"`\n- Or drop if truly garbage: `git stash drop`\n\n**3. Verify clean state and commits:**\n```bash\ngit status                  # Must show \"working tree clean\"\ngit stash list              # Must be empty\ngit log origin/main..HEAD   # Your commits (should show your work)\n```\n\nIf `git log origin/main..HEAD` shows nothing but you DID make changes,\nsomething went wrong. Do NOT proceed — mail Witness for help.\n\n**Exit criteria:** Workspace clean, no cruft, all work committed. Do NOT push — `gt done` handles that.", "status": "closed", "priority": 2, "issue_type": "task", "assignee": "gastown/polecats/slit", "created_at": "2026-02-28T01:50:20Z", "updated_at": "2026-02-28T01:56:08Z", "closed_at": "2026-02-28T01:56:08Z", "close_reason": "Closed", "dependencies": [{"issue_id": "gt-wisp-73ee3", "depends_on_id": "gt-wisp-bmfqr", "type": "parent-child", "created_at": "2026-02-27T17:50:19Z", "created_by": "mayor", "metadata": "{}"}, {"issue_id": "gt-wisp-73ee3", "depends_on_id": "gt-wisp-ewta5", "type": "blocks", "created_at": "2026-02-27T17:50:19Z", "created_by": "mayor", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-bmfqr"}
{"id": "gt-wisp-7ikv3", "title": "mol-refinery-patrol", "description": "Patrol report: Empty queue. No work arriving.", "status": "closed", "priority": 2, "issue_type": "epic", "assignee": "gastown/refinery", "created_at": "2026-02-28T01:06:34Z", "updated_at": "2026-02-28T01:06:44Z", "closed_at": "2026-02-28T01:06:44Z", "close_reason": "patrol cycle complete: Empty queue. No work arriving.", "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-wisp-7n2z2", "title": "Generate handoff summary", "description": "Summarize this patrol cycle.\n\n**VERIFICATION**: Before generating summary, confirm for each merged branch:\n- [ ] MERGED mail was sent to witness\n- [ ] MR bead was closed\n- [ ] MERGE_READY mail archived\n\nIf any notifications or archiving were missed, do them now!\n\nInclude in summary:\n- Branches merged (count, names)\n- MERGED mails sent (count - should match branches merged)\n- MR beads closed (count - should match branches merged)\n- MERGE_READY mails archived (count - should match branches merged)\n- Test results (pass/fail)\n- Branches with conflicts (count, names)\n- Conflict-resolution tasks created (IDs)\n- Issues filed (if any)\n- Any escalations sent\n\n**Conflict tracking is important** for monitoring MQ health. If many branches\nconflict, it may indicate main is moving too fast or branches are too stale.\n\nThis becomes the digest when the patrol is squashed.", "status": "closed", "priority": 2, "issue_type": "task", "assignee": "gastown/refinery", "created_at": "2026-02-28T01:51:04Z", "updated_at": "2026-02-28T02:04:38Z", "closed_at": "2026-02-28T02:04:38Z", "close_reason": "Closed", "dependencies": [{"issue_id": "gt-wisp-7n2z2", "depends_on_id": "gt-wisp-mv5zs", "type": "parent-child", "created_at": "2026-02-27T17:51:03Z", "created_by": "refinery", "metadata": "{}"}, {"issue_id": "gt-wisp-7n2z2", "depends_on_id": "gt-wisp-pvcbj", "type": "blocks", "created_at": "2026-02-27T17:51:03Z", "created_by": "refinery", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-mv5zs"}
{"id": "gt-wisp-7yib3", "title": "mol-polecat-work", "description": "Full polecat work lifecycle from assignment through completion.\n\nThis molecule guides a polecat through a complete work assignment. Each step\nhas clear entry/exit criteria and specific commands to run. A polecat can\ncrash after any step and resume from the last completed step.\n\n## Polecat Contract (Self-Cleaning Model)\n\nYou are a self-cleaning worker. You:\n1. Receive work via your hook (pinned molecule + issue)\n2. Work through molecule steps using `bd ready` / `bd close <step>`\n3. Complete and self-clean via `gt done` (submit + nuke yourself)\n4. You are GONE - Refinery merges from MQ\n\n**Self-cleaning:** When you run `gt done`, you push your work, submit to MQ,\nnuke your sandbox, and exit. There is no idle state. Done means gone.\n\n**Important:** This formula defines the template. Your molecule already has step\nbeads created from it. Use `bd ready` to find them - do NOT read this file directly.\n\n**You do NOT:**\n- Push directly to main (Refinery merges from MQ)\n- Close your own issue (Refinery closes after merge)\n- Wait for merge (you're gone after `gt done`)\n- Handle rebase conflicts (Refinery spawns fresh polecats for that)\n\n## Variables\n\n| Variable | Source | Description |\n|----------|--------|-------------|\n| issue | hook_bead | The issue ID you're assigned to work on |\n\n## Failure Modes\n\n| Situation | Action |\n|-----------|--------|\n| Tests fail | Fix them. Do not proceed with failures. |\n| Blocked on external | Mail Witness for help, mark yourself stuck |\n| Context filling | Use gt handoff to cycle to fresh session |\n| Unsure what to do | Mail Witness, don't guess |", "status": "closed", "priority": 2, "issue_type": "epic", "created_at": "2026-02-28T01:27:13Z", "updated_at": "2026-02-28T01:52:23Z", "closed_at": "2026-02-28T01:52:23Z", "close_reason": "burned: polecat nuked", "ephemeral": true, "dependency_count": 0, "dependent_count": 1, "comment_count": 0}
{"id": "gt-wisp-7ykpr", "title": "Submit work and self-clean", "description": "Submit your work and clean up. You cease to exist after this step.\n\n**Self-Cleaning Model:**\nOnce you run `gt done`, you're gone. The command:\n1. Pushes your branch to origin\n2. Creates an MR bead in the merge queue\n3. Nukes your sandbox (worktree removal)\n4. Exits your session immediately\n\n**Run gt done:**\n```bash\ngt done\n```\n\nYou should see output like:\n```\n✓ Work submitted to merge queue\n  MR ID: gt-xxxxx\n  Source: polecat/<name>\n  Target: main\n  Issue: gt-p7uq.3\n✓ Sandbox nuked\n✓ Session exiting\n```\n\n**What happens next (not your concern):**\n- Refinery processes your MR from the queue\n- Refinery rebases and merges to main\n- Refinery closes the issue\n- If conflicts: Refinery spawns a FRESH polecat to re-implement\n\nYou are NOT involved in any of that. You're gone. Done means gone.\n\n**Exit criteria:** Work submitted, sandbox nuked, session exited.", "status": "closed", "priority": 2, "issue_type": "task", "assignee": "gastown/polecats/slit", "created_at": "2026-02-28T01:50:20Z", "updated_at": "2026-02-28T01:56:22Z", "closed_at": "2026-02-28T01:56:22Z", "close_reason": "Closed", "dependencies": [{"issue_id": "gt-wisp-7ykpr", "depends_on_id": "gt-wisp-bmfqr", "type": "parent-child", "created_at": "2026-02-27T17:50:19Z", "created_by": "mayor", "metadata": "{}"}, {"issue_id": "gt-wisp-7ykpr", "depends_on_id": "gt-wisp-o17n0", "type": "blocks", "created_at": "2026-02-27T17:50:19Z", "created_by": "mayor", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-bmfqr"}
{"id": "gt-wisp-7z9k", "title": "mol-refinery-patrol", "description": "Patrol report: Empty queue. No work.", "status": "closed", "priority": 2, "issue_type": "epic", "assignee": "gastown/refinery", "created_at": "2026-02-28T00:54:02Z", "updated_at": "2026-02-28T00:54:16Z", "closed_at": "2026-02-28T00:54:16Z", "close_reason": "patrol cycle complete: Empty queue. No work.", "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-wisp-80zrp", "title": "mol-refinery-patrol", "description": "Patrol report: Empty queue. Continuing.", "status": "closed", "priority": 2, "issue_type": "epic", "assignee": "gastown/refinery", "created_at": "2026-02-28T01:05:01Z", "updated_at": "2026-02-28T01:05:10Z", "closed_at": "2026-02-28T01:05:10Z", "close_reason": "patrol cycle complete: Empty queue. Continuing.", "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-wisp-81vbs", "title": "Self-review changes", "description": "Review your own changes before running tests.\n\n**1. Review the diff:**\n```bash\ngit diff origin/main...HEAD     # All changes vs main\ngit log --oneline origin/main..HEAD  # All commits\n```\n\n**2. Check for common issues:**\n\n| Category | Look For |\n|----------|----------|\n| Bugs | Off-by-one, null handling, edge cases |\n| Security | Injection, auth bypass, exposed secrets |\n| Style | Naming, formatting, code organization |\n| Completeness | Missing error handling, incomplete paths |\n| Cruft | Debug prints, commented code, TODOs |\n\n**3. Fix issues found:**\nDon't just note them - fix them now. Amend or add commits as needed.\n\n**4. Verify no unintended changes:**\n```bash\ngit diff --stat origin/main...HEAD\n# Only files relevant to gt-w0br should appear\n```\n\nIf you accidentally modified unrelated files, remove those changes.\n\n**Exit criteria:** Changes are clean, reviewed, and ready for testing.", "status": "closed", "priority": 2, "issue_type": "task", "created_at": "2026-02-28T01:40:24Z", "updated_at": "2026-02-28T01:49:54Z", "closed_at": "2026-02-28T01:49:54Z", "close_reason": "Closed", "dependencies": [{"issue_id": "gt-wisp-81vbs", "depends_on_id": "gt-wisp-8ch3f", "type": "blocks", "created_at": "2026-02-27T17:40:24Z", "created_by": "dog", "metadata": "{}"}, {"issue_id": "gt-wisp-81vbs", "depends_on_id": "gt-wisp-ufzcr", "type": "parent-child", "created_at": "2026-02-27T17:40:23Z", "created_by": "dog", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-ufzcr"}
{"id": "gt-wisp-84wyv", "title": "mol-refinery-patrol", "description": "Patrol report: Empty queue. Continuing.", "status": "closed", "priority": 2, "issue_type": "epic", "assignee": "gastown/refinery", "created_at": "2026-02-28T01:07:13Z", "updated_at": "2026-02-28T01:07:22Z", "closed_at": "2026-02-28T01:07:22Z", "close_reason": "patrol cycle complete: Empty queue. Continuing.", "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-wisp-8520e", "title": "Check own context limit", "description": "Check own context usage.\n\nIf context is HIGH (>80%):\n- Write handoff summary\n- Prepare for burn/respawn\n\nIf context is LOW:\n- Can continue processing", "status": "closed", "priority": 2, "issue_type": "task", "assignee": "gastown/refinery", "created_at": "2026-02-28T01:51:04Z", "updated_at": "2026-02-28T02:04:52Z", "closed_at": "2026-02-28T02:04:52Z", "close_reason": "Closed", "dependencies": [{"issue_id": "gt-wisp-8520e", "depends_on_id": "gt-wisp-7n2z2", "type": "blocks", "created_at": "2026-02-27T17:51:03Z", "created_by": "refinery", "metadata": "{}"}, {"issue_id": "gt-wisp-8520e", "depends_on_id": "gt-wisp-mv5zs", "type": "parent-child", "created_at": "2026-02-27T17:51:03Z", "created_by": "refinery", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-mv5zs"}
{"id": "gt-wisp-895tt", "title": "mol-refinery-patrol", "description": "Patrol report: Empty queue cycle. No MERGE_READY signals. Inbox archived. Session healthy (RSS 3MB).", "status": "closed", "priority": 2, "issue_type": "epic", "assignee": "gastown/refinery", "created_at": "2026-02-28T02:34:27Z", "updated_at": "2026-02-28T03:00:29Z", "closed_at": "2026-02-28T03:00:29Z", "close_reason": "patrol cycle complete: Empty queue cycle. No MERGE_READY signals. Inbox archived. Session healthy (RSS 3MB).", "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-wisp-8bff", "title": "mol-refinery-patrol", "description": "Patrol report: Empty queue. Continuing patrol loop.", "status": "closed", "priority": 2, "issue_type": "epic", "assignee": "gastown/refinery", "created_at": "2026-02-28T01:00:45Z", "updated_at": "2026-02-28T01:00:55Z", "closed_at": "2026-02-28T01:00:55Z", "close_reason": "patrol cycle complete: Empty queue. Continuing patrol loop.", "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-wisp-8ch3f", "title": "Implement the solution", "description": "Do the actual implementation work.\n\n**Working principles:**\n- Follow existing codebase conventions\n- Make atomic, focused commits\n- Keep changes scoped to the assigned issue\n- Don't gold-plate or scope-creep\n\n**Commit frequently:**\n```bash\n# After each logical unit of work:\ngit add <files>\ngit commit -m \"<type>: <description> (gt-w0br)\"\n```\n\nCommit types: feat, fix, refactor, test, docs, chore\n\n**Discovered work:**\nIf you find bugs or improvements outside your scope:\n```bash\nbd create --title \"Found: <description>\" --type bug --priority 2\n# Note the ID, continue with your work\n```\n\nDo NOT fix unrelated issues in this branch.\n\n**If stuck:**\nDon't spin for more than 15 minutes. Mail Witness:\n```bash\ngt mail send <rig>/witness -s \"HELP: Stuck on implementation\" -m \"Issue: gt-w0br\nTrying to: <what you're attempting>\nProblem: <what's blocking you>\nTried: <what you've attempted>\"\n```\n\n**Exit criteria:** Implementation complete, all changes committed.", "status": "closed", "priority": 2, "issue_type": "task", "assignee": "gastown/polecats/nux", "created_at": "2026-02-28T01:40:24Z", "updated_at": "2026-02-28T01:49:27Z", "closed_at": "2026-02-28T01:49:27Z", "close_reason": "Closed", "dependencies": [{"issue_id": "gt-wisp-8ch3f", "depends_on_id": "gt-wisp-b2v8r", "type": "blocks", "created_at": "2026-02-27T17:40:24Z", "created_by": "dog", "metadata": "{}"}, {"issue_id": "gt-wisp-8ch3f", "depends_on_id": "gt-wisp-ufzcr", "type": "parent-child", "created_at": "2026-02-27T17:40:23Z", "created_by": "dog", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-ufzcr"}
{"id": "gt-wisp-8fv11", "title": "mol-refinery-patrol", "description": "Patrol report: Empty queue. Standing by.", "status": "closed", "priority": 2, "issue_type": "epic", "assignee": "gastown/refinery", "created_at": "2026-02-28T01:05:10Z", "updated_at": "2026-02-28T01:05:19Z", "closed_at": "2026-02-28T01:05:19Z", "close_reason": "patrol cycle complete: Empty queue. Standing by.", "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-wisp-8l8k", "title": "mol-refinery-patrol", "description": "Patrol report: Empty queue cycle #21. Twenty-one idle cycles. Continuing patrol.", "status": "closed", "priority": 2, "issue_type": "epic", "assignee": "gastown/refinery", "created_at": "2026-02-28T00:50:03Z", "updated_at": "2026-02-28T00:50:11Z", "closed_at": "2026-02-28T00:50:11Z", "close_reason": "patrol cycle complete: Empty queue cycle #21. Twenty-one idle cycles. Continuing patrol.", "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-wisp-9a04v", "title": "Commit all implementation changes", "description": "Ensure ALL implementation work is committed before cleanup.\n\n**CRITICAL: You MUST commit all changes from implementation.**\nNEVER use `git checkout -- .` or `git restore .` to discard implementation work.\nALWAYS commit ALL uncommitted changes from your implementation.\n\n**1. Check for uncommitted changes:**\n```bash\ngit status\n```\n\n**2. If there are ANY uncommitted changes, commit them now:**\n```bash\ngit add -A && git commit -m \"<type>: <descriptive message> (gt-i6yv)\"\n```\n\n**3. If working tree is already clean, skip.**\n\n**4. VERIFY:**\n```bash\ngit status\n```\nMust show \"nothing to commit, working tree clean\".\n\n**5. Verify you have commits:**\n```bash\ngit log origin/main..HEAD --oneline\n```\nIf you made changes during implementation, this MUST show at least 1 commit.\n\n**Exit criteria:** All changes committed. Working tree clean.", "status": "open", "priority": 2, "issue_type": "task", "created_at": "2026-02-28T01:50:09Z", "updated_at": "2026-02-28T01:50:09Z", "dependencies": [{"issue_id": "gt-wisp-9a04v", "depends_on_id": "gt-wisp-fzhvd", "type": "parent-child", "created_at": "2026-02-27T17:50:09Z", "created_by": "mayor", "metadata": "{}"}, {"issue_id": "gt-wisp-9a04v", "depends_on_id": "gt-wisp-jvhvm", "type": "blocks", "created_at": "2026-02-27T17:50:09Z", "created_by": "mayor", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-fzhvd"}
{"id": "gt-wisp-9kb2q", "title": "Burn and respawn or loop", "description": "End of patrol cycle decision.\n\n**Step 1: Estimate remaining context**\n\nAsk yourself:\n- Have I processed many branches this cycle?\n- Is the conversation getting long?\n- Am I starting to lose track of earlier context?\n\nRule of thumb: If you've done 3+ merges or processed significant cleanup work,\nit's time for a fresh session.\n\n**Step 2: Decision tree**\n\nIf queue non-empty AND context LOW:\n- Squash this wisp to digest\n- Spawn fresh patrol wisp\n- Return to inbox-check\n\nIf queue empty OR context HIGH OR good stopping point:\n- Squash wisp with summary digest\n- Use `gt handoff` for clean session transition:\n\n```bash\ngt handoff -s \"Patrol complete\" -m \"Merged X branches, Y tests passed.\nQueue: empty/N remaining\nNext: [any notes for successor]\"\n```\n\n**Why gt handoff?**\n- Sends handoff mail to yourself with context\n- Respawns with fresh Claude instance\n- SessionStart hook runs gt prime\n- Successor picks up from your hook\n\n**DO NOT just exit.** Always use `gt handoff` for proper lifecycle.", "status": "closed", "priority": 2, "issue_type": "task", "created_at": "2026-02-28T01:51:04Z", "updated_at": "2026-02-28T02:04:53Z", "closed_at": "2026-02-28T02:04:53Z", "close_reason": "Closed", "dependencies": [{"issue_id": "gt-wisp-9kb2q", "depends_on_id": "gt-wisp-mv5zs", "type": "parent-child", "created_at": "2026-02-27T17:51:03Z", "created_by": "refinery", "metadata": "{}"}, {"issue_id": "gt-wisp-9kb2q", "depends_on_id": "gt-wisp-rrgx6", "type": "blocks", "created_at": "2026-02-27T17:51:03Z", "created_by": "refinery", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-mv5zs"}
{"id": "gt-wisp-9vcb0", "title": "Run tests and verify coverage", "description": "Verify your changes don't break anything and are properly tested.\n\n**1. Run the full test suite:**\n```bash\ngo test ./...               # For Go projects\n# Or appropriate command for your stack\n```\n\n**ALL TESTS MUST PASS.** Do not proceed with failures.\n\n**2. If tests fail:**\n- Read the failure output carefully\n- Determine if your change caused it:\n  - If yes: Fix it. Return to implement step if needed.\n  - If no (pre-existing): File a bead, but still must pass for your PR\n\n```bash\n# Check if failure exists on main:\ngit stash\ngit checkout main\ngo test ./...\ngit checkout -\ngit stash pop\n```\n\n**3. Verify test coverage for new code:**\n- New features should have tests\n- Bug fixes should have regression tests\n- If you added significant code without tests, add them now\n\n**4. Run any other quality checks:**\n```bash\n# Linting (if configured)\ngolangci-lint run ./...\n\n# Build check\ngo build ./...\n```\n\n**Exit criteria:** All tests pass, new code has appropriate test coverage.", "status": "closed", "priority": 2, "issue_type": "task", "assignee": "gastown/polecats/slit", "created_at": "2026-02-28T01:50:20Z", "updated_at": "2026-02-28T01:55:22Z", "closed_at": "2026-02-28T01:55:22Z", "close_reason": "Closed", "dependencies": [{"issue_id": "gt-wisp-9vcb0", "depends_on_id": "gt-wisp-bmfqr", "type": "parent-child", "created_at": "2026-02-27T17:50:19Z", "created_by": "mayor", "metadata": "{}"}, {"issue_id": "gt-wisp-9vcb0", "depends_on_id": "gt-wisp-pxt5p", "type": "blocks", "created_at": "2026-02-27T17:50:19Z", "created_by": "mayor", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-bmfqr"}
{"id": "gt-wisp-a9dse", "title": "rebuild-gt: build succeeded", "description": "Rebuilt gt binary: 4d3098a8 → 5f2a8a93 (3 commits)", "status": "open", "priority": 2, "issue_type": "chore", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-28T01:40:24Z", "created_by": "dog", "updated_at": "2026-02-28T01:40:24Z", "labels": ["plugin:rebuild-gt", "result:success", "rig:gastown", "type:plugin-run"], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-wisp-ad95", "title": "mol-polecat-work", "description": "Full polecat work lifecycle from assignment through completion.\n\nThis molecule guides a polecat through a complete work assignment. Each step\nhas clear entry/exit criteria and specific commands to run. A polecat can\ncrash after any step and resume from the last completed step.\n\n## Polecat Contract (Self-Cleaning Model)\n\nYou are a self-cleaning worker. You:\n1. Receive work via your hook (pinned molecule + issue)\n2. Work through molecule steps using `bd ready` / `bd close <step>`\n3. Complete and self-clean via `gt done` (submit + nuke yourself)\n4. You are GONE - Refinery merges from MQ\n\n**Self-cleaning:** When you run `gt done`, you push your work, submit to MQ,\nnuke your sandbox, and exit. There is no idle state. Done means gone.\n\n**Important:** This formula defines the template. Your molecule already has step\nbeads created from it. Use `bd ready` to find them - do NOT read this file directly.\n\n**You do NOT:**\n- Push directly to main (Refinery merges from MQ)\n- Close your own issue (Refinery closes after merge)\n- Wait for merge (you're gone after `gt done`)\n- Handle rebase conflicts (Refinery spawns fresh polecats for that)\n\n## Variables\n\n| Variable | Source | Description |\n|----------|--------|-------------|\n| issue | hook_bead | The issue ID you're assigned to work on |\n\n## Failure Modes\n\n| Situation | Action |\n|-----------|--------|\n| Tests fail | Fix them. Do not proceed with failures. |\n| Blocked on external | Mail Witness for help, mark yourself stuck |\n| Context filling | Use gt handoff to cycle to fresh session |\n| Unsure what to do | Mail Witness, don't guess |", "status": "closed", "priority": 2, "issue_type": "epic", "created_at": "2026-02-28T00:26:22Z", "updated_at": "2026-02-28T00:43:36Z", "closed_at": "2026-02-28T00:43:36Z", "close_reason": "burned: polecat nuked", "ephemeral": true, "dependency_count": 0, "dependent_count": 1, "comment_count": 0}
{"id": "gt-wisp-afztm", "title": "Run test suite", "description": "Run the test suite.\n\n```bash\ngo test ./...\n```\n\nTrack results: pass count, fail count, specific failures.", "status": "closed", "priority": 2, "issue_type": "task", "assignee": "gastown/refinery", "created_at": "2026-02-28T01:51:04Z", "updated_at": "2026-02-28T02:02:03Z", "closed_at": "2026-02-28T02:02:03Z", "close_reason": "Closed", "dependencies": [{"issue_id": "gt-wisp-afztm", "depends_on_id": "gt-wisp-11x74", "type": "blocks", "created_at": "2026-02-27T17:51:03Z", "created_by": "refinery", "metadata": "{}"}, {"issue_id": "gt-wisp-afztm", "depends_on_id": "gt-wisp-mv5zs", "type": "parent-child", "created_at": "2026-02-27T17:51:03Z", "created_by": "refinery", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-mv5zs"}
{"id": "gt-wisp-apjh", "title": "mol-refinery-patrol", "description": "Patrol report: Empty queue. Standing by.", "status": "closed", "priority": 2, "issue_type": "epic", "assignee": "gastown/refinery", "created_at": "2026-02-28T00:54:29Z", "updated_at": "2026-02-28T00:54:42Z", "closed_at": "2026-02-28T00:54:42Z", "close_reason": "patrol cycle complete: Empty queue. Standing by.", "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-wisp-aru1u", "title": "mol-refinery-patrol", "description": "Patrol report: Queue empty, no merges. Polecat slit working on gt-0jh0 (test failure bug), polecat nux on gt-lpop. Awaiting MR submissions.", "status": "closed", "priority": 2, "issue_type": "epic", "assignee": "gastown/refinery", "created_at": "2026-02-28T02:11:22Z", "updated_at": "2026-02-28T02:11:46Z", "closed_at": "2026-02-28T02:11:46Z", "close_reason": "patrol cycle complete: Queue empty, no merges. Polecat slit working on gt-0jh0 (test failure bug), polecat nux on gt-lpop. Awaiting MR submissions.", "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-wisp-ausw", "title": "mol-refinery-patrol", "description": "Patrol report: Empty queue cycle #20. Twenty idle cycles, RSS 3MB. Queue persistently empty, no polecat work incoming. Session healthy.", "status": "closed", "priority": 2, "issue_type": "epic", "assignee": "gastown/refinery", "created_at": "2026-02-28T00:49:47Z", "updated_at": "2026-02-28T00:50:02Z", "closed_at": "2026-02-28T00:50:02Z", "close_reason": "patrol cycle complete: Empty queue cycle #20. Twenty idle cycles, RSS 3MB. Queue persistently empty, no polecat work incoming. Session healthy.", "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-wisp-b2v8r", "title": "Verify tests pass on main", "description": "Check if the codebase is healthy BEFORE starting your work.\n\n**The Scotty Principle:** Don't walk past a broken warp core. But also don't\nlet someone else's mess consume your entire mission.\n\n**1. Check tests on main:**\n```bash\ngit stash                   # Save your branch state\ngit checkout origin/main\ngo test ./...               # Or appropriate test command\n```\n\n**2. If tests PASS:**\n```bash\ngit checkout -              # Back to your branch\ngit stash pop               # Restore state\n```\nContinue to implement step.\n\n**3. If tests FAIL on main:**\n\nFile a bead and proceed. Do NOT fix pre-existing failures yourself — that is\nnot your assignment. Your job is to fix the issue on your hook, not main.\n\n| Situation | Action |\n|-----------|--------|\n| Any pre-existing failure | File bead, proceed with your work |\n\nFORBIDDEN: Pushing to main. FORBIDDEN: Fixing pre-existing failures.\nYou work on YOUR feature branch only. `gt done` handles push/MR.\n\n**File and proceed path:**\n```bash\nbd create --title \"Pre-existing test failure: <description>\" --type bug --priority 1\n\ngt mail send <rig>/witness -s \"NOTICE: Main has failing tests\" -m \"Found pre-existing test failures on main.\nFiled: <bead-id>\nProceeding with my assigned work (gt-w0br).\"\n\ngit checkout -\ngit stash pop\n```\n\n**Context consideration:**\nIf fixing pre-existing failures consumed significant context:\n```bash\ngt handoff -s \"Fixed pre-existing failures, ready for assigned work\" -m \"Issue: gt-w0br\nFixed: <what you fixed>\nReady to start: implement step\"\n```\nFresh session continues from implement.\n\n**Exit criteria:** Tests pass on main (or issue filed), ready to implement.", "status": "closed", "priority": 2, "issue_type": "task", "created_at": "2026-02-28T01:40:24Z", "updated_at": "2026-02-28T01:41:26Z", "closed_at": "2026-02-28T01:41:26Z", "close_reason": "Closed", "dependencies": [{"issue_id": "gt-wisp-b2v8r", "depends_on_id": "gt-wisp-ufzcr", "type": "parent-child", "created_at": "2026-02-27T17:40:23Z", "created_by": "dog", "metadata": "{}"}, {"issue_id": "gt-wisp-b2v8r", "depends_on_id": "gt-wisp-xymoy", "type": "blocks", "created_at": "2026-02-27T17:40:24Z", "created_by": "dog", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-ufzcr"}
{"id": "gt-wisp-b5sw7", "title": "mol-polecat-work", "description": "Full polecat work lifecycle from assignment through completion.\n\nThis molecule guides a polecat through a complete work assignment. Each step\nhas clear entry/exit criteria and specific commands to run. A polecat can\ncrash after any step and resume from the last completed step.\n\n## Polecat Contract (Self-Cleaning Model)\n\nYou are a self-cleaning worker. You:\n1. Receive work via your hook (pinned molecule + issue)\n2. Work through molecule steps using `bd ready` / `bd close <step>`\n3. Complete and self-clean via `gt done` (submit + nuke yourself)\n4. You are GONE - Refinery merges from MQ\n\n**Self-cleaning:** When you run `gt done`, you push your work, submit to MQ,\nnuke your sandbox, and exit. There is no idle state. Done means gone.\n\n**Important:** This formula defines the template. Your molecule already has step\nbeads created from it. Use `bd ready` to find them - do NOT read this file directly.\n\n**You do NOT:**\n- Push directly to main (Refinery merges from MQ)\n- Close your own issue (Refinery closes after merge)\n- Wait for merge (you're gone after `gt done`)\n- Handle rebase conflicts (Refinery spawns fresh polecats for that)\n\n## Variables\n\n| Variable | Source | Description |\n|----------|--------|-------------|\n| issue | hook_bead | The issue ID you're assigned to work on |\n\n## Failure Modes\n\n| Situation | Action |\n|-----------|--------|\n| Tests fail | Fix them. Do not proceed with failures. |\n| Blocked on external | Mail Witness for help, mark yourself stuck |\n| Context filling | Use gt handoff to cycle to fresh session |\n| Unsure what to do | Mail Witness, don't guess |", "status": "closed", "priority": 2, "issue_type": "epic", "created_at": "2026-02-28T02:08:08Z", "updated_at": "2026-02-28T02:16:26Z", "closed_at": "2026-02-28T02:16:26Z", "close_reason": "burned: polecat nuked", "ephemeral": true, "dependency_count": 0, "dependent_count": 1, "comment_count": 0}
{"id": "gt-wisp-bghw", "title": "mol-polecat-work", "description": "Full polecat work lifecycle from assignment through completion.\n\nThis molecule guides a polecat through a complete work assignment. Each step\nhas clear entry/exit criteria and specific commands to run. A polecat can\ncrash after any step and resume from the last completed step.\n\n## Polecat Contract (Self-Cleaning Model)\n\nYou are a self-cleaning worker. You:\n1. Receive work via your hook (pinned molecule + issue)\n2. Work through molecule steps using `bd ready` / `bd close <step>`\n3. Complete and self-clean via `gt done` (submit + nuke yourself)\n4. You are GONE - Refinery merges from MQ\n\n**Self-cleaning:** When you run `gt done`, you push your work, submit to MQ,\nnuke your sandbox, and exit. There is no idle state. Done means gone.\n\n**Important:** This formula defines the template. Your molecule already has step\nbeads created from it. Use `bd ready` to find them - do NOT read this file directly.\n\n**You do NOT:**\n- Push directly to main (Refinery merges from MQ)\n- Close your own issue (Refinery closes after merge)\n- Wait for merge (you're gone after `gt done`)\n- Handle rebase conflicts (Refinery spawns fresh polecats for that)\n\n## Variables\n\n| Variable | Source | Description |\n|----------|--------|-------------|\n| issue | hook_bead | The issue ID you're assigned to work on |\n\n## Failure Modes\n\n| Situation | Action |\n|-----------|--------|\n| Tests fail | Fix them. Do not proceed with failures. |\n| Blocked on external | Mail Witness for help, mark yourself stuck |\n| Context filling | Use gt handoff to cycle to fresh session |\n| Unsure what to do | Mail Witness, don't guess |", "status": "closed", "priority": 2, "issue_type": "epic", "created_at": "2026-02-28T00:47:25Z", "updated_at": "2026-02-28T01:21:32Z", "closed_at": "2026-02-28T01:21:32Z", "close_reason": "burned: force re-sling", "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-wisp-bmeai", "title": "Commit all implementation changes", "description": "Ensure ALL implementation work is committed before cleanup.\n\n**CRITICAL: You MUST commit all changes from implementation.**\nNEVER use `git checkout -- .` or `git restore .` to discard implementation work.\nALWAYS commit ALL uncommitted changes from your implementation.\n\n**1. Check for uncommitted changes:**\n```bash\ngit status\n```\n\n**2. If there are ANY uncommitted changes, commit them now:**\n```bash\ngit add -A && git commit -m \"<type>: <descriptive message> (gt-w0br)\"\n```\n\n**3. If working tree is already clean, skip.**\n\n**4. VERIFY:**\n```bash\ngit status\n```\nMust show \"nothing to commit, working tree clean\".\n\n**5. Verify you have commits:**\n```bash\ngit log origin/main..HEAD --oneline\n```\nIf you made changes during implementation, this MUST show at least 1 commit.\n\n**Exit criteria:** All changes committed. Working tree clean.", "status": "closed", "priority": 2, "issue_type": "task", "created_at": "2026-02-28T01:40:24Z", "updated_at": "2026-02-28T01:50:43Z", "closed_at": "2026-02-28T01:50:43Z", "close_reason": "Closed", "dependencies": [{"issue_id": "gt-wisp-bmeai", "depends_on_id": "gt-wisp-h9wak", "type": "blocks", "created_at": "2026-02-27T17:40:24Z", "created_by": "dog", "metadata": "{}"}, {"issue_id": "gt-wisp-bmeai", "depends_on_id": "gt-wisp-ufzcr", "type": "parent-child", "created_at": "2026-02-27T17:40:23Z", "created_by": "dog", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-ufzcr"}
{"id": "gt-wisp-bmfqr", "title": "mol-polecat-work", "description": "Full polecat work lifecycle from assignment through completion.\n\nThis molecule guides a polecat through a complete work assignment. Each step\nhas clear entry/exit criteria and specific commands to run. A polecat can\ncrash after any step and resume from the last completed step.\n\n## Polecat Contract (Self-Cleaning Model)\n\nYou are a self-cleaning worker. You:\n1. Receive work via your hook (pinned molecule + issue)\n2. Work through molecule steps using `bd ready` / `bd close <step>`\n3. Complete and self-clean via `gt done` (submit + nuke yourself)\n4. You are GONE - Refinery merges from MQ\n\n**Self-cleaning:** When you run `gt done`, you push your work, submit to MQ,\nnuke your sandbox, and exit. There is no idle state. Done means gone.\n\n**Important:** This formula defines the template. Your molecule already has step\nbeads created from it. Use `bd ready` to find them - do NOT read this file directly.\n\n**You do NOT:**\n- Push directly to main (Refinery merges from MQ)\n- Close your own issue (Refinery closes after merge)\n- Wait for merge (you're gone after `gt done`)\n- Handle rebase conflicts (Refinery spawns fresh polecats for that)\n\n## Variables\n\n| Variable | Source | Description |\n|----------|--------|-------------|\n| issue | hook_bead | The issue ID you're assigned to work on |\n\n## Failure Modes\n\n| Situation | Action |\n|-----------|--------|\n| Tests fail | Fix them. Do not proceed with failures. |\n| Blocked on external | Mail Witness for help, mark yourself stuck |\n| Context filling | Use gt handoff to cycle to fresh session |\n| Unsure what to do | Mail Witness, don't guess |", "status": "closed", "priority": 2, "issue_type": "epic", "created_at": "2026-02-28T01:50:20Z", "updated_at": "2026-02-28T01:58:11Z", "closed_at": "2026-02-28T01:58:11Z", "close_reason": "burned: polecat nuked", "ephemeral": true, "dependency_count": 0, "dependent_count": 1, "comment_count": 0}
{"id": "gt-wisp-booj6", "title": "Set up working branch", "description": "Ensure you're on a clean feature branch ready for work.\n\n**1. Check current branch state:**\n```bash\ngit status\ngit branch --show-current\n```\n\n**2. If not on a feature branch, create one:**\n```bash\n# Standard naming: polecat/<your-name> or feature/<issue-id>\ngit checkout -b polecat/<name>\n```\n\n**3. Ensure clean working state:**\n```bash\ngit status                  # Should show \"working tree clean\"\ngit stash list              # Should be empty\n```\n\nIf dirty state from previous work:\n```bash\n# If changes are relevant to this issue:\ngit add -A && git commit -m \"WIP: <description>\"\n\n# If changes are unrelated cruft:\ngit stash push -m \"unrelated changes before gt-p7uq.3\"\n# Or discard if truly garbage:\ngit checkout -- .\n```\n\n**4. Sync with main:**\n```bash\ngit fetch origin\ngit rebase origin/main      # Get latest, rebase your branch\n```\n\nIf rebase conflicts:\n- Resolve them carefully\n- Test after resolution\n- If stuck, mail Witness\n\n**Exit criteria:** You're on a clean feature branch, rebased on latest main.", "status": "closed", "priority": 2, "issue_type": "task", "assignee": "gastown/polecats/slit", "created_at": "2026-02-28T01:50:20Z", "updated_at": "2026-02-28T01:52:18Z", "closed_at": "2026-02-28T01:52:18Z", "close_reason": "Closed", "dependencies": [{"issue_id": "gt-wisp-booj6", "depends_on_id": "gt-wisp-4od8j", "type": "blocks", "created_at": "2026-02-27T17:50:19Z", "created_by": "mayor", "metadata": "{}"}, {"issue_id": "gt-wisp-booj6", "depends_on_id": "gt-wisp-bmfqr", "type": "parent-child", "created_at": "2026-02-27T17:50:19Z", "created_by": "mayor", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-bmfqr"}
{"id": "gt-wisp-bxzkx", "title": "mol-polecat-work", "description": "Full polecat work lifecycle from assignment through completion.\n\nThis molecule guides a polecat through a complete work assignment. Each step\nhas clear entry/exit criteria and specific commands to run. A polecat can\ncrash after any step and resume from the last completed step.\n\n## Polecat Contract (Self-Cleaning Model)\n\nYou are a self-cleaning worker. You:\n1. Receive work via your hook (pinned molecule + issue)\n2. Work through molecule steps using `bd ready` / `bd close <step>`\n3. Complete and self-clean via `gt done` (submit + nuke yourself)\n4. You are GONE - Refinery merges from MQ\n\n**Self-cleaning:** When you run `gt done`, you push your work, submit to MQ,\nnuke your sandbox, and exit. There is no idle state. Done means gone.\n\n**Important:** This formula defines the template. Your molecule already has step\nbeads created from it. Use `bd ready` to find them - do NOT read this file directly.\n\n**You do NOT:**\n- Push directly to main (Refinery merges from MQ)\n- Close your own issue (Refinery closes after merge)\n- Wait for merge (you're gone after `gt done`)\n- Handle rebase conflicts (Refinery spawns fresh polecats for that)\n\n## Variables\n\n| Variable | Source | Description |\n|----------|--------|-------------|\n| issue | hook_bead | The issue ID you're assigned to work on |\n\n## Failure Modes\n\n| Situation | Action |\n|-----------|--------|\n| Tests fail | Fix them. Do not proceed with failures. |\n| Blocked on external | Mail Witness for help, mark yourself stuck |\n| Context filling | Use gt handoff to cycle to fresh session |\n| Unsure what to do | Mail Witness, don't guess |", "status": "closed", "priority": 2, "issue_type": "epic", "created_at": "2026-02-28T02:10:32Z", "updated_at": "2026-02-28T02:17:32Z", "closed_at": "2026-02-28T02:17:32Z", "close_reason": "burned: polecat nuked", "ephemeral": true, "dependency_count": 0, "dependent_count": 1, "comment_count": 0}
{"id": "gt-wisp-c57i", "title": "mol-refinery-patrol", "description": "Patrol report: Empty queue. No work arriving.", "status": "closed", "priority": 2, "issue_type": "epic", "assignee": "gastown/refinery", "created_at": "2026-02-28T00:54:54Z", "updated_at": "2026-02-28T00:55:05Z", "closed_at": "2026-02-28T00:55:05Z", "close_reason": "patrol cycle complete: Empty queue. No work arriving.", "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-wisp-cawbn", "title": "mol-refinery-patrol", "description": "Patrol report: Queue empty, no merges.", "status": "closed", "priority": 2, "issue_type": "epic", "assignee": "gastown/refinery", "created_at": "2026-02-28T02:12:18Z", "updated_at": "2026-02-28T02:12:28Z", "closed_at": "2026-02-28T02:12:28Z", "close_reason": "patrol cycle complete: Queue empty, no merges.", "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-wisp-ceiib", "title": "Implement the solution", "description": "Do the actual implementation work.\n\n**Working principles:**\n- Follow existing codebase conventions\n- Make atomic, focused commits\n- Keep changes scoped to the assigned issue\n- Don't gold-plate or scope-creep\n\n**Commit frequently:**\n```bash\n# After each logical unit of work:\ngit add <files>\ngit commit -m \"<type>: <description> (gt-a6gp)\"\n```\n\nCommit types: feat, fix, refactor, test, docs, chore\n\n**Discovered work:**\nIf you find bugs or improvements outside your scope:\n```bash\nbd create --title \"Found: <description>\" --type bug --priority 2\n# Note the ID, continue with your work\n```\n\nDo NOT fix unrelated issues in this branch.\n\n**If stuck:**\nDon't spin for more than 15 minutes. Mail Witness:\n```bash\ngt mail send <rig>/witness -s \"HELP: Stuck on implementation\" -m \"Issue: gt-a6gp\nTrying to: <what you're attempting>\nProblem: <what's blocking you>\nTried: <what you've attempted>\"\n```\n\n**Exit criteria:** Implementation complete, all changes committed.", "status": "open", "priority": 2, "issue_type": "task", "created_at": "2026-02-28T01:44:54Z", "updated_at": "2026-02-28T01:44:54Z", "dependencies": [{"issue_id": "gt-wisp-ceiib", "depends_on_id": "gt-wisp-5b73d", "type": "blocks", "created_at": "2026-02-27T17:44:54Z", "created_by": "dog", "metadata": "{}"}, {"issue_id": "gt-wisp-ceiib", "depends_on_id": "gt-wisp-spqdu", "type": "parent-child", "created_at": "2026-02-27T17:44:54Z", "created_by": "dog", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-spqdu"}
{"id": "gt-wisp-csvb", "title": "mol-refinery-patrol", "description": "Patrol report: Empty queue. Idle.", "status": "closed", "priority": 2, "issue_type": "epic", "assignee": "gastown/refinery", "created_at": "2026-02-28T01:00:35Z", "updated_at": "2026-02-28T01:00:45Z", "closed_at": "2026-02-28T01:00:45Z", "close_reason": "patrol cycle complete: Empty queue. Idle.", "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-wisp-cy6kt", "title": "Prepare work for review", "description": "Verify work is complete and ready for merge queue.\n\n**Note:** Do NOT close the issue. The Refinery will close it after successful merge.\nThis enables conflict-resolution retries without reopening closed issues.\n\n**1. Verify the issue shows your work:**\n```bash\nbd show gt-i6yv\n# Status should still be 'in_progress' (you're working on it)\n```\n\n**2. Add completion notes:**\n```bash\nbd update gt-i6yv --notes \"Implemented: <brief summary of what was done>\"\n```\n\n**3. Sync beads:**\n```bash\nbd sync\n```\n\n**Exit criteria:** Issue updated with completion notes, beads synced.", "status": "open", "priority": 2, "issue_type": "task", "created_at": "2026-02-28T01:50:09Z", "updated_at": "2026-02-28T01:50:09Z", "dependencies": [{"issue_id": "gt-wisp-cy6kt", "depends_on_id": "gt-wisp-fzhvd", "type": "parent-child", "created_at": "2026-02-27T17:50:09Z", "created_by": "mayor", "metadata": "{}"}, {"issue_id": "gt-wisp-cy6kt", "depends_on_id": "gt-wisp-quc9h", "type": "blocks", "created_at": "2026-02-27T17:50:09Z", "created_by": "mayor", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-fzhvd"}
{"id": "gt-wisp-d1eo", "title": "mol-refinery-patrol", "description": "Patrol report: Empty queue. Refinery idle.", "status": "closed", "priority": 2, "issue_type": "epic", "assignee": "gastown/refinery", "created_at": "2026-02-28T00:59:35Z", "updated_at": "2026-02-28T00:59:44Z", "closed_at": "2026-02-28T00:59:44Z", "close_reason": "patrol cycle complete: Empty queue. Refinery idle.", "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-wisp-d33c", "title": "mol-refinery-patrol", "description": "Patrol report: Empty queue cycle #18. Eighteen idle cycles. Queue clear, inbox empty.", "status": "closed", "priority": 2, "issue_type": "epic", "assignee": "gastown/refinery", "created_at": "2026-02-28T00:49:31Z", "updated_at": "2026-02-28T00:49:39Z", "closed_at": "2026-02-28T00:49:39Z", "close_reason": "patrol cycle complete: Empty queue cycle #18. Eighteen idle cycles. Queue clear, inbox empty.", "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-wisp-d9r5i", "title": "mol-refinery-patrol", "description": "Patrol report: Empty queue. No merges pending.", "status": "closed", "priority": 2, "issue_type": "epic", "assignee": "gastown/refinery", "created_at": "2026-02-28T01:07:04Z", "updated_at": "2026-02-28T01:07:13Z", "closed_at": "2026-02-28T01:07:13Z", "close_reason": "patrol cycle complete: Empty queue. No merges pending.", "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-wisp-dhpza", "title": "mol-refinery-patrol", "description": "Patrol report: Empty queue cycle. No branches to merge, inbox clear, session healthy (RSS 3MB).", "status": "closed", "priority": 2, "issue_type": "epic", "assignee": "gastown/refinery", "created_at": "2026-02-28T02:19:34Z", "updated_at": "2026-02-28T02:22:27Z", "closed_at": "2026-02-28T02:22:27Z", "close_reason": "patrol cycle complete: Empty queue cycle. No branches to merge, inbox clear, session healthy (RSS 3MB).", "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-wisp-divc3", "title": "mol-refinery-patrol", "description": "Patrol report: Empty queue. Continuing patrol.", "status": "closed", "priority": 2, "issue_type": "epic", "assignee": "gastown/refinery", "created_at": "2026-02-28T01:05:48Z", "updated_at": "2026-02-28T01:05:57Z", "closed_at": "2026-02-28T01:05:57Z", "close_reason": "patrol cycle complete: Empty queue. Continuing patrol.", "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-wisp-dv5af", "title": "mol-refinery-patrol", "description": "Patrol report: Queue empty, no merges. Extended idle period.", "status": "closed", "priority": 2, "issue_type": "epic", "assignee": "gastown/refinery", "created_at": "2026-02-28T02:12:56Z", "updated_at": "2026-02-28T02:13:05Z", "closed_at": "2026-02-28T02:13:05Z", "close_reason": "patrol cycle complete: Queue empty, no merges. Extended idle period.", "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-wisp-dxx8", "title": "mol-refinery-patrol", "description": "Patrol report: Empty queue cycle. No merges pending.", "status": "closed", "priority": 2, "issue_type": "epic", "assignee": "gastown/refinery", "created_at": "2026-02-28T00:53:29Z", "updated_at": "2026-02-28T00:53:38Z", "closed_at": "2026-02-28T00:53:38Z", "close_reason": "patrol cycle complete: Empty queue cycle. No merges pending.", "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-wisp-e75z6", "title": "mol-refinery-patrol", "description": "Patrol report: Queue empty, no merges.", "status": "closed", "priority": 2, "issue_type": "epic", "assignee": "gastown/refinery", "created_at": "2026-02-28T02:12:47Z", "updated_at": "2026-02-28T02:12:56Z", "closed_at": "2026-02-28T02:12:56Z", "close_reason": "patrol cycle complete: Queue empty, no merges.", "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-wisp-eet7x", "title": "mol-refinery-patrol", "description": "Patrol report: Empty queue. No work.", "status": "closed", "priority": 2, "issue_type": "epic", "assignee": "gastown/refinery", "created_at": "2026-02-28T01:05:19Z", "updated_at": "2026-02-28T01:05:29Z", "closed_at": "2026-02-28T01:05:29Z", "close_reason": "patrol cycle complete: Empty queue. No work.", "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-wisp-ehn2t", "title": "mol-refinery-patrol", "description": "Patrol report: Queue empty, no merges.", "status": "closed", "priority": 2, "issue_type": "epic", "assignee": "gastown/refinery", "created_at": "2026-02-28T02:19:24Z", "updated_at": "2026-02-28T02:19:34Z", "closed_at": "2026-02-28T02:19:34Z", "close_reason": "patrol cycle complete: Queue empty, no merges.", "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-wisp-ewta5", "title": "Commit all implementation changes", "description": "Ensure ALL implementation work is committed before cleanup.\n\n**CRITICAL: You MUST commit all changes from implementation.**\nNEVER use `git checkout -- .` or `git restore .` to discard implementation work.\nALWAYS commit ALL uncommitted changes from your implementation.\n\n**1. Check for uncommitted changes:**\n```bash\ngit status\n```\n\n**2. If there are ANY uncommitted changes, commit them now:**\n```bash\ngit add -A && git commit -m \"<type>: <descriptive message> (gt-p7uq.3)\"\n```\n\n**3. If working tree is already clean, skip.**\n\n**4. VERIFY:**\n```bash\ngit status\n```\nMust show \"nothing to commit, working tree clean\".\n\n**5. Verify you have commits:**\n```bash\ngit log origin/main..HEAD --oneline\n```\nIf you made changes during implementation, this MUST show at least 1 commit.\n\n**Exit criteria:** All changes committed. Working tree clean.", "status": "closed", "priority": 2, "issue_type": "task", "assignee": "gastown/polecats/slit", "created_at": "2026-02-28T01:50:20Z", "updated_at": "2026-02-28T01:55:59Z", "closed_at": "2026-02-28T01:55:59Z", "close_reason": "Closed", "dependencies": [{"issue_id": "gt-wisp-ewta5", "depends_on_id": "gt-wisp-9vcb0", "type": "blocks", "created_at": "2026-02-27T17:50:19Z", "created_by": "mayor", "metadata": "{}"}, {"issue_id": "gt-wisp-ewta5", "depends_on_id": "gt-wisp-bmfqr", "type": "parent-child", "created_at": "2026-02-27T17:50:19Z", "created_by": "mayor", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-bmfqr"}
{"id": "gt-wisp-f4gb", "title": "mol-refinery-patrol", "description": "Patrol report: Empty queue cycle #17. Seventeen idle cycles. Continuing to hold.", "status": "closed", "priority": 2, "issue_type": "epic", "assignee": "gastown/refinery", "created_at": "2026-02-28T00:49:22Z", "updated_at": "2026-02-28T00:49:30Z", "closed_at": "2026-02-28T00:49:30Z", "close_reason": "patrol cycle complete: Empty queue cycle #17. Seventeen idle cycles. Continuing to hold.", "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-wisp-fcv6m", "title": "mol-polecat-work", "description": "Full polecat work lifecycle from assignment through completion.\n\nThis molecule guides a polecat through a complete work assignment. Each step\nhas clear entry/exit criteria and specific commands to run. A polecat can\ncrash after any step and resume from the last completed step.\n\n## Polecat Contract (Self-Cleaning Model)\n\nYou are a self-cleaning worker. You:\n1. Receive work via your hook (pinned molecule + issue)\n2. Work through molecule steps using `bd ready` / `bd close <step>`\n3. Complete and self-clean via `gt done` (submit + nuke yourself)\n4. You are GONE - Refinery merges from MQ\n\n**Self-cleaning:** When you run `gt done`, you push your work, submit to MQ,\nnuke your sandbox, and exit. There is no idle state. Done means gone.\n\n**Important:** This formula defines the template. Your molecule already has step\nbeads created from it. Use `bd ready` to find them - do NOT read this file directly.\n\n**You do NOT:**\n- Push directly to main (Refinery merges from MQ)\n- Close your own issue (Refinery closes after merge)\n- Wait for merge (you're gone after `gt done`)\n- Handle rebase conflicts (Refinery spawns fresh polecats for that)\n\n## Variables\n\n| Variable | Source | Description |\n|----------|--------|-------------|\n| issue | hook_bead | The issue ID you're assigned to work on |\n\n## Failure Modes\n\n| Situation | Action |\n|-----------|--------|\n| Tests fail | Fix them. Do not proceed with failures. |\n| Blocked on external | Mail Witness for help, mark yourself stuck |\n| Context filling | Use gt handoff to cycle to fresh session |\n| Unsure what to do | Mail Witness, don't guess |", "status": "closed", "priority": 2, "issue_type": "epic", "created_at": "2026-02-28T01:23:04Z", "updated_at": "2026-02-28T01:26:00Z", "closed_at": "2026-02-28T01:26:00Z", "close_reason": "burned: polecat nuked", "ephemeral": true, "dependency_count": 0, "dependent_count": 1, "comment_count": 0}
{"id": "gt-wisp-fqckl", "title": "Commit all implementation changes", "description": "Ensure ALL implementation work is committed before cleanup.\n\n**CRITICAL: You MUST commit all changes from implementation.**\nNEVER use `git checkout -- .` or `git restore .` to discard implementation work.\nALWAYS commit ALL uncommitted changes from your implementation.\n\n**1. Check for uncommitted changes:**\n```bash\ngit status\n```\n\n**2. If there are ANY uncommitted changes, commit them now:**\n```bash\ngit add -A && git commit -m \"<type>: <descriptive message> (gt-a6gp)\"\n```\n\n**3. If working tree is already clean, skip.**\n\n**4. VERIFY:**\n```bash\ngit status\n```\nMust show \"nothing to commit, working tree clean\".\n\n**5. Verify you have commits:**\n```bash\ngit log origin/main..HEAD --oneline\n```\nIf you made changes during implementation, this MUST show at least 1 commit.\n\n**Exit criteria:** All changes committed. Working tree clean.", "status": "open", "priority": 2, "issue_type": "task", "created_at": "2026-02-28T01:44:54Z", "updated_at": "2026-02-28T01:44:54Z", "dependencies": [{"issue_id": "gt-wisp-fqckl", "depends_on_id": "gt-wisp-spqdu", "type": "parent-child", "created_at": "2026-02-27T17:44:54Z", "created_by": "dog", "metadata": "{}"}, {"issue_id": "gt-wisp-fqckl", "depends_on_id": "gt-wisp-t2bay", "type": "blocks", "created_at": "2026-02-27T17:44:54Z", "created_by": "dog", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-spqdu"}
{"id": "gt-wisp-fzhvd", "title": "mol-polecat-work", "description": "Full polecat work lifecycle from assignment through completion.\n\nThis molecule guides a polecat through a complete work assignment. Each step\nhas clear entry/exit criteria and specific commands to run. A polecat can\ncrash after any step and resume from the last completed step.\n\n## Polecat Contract (Self-Cleaning Model)\n\nYou are a self-cleaning worker. You:\n1. Receive work via your hook (pinned molecule + issue)\n2. Work through molecule steps using `bd ready` / `bd close <step>`\n3. Complete and self-clean via `gt done` (submit + nuke yourself)\n4. You are GONE - Refinery merges from MQ\n\n**Self-cleaning:** When you run `gt done`, you push your work, submit to MQ,\nnuke your sandbox, and exit. There is no idle state. Done means gone.\n\n**Important:** This formula defines the template. Your molecule already has step\nbeads created from it. Use `bd ready` to find them - do NOT read this file directly.\n\n**You do NOT:**\n- Push directly to main (Refinery merges from MQ)\n- Close your own issue (Refinery closes after merge)\n- Wait for merge (you're gone after `gt done`)\n- Handle rebase conflicts (Refinery spawns fresh polecats for that)\n\n## Variables\n\n| Variable | Source | Description |\n|----------|--------|-------------|\n| issue | hook_bead | The issue ID you're assigned to work on |\n\n## Failure Modes\n\n| Situation | Action |\n|-----------|--------|\n| Tests fail | Fix them. Do not proceed with failures. |\n| Blocked on external | Mail Witness for help, mark yourself stuck |\n| Context filling | Use gt handoff to cycle to fresh session |\n| Unsure what to do | Mail Witness, don't guess |", "status": "closed", "priority": 2, "issue_type": "epic", "created_at": "2026-02-28T01:50:09Z", "updated_at": "2026-02-28T02:03:47Z", "closed_at": "2026-02-28T02:03:47Z", "close_reason": "burned: polecat nuked", "ephemeral": true, "dependency_count": 0, "dependent_count": 1, "comment_count": 0}
{"id": "gt-wisp-g5a5", "title": "mol-refinery-patrol", "description": "Patrol report: Processed MR gt-wisp-ycc4 (polecat/slit, gt-61em). Content already on main — closed MR, notified witness, deleted branch. Queue clear.", "status": "closed", "priority": 2, "issue_type": "epic", "assignee": "gastown/refinery", "created_at": "2026-02-28T00:50:29Z", "updated_at": "2026-02-28T00:52:42Z", "closed_at": "2026-02-28T00:52:42Z", "close_reason": "patrol cycle complete: Processed MR gt-wisp-ycc4 (polecat/slit, gt-61em). Content already on main — closed MR, notified witness, deleted branch. Queue clear.", "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-wisp-gc6gn", "title": "mol-refinery-patrol", "description": "Merge queue processor patrol loop.\n\nThe Refinery is the Engineer in the engine room. You process polecat branches, merging them to main one at a time with sequential rebasing.\n\n**The Scotty Test**: Before proceeding past any failure, ask yourself: \"Would Scotty walk past a warp core leak because it existed before his shift?\"\n\n## Merge Flow\n\nThe Refinery receives MERGE_READY mail from Witnesses when polecats complete work:\n\n```\nWitness                    Refinery                      Git\n   │                          │                           │\n   │ MERGE_READY              │                           │\n   │─────────────────────────>│                           │\n   │                          │                           │\n   │                    (verify branch)                   │\n   │                          │ fetch & rebase            │\n   │                          │──────────────────────────>│\n   │                          │                           │\n   │                    (run tests)                       │\n   │                          │                           │\n   │                    (if pass)                         │\n   │                          │ merge & push              │\n   │                          │──────────────────────────>│\n   │                          │                           │\n   │ MERGED                   │                           │\n   │<─────────────────────────│                           │\n   │                          │                           │\n```\n\nAfter successful merge, Refinery sends MERGED mail back to Witness so it can\ncomplete cleanup (nuke the polecat worktree).", "status": "closed", "priority": 2, "issue_type": "epic", "assignee": "gastown/refinery", "created_at": "2026-02-28T02:05:15Z", "updated_at": "2026-02-28T02:07:37Z", "closed_at": "2026-02-28T02:07:37Z", "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-wisp-gf1c", "title": "mol-refinery-patrol", "description": "Patrol report: Empty queue cycle #6. Extended idle — no merges available. Context still healthy.", "status": "closed", "priority": 2, "issue_type": "epic", "assignee": "gastown/refinery", "created_at": "2026-02-28T00:47:34Z", "updated_at": "2026-02-28T00:47:43Z", "closed_at": "2026-02-28T00:47:43Z", "close_reason": "patrol cycle complete: Empty queue cycle #6. Extended idle — no merges available. Context still healthy.", "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-wisp-ghjtn", "title": "mol-refinery-patrol", "description": "Patrol report: Empty queue. No merges.", "status": "closed", "priority": 2, "issue_type": "epic", "assignee": "gastown/refinery", "created_at": "2026-02-28T01:05:57Z", "updated_at": "2026-02-28T01:06:07Z", "closed_at": "2026-02-28T01:06:07Z", "close_reason": "patrol cycle complete: Empty queue. No merges.", "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-wisp-gle8", "title": "mol-refinery-patrol", "description": "Patrol report: Empty queue patrol cycle. Merge queue clear, inbox empty, no integration branches to land. Session healthy — looping.", "status": "closed", "priority": 2, "issue_type": "epic", "assignee": "gastown/refinery", "created_at": "2026-02-28T00:25:33Z", "updated_at": "2026-02-28T00:46:47Z", "closed_at": "2026-02-28T00:46:47Z", "close_reason": "patrol cycle complete: Empty queue patrol cycle. Merge queue clear, inbox empty, no integration branches to land. Session healthy — looping.", "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-wisp-gn5op", "title": "Verify tests pass on main", "description": "Check if the codebase is healthy BEFORE starting your work.\n\n**The Scotty Principle:** Don't walk past a broken warp core. But also don't\nlet someone else's mess consume your entire mission.\n\n**1. Check tests on main:**\n```bash\ngit stash                   # Save your branch state\ngit checkout origin/main\ngo test ./...               # Or appropriate test command\n```\n\n**2. If tests PASS:**\n```bash\ngit checkout -              # Back to your branch\ngit stash pop               # Restore state\n```\nContinue to implement step.\n\n**3. If tests FAIL on main:**\n\nFile a bead and proceed. Do NOT fix pre-existing failures yourself — that is\nnot your assignment. Your job is to fix the issue on your hook, not main.\n\n| Situation | Action |\n|-----------|--------|\n| Any pre-existing failure | File bead, proceed with your work |\n\nFORBIDDEN: Pushing to main. FORBIDDEN: Fixing pre-existing failures.\nYou work on YOUR feature branch only. `gt done` handles push/MR.\n\n**File and proceed path:**\n```bash\nbd create --title \"Pre-existing test failure: <description>\" --type bug --priority 1\n\ngt mail send <rig>/witness -s \"NOTICE: Main has failing tests\" -m \"Found pre-existing test failures on main.\nFiled: <bead-id>\nProceeding with my assigned work (gt-p7uq.3).\"\n\ngit checkout -\ngit stash pop\n```\n\n**Context consideration:**\nIf fixing pre-existing failures consumed significant context:\n```bash\ngt handoff -s \"Fixed pre-existing failures, ready for assigned work\" -m \"Issue: gt-p7uq.3\nFixed: <what you fixed>\nReady to start: implement step\"\n```\nFresh session continues from implement.\n\n**Exit criteria:** Tests pass on main (or issue filed), ready to implement.", "status": "closed", "priority": 2, "issue_type": "task", "assignee": "gastown/polecats/slit", "created_at": "2026-02-28T01:50:20Z", "updated_at": "2026-02-28T01:52:36Z", "closed_at": "2026-02-28T01:52:36Z", "close_reason": "Closed", "dependencies": [{"issue_id": "gt-wisp-gn5op", "depends_on_id": "gt-wisp-bmfqr", "type": "parent-child", "created_at": "2026-02-27T17:50:19Z", "created_by": "mayor", "metadata": "{}"}, {"issue_id": "gt-wisp-gn5op", "depends_on_id": "gt-wisp-booj6", "type": "blocks", "created_at": "2026-02-27T17:50:19Z", "created_by": "mayor", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-bmfqr"}
{"id": "gt-wisp-gq83q", "title": "mol-refinery-patrol", "description": "Patrol report: Empty queue cycle 3. No work pending, session healthy (RSS 3MB). Standing by.", "status": "closed", "priority": 2, "issue_type": "epic", "assignee": "gastown/refinery", "created_at": "2026-02-28T02:22:49Z", "updated_at": "2026-02-28T02:23:09Z", "closed_at": "2026-02-28T02:23:09Z", "close_reason": "patrol cycle complete: Empty queue cycle 3. No work pending, session healthy (RSS 3MB). Standing by.", "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-wisp-gteqt", "title": "Merge and push to main", "description": "Merge to main and push. CRITICAL: Notifications come IMMEDIATELY after push.\n\n**Step 1: Merge and Push**\n```bash\ngit checkout main\ngit merge --ff-only temp\ngit push origin main\n```\n\n⚠️ **STOP HERE - DO NOT PROCEED UNTIL STEPS 2-3 COMPLETE**\n\n**Step 2: Send MERGED Notification (REQUIRED - DO THIS IMMEDIATELY)**\n\nRIGHT NOW, before any cleanup, send MERGED mail to Witness:\n\n```bash\ngt mail send <rig>/witness -s \"MERGED <polecat-name>\" -m \"Branch: <branch>\nIssue: <issue-id>\nMerged-At: $(date -u +%Y-%m-%dT%H:%M:%SZ)\"\n```\n\nThis signals the Witness to nuke the polecat worktree. WITHOUT THIS NOTIFICATION,\nPOLECAT WORKTREES ACCUMULATE INDEFINITELY AND THE LIFECYCLE BREAKS.\n\n**Step 3: Close MR Bead (REQUIRED - DO THIS IMMEDIATELY)**\n\n⚠️ **VERIFICATION BEFORE CLOSING**: Confirm the work is actually on main:\n```bash\n# Get the commit message/issue from the branch\ngit log origin/main --oneline | grep \"<issue-id>\"\n# OR verify the commit SHA is on main:\ngit branch --contains <commit-sha> | grep main\n```\n\nIf work is NOT on main, DO NOT close the MR bead. Investigate first.\n\n```bash\nbd close <mr-bead-id> --reason \"Merged to main at $(git rev-parse --short HEAD)\"\n```\n\nThe MR bead ID was in the MERGE_READY message or find via:\n```bash\nbd list --type=merge-request --status=open | grep <polecat-name>\n```\n\n**VALIDATION**: The MR bead's source_issue should be a valid bead ID (gt-xxxxx),\nnot a branch name. If source_issue contains a branch name, flag for investigation.\n\n**Step 4: Archive the MERGE_READY mail (REQUIRED)**\n```bash\ngt mail archive <merge-ready-message-id>\n```\nThe message ID was tracked when you processed inbox-check.\n\n**Step 5: Cleanup (only after Steps 2-4 confirmed)**\n```bash\ngit branch -d temp\ngit push origin --delete <polecat-branch>\n```\n\n**VERIFICATION GATE**: You CANNOT proceed to loop-check without:\n- [x] MERGED mail sent to witness\n- [x] MR bead closed\n- [x] MERGE_READY mail archived\n\nIf you skipped notifications or archiving, GO BACK AND DO THEM NOW.\n\nMain has moved. Any remaining branches need rebasing on new baseline.", "status": "closed", "priority": 2, "issue_type": "task", "assignee": "gastown/refinery", "created_at": "2026-02-28T01:51:04Z", "updated_at": "2026-02-28T02:03:25Z", "closed_at": "2026-02-28T02:03:25Z", "close_reason": "Closed", "dependencies": [{"issue_id": "gt-wisp-gteqt", "depends_on_id": "gt-wisp-mv5zs", "type": "parent-child", "created_at": "2026-02-27T17:51:03Z", "created_by": "refinery", "metadata": "{}"}, {"issue_id": "gt-wisp-gteqt", "depends_on_id": "gt-wisp-seyp2", "type": "blocks", "created_at": "2026-02-27T17:51:03Z", "created_by": "refinery", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-mv5zs"}
{"id": "gt-wisp-h2ss3", "title": "mol-refinery-patrol", "description": "Patrol report: Queue empty, no merges.", "status": "closed", "priority": 2, "issue_type": "epic", "assignee": "gastown/refinery", "created_at": "2026-02-28T02:12:38Z", "updated_at": "2026-02-28T02:12:46Z", "closed_at": "2026-02-28T02:12:46Z", "close_reason": "patrol cycle complete: Queue empty, no merges.", "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-wisp-h8gmi", "title": "mol-refinery-patrol", "description": "Patrol report: Queue empty, no merges.", "status": "closed", "priority": 2, "issue_type": "epic", "assignee": "gastown/refinery", "created_at": "2026-02-28T02:12:05Z", "updated_at": "2026-02-28T02:12:17Z", "closed_at": "2026-02-28T02:12:17Z", "close_reason": "patrol cycle complete: Queue empty, no merges.", "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-wisp-h9fkl", "title": "mol-refinery-patrol", "description": "Patrol report: Empty queue. Standing by for polecat submissions.", "status": "closed", "priority": 2, "issue_type": "epic", "assignee": "gastown/refinery", "created_at": "2026-02-28T01:05:39Z", "updated_at": "2026-02-28T01:05:48Z", "closed_at": "2026-02-28T01:05:48Z", "close_reason": "patrol cycle complete: Empty queue. Standing by for polecat submissions.", "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-wisp-h9wak", "title": "Run tests and verify coverage", "description": "Verify your changes don't break anything and are properly tested.\n\n**1. Run the full test suite:**\n```bash\ngo test ./...               # For Go projects\n# Or appropriate command for your stack\n```\n\n**ALL TESTS MUST PASS.** Do not proceed with failures.\n\n**2. If tests fail:**\n- Read the failure output carefully\n- Determine if your change caused it:\n  - If yes: Fix it. Return to implement step if needed.\n  - If no (pre-existing): File a bead, but still must pass for your PR\n\n```bash\n# Check if failure exists on main:\ngit stash\ngit checkout main\ngo test ./...\ngit checkout -\ngit stash pop\n```\n\n**3. Verify test coverage for new code:**\n- New features should have tests\n- Bug fixes should have regression tests\n- If you added significant code without tests, add them now\n\n**4. Run any other quality checks:**\n```bash\n# Linting (if configured)\ngolangci-lint run ./...\n\n# Build check\ngo build ./...\n```\n\n**Exit criteria:** All tests pass, new code has appropriate test coverage.", "status": "closed", "priority": 2, "issue_type": "task", "created_at": "2026-02-28T01:40:24Z", "updated_at": "2026-02-28T01:50:10Z", "closed_at": "2026-02-28T01:50:10Z", "close_reason": "Closed", "dependencies": [{"issue_id": "gt-wisp-h9wak", "depends_on_id": "gt-wisp-81vbs", "type": "blocks", "created_at": "2026-02-27T17:40:24Z", "created_by": "dog", "metadata": "{}"}, {"issue_id": "gt-wisp-h9wak", "depends_on_id": "gt-wisp-ufzcr", "type": "parent-child", "created_at": "2026-02-27T17:40:23Z", "created_by": "dog", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-ufzcr"}
{"id": "gt-wisp-hrksx", "title": "mol-refinery-patrol", "description": "Patrol report: Empty queue cycle 2. No branches to merge, inbox clear, session healthy (RSS 3MB).", "status": "closed", "priority": 2, "issue_type": "epic", "assignee": "gastown/refinery", "created_at": "2026-02-28T02:22:27Z", "updated_at": "2026-02-28T02:22:49Z", "closed_at": "2026-02-28T02:22:49Z", "close_reason": "patrol cycle complete: Empty queue cycle 2. No branches to merge, inbox clear, session healthy (RSS 3MB).", "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-wisp-hrqd", "title": "mol-refinery-patrol", "description": "Patrol report: Merged polecat/nux/gt-x7t9 to main (c5ce08ed). Agent bead schema for completion metadata. Build+tests pass. Queue now empty.", "status": "closed", "priority": 2, "issue_type": "epic", "assignee": "gastown/refinery", "created_at": "2026-02-28T00:56:52Z", "updated_at": "2026-02-28T00:58:24Z", "closed_at": "2026-02-28T00:58:24Z", "close_reason": "patrol cycle complete: Merged polecat/nux/gt-x7t9 to main (c5ce08ed). Agent bead schema for completion metadata. Build+tests pass. Queue now empty.", "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-wisp-i65j", "title": "mol-refinery-patrol", "description": "Patrol report: Empty queue cycle #4. Four consecutive empty cycles. Refinery idle — no polecat work incoming.", "status": "closed", "priority": 2, "issue_type": "epic", "assignee": "gastown/refinery", "created_at": "2026-02-28T00:47:13Z", "updated_at": "2026-02-28T00:47:24Z", "closed_at": "2026-02-28T00:47:24Z", "close_reason": "patrol cycle complete: Empty queue cycle #4. Four consecutive empty cycles. Refinery idle — no polecat work incoming.", "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-wisp-igpym", "title": "mol-refinery-patrol", "description": "Patrol report: Empty queue. No merges pending.", "status": "closed", "priority": 2, "issue_type": "epic", "assignee": "gastown/refinery", "created_at": "2026-02-28T01:04:52Z", "updated_at": "2026-02-28T01:05:01Z", "closed_at": "2026-02-28T01:05:01Z", "close_reason": "patrol cycle complete: Empty queue. No merges pending.", "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-wisp-ijijb", "title": "mol-polecat-work", "description": "Full polecat work lifecycle from assignment through completion.\n\nThis molecule guides a polecat through a complete work assignment. Each step\nhas clear entry/exit criteria and specific commands to run. A polecat can\ncrash after any step and resume from the last completed step.\n\n## Polecat Contract (Self-Cleaning Model)\n\nYou are a self-cleaning worker. You:\n1. Receive work via your hook (pinned molecule + issue)\n2. Work through molecule steps using `bd ready` / `bd close <step>`\n3. Complete and self-clean via `gt done` (submit + nuke yourself)\n4. You are GONE - Refinery merges from MQ\n\n**Self-cleaning:** When you run `gt done`, you push your work, submit to MQ,\nnuke your sandbox, and exit. There is no idle state. Done means gone.\n\n**Important:** This formula defines the template. Your molecule already has step\nbeads created from it. Use `bd ready` to find them - do NOT read this file directly.\n\n**You do NOT:**\n- Push directly to main (Refinery merges from MQ)\n- Close your own issue (Refinery closes after merge)\n- Wait for merge (you're gone after `gt done`)\n- Handle rebase conflicts (Refinery spawns fresh polecats for that)\n\n## Variables\n\n| Variable | Source | Description |\n|----------|--------|-------------|\n| issue | hook_bead | The issue ID you're assigned to work on |\n\n## Failure Modes\n\n| Situation | Action |\n|-----------|--------|\n| Tests fail | Fix them. Do not proceed with failures. |\n| Blocked on external | Mail Witness for help, mark yourself stuck |\n| Context filling | Use gt handoff to cycle to fresh session |\n| Unsure what to do | Mail Witness, don't guess |", "status": "closed", "priority": 2, "issue_type": "epic", "created_at": "2026-02-28T01:26:55Z", "updated_at": "2026-02-28T01:40:24Z", "closed_at": "2026-02-28T01:40:24Z", "close_reason": "burned: force re-sling", "ephemeral": true, "dependency_count": 0, "dependent_count": 1, "comment_count": 0}
{"id": "gt-wisp-irkp", "title": "mol-refinery-patrol", "description": "Patrol report: Empty queue. Continuing.", "status": "closed", "priority": 2, "issue_type": "epic", "assignee": "gastown/refinery", "created_at": "2026-02-28T00:59:44Z", "updated_at": "2026-02-28T00:59:55Z", "closed_at": "2026-02-28T00:59:55Z", "close_reason": "patrol cycle complete: Empty queue. Continuing.", "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-wisp-j9ou", "title": "mol-refinery-patrol", "description": "Patrol report: Empty queue cycle #14. Fourteen idle cycles. Refinery standing by, context healthy.", "status": "closed", "priority": 2, "issue_type": "epic", "assignee": "gastown/refinery", "created_at": "2026-02-28T00:48:56Z", "updated_at": "2026-02-28T00:49:05Z", "closed_at": "2026-02-28T00:49:05Z", "close_reason": "patrol cycle complete: Empty queue cycle #14. Fourteen idle cycles. Refinery standing by, context healthy.", "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-wisp-jvhvm", "title": "Run tests and verify coverage", "description": "Verify your changes don't break anything and are properly tested.\n\n**1. Run the full test suite:**\n```bash\ngo test ./...               # For Go projects\n# Or appropriate command for your stack\n```\n\n**ALL TESTS MUST PASS.** Do not proceed with failures.\n\n**2. If tests fail:**\n- Read the failure output carefully\n- Determine if your change caused it:\n  - If yes: Fix it. Return to implement step if needed.\n  - If no (pre-existing): File a bead, but still must pass for your PR\n\n```bash\n# Check if failure exists on main:\ngit stash\ngit checkout main\ngo test ./...\ngit checkout -\ngit stash pop\n```\n\n**3. Verify test coverage for new code:**\n- New features should have tests\n- Bug fixes should have regression tests\n- If you added significant code without tests, add them now\n\n**4. Run any other quality checks:**\n```bash\n# Linting (if configured)\ngolangci-lint run ./...\n\n# Build check\ngo build ./...\n```\n\n**Exit criteria:** All tests pass, new code has appropriate test coverage.", "status": "open", "priority": 2, "issue_type": "task", "created_at": "2026-02-28T01:50:09Z", "updated_at": "2026-02-28T01:50:09Z", "dependencies": [{"issue_id": "gt-wisp-jvhvm", "depends_on_id": "gt-wisp-fzhvd", "type": "parent-child", "created_at": "2026-02-27T17:50:09Z", "created_by": "mayor", "metadata": "{}"}, {"issue_id": "gt-wisp-jvhvm", "depends_on_id": "gt-wisp-zc6gi", "type": "blocks", "created_at": "2026-02-27T17:50:09Z", "created_by": "mayor", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-fzhvd"}
{"id": "gt-wisp-jxu7", "title": "mol-refinery-patrol", "description": "Patrol report: Empty queue. Idle.", "status": "closed", "priority": 2, "issue_type": "epic", "assignee": "gastown/refinery", "created_at": "2026-02-28T00:55:40Z", "updated_at": "2026-02-28T00:55:51Z", "closed_at": "2026-02-28T00:55:51Z", "close_reason": "patrol cycle complete: Empty queue. Idle.", "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-wisp-jym4", "title": "mol-refinery-patrol", "description": "Patrol report: Empty queue. Continuing.", "status": "closed", "priority": 2, "issue_type": "epic", "assignee": "gastown/refinery", "created_at": "2026-02-28T00:54:42Z", "updated_at": "2026-02-28T00:54:53Z", "closed_at": "2026-02-28T00:54:53Z", "close_reason": "patrol cycle complete: Empty queue. Continuing.", "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-wisp-k8ux", "title": "mol-refinery-patrol", "description": "Patrol report: Empty queue patrol cycle #2. No pending merges, no mail. Session healthy — looping.", "status": "closed", "priority": 2, "issue_type": "epic", "assignee": "gastown/refinery", "created_at": "2026-02-28T00:46:47Z", "updated_at": "2026-02-28T00:47:02Z", "closed_at": "2026-02-28T00:47:02Z", "close_reason": "patrol cycle complete: Empty queue patrol cycle #2. No pending merges, no mail. Session healthy — looping.", "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-wisp-kcpn", "title": "mol-refinery-patrol", "description": "Patrol report: Empty queue. Standing by for polecat submissions.", "status": "closed", "priority": 2, "issue_type": "epic", "assignee": "gastown/refinery", "created_at": "2026-02-28T00:55:16Z", "updated_at": "2026-02-28T00:55:29Z", "closed_at": "2026-02-28T00:55:29Z", "close_reason": "patrol cycle complete: Empty queue. Standing by for polecat submissions.", "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-wisp-kgpt", "title": "mol-refinery-patrol", "description": "Patrol report: Empty queue cycle #9. Nine idle cycles. Queue clear, inbox empty.", "status": "closed", "priority": 2, "issue_type": "epic", "assignee": "gastown/refinery", "created_at": "2026-02-28T00:48:03Z", "updated_at": "2026-02-28T00:48:12Z", "closed_at": "2026-02-28T00:48:12Z", "close_reason": "patrol cycle complete: Empty queue cycle #9. Nine idle cycles. Queue clear, inbox empty.", "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-wisp-kkrtg", "title": "Implement the solution", "description": "Do the actual implementation work.\n\n**Working principles:**\n- Follow existing codebase conventions\n- Make atomic, focused commits\n- Keep changes scoped to the assigned issue\n- Don't gold-plate or scope-creep\n\n**Commit frequently:**\n```bash\n# After each logical unit of work:\ngit add <files>\ngit commit -m \"<type>: <description> (gt-i6yv)\"\n```\n\nCommit types: feat, fix, refactor, test, docs, chore\n\n**Discovered work:**\nIf you find bugs or improvements outside your scope:\n```bash\nbd create --title \"Found: <description>\" --type bug --priority 2\n# Note the ID, continue with your work\n```\n\nDo NOT fix unrelated issues in this branch.\n\n**If stuck:**\nDon't spin for more than 15 minutes. Mail Witness:\n```bash\ngt mail send <rig>/witness -s \"HELP: Stuck on implementation\" -m \"Issue: gt-i6yv\nTrying to: <what you're attempting>\nProblem: <what's blocking you>\nTried: <what you've attempted>\"\n```\n\n**Exit criteria:** Implementation complete, all changes committed.", "status": "closed", "priority": 2, "issue_type": "task", "assignee": "gastown/polecats/furiosa", "created_at": "2026-02-28T01:50:09Z", "updated_at": "2026-02-28T02:02:37Z", "closed_at": "2026-02-28T02:02:37Z", "close_reason": "Closed", "dependencies": [{"issue_id": "gt-wisp-kkrtg", "depends_on_id": "gt-wisp-fzhvd", "type": "parent-child", "created_at": "2026-02-27T17:50:09Z", "created_by": "mayor", "metadata": "{}"}, {"issue_id": "gt-wisp-kkrtg", "depends_on_id": "gt-wisp-qd2st", "type": "blocks", "created_at": "2026-02-27T17:50:09Z", "created_by": "mayor", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-fzhvd"}
{"id": "gt-wisp-lmmq", "title": "mol-polecat-work", "description": "Full polecat work lifecycle from assignment through completion.\n\nThis molecule guides a polecat through a complete work assignment. Each step\nhas clear entry/exit criteria and specific commands to run. A polecat can\ncrash after any step and resume from the last completed step.\n\n## Polecat Contract (Self-Cleaning Model)\n\nYou are a self-cleaning worker. You:\n1. Receive work via your hook (pinned molecule + issue)\n2. Work through molecule steps using `bd ready` / `bd close <step>`\n3. Complete and self-clean via `gt done` (submit + nuke yourself)\n4. You are GONE - Refinery merges from MQ\n\n**Self-cleaning:** When you run `gt done`, you push your work, submit to MQ,\nnuke your sandbox, and exit. There is no idle state. Done means gone.\n\n**Important:** This formula defines the template. Your molecule already has step\nbeads created from it. Use `bd ready` to find them - do NOT read this file directly.\n\n**You do NOT:**\n- Push directly to main (Refinery merges from MQ)\n- Close your own issue (Refinery closes after merge)\n- Wait for merge (you're gone after `gt done`)\n- Handle rebase conflicts (Refinery spawns fresh polecats for that)\n\n## Variables\n\n| Variable | Source | Description |\n|----------|--------|-------------|\n| issue | hook_bead | The issue ID you're assigned to work on |\n\n## Failure Modes\n\n| Situation | Action |\n|-----------|--------|\n| Tests fail | Fix them. Do not proceed with failures. |\n| Blocked on external | Mail Witness for help, mark yourself stuck |\n| Context filling | Use gt handoff to cycle to fresh session |\n| Unsure what to do | Mail Witness, don't guess |", "status": "closed", "priority": 2, "issue_type": "epic", "created_at": "2026-02-28T00:40:32Z", "updated_at": "2026-02-28T00:43:21Z", "closed_at": "2026-02-28T00:43:21Z", "close_reason": "burned: polecat nuked", "ephemeral": true, "dependency_count": 0, "dependent_count": 1, "comment_count": 0}
{"id": "gt-wisp-m05xx", "title": "Load context and verify assignment", "description": "Initialize your session and understand your assignment.\n\n**1. Prime your environment:**\n```bash\ngt prime                    # Load role context\nbd prime                    # Load beads context\n```\n\n**2. Check your hook:**\n```bash\ngt hook               # Shows your pinned molecule and hook_bead\n```\n\nThe hook_bead is your assigned issue. Read it carefully:\n```bash\nbd show gt-i6yv           # Full issue details\n```\n\n**3. Check inbox for additional context:**\n```bash\ngt mail inbox\n# Read any HANDOFF or assignment messages\n```\n\n**4. Understand the requirements:**\n- What exactly needs to be done?\n- What files are likely involved?\n- Are there dependencies or blockers?\n- What does \"done\" look like?\n\n**5. Verify you can proceed:**\n- No unresolved blockers on the issue\n- You understand what to do\n- Required resources are available\n\nIf blocked or unclear, mail Witness immediately:\n```bash\ngt mail send <rig>/witness -s \"HELP: Unclear requirements\" -m \"Issue: gt-i6yv\nQuestion: <what you need clarified>\"\n```\n\n**Exit criteria:** You understand the work and can begin implementation.", "status": "closed", "priority": 2, "issue_type": "task", "created_at": "2026-02-28T01:50:09Z", "updated_at": "2026-02-28T01:52:40Z", "closed_at": "2026-02-28T01:52:40Z", "close_reason": "Closed", "dependencies": [{"issue_id": "gt-wisp-m05xx", "depends_on_id": "gt-wisp-fzhvd", "type": "parent-child", "created_at": "2026-02-27T17:50:09Z", "created_by": "mayor", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-fzhvd"}
{"id": "gt-wisp-m0qk", "title": "mol-refinery-patrol", "description": "Patrol report: Empty queue cycle #11. Sustained idle. Refinery operational, no work pending.", "status": "closed", "priority": 2, "issue_type": "epic", "assignee": "gastown/refinery", "created_at": "2026-02-28T00:48:32Z", "updated_at": "2026-02-28T00:48:39Z", "closed_at": "2026-02-28T00:48:39Z", "close_reason": "patrol cycle complete: Empty queue cycle #11. Sustained idle. Refinery operational, no work pending.", "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-wisp-m6nu", "title": "Merge: gt-vpy9", "description": "branch: polecat/capable/gt-vpy9@mm5l51a3\ntarget: main\nsource_issue: gt-vpy9\nrig: gastown\nworker: capable\nagent_bead: gt-gastown-polecat-capable\nretry_count: 0\nlast_conflict_sha: null\nconflict_task_id: null", "status": "closed", "priority": 2, "issue_type": "task", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-28T00:42:30Z", "created_by": "gastown/polecats/capable", "updated_at": "2026-02-28T00:43:52Z", "closed_at": "2026-02-28T00:43:52Z", "labels": ["gt:merge-request"], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-wisp-mb6b", "title": "mol-refinery-patrol", "description": "Patrol report: Empty queue cycle #15. Fifteen idle cycles. Queue empty, inbox clear. Session remains healthy.", "status": "closed", "priority": 2, "issue_type": "epic", "assignee": "gastown/refinery", "created_at": "2026-02-28T00:49:05Z", "updated_at": "2026-02-28T00:49:13Z", "closed_at": "2026-02-28T00:49:13Z", "close_reason": "patrol cycle complete: Empty queue cycle #15. Fifteen idle cycles. Queue empty, inbox clear. Session remains healthy.", "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-wisp-mct1", "title": "mol-refinery-patrol", "description": "Patrol report: Empty queue cycle #16. Sixteen idle cycles. No polecat merges pending.", "status": "closed", "priority": 2, "issue_type": "epic", "assignee": "gastown/refinery", "created_at": "2026-02-28T00:49:13Z", "updated_at": "2026-02-28T00:49:22Z", "closed_at": "2026-02-28T00:49:22Z", "close_reason": "patrol cycle complete: Empty queue cycle #16. Sixteen idle cycles. No polecat merges pending.", "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-wisp-mk4v", "title": "Merge: gt-61em", "description": "branch: polecat/slit/gt-61em@mm5kz7yr\ntarget: main\nsource_issue: gt-61em\nrig: gastown\nworker: slit\nagent_bead: gt-gastown-polecat-slit\nretry_count: 0\nlast_conflict_sha: null\nconflict_task_id: null", "status": "closed", "priority": 2, "issue_type": "task", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-28T00:38:30Z", "created_by": "gastown/polecats/slit", "updated_at": "2026-02-28T00:40:39Z", "closed_at": "2026-02-28T00:40:39Z", "labels": ["gt:merge-request"], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-wisp-molml", "title": "mol-refinery-patrol", "description": "Merge queue processor patrol loop.\n\nThe Refinery is the Engineer in the engine room. You process polecat branches, merging them to main one at a time with sequential rebasing.\n\n**The Scotty Test**: Before proceeding past any failure, ask yourself: \"Would Scotty walk past a warp core leak because it existed before his shift?\"\n\n## Merge Flow\n\nThe Refinery receives MERGE_READY mail from Witnesses when polecats complete work:\n\n```\nWitness                    Refinery                      Git\n   │                          │                           │\n   │ MERGE_READY              │                           │\n   │─────────────────────────>│                           │\n   │                          │                           │\n   │                    (verify branch)                   │\n   │                          │ fetch & rebase            │\n   │                          │──────────────────────────>│\n   │                          │                           │\n   │                    (run tests)                       │\n   │                          │                           │\n   │                    (if pass)                         │\n   │                          │ merge & push              │\n   │                          │──────────────────────────>│\n   │                          │                           │\n   │ MERGED                   │                           │\n   │<─────────────────────────│                           │\n   │                          │                           │\n```\n\nAfter successful merge, Refinery sends MERGED mail back to Witness so it can\ncomplete cleanup (nuke the polecat worktree).", "status": "closed", "priority": 2, "issue_type": "epic", "assignee": "gastown/refinery", "created_at": "2026-02-28T01:27:19Z", "updated_at": "2026-02-28T01:51:01Z", "closed_at": "2026-02-28T01:51:01Z", "labels": ["idle:5"], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-wisp-mv5zs", "title": "mol-refinery-patrol", "description": "Merge queue processor patrol loop.\n\nThe Refinery is the Engineer in the engine room. You process polecat branches, merging them to main one at a time with sequential rebasing.\n\n**The Scotty Test**: Before proceeding past any failure, ask yourself: \"Would Scotty walk past a warp core leak because it existed before his shift?\"\n\n## Merge Flow\n\nThe Refinery receives MERGE_READY mail from Witnesses when polecats complete work:\n\n```\nWitness                    Refinery                      Git\n   │                          │                           │\n   │ MERGE_READY              │                           │\n   │─────────────────────────>│                           │\n   │                          │                           │\n   │                    (verify branch)                   │\n   │                          │ fetch & rebase            │\n   │                          │──────────────────────────>│\n   │                          │                           │\n   │                    (run tests)                       │\n   │                          │                           │\n   │                    (if pass)                         │\n   │                          │ merge & push              │\n   │                          │──────────────────────────>│\n   │                          │                           │\n   │ MERGED                   │                           │\n   │<─────────────────────────│                           │\n   │                          │                           │\n```\n\nAfter successful merge, Refinery sends MERGED mail back to Witness so it can\ncomplete cleanup (nuke the polecat worktree).", "status": "closed", "priority": 2, "issue_type": "epic", "assignee": "gastown/refinery", "created_at": "2026-02-28T01:51:04Z", "updated_at": "2026-02-28T02:05:10Z", "closed_at": "2026-02-28T02:05:10Z", "close_reason": "stale patrol cleanup", "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-wisp-mztfg", "title": "Submit work and self-clean", "description": "Submit your work and clean up. You cease to exist after this step.\n\n**Self-Cleaning Model:**\nOnce you run `gt done`, you're gone. The command:\n1. Pushes your branch to origin\n2. Creates an MR bead in the merge queue\n3. Nukes your sandbox (worktree removal)\n4. Exits your session immediately\n\n**Run gt done:**\n```bash\ngt done\n```\n\nYou should see output like:\n```\n✓ Work submitted to merge queue\n  MR ID: gt-xxxxx\n  Source: polecat/<name>\n  Target: main\n  Issue: gt-a6gp\n✓ Sandbox nuked\n✓ Session exiting\n```\n\n**What happens next (not your concern):**\n- Refinery processes your MR from the queue\n- Refinery rebases and merges to main\n- Refinery closes the issue\n- If conflicts: Refinery spawns a FRESH polecat to re-implement\n\nYou are NOT involved in any of that. You're gone. Done means gone.\n\n**Exit criteria:** Work submitted, sandbox nuked, session exited.", "status": "open", "priority": 2, "issue_type": "task", "created_at": "2026-02-28T01:44:54Z", "updated_at": "2026-02-28T01:44:54Z", "dependencies": [{"issue_id": "gt-wisp-mztfg", "depends_on_id": "gt-wisp-spqdu", "type": "parent-child", "created_at": "2026-02-27T17:44:54Z", "created_by": "dog", "metadata": "{}"}, {"issue_id": "gt-wisp-mztfg", "depends_on_id": "gt-wisp-wmlz3", "type": "blocks", "created_at": "2026-02-27T17:44:54Z", "created_by": "dog", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-spqdu"}
{"id": "gt-wisp-n0o1y", "title": "mol-refinery-patrol", "description": "Patrol report: Patrol cycle: 0 merges, 3 stale MRs already closed (0 commits ahead of main). Filed bug gt-0jh0 for pre-existing test failure TestInitRegistry_SocketFromTownName (caused by 635916ab, test expects per-town socket but code uses default).", "status": "closed", "priority": 2, "issue_type": "epic", "assignee": "gastown/refinery", "created_at": "2026-02-28T02:07:37Z", "updated_at": "2026-02-28T02:13:31Z", "closed_at": "2026-02-28T02:13:31Z", "close_reason": "patrol cycle complete: Patrol cycle: 0 merges, 3 stale MRs already closed (0 commits ahead of main). Filed bug gt-0jh0 for pre-existing test failure TestInitRegistry_SocketFromTownName (caused by 635916ab, test expects per-town socket but code uses default).", "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-wisp-n4vw", "title": "mol-polecat-work", "description": "Full polecat work lifecycle from assignment through completion.\n\nThis molecule guides a polecat through a complete work assignment. Each step\nhas clear entry/exit criteria and specific commands to run. A polecat can\ncrash after any step and resume from the last completed step.\n\n## Polecat Contract (Self-Cleaning Model)\n\nYou are a self-cleaning worker. You:\n1. Receive work via your hook (pinned molecule + issue)\n2. Work through molecule steps using `bd ready` / `bd close <step>`\n3. Complete and self-clean via `gt done` (submit + nuke yourself)\n4. You are GONE - Refinery merges from MQ\n\n**Self-cleaning:** When you run `gt done`, you push your work, submit to MQ,\nnuke your sandbox, and exit. There is no idle state. Done means gone.\n\n**Important:** This formula defines the template. Your molecule already has step\nbeads created from it. Use `bd ready` to find them - do NOT read this file directly.\n\n**You do NOT:**\n- Push directly to main (Refinery merges from MQ)\n- Close your own issue (Refinery closes after merge)\n- Wait for merge (you're gone after `gt done`)\n- Handle rebase conflicts (Refinery spawns fresh polecats for that)\n\n## Variables\n\n| Variable | Source | Description |\n|----------|--------|-------------|\n| issue | hook_bead | The issue ID you're assigned to work on |\n\n## Failure Modes\n\n| Situation | Action |\n|-----------|--------|\n| Tests fail | Fix them. Do not proceed with failures. |\n| Blocked on external | Mail Witness for help, mark yourself stuck |\n| Context filling | Use gt handoff to cycle to fresh session |\n| Unsure what to do | Mail Witness, don't guess |", "status": "closed", "priority": 2, "issue_type": "epic", "created_at": "2026-02-28T00:29:40Z", "updated_at": "2026-02-28T00:40:28Z", "closed_at": "2026-02-28T00:40:28Z", "close_reason": "burned: polecat nuked", "ephemeral": true, "dependency_count": 0, "dependent_count": 1, "comment_count": 0}
{"id": "gt-wisp-nfwdd", "title": "mol-refinery-patrol", "description": "Patrol report: Empty queue cycle 4. Standing by. Session healthy (RSS 3MB).", "status": "closed", "priority": 2, "issue_type": "epic", "assignee": "gastown/refinery", "created_at": "2026-02-28T02:23:10Z", "updated_at": "2026-02-28T02:23:25Z", "closed_at": "2026-02-28T02:23:25Z", "close_reason": "patrol cycle complete: Empty queue cycle 4. Standing by. Session healthy (RSS 3MB).", "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-wisp-nlgfh", "title": "mol-refinery-patrol", "description": "Patrol report: Empty queue cycle 2. Polecat branch gastown/polecat/furiosa/gt-24j2@mm5kwofx exists but no MR queued. Awaited signals multiple times - only system noise. Session healthy.", "status": "closed", "priority": 2, "issue_type": "epic", "assignee": "gastown/refinery", "created_at": "2026-02-28T01:19:02Z", "updated_at": "2026-02-28T01:24:57Z", "closed_at": "2026-02-28T01:24:57Z", "close_reason": "patrol cycle complete: Empty queue cycle 2. Polecat branch gastown/polecat/furiosa/gt-24j2@mm5kwofx exists but no MR queued. Awaited signals multiple times - only system noise. Session healthy.", "labels": ["idle:1"], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-wisp-npyna", "title": "mol-polecat-work", "description": "Full polecat work lifecycle from assignment through completion.\n\nThis molecule guides a polecat through a complete work assignment. Each step\nhas clear entry/exit criteria and specific commands to run. A polecat can\ncrash after any step and resume from the last completed step.\n\n## Polecat Contract (Self-Cleaning Model)\n\nYou are a self-cleaning worker. You:\n1. Receive work via your hook (pinned molecule + issue)\n2. Work through molecule steps using `bd ready` / `bd close <step>`\n3. Complete and self-clean via `gt done` (submit + nuke yourself)\n4. You are GONE - Refinery merges from MQ\n\n**Self-cleaning:** When you run `gt done`, you push your work, submit to MQ,\nnuke your sandbox, and exit. There is no idle state. Done means gone.\n\n**Important:** This formula defines the template. Your molecule already has step\nbeads created from it. Use `bd ready` to find them - do NOT read this file directly.\n\n**You do NOT:**\n- Push directly to main (Refinery merges from MQ)\n- Close your own issue (Refinery closes after merge)\n- Wait for merge (you're gone after `gt done`)\n- Handle rebase conflicts (Refinery spawns fresh polecats for that)\n\n## Variables\n\n| Variable | Source | Description |\n|----------|--------|-------------|\n| issue | hook_bead | The issue ID you're assigned to work on |\n\n## Failure Modes\n\n| Situation | Action |\n|-----------|--------|\n| Tests fail | Fix them. Do not proceed with failures. |\n| Blocked on external | Mail Witness for help, mark yourself stuck |\n| Context filling | Use gt handoff to cycle to fresh session |\n| Unsure what to do | Mail Witness, don't guess |", "status": "closed", "priority": 2, "issue_type": "epic", "created_at": "2026-02-28T01:21:25Z", "updated_at": "2026-02-28T01:22:25Z", "closed_at": "2026-02-28T01:22:25Z", "close_reason": "burned: force re-sling", "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-wisp-nwnl", "title": "mol-refinery-patrol", "description": "Patrol report: Empty queue cycle #19. Nineteen idle cycles. No work arriving.", "status": "closed", "priority": 2, "issue_type": "epic", "assignee": "gastown/refinery", "created_at": "2026-02-28T00:49:39Z", "updated_at": "2026-02-28T00:49:46Z", "closed_at": "2026-02-28T00:49:46Z", "close_reason": "patrol cycle complete: Empty queue cycle #19. Nineteen idle cycles. No work arriving.", "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-wisp-o17n0", "title": "Prepare work for review", "description": "Verify work is complete and ready for merge queue.\n\n**Note:** Do NOT close the issue. The Refinery will close it after successful merge.\nThis enables conflict-resolution retries without reopening closed issues.\n\n**1. Verify the issue shows your work:**\n```bash\nbd show gt-p7uq.3\n# Status should still be 'in_progress' (you're working on it)\n```\n\n**2. Add completion notes:**\n```bash\nbd update gt-p7uq.3 --notes \"Implemented: <brief summary of what was done>\"\n```\n\n**3. Sync beads:**\n```bash\nbd sync\n```\n\n**Exit criteria:** Issue updated with completion notes, beads synced.", "status": "closed", "priority": 2, "issue_type": "task", "assignee": "gastown/polecats/slit", "created_at": "2026-02-28T01:50:20Z", "updated_at": "2026-02-28T01:56:17Z", "closed_at": "2026-02-28T01:56:17Z", "close_reason": "Closed", "dependencies": [{"issue_id": "gt-wisp-o17n0", "depends_on_id": "gt-wisp-73ee3", "type": "blocks", "created_at": "2026-02-27T17:50:19Z", "created_by": "mayor", "metadata": "{}"}, {"issue_id": "gt-wisp-o17n0", "depends_on_id": "gt-wisp-bmfqr", "type": "parent-child", "created_at": "2026-02-27T17:50:19Z", "created_by": "mayor", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-bmfqr"}
{"id": "gt-wisp-o37d", "title": "mol-refinery-patrol", "description": "Patrol report: Empty queue. Continuing patrol loop.", "status": "closed", "priority": 2, "issue_type": "epic", "assignee": "gastown/refinery", "created_at": "2026-02-28T00:53:49Z", "updated_at": "2026-02-28T00:54:01Z", "closed_at": "2026-02-28T00:54:01Z", "close_reason": "patrol cycle complete: Empty queue. Continuing patrol loop.", "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-wisp-o3f6", "title": "mol-refinery-patrol", "description": "Patrol report: Empty queue patrol cycle #3. Three consecutive empty cycles. No merges pending, no mail. Holding position.", "status": "closed", "priority": 2, "issue_type": "epic", "assignee": "gastown/refinery", "created_at": "2026-02-28T00:47:02Z", "updated_at": "2026-02-28T00:47:13Z", "closed_at": "2026-02-28T00:47:13Z", "close_reason": "patrol cycle complete: Empty queue patrol cycle #3. Three consecutive empty cycles. No merges pending, no mail. Holding position.", "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-wisp-o6gr0", "title": "mol-refinery-patrol", "description": "Patrol report: Queue empty, no merges.", "status": "closed", "priority": 2, "issue_type": "epic", "assignee": "gastown/refinery", "created_at": "2026-02-28T02:12:28Z", "updated_at": "2026-02-28T02:12:37Z", "closed_at": "2026-02-28T02:12:37Z", "close_reason": "patrol cycle complete: Queue empty, no merges.", "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-wisp-o7xbz", "title": "Scan merge queue", "description": "Check the beads merge queue - this is the SOURCE OF TRUTH for pending merges.\n\n```bash\ngit fetch --prune origin\ngt mq list <rig>\n```\n\nThe beads MQ tracks all pending merge requests. Do NOT rely on `git branch -r | grep polecat`\nas branches may exist without MR beads, or MR beads may exist for already-merged work.\n\nIf queue empty, skip to context-check step.\n\nFor each MR in the queue, verify the branch still exists:\n```bash\ngit branch -r | grep <branch>\n```\n\nIf branch doesn't exist for a queued MR:\n- Close the MR bead: `bd close <mr-id> --reason \"Branch no longer exists\"`\n- Remove from processing queue\n\nTrack verified MR list for this cycle.", "status": "closed", "priority": 2, "issue_type": "task", "assignee": "gastown/refinery", "created_at": "2026-02-28T01:51:04Z", "updated_at": "2026-02-28T01:51:47Z", "closed_at": "2026-02-28T01:51:47Z", "close_reason": "Closed", "dependencies": [{"issue_id": "gt-wisp-o7xbz", "depends_on_id": "gt-wisp-3wqha", "type": "blocks", "created_at": "2026-02-27T17:51:03Z", "created_by": "refinery", "metadata": "{}"}, {"issue_id": "gt-wisp-o7xbz", "depends_on_id": "gt-wisp-mv5zs", "type": "parent-child", "created_at": "2026-02-27T17:51:03Z", "created_by": "refinery", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-mv5zs"}
{"id": "gt-wisp-orrr", "title": "mol-polecat-work", "description": "Full polecat work lifecycle from assignment through completion.\n\nThis molecule guides a polecat through a complete work assignment. Each step\nhas clear entry/exit criteria and specific commands to run. A polecat can\ncrash after any step and resume from the last completed step.\n\n## Polecat Contract (Self-Cleaning Model)\n\nYou are a self-cleaning worker. You:\n1. Receive work via your hook (pinned molecule + issue)\n2. Work through molecule steps using `bd ready` / `bd close <step>`\n3. Complete and self-clean via `gt done` (submit + nuke yourself)\n4. You are GONE - Refinery merges from MQ\n\n**Self-cleaning:** When you run `gt done`, you push your work, submit to MQ,\nnuke your sandbox, and exit. There is no idle state. Done means gone.\n\n**Important:** This formula defines the template. Your molecule already has step\nbeads created from it. Use `bd ready` to find them - do NOT read this file directly.\n\n**You do NOT:**\n- Push directly to main (Refinery merges from MQ)\n- Close your own issue (Refinery closes after merge)\n- Wait for merge (you're gone after `gt done`)\n- Handle rebase conflicts (Refinery spawns fresh polecats for that)\n\n## Variables\n\n| Variable | Source | Description |\n|----------|--------|-------------|\n| issue | hook_bead | The issue ID you're assigned to work on |\n\n## Failure Modes\n\n| Situation | Action |\n|-----------|--------|\n| Tests fail | Fix them. Do not proceed with failures. |\n| Blocked on external | Mail Witness for help, mark yourself stuck |\n| Context filling | Use gt handoff to cycle to fresh session |\n| Unsure what to do | Mail Witness, don't guess |", "status": "closed", "priority": 2, "issue_type": "epic", "created_at": "2026-02-28T00:47:14Z", "updated_at": "2026-02-28T00:48:00Z", "closed_at": "2026-02-28T00:48:00Z", "close_reason": "burned: force re-sling", "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-wisp-ova5", "title": "mol-refinery-patrol", "description": "Patrol report: Empty queue. Standing by.", "status": "closed", "priority": 2, "issue_type": "epic", "assignee": "gastown/refinery", "created_at": "2026-02-28T00:58:25Z", "updated_at": "2026-02-28T00:58:39Z", "closed_at": "2026-02-28T00:58:39Z", "close_reason": "patrol cycle complete: Empty queue. Standing by.", "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-wisp-p22l", "title": "mol-refinery-patrol", "description": "Patrol report: Empty queue. No work.", "status": "closed", "priority": 2, "issue_type": "epic", "assignee": "gastown/refinery", "created_at": "2026-02-28T00:56:41Z", "updated_at": "2026-02-28T00:56:52Z", "closed_at": "2026-02-28T00:56:52Z", "close_reason": "patrol cycle complete: Empty queue. No work.", "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-wisp-pc8vj", "title": "mol-polecat-work", "description": "Full polecat work lifecycle from assignment through completion.\n\nThis molecule guides a polecat through a complete work assignment. Each step\nhas clear entry/exit criteria and specific commands to run. A polecat can\ncrash after any step and resume from the last completed step.\n\n## Polecat Contract (Self-Cleaning Model)\n\nYou are a self-cleaning worker. You:\n1. Receive work via your hook (pinned molecule + issue)\n2. Work through molecule steps using `bd ready` / `bd close <step>`\n3. Complete and self-clean via `gt done` (submit + nuke yourself)\n4. You are GONE - Refinery merges from MQ\n\n**Self-cleaning:** When you run `gt done`, you push your work, submit to MQ,\nnuke your sandbox, and exit. There is no idle state. Done means gone.\n\n**Important:** This formula defines the template. Your molecule already has step\nbeads created from it. Use `bd ready` to find them - do NOT read this file directly.\n\n**You do NOT:**\n- Push directly to main (Refinery merges from MQ)\n- Close your own issue (Refinery closes after merge)\n- Wait for merge (you're gone after `gt done`)\n- Handle rebase conflicts (Refinery spawns fresh polecats for that)\n\n## Variables\n\n| Variable | Source | Description |\n|----------|--------|-------------|\n| issue | hook_bead | The issue ID you're assigned to work on |\n\n## Failure Modes\n\n| Situation | Action |\n|-----------|--------|\n| Tests fail | Fix them. Do not proceed with failures. |\n| Blocked on external | Mail Witness for help, mark yourself stuck |\n| Context filling | Use gt handoff to cycle to fresh session |\n| Unsure what to do | Mail Witness, don't guess |", "status": "closed", "priority": 2, "issue_type": "epic", "created_at": "2026-02-28T01:24:18Z", "updated_at": "2026-02-28T01:26:21Z", "closed_at": "2026-02-28T01:26:21Z", "close_reason": "burned: polecat nuked", "ephemeral": true, "dependency_count": 0, "dependent_count": 1, "comment_count": 0}
{"id": "gt-wisp-pigaj", "title": "mol-refinery-patrol", "description": "Patrol report: Empty queue. Idle.", "status": "closed", "priority": 2, "issue_type": "epic", "assignee": "gastown/refinery", "created_at": "2026-02-28T01:06:44Z", "updated_at": "2026-02-28T01:06:55Z", "closed_at": "2026-02-28T01:06:55Z", "close_reason": "patrol cycle complete: Empty queue. Idle.", "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-wisp-pmsyb", "title": "Prepare work for review", "description": "Verify work is complete and ready for merge queue.\n\n**Note:** Do NOT close the issue. The Refinery will close it after successful merge.\nThis enables conflict-resolution retries without reopening closed issues.\n\n**1. Verify the issue shows your work:**\n```bash\nbd show gt-y8x4\n# Status should still be 'in_progress' (you're working on it)\n```\n\n**2. Add completion notes:**\n```bash\nbd update gt-y8x4 --notes \"Implemented: <brief summary of what was done>\"\n```\n\n**3. Sync beads:**\n```bash\nbd sync\n```\n\n**Exit criteria:** Issue updated with completion notes, beads synced.", "status": "closed", "priority": 2, "issue_type": "task", "assignee": "gastown/polecats/furiosa", "created_at": "2026-02-28T02:42:12Z", "updated_at": "2026-02-28T02:48:41Z", "closed_at": "2026-02-28T02:48:41Z", "close_reason": "Closed", "dependencies": [{"issue_id": "gt-wisp-pmsyb", "depends_on_id": "gt-wisp-2vlrx", "type": "parent-child", "created_at": "2026-02-27T18:42:12Z", "created_by": "mayor", "metadata": "{}"}, {"issue_id": "gt-wisp-pmsyb", "depends_on_id": "gt-wisp-uegfk", "type": "blocks", "created_at": "2026-02-27T18:42:12Z", "created_by": "mayor", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-2vlrx"}
{"id": "gt-wisp-po9s", "title": "mol-refinery-patrol", "description": "Patrol report: Empty queue. Standing by.", "status": "closed", "priority": 2, "issue_type": "epic", "assignee": "gastown/refinery", "created_at": "2026-02-28T00:53:19Z", "updated_at": "2026-02-28T00:53:28Z", "closed_at": "2026-02-28T00:53:28Z", "close_reason": "patrol cycle complete: Empty queue. Standing by.", "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-wisp-pvcbj", "title": "Check for more work", "description": "More branches to process?\n\n**Entry paths:**\n- Normal: After successful merge-push\n- Conflict-skip: After process-branch created conflict-resolution task\n\nIf yes: Return to process-branch with next branch.\nIf no: Continue to generate-summary.\n\n**Track for this cycle:**\n- branches_merged: count and names of successfully merged branches\n- branches_conflict: count and names of branches skipped due to conflicts\n- conflict_tasks: IDs of conflict-resolution tasks created\n\nThis tracking feeds into generate-summary for the patrol digest.", "status": "closed", "priority": 2, "issue_type": "task", "created_at": "2026-02-28T01:51:04Z", "updated_at": "2026-02-28T02:04:34Z", "closed_at": "2026-02-28T02:04:34Z", "close_reason": "Closed", "dependencies": [{"issue_id": "gt-wisp-pvcbj", "depends_on_id": "gt-wisp-gteqt", "type": "blocks", "created_at": "2026-02-27T17:51:03Z", "created_by": "refinery", "metadata": "{}"}, {"issue_id": "gt-wisp-pvcbj", "depends_on_id": "gt-wisp-mv5zs", "type": "parent-child", "created_at": "2026-02-27T17:51:03Z", "created_by": "refinery", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-mv5zs"}
{"id": "gt-wisp-pwi1", "title": "mol-refinery-patrol", "description": "Patrol report: Empty queue. Standing by.", "status": "closed", "priority": 2, "issue_type": "epic", "assignee": "gastown/refinery", "created_at": "2026-02-28T00:59:13Z", "updated_at": "2026-02-28T00:59:24Z", "closed_at": "2026-02-28T00:59:24Z", "close_reason": "patrol cycle complete: Empty queue. Standing by.", "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-wisp-pxt5p", "title": "Self-review changes", "description": "Review your own changes before running tests.\n\n**1. Review the diff:**\n```bash\ngit diff origin/main...HEAD     # All changes vs main\ngit log --oneline origin/main..HEAD  # All commits\n```\n\n**2. Check for common issues:**\n\n| Category | Look For |\n|----------|----------|\n| Bugs | Off-by-one, null handling, edge cases |\n| Security | Injection, auth bypass, exposed secrets |\n| Style | Naming, formatting, code organization |\n| Completeness | Missing error handling, incomplete paths |\n| Cruft | Debug prints, commented code, TODOs |\n\n**3. Fix issues found:**\nDon't just note them - fix them now. Amend or add commits as needed.\n\n**4. Verify no unintended changes:**\n```bash\ngit diff --stat origin/main...HEAD\n# Only files relevant to gt-p7uq.3 should appear\n```\n\nIf you accidentally modified unrelated files, remove those changes.\n\n**Exit criteria:** Changes are clean, reviewed, and ready for testing.", "status": "closed", "priority": 2, "issue_type": "task", "assignee": "gastown/polecats/slit", "created_at": "2026-02-28T01:50:20Z", "updated_at": "2026-02-28T01:54:59Z", "closed_at": "2026-02-28T01:54:59Z", "close_reason": "Closed", "dependencies": [{"issue_id": "gt-wisp-pxt5p", "depends_on_id": "gt-wisp-bmfqr", "type": "parent-child", "created_at": "2026-02-27T17:50:19Z", "created_by": "mayor", "metadata": "{}"}, {"issue_id": "gt-wisp-pxt5p", "depends_on_id": "gt-wisp-yrvlo", "type": "blocks", "created_at": "2026-02-27T17:50:19Z", "created_by": "mayor", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-bmfqr"}
{"id": "gt-wisp-q57t", "title": "mol-refinery-patrol", "description": "Patrol report: Empty queue cycle #13. Thirteen consecutive idle cycles. No polecat work arriving.", "status": "closed", "priority": 2, "issue_type": "epic", "assignee": "gastown/refinery", "created_at": "2026-02-28T00:48:48Z", "updated_at": "2026-02-28T00:48:56Z", "closed_at": "2026-02-28T00:48:56Z", "close_reason": "patrol cycle complete: Empty queue cycle #13. Thirteen consecutive idle cycles. No polecat work arriving.", "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-wisp-q5c49", "title": "Set up working branch", "description": "Ensure you're on a clean feature branch ready for work.\n\n**1. Check current branch state:**\n```bash\ngit status\ngit branch --show-current\n```\n\n**2. If not on a feature branch, create one:**\n```bash\n# Standard naming: polecat/<your-name> or feature/<issue-id>\ngit checkout -b polecat/<name>\n```\n\n**3. Ensure clean working state:**\n```bash\ngit status                  # Should show \"working tree clean\"\ngit stash list              # Should be empty\n```\n\nIf dirty state from previous work:\n```bash\n# If changes are relevant to this issue:\ngit add -A && git commit -m \"WIP: <description>\"\n\n# If changes are unrelated cruft:\ngit stash push -m \"unrelated changes before gt-a6gp\"\n# Or discard if truly garbage:\ngit checkout -- .\n```\n\n**4. Sync with main:**\n```bash\ngit fetch origin\ngit rebase origin/main      # Get latest, rebase your branch\n```\n\nIf rebase conflicts:\n- Resolve them carefully\n- Test after resolution\n- If stuck, mail Witness\n\n**Exit criteria:** You're on a clean feature branch, rebased on latest main.", "status": "open", "priority": 2, "issue_type": "task", "created_at": "2026-02-28T01:44:54Z", "updated_at": "2026-02-28T01:44:54Z", "dependencies": [{"issue_id": "gt-wisp-q5c49", "depends_on_id": "gt-wisp-spqdu", "type": "parent-child", "created_at": "2026-02-27T17:44:54Z", "created_by": "dog", "metadata": "{}"}, {"issue_id": "gt-wisp-q5c49", "depends_on_id": "gt-wisp-zj4jw", "type": "blocks", "created_at": "2026-02-27T17:44:54Z", "created_by": "dog", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-spqdu"}
{"id": "gt-wisp-q9lq", "title": "mol-refinery-patrol", "description": "Patrol report: Empty queue cycle #8. Extended idle period continues. Refinery standing by.", "status": "closed", "priority": 2, "issue_type": "epic", "assignee": "gastown/refinery", "created_at": "2026-02-28T00:47:53Z", "updated_at": "2026-02-28T00:48:02Z", "closed_at": "2026-02-28T00:48:02Z", "close_reason": "patrol cycle complete: Empty queue cycle #8. Extended idle period continues. Refinery standing by.", "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-wisp-qaifs", "title": "mol-refinery-patrol", "description": "Patrol report: Empty queue. Idle.", "status": "closed", "priority": 2, "issue_type": "epic", "assignee": "gastown/refinery", "created_at": "2026-02-28T01:04:43Z", "updated_at": "2026-02-28T01:04:51Z", "closed_at": "2026-02-28T01:04:51Z", "close_reason": "patrol cycle complete: Empty queue. Idle.", "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-wisp-qd2st", "title": "Verify tests pass on main", "description": "Check if the codebase is healthy BEFORE starting your work.\n\n**The Scotty Principle:** Don't walk past a broken warp core. But also don't\nlet someone else's mess consume your entire mission.\n\n**1. Check tests on main:**\n```bash\ngit stash                   # Save your branch state\ngit checkout origin/main\ngo test ./...               # Or appropriate test command\n```\n\n**2. If tests PASS:**\n```bash\ngit checkout -              # Back to your branch\ngit stash pop               # Restore state\n```\nContinue to implement step.\n\n**3. If tests FAIL on main:**\n\nFile a bead and proceed. Do NOT fix pre-existing failures yourself — that is\nnot your assignment. Your job is to fix the issue on your hook, not main.\n\n| Situation | Action |\n|-----------|--------|\n| Any pre-existing failure | File bead, proceed with your work |\n\nFORBIDDEN: Pushing to main. FORBIDDEN: Fixing pre-existing failures.\nYou work on YOUR feature branch only. `gt done` handles push/MR.\n\n**File and proceed path:**\n```bash\nbd create --title \"Pre-existing test failure: <description>\" --type bug --priority 1\n\ngt mail send <rig>/witness -s \"NOTICE: Main has failing tests\" -m \"Found pre-existing test failures on main.\nFiled: <bead-id>\nProceeding with my assigned work (gt-i6yv).\"\n\ngit checkout -\ngit stash pop\n```\n\n**Context consideration:**\nIf fixing pre-existing failures consumed significant context:\n```bash\ngt handoff -s \"Fixed pre-existing failures, ready for assigned work\" -m \"Issue: gt-i6yv\nFixed: <what you fixed>\nReady to start: implement step\"\n```\nFresh session continues from implement.\n\n**Exit criteria:** Tests pass on main (or issue filed), ready to implement.", "status": "closed", "priority": 2, "issue_type": "task", "created_at": "2026-02-28T01:50:09Z", "updated_at": "2026-02-28T01:53:26Z", "closed_at": "2026-02-28T01:53:26Z", "close_reason": "Closed", "dependencies": [{"issue_id": "gt-wisp-qd2st", "depends_on_id": "gt-wisp-fzhvd", "type": "parent-child", "created_at": "2026-02-27T17:50:09Z", "created_by": "mayor", "metadata": "{}"}, {"issue_id": "gt-wisp-qd2st", "depends_on_id": "gt-wisp-sung3", "type": "blocks", "created_at": "2026-02-27T17:50:09Z", "created_by": "mayor", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-fzhvd"}
{"id": "gt-wisp-qj5rn", "title": "mol-polecat-work", "description": "Full polecat work lifecycle from assignment through completion.\n\nThis molecule guides a polecat through a complete work assignment. Each step\nhas clear entry/exit criteria and specific commands to run. A polecat can\ncrash after any step and resume from the last completed step.\n\n## Polecat Contract (Self-Cleaning Model)\n\nYou are a self-cleaning worker. You:\n1. Receive work via your hook (pinned molecule + issue)\n2. Work through molecule steps using `bd ready` / `bd close <step>`\n3. Complete and self-clean via `gt done` (submit + nuke yourself)\n4. You are GONE - Refinery merges from MQ\n\n**Self-cleaning:** When you run `gt done`, you push your work, submit to MQ,\nnuke your sandbox, and exit. There is no idle state. Done means gone.\n\n**Important:** This formula defines the template. Your molecule already has step\nbeads created from it. Use `bd ready` to find them - do NOT read this file directly.\n\n**You do NOT:**\n- Push directly to main (Refinery merges from MQ)\n- Close your own issue (Refinery closes after merge)\n- Wait for merge (you're gone after `gt done`)\n- Handle rebase conflicts (Refinery spawns fresh polecats for that)\n\n## Variables\n\n| Variable | Source | Description |\n|----------|--------|-------------|\n| issue | hook_bead | The issue ID you're assigned to work on |\n\n## Failure Modes\n\n| Situation | Action |\n|-----------|--------|\n| Tests fail | Fix them. Do not proceed with failures. |\n| Blocked on external | Mail Witness for help, mark yourself stuck |\n| Context filling | Use gt handoff to cycle to fresh session |\n| Unsure what to do | Mail Witness, don't guess |", "status": "closed", "priority": 2, "issue_type": "epic", "created_at": "2026-02-28T02:16:12Z", "updated_at": "2026-02-28T02:19:19Z", "closed_at": "2026-02-28T02:19:19Z", "close_reason": "burned: polecat nuked", "ephemeral": true, "dependency_count": 0, "dependent_count": 1, "comment_count": 0}
{"id": "gt-wisp-qqfz", "title": "mol-refinery-patrol", "description": "Patrol report: Empty queue. Idle.", "status": "closed", "priority": 2, "issue_type": "epic", "assignee": "gastown/refinery", "created_at": "2026-02-28T00:58:50Z", "updated_at": "2026-02-28T00:59:01Z", "closed_at": "2026-02-28T00:59:01Z", "close_reason": "patrol cycle complete: Empty queue. Idle.", "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-wisp-quc9h", "title": "Clean up workspace", "description": "Ensure workspace is pristine before handoff.\n\n**IMPORTANT: Do NOT run `git push`. That is `gt done`'s job (next step).**\n**IMPORTANT: Do NOT discard implementation changes. They must already be committed.**\n\n**1. Check for untracked files:**\n```bash\ngit status --porcelain\n```\nShould be empty. If not:\n- Add to .gitignore if appropriate\n- Remove if temporary: `rm <file>`\n- Commit if needed: `git add <file> && git commit -m \"chore: add <file>\"`\n\n**2. Check stash:**\n```bash\ngit stash list\n```\nShould be empty. If not:\n- Pop and commit: `git stash pop && git add -A && git commit -m \"chore: unstash work (gt-i6yv)\"`\n- Or drop if truly garbage: `git stash drop`\n\n**3. Verify clean state and commits:**\n```bash\ngit status                  # Must show \"working tree clean\"\ngit stash list              # Must be empty\ngit log origin/main..HEAD   # Your commits (should show your work)\n```\n\nIf `git log origin/main..HEAD` shows nothing but you DID make changes,\nsomething went wrong. Do NOT proceed — mail Witness for help.\n\n**Exit criteria:** Workspace clean, no cruft, all work committed. Do NOT push — `gt done` handles that.", "status": "open", "priority": 2, "issue_type": "task", "created_at": "2026-02-28T01:50:09Z", "updated_at": "2026-02-28T01:50:09Z", "dependencies": [{"issue_id": "gt-wisp-quc9h", "depends_on_id": "gt-wisp-9a04v", "type": "blocks", "created_at": "2026-02-27T17:50:09Z", "created_by": "mayor", "metadata": "{}"}, {"issue_id": "gt-wisp-quc9h", "depends_on_id": "gt-wisp-fzhvd", "type": "parent-child", "created_at": "2026-02-27T17:50:09Z", "created_by": "mayor", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-fzhvd"}
{"id": "gt-wisp-rh81", "title": "mol-refinery-patrol", "description": "Patrol report: Empty queue. Idle patrol.", "status": "closed", "priority": 2, "issue_type": "epic", "assignee": "gastown/refinery", "created_at": "2026-02-28T01:00:05Z", "updated_at": "2026-02-28T01:00:14Z", "closed_at": "2026-02-28T01:00:14Z", "close_reason": "patrol cycle complete: Empty queue. Idle patrol.", "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-wisp-rrgx6", "title": "End-of-cycle inbox hygiene", "description": "Verify inbox hygiene before ending patrol cycle.\n\n**Step 1: Check inbox state**\n```bash\ngt mail inbox\n```\n\nInbox should contain ONLY:\n- Unprocessed MERGE_READY messages (will process next cycle)\n- Active work items\n\n**Step 2: Archive any stale messages**\n\nLook for messages that were processed but not archived:\n- PATROL: Wake up that was acknowledged → archive\n- HELP/Blocked that was handled → archive\n- MERGE_READY where merge completed but archive was missed → archive\n\n```bash\n# For each stale message found:\ngt mail archive <message-id>\n```\n\n**Step 3: Check for orphaned MR beads**\n\nLook for open MR beads with no corresponding branch:\n```bash\nbd list --type=merge-request --status=open\n```\n\nFor each open MR bead:\n1. Check if branch exists: `git ls-remote origin refs/heads/<branch>`\n2. If branch gone, verify work is on main: `git log origin/main --oneline | grep \"<source_issue>\"`\n3. If work on main → close MR with reason \"Merged (verified on main)\"\n4. If work NOT on main → investigate before closing:\n   - Check source_issue validity (should be gt-xxxxx, not branch name)\n   - Search reflog/dangling commits if possible\n   - If unverifiable, close with reason \"Unverifiable - no audit trail\"\n   - File bead if this indicates lost work\n\n**NEVER close an MR bead without verifying the work landed or is unrecoverable.**\n\n**Goal**: Inbox should have ≤3 active messages at end of cycle.\nKeep only: pending MRs in queue.", "status": "closed", "priority": 2, "issue_type": "task", "created_at": "2026-02-28T01:51:04Z", "updated_at": "2026-02-28T02:04:52Z", "closed_at": "2026-02-28T02:04:52Z", "close_reason": "Closed", "dependencies": [{"issue_id": "gt-wisp-rrgx6", "depends_on_id": "gt-wisp-8520e", "type": "blocks", "created_at": "2026-02-27T17:51:03Z", "created_by": "refinery", "metadata": "{}"}, {"issue_id": "gt-wisp-rrgx6", "depends_on_id": "gt-wisp-mv5zs", "type": "parent-child", "created_at": "2026-02-27T17:51:03Z", "created_by": "refinery", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-mv5zs"}
{"id": "gt-wisp-ruza", "title": "mol-refinery-patrol", "description": "Patrol report: Empty queue. Idle.", "status": "closed", "priority": 2, "issue_type": "epic", "assignee": "gastown/refinery", "created_at": "2026-02-28T00:54:16Z", "updated_at": "2026-02-28T00:54:29Z", "closed_at": "2026-02-28T00:54:29Z", "close_reason": "patrol cycle complete: Empty queue. Idle.", "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-wisp-s416q", "title": "Load context and verify assignment", "description": "Initialize your session and understand your assignment.\n\n**1. Prime your environment:**\n```bash\ngt prime                    # Load role context\nbd prime                    # Load beads context\n```\n\n**2. Check your hook:**\n```bash\ngt hook               # Shows your pinned molecule and hook_bead\n```\n\nThe hook_bead is your assigned issue. Read it carefully:\n```bash\nbd show gt-w0br           # Full issue details\n```\n\n**3. Check inbox for additional context:**\n```bash\ngt mail inbox\n# Read any HANDOFF or assignment messages\n```\n\n**4. Understand the requirements:**\n- What exactly needs to be done?\n- What files are likely involved?\n- Are there dependencies or blockers?\n- What does \"done\" look like?\n\n**5. Verify you can proceed:**\n- No unresolved blockers on the issue\n- You understand what to do\n- Required resources are available\n\nIf blocked or unclear, mail Witness immediately:\n```bash\ngt mail send <rig>/witness -s \"HELP: Unclear requirements\" -m \"Issue: gt-w0br\nQuestion: <what you need clarified>\"\n```\n\n**Exit criteria:** You understand the work and can begin implementation.", "status": "closed", "priority": 2, "issue_type": "task", "created_at": "2026-02-28T01:40:24Z", "updated_at": "2026-02-28T01:40:54Z", "closed_at": "2026-02-28T01:40:54Z", "close_reason": "Closed", "dependencies": [{"issue_id": "gt-wisp-s416q", "depends_on_id": "gt-wisp-ufzcr", "type": "parent-child", "created_at": "2026-02-27T17:40:23Z", "created_by": "dog", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-ufzcr"}
{"id": "gt-wisp-seyp2", "title": "Handle test failures", "description": "**VERIFICATION GATE**: This step enforces the Beads Promise.\n\nIf tests PASSED: This step auto-completes. Proceed to merge.\n\nIf tests FAILED:\n1. Diagnose: Is this a branch regression or pre-existing on main?\n2. If branch caused it:\n   - Abort merge\n   - Notify polecat: \"Tests failing. Please fix and resubmit.\"\n   - Skip to loop-check\n3. If pre-existing on main:\n   - File a bead: bd create --type=bug --priority=1 --title=\"...\"\n   - FORBIDDEN: Writing code to fix test failures. You merge branches, you do not develop.\n   - Proceed with the merge if the failure is pre-existing (not caused by the branch).\n\n**GATE REQUIREMENT**: You CANNOT proceed to merge-push without:\n- Tests passing, OR\n- Bead filed for the pre-existing failure\n\nFORBIDDEN: Writing application code, exploring polecat implementations, or\nre-implementing fixes. You are a mechanical merge processor.\n\nThis is non-negotiable. Never disavow. Never \"note and proceed.\" ", "status": "closed", "priority": 2, "issue_type": "task", "assignee": "gastown/refinery", "created_at": "2026-02-28T01:51:04Z", "updated_at": "2026-02-28T02:02:09Z", "closed_at": "2026-02-28T02:02:09Z", "close_reason": "Closed", "dependencies": [{"issue_id": "gt-wisp-seyp2", "depends_on_id": "gt-wisp-afztm", "type": "blocks", "created_at": "2026-02-27T17:51:03Z", "created_by": "refinery", "metadata": "{}"}, {"issue_id": "gt-wisp-seyp2", "depends_on_id": "gt-wisp-mv5zs", "type": "parent-child", "created_at": "2026-02-27T17:51:03Z", "created_by": "refinery", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-mv5zs"}
{"id": "gt-wisp-snku", "title": "mol-refinery-patrol", "description": "Patrol report: Empty queue. No work.", "status": "closed", "priority": 2, "issue_type": "epic", "assignee": "gastown/refinery", "created_at": "2026-02-28T00:59:55Z", "updated_at": "2026-02-28T01:00:05Z", "closed_at": "2026-02-28T01:00:05Z", "close_reason": "patrol cycle complete: Empty queue. No work.", "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-wisp-snu3l", "title": "mol-refinery-patrol", "description": "Patrol report: Queue empty, no merges.", "status": "closed", "priority": 2, "issue_type": "epic", "assignee": "gastown/refinery", "created_at": "2026-02-28T02:13:05Z", "updated_at": "2026-02-28T02:13:14Z", "closed_at": "2026-02-28T02:13:14Z", "close_reason": "patrol cycle complete: Queue empty, no merges.", "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-wisp-spacj", "title": "mol-refinery-patrol", "description": "Patrol report: Empty queue patrol cycle. 0 branches merged, 0 messages, inbox clean. Session healthy (RSS 3MB). Looping.", "status": "closed", "priority": 2, "issue_type": "epic", "assignee": "gastown/refinery", "created_at": "2026-02-28T01:07:51Z", "updated_at": "2026-02-28T01:19:02Z", "closed_at": "2026-02-28T01:19:02Z", "close_reason": "patrol cycle complete: Empty queue patrol cycle. 0 branches merged, 0 messages, inbox clean. Session healthy (RSS 3MB). Looping.", "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-wisp-spqdu", "title": "mol-polecat-work", "description": "Full polecat work lifecycle from assignment through completion.\n\nThis molecule guides a polecat through a complete work assignment. Each step\nhas clear entry/exit criteria and specific commands to run. A polecat can\ncrash after any step and resume from the last completed step.\n\n## Polecat Contract (Self-Cleaning Model)\n\nYou are a self-cleaning worker. You:\n1. Receive work via your hook (pinned molecule + issue)\n2. Work through molecule steps using `bd ready` / `bd close <step>`\n3. Complete and self-clean via `gt done` (submit + nuke yourself)\n4. You are GONE - Refinery merges from MQ\n\n**Self-cleaning:** When you run `gt done`, you push your work, submit to MQ,\nnuke your sandbox, and exit. There is no idle state. Done means gone.\n\n**Important:** This formula defines the template. Your molecule already has step\nbeads created from it. Use `bd ready` to find them - do NOT read this file directly.\n\n**You do NOT:**\n- Push directly to main (Refinery merges from MQ)\n- Close your own issue (Refinery closes after merge)\n- Wait for merge (you're gone after `gt done`)\n- Handle rebase conflicts (Refinery spawns fresh polecats for that)\n\n## Variables\n\n| Variable | Source | Description |\n|----------|--------|-------------|\n| issue | hook_bead | The issue ID you're assigned to work on |\n\n## Failure Modes\n\n| Situation | Action |\n|-----------|--------|\n| Tests fail | Fix them. Do not proceed with failures. |\n| Blocked on external | Mail Witness for help, mark yourself stuck |\n| Context filling | Use gt handoff to cycle to fresh session |\n| Unsure what to do | Mail Witness, don't guess |", "status": "closed", "priority": 2, "issue_type": "epic", "created_at": "2026-02-28T01:44:54Z", "updated_at": "2026-02-28T01:49:55Z", "closed_at": "2026-02-28T01:49:55Z", "close_reason": "burned: polecat nuked", "ephemeral": true, "dependency_count": 0, "dependent_count": 1, "comment_count": 0}
{"id": "gt-wisp-srev", "title": "mol-refinery-patrol", "description": "Patrol report: Empty queue cycle #7. Seven consecutive idle cycles. Queue and inbox remain clear.", "status": "closed", "priority": 2, "issue_type": "epic", "assignee": "gastown/refinery", "created_at": "2026-02-28T00:47:44Z", "updated_at": "2026-02-28T00:47:53Z", "closed_at": "2026-02-28T00:47:53Z", "close_reason": "patrol cycle complete: Empty queue cycle #7. Seven consecutive idle cycles. Queue and inbox remain clear.", "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-wisp-sung3", "title": "Set up working branch", "description": "Ensure you're on a clean feature branch ready for work.\n\n**1. Check current branch state:**\n```bash\ngit status\ngit branch --show-current\n```\n\n**2. If not on a feature branch, create one:**\n```bash\n# Standard naming: polecat/<your-name> or feature/<issue-id>\ngit checkout -b polecat/<name>\n```\n\n**3. Ensure clean working state:**\n```bash\ngit status                  # Should show \"working tree clean\"\ngit stash list              # Should be empty\n```\n\nIf dirty state from previous work:\n```bash\n# If changes are relevant to this issue:\ngit add -A && git commit -m \"WIP: <description>\"\n\n# If changes are unrelated cruft:\ngit stash push -m \"unrelated changes before gt-i6yv\"\n# Or discard if truly garbage:\ngit checkout -- .\n```\n\n**4. Sync with main:**\n```bash\ngit fetch origin\ngit rebase origin/main      # Get latest, rebase your branch\n```\n\nIf rebase conflicts:\n- Resolve them carefully\n- Test after resolution\n- If stuck, mail Witness\n\n**Exit criteria:** You're on a clean feature branch, rebased on latest main.", "status": "closed", "priority": 2, "issue_type": "task", "created_at": "2026-02-28T01:50:09Z", "updated_at": "2026-02-28T01:53:05Z", "closed_at": "2026-02-28T01:53:05Z", "close_reason": "Closed", "dependencies": [{"issue_id": "gt-wisp-sung3", "depends_on_id": "gt-wisp-fzhvd", "type": "parent-child", "created_at": "2026-02-27T17:50:09Z", "created_by": "mayor", "metadata": "{}"}, {"issue_id": "gt-wisp-sung3", "depends_on_id": "gt-wisp-m05xx", "type": "blocks", "created_at": "2026-02-27T17:50:09Z", "created_by": "mayor", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-fzhvd"}
{"id": "gt-wisp-t2bay", "title": "Run tests and verify coverage", "description": "Verify your changes don't break anything and are properly tested.\n\n**1. Run the full test suite:**\n```bash\ngo test ./...               # For Go projects\n# Or appropriate command for your stack\n```\n\n**ALL TESTS MUST PASS.** Do not proceed with failures.\n\n**2. If tests fail:**\n- Read the failure output carefully\n- Determine if your change caused it:\n  - If yes: Fix it. Return to implement step if needed.\n  - If no (pre-existing): File a bead, but still must pass for your PR\n\n```bash\n# Check if failure exists on main:\ngit stash\ngit checkout main\ngo test ./...\ngit checkout -\ngit stash pop\n```\n\n**3. Verify test coverage for new code:**\n- New features should have tests\n- Bug fixes should have regression tests\n- If you added significant code without tests, add them now\n\n**4. Run any other quality checks:**\n```bash\n# Linting (if configured)\ngolangci-lint run ./...\n\n# Build check\ngo build ./...\n```\n\n**Exit criteria:** All tests pass, new code has appropriate test coverage.", "status": "open", "priority": 2, "issue_type": "task", "created_at": "2026-02-28T01:44:54Z", "updated_at": "2026-02-28T01:44:54Z", "dependencies": [{"issue_id": "gt-wisp-t2bay", "depends_on_id": "gt-wisp-1qwdh", "type": "blocks", "created_at": "2026-02-27T17:44:54Z", "created_by": "dog", "metadata": "{}"}, {"issue_id": "gt-wisp-t2bay", "depends_on_id": "gt-wisp-spqdu", "type": "parent-child", "created_at": "2026-02-27T17:44:54Z", "created_by": "dog", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-spqdu"}
{"id": "gt-wisp-tqvw", "title": "mol-refinery-patrol", "description": "Patrol report: Empty queue cycle. Continuing patrol.", "status": "closed", "priority": 2, "issue_type": "epic", "assignee": "gastown/refinery", "created_at": "2026-02-28T00:53:07Z", "updated_at": "2026-02-28T00:53:18Z", "closed_at": "2026-02-28T00:53:18Z", "close_reason": "patrol cycle complete: Empty queue cycle. Continuing patrol.", "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-wisp-ttag", "title": "mol-refinery-patrol", "description": "Patrol report: Empty queue. Continuing patrol.", "status": "closed", "priority": 2, "issue_type": "epic", "assignee": "gastown/refinery", "created_at": "2026-02-28T00:59:01Z", "updated_at": "2026-02-28T00:59:13Z", "closed_at": "2026-02-28T00:59:13Z", "close_reason": "patrol cycle complete: Empty queue. Continuing patrol.", "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-wisp-tzeg", "title": "mol-refinery-patrol", "description": "Patrol report: Empty queue cycle. No pending merges. Refinery standing by.", "status": "closed", "priority": 2, "issue_type": "epic", "assignee": "gastown/refinery", "created_at": "2026-02-28T00:52:43Z", "updated_at": "2026-02-28T00:52:56Z", "closed_at": "2026-02-28T00:52:56Z", "close_reason": "patrol cycle complete: Empty queue cycle. No pending merges. Refinery standing by.", "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-wisp-u5xd", "title": "mol-refinery-patrol", "description": "Patrol report: Empty queue. Refinery standing by.", "status": "closed", "priority": 2, "issue_type": "epic", "assignee": "gastown/refinery", "created_at": "2026-02-28T00:56:31Z", "updated_at": "2026-02-28T00:56:41Z", "closed_at": "2026-02-28T00:56:41Z", "close_reason": "patrol cycle complete: Empty queue. Refinery standing by.", "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-wisp-uegfk", "title": "Clean up workspace", "description": "Ensure workspace is pristine before handoff.\n\n**IMPORTANT: Do NOT run `git push`. That is `gt done`'s job (next step).**\n**IMPORTANT: Do NOT discard implementation changes. They must already be committed.**\n\n**1. Check for untracked files:**\n```bash\ngit status --porcelain\n```\nShould be empty. If not:\n- Add to .gitignore if appropriate\n- Remove if temporary: `rm <file>`\n- Commit if needed: `git add <file> && git commit -m \"chore: add <file>\"`\n\n**2. Check stash:**\n```bash\ngit stash list\n```\nShould be empty. If not:\n- Pop and commit: `git stash pop && git add -A && git commit -m \"chore: unstash work (gt-y8x4)\"`\n- Or drop if truly garbage: `git stash drop`\n\n**3. Verify clean state and commits:**\n```bash\ngit status                  # Must show \"working tree clean\"\ngit stash list              # Must be empty\ngit log origin/main..HEAD   # Your commits (should show your work)\n```\n\nIf `git log origin/main..HEAD` shows nothing but you DID make changes,\nsomething went wrong. Do NOT proceed — mail Witness for help.\n\n**Exit criteria:** Workspace clean, no cruft, all work committed. Do NOT push — `gt done` handles that.", "status": "closed", "priority": 2, "issue_type": "task", "assignee": "gastown/polecats/furiosa", "created_at": "2026-02-28T02:42:12Z", "updated_at": "2026-02-28T02:48:34Z", "closed_at": "2026-02-28T02:48:34Z", "close_reason": "Closed", "dependencies": [{"issue_id": "gt-wisp-uegfk", "depends_on_id": "gt-wisp-2vlrx", "type": "parent-child", "created_at": "2026-02-27T18:42:12Z", "created_by": "mayor", "metadata": "{}"}, {"issue_id": "gt-wisp-uegfk", "depends_on_id": "gt-wisp-nlhan", "type": "blocks", "created_at": "2026-02-27T18:42:12Z", "created_by": "mayor", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-2vlrx"}
{"id": "gt-wisp-ufzcr", "title": "mol-polecat-work", "description": "Full polecat work lifecycle from assignment through completion.\n\nThis molecule guides a polecat through a complete work assignment. Each step\nhas clear entry/exit criteria and specific commands to run. A polecat can\ncrash after any step and resume from the last completed step.\n\n## Polecat Contract (Self-Cleaning Model)\n\nYou are a self-cleaning worker. You:\n1. Receive work via your hook (pinned molecule + issue)\n2. Work through molecule steps using `bd ready` / `bd close <step>`\n3. Complete and self-clean via `gt done` (submit + nuke yourself)\n4. You are GONE - Refinery merges from MQ\n\n**Self-cleaning:** When you run `gt done`, you push your work, submit to MQ,\nnuke your sandbox, and exit. There is no idle state. Done means gone.\n\n**Important:** This formula defines the template. Your molecule already has step\nbeads created from it. Use `bd ready` to find them - do NOT read this file directly.\n\n**You do NOT:**\n- Push directly to main (Refinery merges from MQ)\n- Close your own issue (Refinery closes after merge)\n- Wait for merge (you're gone after `gt done`)\n- Handle rebase conflicts (Refinery spawns fresh polecats for that)\n\n## Variables\n\n| Variable | Source | Description |\n|----------|--------|-------------|\n| issue | hook_bead | The issue ID you're assigned to work on |\n\n## Failure Modes\n\n| Situation | Action |\n|-----------|--------|\n| Tests fail | Fix them. Do not proceed with failures. |\n| Blocked on external | Mail Witness for help, mark yourself stuck |\n| Context filling | Use gt handoff to cycle to fresh session |\n| Unsure what to do | Mail Witness, don't guess |", "status": "closed", "priority": 2, "issue_type": "epic", "created_at": "2026-02-28T01:40:24Z", "updated_at": "2026-02-28T01:52:19Z", "closed_at": "2026-02-28T01:52:19Z", "close_reason": "burned: polecat nuked", "ephemeral": true, "dependency_count": 0, "dependent_count": 1, "comment_count": 0}
{"id": "gt-wisp-uh7wd", "title": "mol-polecat-work", "description": "Full polecat work lifecycle from assignment through completion.\n\nThis molecule guides a polecat through a complete work assignment. Each step\nhas clear entry/exit criteria and specific commands to run. A polecat can\ncrash after any step and resume from the last completed step.\n\n## Polecat Contract (Self-Cleaning Model)\n\nYou are a self-cleaning worker. You:\n1. Receive work via your hook (pinned molecule + issue)\n2. Work through molecule steps using `bd ready` / `bd close <step>`\n3. Complete and self-clean via `gt done` (submit + nuke yourself)\n4. You are GONE - Refinery merges from MQ\n\n**Self-cleaning:** When you run `gt done`, you push your work, submit to MQ,\nnuke your sandbox, and exit. There is no idle state. Done means gone.\n\n**Important:** This formula defines the template. Your molecule already has step\nbeads created from it. Use `bd ready` to find them - do NOT read this file directly.\n\n**You do NOT:**\n- Push directly to main (Refinery merges from MQ)\n- Close your own issue (Refinery closes after merge)\n- Wait for merge (you're gone after `gt done`)\n- Handle rebase conflicts (Refinery spawns fresh polecats for that)\n\n## Variables\n\n| Variable | Source | Description |\n|----------|--------|-------------|\n| issue | hook_bead | The issue ID you're assigned to work on |\n\n## Failure Modes\n\n| Situation | Action |\n|-----------|--------|\n| Tests fail | Fix them. Do not proceed with failures. |\n| Blocked on external | Mail Witness for help, mark yourself stuck |\n| Context filling | Use gt handoff to cycle to fresh session |\n| Unsure what to do | Mail Witness, don't guess |", "status": "closed", "priority": 2, "issue_type": "epic", "created_at": "2026-02-28T01:22:57Z", "updated_at": "2026-02-28T01:26:08Z", "closed_at": "2026-02-28T01:26:08Z", "close_reason": "burned: polecat nuked", "ephemeral": true, "dependency_count": 0, "dependent_count": 1, "comment_count": 0}
{"id": "gt-wisp-v9a8", "title": "mol-refinery-patrol", "description": "Patrol report: Empty queue. Standing by.", "status": "closed", "priority": 2, "issue_type": "epic", "assignee": "gastown/refinery", "created_at": "2026-02-28T01:04:32Z", "updated_at": "2026-02-28T01:04:42Z", "closed_at": "2026-02-28T01:04:42Z", "close_reason": "patrol cycle complete: Empty queue. Standing by.", "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-wisp-v9nm9", "title": "mol-refinery-patrol", "description": "Patrol report: Empty queue. No work.", "status": "closed", "priority": 2, "issue_type": "epic", "assignee": "gastown/refinery", "created_at": "2026-02-28T01:07:41Z", "updated_at": "2026-02-28T01:07:51Z", "closed_at": "2026-02-28T01:07:51Z", "close_reason": "patrol cycle complete: Empty queue. No work.", "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-wisp-vr21", "title": "mol-refinery-patrol", "description": "Patrol report: Empty queue cycle #22. Sustained idle. No merges pending.", "status": "closed", "priority": 2, "issue_type": "epic", "assignee": "gastown/refinery", "created_at": "2026-02-28T00:50:11Z", "updated_at": "2026-02-28T00:50:19Z", "closed_at": "2026-02-28T00:50:19Z", "close_reason": "patrol cycle complete: Empty queue cycle #22. Sustained idle. No merges pending.", "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-wisp-w0iaz", "title": "Merge: gt-p7uq.1", "description": "branch: polecat/slit/gt-p7uq.1@mm5n51k0\ntarget: main\nsource_issue: gt-p7uq.1\nrig: gastown\nworker: slit\nagent_bead: gt-gastown-polecat-slit\nretry_count: 0\nlast_conflict_sha: null\nconflict_task_id: null", "status": "closed", "priority": 2, "issue_type": "task", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-28T01:37:11Z", "created_by": "gastown/polecats/slit", "updated_at": "2026-02-28T01:42:28Z", "closed_at": "2026-02-28T01:42:28Z", "close_reason": "Branch polecat/slit/gt-p7uq.1@mm5n51k0 no longer exists (polecat worktree removed, branch not on any remote)", "labels": ["gt:merge-request"], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-wisp-w7o3", "title": "mol-polecat-work", "description": "Full polecat work lifecycle from assignment through completion.\n\nThis molecule guides a polecat through a complete work assignment. Each step\nhas clear entry/exit criteria and specific commands to run. A polecat can\ncrash after any step and resume from the last completed step.\n\n## Polecat Contract (Self-Cleaning Model)\n\nYou are a self-cleaning worker. You:\n1. Receive work via your hook (pinned molecule + issue)\n2. Work through molecule steps using `bd ready` / `bd close <step>`\n3. Complete and self-clean via `gt done` (submit + nuke yourself)\n4. You are GONE - Refinery merges from MQ\n\n**Self-cleaning:** When you run `gt done`, you push your work, submit to MQ,\nnuke your sandbox, and exit. There is no idle state. Done means gone.\n\n**Important:** This formula defines the template. Your molecule already has step\nbeads created from it. Use `bd ready` to find them - do NOT read this file directly.\n\n**You do NOT:**\n- Push directly to main (Refinery merges from MQ)\n- Close your own issue (Refinery closes after merge)\n- Wait for merge (you're gone after `gt done`)\n- Handle rebase conflicts (Refinery spawns fresh polecats for that)\n\n## Variables\n\n| Variable | Source | Description |\n|----------|--------|-------------|\n| issue | hook_bead | The issue ID you're assigned to work on |\n\n## Failure Modes\n\n| Situation | Action |\n|-----------|--------|\n| Tests fail | Fix them. Do not proceed with failures. |\n| Blocked on external | Mail Witness for help, mark yourself stuck |\n| Context filling | Use gt handoff to cycle to fresh session |\n| Unsure what to do | Mail Witness, don't guess |", "status": "closed", "priority": 2, "issue_type": "epic", "created_at": "2026-02-28T00:48:00Z", "updated_at": "2026-02-28T01:20:53Z", "closed_at": "2026-02-28T01:20:53Z", "close_reason": "burned: polecat nuked", "ephemeral": true, "dependency_count": 0, "dependent_count": 1, "comment_count": 0}
{"id": "gt-wisp-wi62", "title": "mol-refinery-patrol", "description": "Patrol report: Empty queue. Continuing patrol.", "status": "closed", "priority": 2, "issue_type": "epic", "assignee": "gastown/refinery", "created_at": "2026-02-28T00:55:52Z", "updated_at": "2026-02-28T00:56:02Z", "closed_at": "2026-02-28T00:56:02Z", "close_reason": "patrol cycle complete: Empty queue. Continuing patrol.", "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-wisp-wlh3", "title": "mol-refinery-patrol", "description": "Patrol report: Empty queue cycle #5. Sustained idle period. Refinery healthy, awaiting polecat submissions.", "status": "closed", "priority": 2, "issue_type": "epic", "assignee": "gastown/refinery", "created_at": "2026-02-28T00:47:25Z", "updated_at": "2026-02-28T00:47:34Z", "closed_at": "2026-02-28T00:47:34Z", "close_reason": "patrol cycle complete: Empty queue cycle #5. Sustained idle period. Refinery healthy, awaiting polecat submissions.", "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-wisp-wmlz3", "title": "Prepare work for review", "description": "Verify work is complete and ready for merge queue.\n\n**Note:** Do NOT close the issue. The Refinery will close it after successful merge.\nThis enables conflict-resolution retries without reopening closed issues.\n\n**1. Verify the issue shows your work:**\n```bash\nbd show gt-a6gp\n# Status should still be 'in_progress' (you're working on it)\n```\n\n**2. Add completion notes:**\n```bash\nbd update gt-a6gp --notes \"Implemented: <brief summary of what was done>\"\n```\n\n**3. Sync beads:**\n```bash\nbd sync\n```\n\n**Exit criteria:** Issue updated with completion notes, beads synced.", "status": "open", "priority": 2, "issue_type": "task", "created_at": "2026-02-28T01:44:54Z", "updated_at": "2026-02-28T01:44:54Z", "dependencies": [{"issue_id": "gt-wisp-wmlz3", "depends_on_id": "gt-wisp-6v5e0", "type": "blocks", "created_at": "2026-02-27T17:44:54Z", "created_by": "dog", "metadata": "{}"}, {"issue_id": "gt-wisp-wmlz3", "depends_on_id": "gt-wisp-spqdu", "type": "parent-child", "created_at": "2026-02-27T17:44:54Z", "created_by": "dog", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-spqdu"}
{"id": "gt-wisp-wslq", "title": "Merge: gt-z5je", "description": "branch: polecat/rictus/gt-z5je@mm5kzh5x\ntarget: main\nsource_issue: gt-z5je\nrig: gastown\nworker: rictus\nagent_bead: gt-gastown-polecat-rictus\nretry_count: 0\nlast_conflict_sha: null\nconflict_task_id: null", "status": "closed", "priority": 2, "issue_type": "task", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-28T00:31:08Z", "created_by": "gastown/polecats/rictus", "updated_at": "2026-02-28T00:33:43Z", "closed_at": "2026-02-28T00:33:43Z", "labels": ["gt:merge-request"], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-wisp-wvxz", "title": "mol-refinery-patrol", "description": "Patrol report: Empty queue. No merges.", "status": "closed", "priority": 2, "issue_type": "epic", "assignee": "gastown/refinery", "created_at": "2026-02-28T01:00:25Z", "updated_at": "2026-02-28T01:00:35Z", "closed_at": "2026-02-28T01:00:35Z", "close_reason": "patrol cycle complete: Empty queue. No merges.", "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-wisp-x4n6r", "title": "Submit work and self-clean", "description": "Submit your work and clean up. You cease to exist after this step.\n\n**Self-Cleaning Model:**\nOnce you run `gt done`, you're gone. The command:\n1. Pushes your branch to origin\n2. Creates an MR bead in the merge queue\n3. Nukes your sandbox (worktree removal)\n4. Exits your session immediately\n\n**Run gt done:**\n```bash\ngt done\n```\n\nYou should see output like:\n```\n✓ Work submitted to merge queue\n  MR ID: gt-xxxxx\n  Source: polecat/<name>\n  Target: main\n  Issue: gt-i6yv\n✓ Sandbox nuked\n✓ Session exiting\n```\n\n**What happens next (not your concern):**\n- Refinery processes your MR from the queue\n- Refinery rebases and merges to main\n- Refinery closes the issue\n- If conflicts: Refinery spawns a FRESH polecat to re-implement\n\nYou are NOT involved in any of that. You're gone. Done means gone.\n\n**Exit criteria:** Work submitted, sandbox nuked, session exited.", "status": "open", "priority": 2, "issue_type": "task", "created_at": "2026-02-28T01:50:09Z", "updated_at": "2026-02-28T01:50:09Z", "dependencies": [{"issue_id": "gt-wisp-x4n6r", "depends_on_id": "gt-wisp-cy6kt", "type": "blocks", "created_at": "2026-02-27T17:50:09Z", "created_by": "mayor", "metadata": "{}"}, {"issue_id": "gt-wisp-x4n6r", "depends_on_id": "gt-wisp-fzhvd", "type": "parent-child", "created_at": "2026-02-27T17:50:09Z", "created_by": "mayor", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-fzhvd"}
{"id": "gt-wisp-x7cba", "title": "mol-refinery-patrol", "description": "Patrol report: Merged 2 branches to main: slit/gt-0jh0 (test fix, 2930ba83), furiosa/gt-kk21 (compactor-dog plugin, ac38b1c9). All tests pass, no conflicts.", "status": "closed", "priority": 2, "issue_type": "epic", "assignee": "gastown/refinery", "created_at": "2026-02-28T02:13:37Z", "updated_at": "2026-02-28T02:19:14Z", "closed_at": "2026-02-28T02:19:14Z", "close_reason": "patrol cycle complete: Merged 2 branches to main: slit/gt-0jh0 (test fix, 2930ba83), furiosa/gt-kk21 (compactor-dog plugin, ac38b1c9). All tests pass, no conflicts.", "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-wisp-xbt0p", "title": "mol-refinery-patrol", "description": "Patrol report: Empty queue. Idle.", "status": "closed", "priority": 2, "issue_type": "epic", "assignee": "gastown/refinery", "created_at": "2026-02-28T01:06:07Z", "updated_at": "2026-02-28T01:06:15Z", "closed_at": "2026-02-28T01:06:15Z", "close_reason": "patrol cycle complete: Empty queue. Idle.", "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-wisp-xekw6", "title": "mol-polecat-work", "description": "Full polecat work lifecycle from assignment through completion.\n\nThis molecule guides a polecat through a complete work assignment. Each step\nhas clear entry/exit criteria and specific commands to run. A polecat can\ncrash after any step and resume from the last completed step.\n\n## Polecat Contract (Self-Cleaning Model)\n\nYou are a self-cleaning worker. You:\n1. Receive work via your hook (pinned molecule + issue)\n2. Work through molecule steps using `bd ready` / `bd close <step>`\n3. Complete and self-clean via `gt done` (submit + nuke yourself)\n4. You are GONE - Refinery merges from MQ\n\n**Self-cleaning:** When you run `gt done`, you push your work, submit to MQ,\nnuke your sandbox, and exit. There is no idle state. Done means gone.\n\n**Important:** This formula defines the template. Your molecule already has step\nbeads created from it. Use `bd ready` to find them - do NOT read this file directly.\n\n**You do NOT:**\n- Push directly to main (Refinery merges from MQ)\n- Close your own issue (Refinery closes after merge)\n- Wait for merge (you're gone after `gt done`)\n- Handle rebase conflicts (Refinery spawns fresh polecats for that)\n\n## Variables\n\n| Variable | Source | Description |\n|----------|--------|-------------|\n| issue | hook_bead | The issue ID you're assigned to work on |\n\n## Failure Modes\n\n| Situation | Action |\n|-----------|--------|\n| Tests fail | Fix them. Do not proceed with failures. |\n| Blocked on external | Mail Witness for help, mark yourself stuck |\n| Context filling | Use gt handoff to cycle to fresh session |\n| Unsure what to do | Mail Witness, don't guess |", "status": "closed", "priority": 2, "issue_type": "epic", "created_at": "2026-02-28T01:26:46Z", "updated_at": "2026-02-28T01:44:54Z", "closed_at": "2026-02-28T01:44:54Z", "close_reason": "burned: force re-sling", "ephemeral": true, "dependency_count": 0, "dependent_count": 1, "comment_count": 0}
{"id": "gt-wisp-xjhe", "title": "mol-polecat-work", "description": "Full polecat work lifecycle from assignment through completion.\n\nThis molecule guides a polecat through a complete work assignment. Each step\nhas clear entry/exit criteria and specific commands to run. A polecat can\ncrash after any step and resume from the last completed step.\n\n## Polecat Contract (Self-Cleaning Model)\n\nYou are a self-cleaning worker. You:\n1. Receive work via your hook (pinned molecule + issue)\n2. Work through molecule steps using `bd ready` / `bd close <step>`\n3. Complete and self-clean via `gt done` (submit + nuke yourself)\n4. You are GONE - Refinery merges from MQ\n\n**Self-cleaning:** When you run `gt done`, you push your work, submit to MQ,\nnuke your sandbox, and exit. There is no idle state. Done means gone.\n\n**Important:** This formula defines the template. Your molecule already has step\nbeads created from it. Use `bd ready` to find them - do NOT read this file directly.\n\n**You do NOT:**\n- Push directly to main (Refinery merges from MQ)\n- Close your own issue (Refinery closes after merge)\n- Wait for merge (you're gone after `gt done`)\n- Handle rebase conflicts (Refinery spawns fresh polecats for that)\n\n## Variables\n\n| Variable | Source | Description |\n|----------|--------|-------------|\n| issue | hook_bead | The issue ID you're assigned to work on |\n\n## Failure Modes\n\n| Situation | Action |\n|-----------|--------|\n| Tests fail | Fix them. Do not proceed with failures. |\n| Blocked on external | Mail Witness for help, mark yourself stuck |\n| Context filling | Use gt handoff to cycle to fresh session |\n| Unsure what to do | Mail Witness, don't guess |", "status": "closed", "priority": 2, "issue_type": "epic", "created_at": "2026-02-28T00:50:29Z", "updated_at": "2026-02-28T01:21:25Z", "closed_at": "2026-02-28T01:21:25Z", "close_reason": "burned: force re-sling", "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-wisp-xplya", "title": "Verify tests pass on main", "description": "Check if the codebase is healthy BEFORE starting your work.\n\n**The Scotty Principle:** Don't walk past a broken warp core. But also don't\nlet someone else's mess consume your entire mission.\n\n**1. Check tests on main:**\n```bash\ngit stash                   # Save your branch state\ngit checkout origin/main\ngo test ./...               # Or appropriate test command\n```\n\n**2. If tests PASS:**\n```bash\ngit checkout -              # Back to your branch\ngit stash pop               # Restore state\n```\nContinue to implement step.\n\n**3. If tests FAIL on main:**\n\nFile a bead and proceed. Do NOT fix pre-existing failures yourself — that is\nnot your assignment. Your job is to fix the issue on your hook, not main.\n\n| Situation | Action |\n|-----------|--------|\n| Any pre-existing failure | File bead, proceed with your work |\n\nFORBIDDEN: Pushing to main. FORBIDDEN: Fixing pre-existing failures.\nYou work on YOUR feature branch only. `gt done` handles push/MR.\n\n**File and proceed path:**\n```bash\nbd create --title \"Pre-existing test failure: <description>\" --type bug --priority 1\n\ngt mail send <rig>/witness -s \"NOTICE: Main has failing tests\" -m \"Found pre-existing test failures on main.\nFiled: <bead-id>\nProceeding with my assigned work (gt-y8x4).\"\n\ngit checkout -\ngit stash pop\n```\n\n**Context consideration:**\nIf fixing pre-existing failures consumed significant context:\n```bash\ngt handoff -s \"Fixed pre-existing failures, ready for assigned work\" -m \"Issue: gt-y8x4\nFixed: <what you fixed>\nReady to start: implement step\"\n```\nFresh session continues from implement.\n\n**Exit criteria:** Tests pass on main (or issue filed), ready to implement.", "status": "closed", "priority": 2, "issue_type": "task", "assignee": "gastown/polecats/furiosa", "created_at": "2026-02-28T02:42:12Z", "updated_at": "2026-02-28T02:44:33Z", "closed_at": "2026-02-28T02:44:33Z", "close_reason": "Closed", "dependencies": [{"issue_id": "gt-wisp-xplya", "depends_on_id": "gt-wisp-2vlrx", "type": "parent-child", "created_at": "2026-02-27T18:42:12Z", "created_by": "mayor", "metadata": "{}"}, {"issue_id": "gt-wisp-xplya", "depends_on_id": "gt-wisp-5mg9u", "type": "blocks", "created_at": "2026-02-27T18:42:12Z", "created_by": "mayor", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-2vlrx"}
{"id": "gt-wisp-xsuu", "title": "mol-refinery-patrol", "description": "Patrol report: Empty queue. Standing by for work.", "status": "closed", "priority": 2, "issue_type": "epic", "assignee": "gastown/refinery", "created_at": "2026-02-28T01:00:14Z", "updated_at": "2026-02-28T01:00:24Z", "closed_at": "2026-02-28T01:00:24Z", "close_reason": "patrol cycle complete: Empty queue. Standing by for work.", "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-wisp-xsvwh", "title": "mol-refinery-patrol", "description": "Patrol report: Empty queue. Standing by.", "status": "closed", "priority": 2, "issue_type": "epic", "assignee": "gastown/refinery", "created_at": "2026-02-28T01:06:25Z", "updated_at": "2026-02-28T01:06:34Z", "closed_at": "2026-02-28T01:06:34Z", "close_reason": "patrol cycle complete: Empty queue. Standing by.", "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-wisp-xu06", "title": "mol-polecat-work", "description": "Full polecat work lifecycle from assignment through completion.\n\nThis molecule guides a polecat through a complete work assignment. Each step\nhas clear entry/exit criteria and specific commands to run. A polecat can\ncrash after any step and resume from the last completed step.\n\n## Polecat Contract (Self-Cleaning Model)\n\nYou are a self-cleaning worker. You:\n1. Receive work via your hook (pinned molecule + issue)\n2. Work through molecule steps using `bd ready` / `bd close <step>`\n3. Complete and self-clean via `gt done` (submit + nuke yourself)\n4. You are GONE - Refinery merges from MQ\n\n**Self-cleaning:** When you run `gt done`, you push your work, submit to MQ,\nnuke your sandbox, and exit. There is no idle state. Done means gone.\n\n**Important:** This formula defines the template. Your molecule already has step\nbeads created from it. Use `bd ready` to find them - do NOT read this file directly.\n\n**You do NOT:**\n- Push directly to main (Refinery merges from MQ)\n- Close your own issue (Refinery closes after merge)\n- Wait for merge (you're gone after `gt done`)\n- Handle rebase conflicts (Refinery spawns fresh polecats for that)\n\n## Variables\n\n| Variable | Source | Description |\n|----------|--------|-------------|\n| issue | hook_bead | The issue ID you're assigned to work on |\n\n## Failure Modes\n\n| Situation | Action |\n|-----------|--------|\n| Tests fail | Fix them. Do not proceed with failures. |\n| Blocked on external | Mail Witness for help, mark yourself stuck |\n| Context filling | Use gt handoff to cycle to fresh session |\n| Unsure what to do | Mail Witness, don't guess |", "status": "closed", "priority": 2, "issue_type": "epic", "created_at": "2026-02-28T00:26:57Z", "updated_at": "2026-02-28T00:43:49Z", "closed_at": "2026-02-28T00:43:49Z", "close_reason": "burned: polecat nuked", "ephemeral": true, "dependency_count": 0, "dependent_count": 1, "comment_count": 0}
{"id": "gt-wisp-xxns", "title": "mol-refinery-patrol", "description": "Patrol report: Empty queue. No merges.", "status": "closed", "priority": 2, "issue_type": "epic", "assignee": "gastown/refinery", "created_at": "2026-02-28T00:55:29Z", "updated_at": "2026-02-28T00:55:40Z", "closed_at": "2026-02-28T00:55:40Z", "close_reason": "patrol cycle complete: Empty queue. No merges.", "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-wisp-xymoy", "title": "Set up working branch", "description": "Ensure you're on a clean feature branch ready for work.\n\n**1. Check current branch state:**\n```bash\ngit status\ngit branch --show-current\n```\n\n**2. If not on a feature branch, create one:**\n```bash\n# Standard naming: polecat/<your-name> or feature/<issue-id>\ngit checkout -b polecat/<name>\n```\n\n**3. Ensure clean working state:**\n```bash\ngit status                  # Should show \"working tree clean\"\ngit stash list              # Should be empty\n```\n\nIf dirty state from previous work:\n```bash\n# If changes are relevant to this issue:\ngit add -A && git commit -m \"WIP: <description>\"\n\n# If changes are unrelated cruft:\ngit stash push -m \"unrelated changes before gt-w0br\"\n# Or discard if truly garbage:\ngit checkout -- .\n```\n\n**4. Sync with main:**\n```bash\ngit fetch origin\ngit rebase origin/main      # Get latest, rebase your branch\n```\n\nIf rebase conflicts:\n- Resolve them carefully\n- Test after resolution\n- If stuck, mail Witness\n\n**Exit criteria:** You're on a clean feature branch, rebased on latest main.", "status": "closed", "priority": 2, "issue_type": "task", "created_at": "2026-02-28T01:40:24Z", "updated_at": "2026-02-28T01:41:10Z", "closed_at": "2026-02-28T01:41:10Z", "close_reason": "Closed", "dependencies": [{"issue_id": "gt-wisp-xymoy", "depends_on_id": "gt-wisp-s416q", "type": "blocks", "created_at": "2026-02-27T17:40:24Z", "created_by": "dog", "metadata": "{}"}, {"issue_id": "gt-wisp-xymoy", "depends_on_id": "gt-wisp-ufzcr", "type": "parent-child", "created_at": "2026-02-27T17:40:23Z", "created_by": "dog", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-ufzcr"}
{"id": "gt-wisp-y2ayj", "title": "mol-refinery-patrol", "description": "Patrol report: Queue empty. Polecat slit pushed new work on gt-0jh0 (test fix), no MR yet.", "status": "closed", "priority": 2, "issue_type": "epic", "assignee": "gastown/refinery", "created_at": "2026-02-28T02:13:14Z", "updated_at": "2026-02-28T02:13:26Z", "closed_at": "2026-02-28T02:13:26Z", "close_reason": "patrol cycle complete: Queue empty. Polecat slit pushed new work on gt-0jh0 (test fix), no MR yet.", "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-wisp-y63ad", "title": "mol-refinery-patrol", "description": "Patrol report: Queue empty, no merges. Polecats still working.", "status": "closed", "priority": 2, "issue_type": "epic", "assignee": "gastown/refinery", "created_at": "2026-02-28T02:11:46Z", "updated_at": "2026-02-28T02:12:04Z", "closed_at": "2026-02-28T02:12:04Z", "close_reason": "patrol cycle complete: Queue empty, no merges. Polecats still working.", "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-wisp-y6ta", "title": "mol-refinery-patrol", "description": "Patrol report: Empty queue cycle #23. Queue empty, inbox clear.", "status": "closed", "priority": 2, "issue_type": "epic", "assignee": "gastown/refinery", "created_at": "2026-02-28T00:50:20Z", "updated_at": "2026-02-28T00:50:29Z", "closed_at": "2026-02-28T00:50:29Z", "close_reason": "patrol cycle complete: Empty queue cycle #23. Queue empty, inbox clear.", "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-wisp-ycc4", "title": "Merge: gt-61em", "description": "branch: polecat/slit/gt-61em@mm5kz7yr\ntarget: main\nsource_issue: gt-61em\nrig: gastown\nworker: slit\nagent_bead: gt-gastown-polecat-slit\nretry_count: 0\nlast_conflict_sha: null\nconflict_task_id: null", "status": "closed", "priority": 2, "issue_type": "task", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-28T00:50:30Z", "created_by": "gastown/polecats/slit", "updated_at": "2026-02-28T00:52:06Z", "closed_at": "2026-02-28T00:52:06Z", "close_reason": "Already merged: branch content on main (048a73fe). Rebase skipped polecat commit fe8fe5dd as already applied.", "labels": ["gt:merge-request"], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-wisp-ygzue", "title": "Prepare work for review", "description": "Verify work is complete and ready for merge queue.\n\n**Note:** Do NOT close the issue. The Refinery will close it after successful merge.\nThis enables conflict-resolution retries without reopening closed issues.\n\n**1. Verify the issue shows your work:**\n```bash\nbd show gt-w0br\n# Status should still be 'in_progress' (you're working on it)\n```\n\n**2. Add completion notes:**\n```bash\nbd update gt-w0br --notes \"Implemented: <brief summary of what was done>\"\n```\n\n**3. Sync beads:**\n```bash\nbd sync\n```\n\n**Exit criteria:** Issue updated with completion notes, beads synced.", "status": "closed", "priority": 2, "issue_type": "task", "created_at": "2026-02-28T01:40:24Z", "updated_at": "2026-02-28T01:51:08Z", "closed_at": "2026-02-28T01:51:08Z", "close_reason": "Closed", "dependencies": [{"issue_id": "gt-wisp-ygzue", "depends_on_id": "gt-wisp-ufzcr", "type": "parent-child", "created_at": "2026-02-27T17:40:24Z", "created_by": "dog", "metadata": "{}"}, {"issue_id": "gt-wisp-ygzue", "depends_on_id": "gt-wisp-z0pfo", "type": "blocks", "created_at": "2026-02-27T17:40:24Z", "created_by": "dog", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-ufzcr"}
{"id": "gt-wisp-yrvlo", "title": "Implement the solution", "description": "Do the actual implementation work.\n\n**Working principles:**\n- Follow existing codebase conventions\n- Make atomic, focused commits\n- Keep changes scoped to the assigned issue\n- Don't gold-plate or scope-creep\n\n**Commit frequently:**\n```bash\n# After each logical unit of work:\ngit add <files>\ngit commit -m \"<type>: <description> (gt-p7uq.3)\"\n```\n\nCommit types: feat, fix, refactor, test, docs, chore\n\n**Discovered work:**\nIf you find bugs or improvements outside your scope:\n```bash\nbd create --title \"Found: <description>\" --type bug --priority 2\n# Note the ID, continue with your work\n```\n\nDo NOT fix unrelated issues in this branch.\n\n**If stuck:**\nDon't spin for more than 15 minutes. Mail Witness:\n```bash\ngt mail send <rig>/witness -s \"HELP: Stuck on implementation\" -m \"Issue: gt-p7uq.3\nTrying to: <what you're attempting>\nProblem: <what's blocking you>\nTried: <what you've attempted>\"\n```\n\n**Exit criteria:** Implementation complete, all changes committed.", "status": "closed", "priority": 2, "issue_type": "task", "assignee": "gastown/polecats/slit", "created_at": "2026-02-28T01:50:20Z", "updated_at": "2026-02-28T01:54:42Z", "closed_at": "2026-02-28T01:54:42Z", "close_reason": "Closed", "dependencies": [{"issue_id": "gt-wisp-yrvlo", "depends_on_id": "gt-wisp-bmfqr", "type": "parent-child", "created_at": "2026-02-27T17:50:19Z", "created_by": "mayor", "metadata": "{}"}, {"issue_id": "gt-wisp-yrvlo", "depends_on_id": "gt-wisp-gn5op", "type": "blocks", "created_at": "2026-02-27T17:50:19Z", "created_by": "mayor", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-bmfqr"}
{"id": "gt-wisp-z0pfo", "title": "Clean up workspace", "description": "Ensure workspace is pristine before handoff.\n\n**IMPORTANT: Do NOT run `git push`. That is `gt done`'s job (next step).**\n**IMPORTANT: Do NOT discard implementation changes. They must already be committed.**\n\n**1. Check for untracked files:**\n```bash\ngit status --porcelain\n```\nShould be empty. If not:\n- Add to .gitignore if appropriate\n- Remove if temporary: `rm <file>`\n- Commit if needed: `git add <file> && git commit -m \"chore: add <file>\"`\n\n**2. Check stash:**\n```bash\ngit stash list\n```\nShould be empty. If not:\n- Pop and commit: `git stash pop && git add -A && git commit -m \"chore: unstash work (gt-w0br)\"`\n- Or drop if truly garbage: `git stash drop`\n\n**3. Verify clean state and commits:**\n```bash\ngit status                  # Must show \"working tree clean\"\ngit stash list              # Must be empty\ngit log origin/main..HEAD   # Your commits (should show your work)\n```\n\nIf `git log origin/main..HEAD` shows nothing but you DID make changes,\nsomething went wrong. Do NOT proceed — mail Witness for help.\n\n**Exit criteria:** Workspace clean, no cruft, all work committed. Do NOT push — `gt done` handles that.", "status": "closed", "priority": 2, "issue_type": "task", "created_at": "2026-02-28T01:40:24Z", "updated_at": "2026-02-28T01:50:56Z", "closed_at": "2026-02-28T01:50:56Z", "close_reason": "Closed", "dependencies": [{"issue_id": "gt-wisp-z0pfo", "depends_on_id": "gt-wisp-bmeai", "type": "blocks", "created_at": "2026-02-27T17:40:24Z", "created_by": "dog", "metadata": "{}"}, {"issue_id": "gt-wisp-z0pfo", "depends_on_id": "gt-wisp-ufzcr", "type": "parent-child", "created_at": "2026-02-27T17:40:24Z", "created_by": "dog", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-ufzcr"}
{"id": "gt-wisp-z3ccc", "title": "mol-polecat-work", "description": "Full polecat work lifecycle from assignment through completion.\n\nThis molecule guides a polecat through a complete work assignment. Each step\nhas clear entry/exit criteria and specific commands to run. A polecat can\ncrash after any step and resume from the last completed step.\n\n## Polecat Contract (Self-Cleaning Model)\n\nYou are a self-cleaning worker. You:\n1. Receive work via your hook (pinned molecule + issue)\n2. Work through molecule steps using `bd ready` / `bd close <step>`\n3. Complete and self-clean via `gt done` (submit + nuke yourself)\n4. You are GONE - Refinery merges from MQ\n\n**Self-cleaning:** When you run `gt done`, you push your work, submit to MQ,\nnuke your sandbox, and exit. There is no idle state. Done means gone.\n\n**Important:** This formula defines the template. Your molecule already has step\nbeads created from it. Use `bd ready` to find them - do NOT read this file directly.\n\n**You do NOT:**\n- Push directly to main (Refinery merges from MQ)\n- Close your own issue (Refinery closes after merge)\n- Wait for merge (you're gone after `gt done`)\n- Handle rebase conflicts (Refinery spawns fresh polecats for that)\n\n## Variables\n\n| Variable | Source | Description |\n|----------|--------|-------------|\n| issue | hook_bead | The issue ID you're assigned to work on |\n\n## Failure Modes\n\n| Situation | Action |\n|-----------|--------|\n| Tests fail | Fix them. Do not proceed with failures. |\n| Blocked on external | Mail Witness for help, mark yourself stuck |\n| Context filling | Use gt handoff to cycle to fresh session |\n| Unsure what to do | Mail Witness, don't guess |", "status": "closed", "priority": 2, "issue_type": "epic", "created_at": "2026-02-28T02:11:22Z", "updated_at": "2026-02-28T02:14:56Z", "closed_at": "2026-02-28T02:14:56Z", "close_reason": "burned: polecat nuked", "ephemeral": true, "dependency_count": 0, "dependent_count": 1, "comment_count": 0}
{"id": "gt-wisp-zc6gi", "title": "Self-review changes", "description": "Review your own changes before running tests.\n\n**1. Review the diff:**\n```bash\ngit diff origin/main...HEAD     # All changes vs main\ngit log --oneline origin/main..HEAD  # All commits\n```\n\n**2. Check for common issues:**\n\n| Category | Look For |\n|----------|----------|\n| Bugs | Off-by-one, null handling, edge cases |\n| Security | Injection, auth bypass, exposed secrets |\n| Style | Naming, formatting, code organization |\n| Completeness | Missing error handling, incomplete paths |\n| Cruft | Debug prints, commented code, TODOs |\n\n**3. Fix issues found:**\nDon't just note them - fix them now. Amend or add commits as needed.\n\n**4. Verify no unintended changes:**\n```bash\ngit diff --stat origin/main...HEAD\n# Only files relevant to gt-i6yv should appear\n```\n\nIf you accidentally modified unrelated files, remove those changes.\n\n**Exit criteria:** Changes are clean, reviewed, and ready for testing.", "status": "in_progress", "priority": 2, "issue_type": "task", "assignee": "gastown/polecats/furiosa", "created_at": "2026-02-28T01:50:09Z", "updated_at": "2026-02-28T03:43:27Z", "dependencies": [{"issue_id": "gt-wisp-zc6gi", "depends_on_id": "gt-wisp-fzhvd", "type": "parent-child", "created_at": "2026-02-27T17:50:09Z", "created_by": "mayor", "metadata": "{}"}, {"issue_id": "gt-wisp-zc6gi", "depends_on_id": "gt-wisp-kkrtg", "type": "blocks", "created_at": "2026-02-27T17:50:09Z", "created_by": "mayor", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-fzhvd"}
{"id": "gt-wisp-zengq", "title": "mol-refinery-patrol", "description": "Patrol report: Empty queue. Idle patrol continues.", "status": "closed", "priority": 2, "issue_type": "epic", "assignee": "gastown/refinery", "created_at": "2026-02-28T01:07:32Z", "updated_at": "2026-02-28T01:07:41Z", "closed_at": "2026-02-28T01:07:41Z", "close_reason": "patrol cycle complete: Empty queue. Idle patrol continues.", "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-wisp-zj4jw", "title": "Load context and verify assignment", "description": "Initialize your session and understand your assignment.\n\n**1. Prime your environment:**\n```bash\ngt prime                    # Load role context\nbd prime                    # Load beads context\n```\n\n**2. Check your hook:**\n```bash\ngt hook               # Shows your pinned molecule and hook_bead\n```\n\nThe hook_bead is your assigned issue. Read it carefully:\n```bash\nbd show gt-a6gp           # Full issue details\n```\n\n**3. Check inbox for additional context:**\n```bash\ngt mail inbox\n# Read any HANDOFF or assignment messages\n```\n\n**4. Understand the requirements:**\n- What exactly needs to be done?\n- What files are likely involved?\n- Are there dependencies or blockers?\n- What does \"done\" look like?\n\n**5. Verify you can proceed:**\n- No unresolved blockers on the issue\n- You understand what to do\n- Required resources are available\n\nIf blocked or unclear, mail Witness immediately:\n```bash\ngt mail send <rig>/witness -s \"HELP: Unclear requirements\" -m \"Issue: gt-a6gp\nQuestion: <what you need clarified>\"\n```\n\n**Exit criteria:** You understand the work and can begin implementation.", "status": "open", "priority": 2, "issue_type": "task", "created_at": "2026-02-28T01:44:54Z", "updated_at": "2026-02-28T01:44:54Z", "dependencies": [{"issue_id": "gt-wisp-zj4jw", "depends_on_id": "gt-wisp-spqdu", "type": "parent-child", "created_at": "2026-02-27T17:44:54Z", "created_by": "dog", "metadata": "{}"}], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0, "parent": "gt-wisp-spqdu"}
{"id": "gt-wisp-ztdk", "title": "mol-refinery-patrol", "description": "Patrol report: Empty queue. No merges pending.", "status": "closed", "priority": 2, "issue_type": "epic", "assignee": "gastown/refinery", "created_at": "2026-02-28T00:58:39Z", "updated_at": "2026-02-28T00:58:50Z", "closed_at": "2026-02-28T00:58:50Z", "close_reason": "patrol cycle complete: Empty queue. No merges pending.", "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-wisp-zz8ex", "title": "mol-polecat-work", "description": "Full polecat work lifecycle from assignment through completion.\n\nThis molecule guides a polecat through a complete work assignment. Each step\nhas clear entry/exit criteria and specific commands to run. A polecat can\ncrash after any step and resume from the last completed step.\n\n## Polecat Contract (Self-Cleaning Model)\n\nYou are a self-cleaning worker. You:\n1. Receive work via your hook (pinned molecule + issue)\n2. Work through molecule steps using `bd ready` / `bd close <step>`\n3. Complete and self-clean via `gt done` (submit + nuke yourself)\n4. You are GONE - Refinery merges from MQ\n\n**Self-cleaning:** When you run `gt done`, you push your work, submit to MQ,\nnuke your sandbox, and exit. There is no idle state. Done means gone.\n\n**Important:** This formula defines the template. Your molecule already has step\nbeads created from it. Use `bd ready` to find them - do NOT read this file directly.\n\n**You do NOT:**\n- Push directly to main (Refinery merges from MQ)\n- Close your own issue (Refinery closes after merge)\n- Wait for merge (you're gone after `gt done`)\n- Handle rebase conflicts (Refinery spawns fresh polecats for that)\n\n## Variables\n\n| Variable | Source | Description |\n|----------|--------|-------------|\n| issue | hook_bead | The issue ID you're assigned to work on |\n\n## Failure Modes\n\n| Situation | Action |\n|-----------|--------|\n| Tests fail | Fix them. Do not proceed with failures. |\n| Blocked on external | Mail Witness for help, mark yourself stuck |\n| Context filling | Use gt handoff to cycle to fresh session |\n| Unsure what to do | Mail Witness, don't guess |", "status": "closed", "priority": 2, "issue_type": "epic", "created_at": "2026-02-28T01:21:39Z", "updated_at": "2026-02-28T01:23:04Z", "closed_at": "2026-02-28T01:23:04Z", "close_reason": "burned: force re-sling", "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-gastown-crew-dennis", "title": "Crew worker dennis in gastown - human-managed persistent workspace.", "description": "Crew worker dennis in gastown - human-managed persistent workspace.\n\nrole_type: crew\nrig: gastown\nagent_state: idle\nhook_bead: null\ncleanup_status: null\nactive_mr: null\nnotification_level: null", "status": "open", "priority": 2, "issue_type": "agent", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-27T10:11:31Z", "created_by": "dog", "updated_at": "2026-02-27T10:11:31Z", "labels": ["gt:agent"], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-gastown-crew-george", "title": "Crew worker george in gastown - human-managed persistent workspace.", "description": "Crew worker george in gastown - human-managed persistent workspace.\n\nrole_type: crew\nrig: gastown\nagent_state: idle\nhook_bead: null\ncleanup_status: null\nactive_mr: null\nnotification_level: null", "status": "open", "priority": 2, "issue_type": "agent", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-27T10:11:31Z", "created_by": "dog", "updated_at": "2026-02-27T10:11:31Z", "labels": ["gt:agent"], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-gastown-crew-gus", "title": "Crew worker gus in gastown - human-managed persistent workspace.", "description": "Crew worker gus in gastown - human-managed persistent workspace.\n\nrole_type: crew\nrig: gastown\nagent_state: idle\nhook_bead: null\ncleanup_status: null\nactive_mr: null\nnotification_level: null", "status": "open", "priority": 2, "issue_type": "agent", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-27T10:11:31Z", "created_by": "dog", "updated_at": "2026-02-27T10:11:31Z", "labels": ["gt:agent"], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-gastown-crew-jack", "title": "Crew worker jack in gastown - human-managed persistent workspace.", "description": "Crew worker jack in gastown - human-managed persistent workspace.\n\nrole_type: crew\nrig: gastown\nagent_state: idle\nhook_bead: null\ncleanup_status: null\nactive_mr: null\nnotification_level: null", "status": "open", "priority": 2, "issue_type": "agent", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-27T10:11:31Z", "created_by": "dog", "updated_at": "2026-02-27T10:11:31Z", "labels": ["gt:agent"], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-gastown-crew-joe", "title": "Crew worker joe in gastown - human-managed persistent workspace.", "description": "Crew worker joe in gastown - human-managed persistent workspace.\n\nrole_type: crew\nrig: gastown\nagent_state: idle\nhook_bead: null\ncleanup_status: null\nactive_mr: null\nnotification_level: null", "status": "open", "priority": 2, "issue_type": "agent", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-27T10:11:32Z", "created_by": "dog", "updated_at": "2026-02-27T10:11:32Z", "labels": ["gt:agent"], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-gastown-crew-max", "title": "Crew worker max in gastown - human-managed persistent workspace.", "description": "Crew worker max in gastown - human-managed persistent workspace.\n\nrole_type: crew\nrig: gastown\nagent_state: idle\nhook_bead: null\ncleanup_status: null\nactive_mr: null\nnotification_level: null", "status": "open", "priority": 2, "issue_type": "agent", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-27T10:11:32Z", "created_by": "dog", "updated_at": "2026-02-27T10:11:32Z", "labels": ["gt:agent"], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-gastown-crew-mel", "title": "Crew worker mel in gastown - human-managed persistent workspace.", "description": "Crew worker mel in gastown - human-managed persistent workspace.\n\nrole_type: crew\nrig: gastown\nagent_state: idle\nhook_bead: null\ncleanup_status: null\nactive_mr: null\nnotification_level: null", "status": "open", "priority": 2, "issue_type": "agent", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-27T10:11:32Z", "created_by": "dog", "updated_at": "2026-02-27T10:11:32Z", "labels": ["gt:agent"], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-gastown-crew-tom", "title": "Crew worker tom in gastown - human-managed persistent workspace.", "description": "Crew worker tom in gastown - human-managed persistent workspace.\n\nrole_type: crew\nrig: gastown\nagent_state: idle\nhook_bead: null\ncleanup_status: null\nactive_mr: null\nnotification_level: null", "status": "open", "priority": 2, "issue_type": "agent", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-27T10:11:32Z", "created_by": "dog", "updated_at": "2026-02-27T10:11:32Z", "labels": ["gt:agent"], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-gastown-polecat-capable", "title": "gt-gastown-polecat-capable", "description": "gt-gastown-polecat-capable\n\nrole_type: polecat\nrig: gastown\nagent_state: nuked\nhook_bead: null\ncleanup_status: null\nactive_mr: null\nnotification_level: null", "status": "open", "priority": 2, "issue_type": "agent", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-27T23:53:51Z", "created_by": "mayor", "updated_at": "2026-02-28T02:55:39Z", "labels": ["gt:agent"], "ephemeral": true, "agent_state": "done", "last_activity": "2026-02-28T02:55:19Z", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-gastown-polecat-dementus", "title": "gt-gastown-polecat-dementus", "description": "gt-gastown-polecat-dementus\n\nrole_type: polecat\nrig: gastown\nagent_state: spawning\nhook_bead: gt-pp2t\ncleanup_status: null\nactive_mr: null\nnotification_level: null", "status": "open", "priority": 2, "issue_type": "agent", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-27T07:01:10Z", "created_by": "mayor", "updated_at": "2026-02-28T03:51:16Z", "labels": ["gt:agent"], "ephemeral": true, "hook_bead": "gt-pp2t", "agent_state": "working", "last_activity": "2026-02-28T03:51:16Z", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-gastown-polecat-furiosa", "title": "gt-gastown-polecat-furiosa", "description": "gt-gastown-polecat-furiosa\n\nrole_type: polecat\nrig: gastown\nagent_state: spawning\nhook_bead: gt-l7uq\ncleanup_status: has_uncommitted\nactive_mr: null\nnotification_level: null\nexit_type: DEFERRED\nbranch: polecat/furiosa/gt-l7uq@mm5s0e2x\ncompletion_time: 2026-02-28T03:49:23Z", "status": "open", "priority": 2, "issue_type": "agent", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-27T01:19:53Z", "created_by": "mayor", "updated_at": "2026-02-28T03:49:26Z", "labels": ["gt:agent"], "ephemeral": true, "agent_state": "done", "last_activity": "2026-02-28T03:49:26Z", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-gastown-polecat-nux", "title": "gt-gastown-polecat-nux", "description": "gt-gastown-polecat-nux\n\nrole_type: polecat\nrig: gastown\nagent_state: spawning\nhook_bead: gt-idrl\ncleanup_status: has_unpushed\nactive_mr: null\nnotification_level: null\nexit_type: DEFERRED\nbranch: polecat/nux/gt-idrl@mm5s0k96\ncompletion_time: 2026-02-28T03:52:31Z", "status": "open", "priority": 2, "issue_type": "agent", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-27T03:33:45Z", "created_by": "mayor", "updated_at": "2026-02-28T03:52:34Z", "labels": ["gt:agent"], "ephemeral": true, "agent_state": "done", "last_activity": "2026-02-28T03:52:34Z", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-gastown-polecat-rictus", "title": "gt-gastown-polecat-rictus", "description": "gt-gastown-polecat-rictus\n\nrole_type: polecat\nrig: gastown\nagent_state: spawning\nhook_bead: gt-ienv\ncleanup_status: null\nactive_mr: null\nnotification_level: null", "status": "open", "priority": 2, "issue_type": "agent", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-27T07:00:51Z", "created_by": "mayor", "updated_at": "2026-02-28T03:42:36Z", "labels": ["gt:agent"], "ephemeral": true, "hook_bead": "gt-ienv", "agent_state": "working", "last_activity": "2026-02-28T03:42:36Z", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-gastown-polecat-slit", "title": "gt-gastown-polecat-slit", "description": "gt-gastown-polecat-slit\n\nrole_type: polecat\nrig: gastown\nagent_state: spawning\nhook_bead: gt-l7x9\ncleanup_status: null\nactive_mr: null\nnotification_level: null", "status": "open", "priority": 2, "issue_type": "agent", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-27T07:00:36Z", "created_by": "mayor", "updated_at": "2026-02-28T03:46:42Z", "labels": ["gt:agent"], "ephemeral": true, "hook_bead": "gt-l7x9", "agent_state": "working", "last_activity": "2026-02-28T03:46:42Z", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-gastown-polecat-toast", "title": "gt-gastown-polecat-toast", "description": "gt-gastown-polecat-toast\n\nrole_type: polecat\nrig: gastown\nagent_state: nuked\nhook_bead: null\ncleanup_status: null\nactive_mr: null\nnotification_level: null", "status": "open", "priority": 2, "issue_type": "agent", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-27T23:55:31Z", "created_by": "mayor", "updated_at": "2026-02-28T03:02:20Z", "labels": ["gt:agent"], "ephemeral": true, "agent_state": "done", "last_activity": "2026-02-28T03:01:02Z", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-gastown-refinery", "title": "Refinery for gastown - processes merge queue.", "description": "Refinery for gastown - processes merge queue.\n\nrole_type: refinery\nrig: gastown\nagent_state: idle\nhook_bead: null\ncleanup_status: null\nactive_mr: null\nnotification_level: null", "status": "open", "priority": 2, "issue_type": "agent", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-27T10:11:31Z", "created_by": "dog", "updated_at": "2026-02-28T02:13:20Z", "labels": ["gt:agent", "idle:2"], "ephemeral": true, "agent_state": "idle", "last_activity": "2026-02-28T02:13:20Z", "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-gastown-witness", "title": "Witness for gastown - monitors polecat health and progress.", "description": "Witness for gastown - monitors polecat health and progress.\n\nrole_type: witness\nrig: gastown\nagent_state: idle\nhook_bead: null\ncleanup_status: null\nactive_mr: null\nnotification_level: null", "status": "open", "priority": 2, "issue_type": "agent", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-27T10:11:31Z", "created_by": "dog", "updated_at": "2026-02-27T10:11:31Z", "labels": ["gt:agent"], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-wisp-1ku3", "title": "mol-refinery-patrol", "description": "Merge queue processor patrol loop.\n\nThe Refinery is the Engineer in the engine room. You process polecat branches, merging them to main one at a time with sequential rebasing.\n\n**The Scotty Test**: Before proceeding past any failure, ask yourself: \"Would Scotty walk past a warp core leak because it existed before his shift?\"\n\n## Merge Flow\n\nThe Refinery receives MERGE_READY mail from Witnesses when polecats complete work:\n\n```\nWitness                    Refinery                      Git\n   │                          │                           │\n   │ MERGE_READY              │                           │\n   │─────────────────────────>│                           │\n   │                          │                           │\n   │                    (verify branch)                   │\n   │                          │ fetch & rebase            │\n   │                          │──────────────────────────>│\n   │                          │                           │\n   │                    (run tests)                       │\n   │                          │                           │\n   │                    (if pass)                         │\n   │                          │ merge & push              │\n   │                          │──────────────────────────>│\n   │                          │                           │\n   │ MERGED                   │                           │\n   │<─────────────────────────│                           │\n   │                          │                           │\n```\n\nAfter successful merge, Refinery sends MERGED mail back to Witness so it can\ncomplete cleanup (nuke the polecat worktree).", "status": "open", "priority": 2, "issue_type": "epic", "assignee": "gastown/refinery", "created_at": "2026-02-27T18:22:40Z", "updated_at": "2026-02-27T18:23:30Z", "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-wisp-28xm", "title": "Merge: gt-iifg", "description": "branch: polecat/dementus/gt-iifg@mm5jt29m\ntarget: main\nsource_issue: gt-iifg\nrig: gastown\nworker: dementus\nagent_bead: gt-gastown-polecat-dementus\nretry_count: 0\nlast_conflict_sha: null\nconflict_task_id: null", "status": "closed", "priority": 2, "issue_type": "task", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-28T00:05:09Z", "created_by": "gastown/polecats/dementus", "updated_at": "2026-02-28T00:26:45Z", "closed_at": "2026-02-28T00:26:45Z", "labels": ["gt:merge-request", "stale:polecat-nuked"], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-wisp-3nhl", "title": "mol-refinery-patrol", "description": "Patrol report: Merged 3/5 branches (slit P1, furiosa P1, rictus P2). 2 branches (dementus gt-iifg, capable gt-51dx) not yet pushed by polecats. Filed 2 pre-existing bugs: gt-8qtk (cross-platform build), gt-z5je (flaky test). All merges clean, no conflicts.", "status": "closed", "priority": 2, "issue_type": "epic", "assignee": "gastown/refinery", "created_at": "2026-02-27T23:40:54Z", "updated_at": "2026-02-28T00:25:33Z", "closed_at": "2026-02-28T00:25:33Z", "close_reason": "patrol cycle complete: Merged 3/5 branches (slit P1, furiosa P1, rictus P2). 2 branches (dementus gt-iifg, capable gt-51dx) not yet pushed by polecats. Filed 2 pre-existing bugs: gt-8qtk (cross-platform build), gt-z5je (flaky test). All merges clean, no conflicts.", "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-wisp-68ih", "title": "mol-polecat-work", "description": "Full polecat work lifecycle from assignment through completion.\n\nThis molecule guides a polecat through a complete work assignment. Each step\nhas clear entry/exit criteria and specific commands to run. A polecat can\ncrash after any step and resume from the last completed step.\n\n## Polecat Contract (Self-Cleaning Model)\n\nYou are a self-cleaning worker. You:\n1. Receive work via your hook (pinned molecule + issue)\n2. Work through molecule steps using `bd ready` / `bd close <step>`\n3. Complete and self-clean via `gt done` (submit + nuke yourself)\n4. You are GONE - Refinery merges from MQ\n\n**Self-cleaning:** When you run `gt done`, you push your work, submit to MQ,\nnuke your sandbox, and exit. There is no idle state. Done means gone.\n\n**Important:** This formula defines the template. Your molecule already has step\nbeads created from it. Use `bd ready` to find them - do NOT read this file directly.\n\n**You do NOT:**\n- Push directly to main (Refinery merges from MQ)\n- Close your own issue (Refinery closes after merge)\n- Wait for merge (you're gone after `gt done`)\n- Handle rebase conflicts (Refinery spawns fresh polecats for that)\n\n## Variables\n\n| Variable | Source | Description |\n|----------|--------|-------------|\n| issue | hook_bead | The issue ID you're assigned to work on |\n\n## Failure Modes\n\n| Situation | Action |\n|-----------|--------|\n| Tests fail | Fix them. Do not proceed with failures. |\n| Blocked on external | Mail Witness for help, mark yourself stuck |\n| Context filling | Use gt handoff to cycle to fresh session |\n| Unsure what to do | Mail Witness, don't guess |", "status": "closed", "priority": 2, "issue_type": "epic", "created_at": "2026-02-27T23:53:53Z", "updated_at": "2026-02-28T00:23:10Z", "closed_at": "2026-02-28T00:23:10Z", "close_reason": "burned: polecat nuked", "ephemeral": true, "dependency_count": 0, "dependent_count": 1, "comment_count": 0}
{"id": "gt-wisp-6v3a", "title": "mol-polecat-work", "description": "Full polecat work lifecycle from assignment through completion.\n\nThis molecule guides a polecat through a complete work assignment. Each step\nhas clear entry/exit criteria and specific commands to run. A polecat can\ncrash after any step and resume from the last completed step.\n\n## Polecat Contract (Self-Cleaning Model)\n\nYou are a self-cleaning worker. You:\n1. Receive work via your hook (pinned molecule + issue)\n2. Work through molecule steps using `bd ready` / `bd close <step>`\n3. Complete and self-clean via `gt done` (submit + nuke yourself)\n4. You are GONE - Refinery merges from MQ\n\n**Self-cleaning:** When you run `gt done`, you push your work, submit to MQ,\nnuke your sandbox, and exit. There is no idle state. Done means gone.\n\n**Important:** This formula defines the template. Your molecule already has step\nbeads created from it. Use `bd ready` to find them - do NOT read this file directly.\n\n**You do NOT:**\n- Push directly to main (Refinery merges from MQ)\n- Close your own issue (Refinery closes after merge)\n- Wait for merge (you're gone after `gt done`)\n- Handle rebase conflicts (Refinery spawns fresh polecats for that)\n\n## Variables\n\n| Variable | Source | Description |\n|----------|--------|-------------|\n| issue | hook_bead | The issue ID you're assigned to work on |\n\n## Failure Modes\n\n| Situation | Action |\n|-----------|--------|\n| Tests fail | Fix them. Do not proceed with failures. |\n| Blocked on external | Mail Witness for help, mark yourself stuck |\n| Context filling | Use gt handoff to cycle to fresh session |\n| Unsure what to do | Mail Witness, don't guess |", "status": "closed", "priority": 2, "issue_type": "epic", "created_at": "2026-02-27T23:53:29Z", "updated_at": "2026-02-28T00:24:35Z", "closed_at": "2026-02-28T00:24:35Z", "close_reason": "burned: polecat nuked", "ephemeral": true, "dependency_count": 0, "dependent_count": 1, "comment_count": 0}
{"id": "gt-wisp-8btb", "title": "mol-polecat-work", "description": "Full polecat work lifecycle from assignment through completion.\n\nThis molecule guides a polecat through a complete work assignment. Each step\nhas clear entry/exit criteria and specific commands to run. A polecat can\ncrash after any step and resume from the last completed step.\n\n## Polecat Contract (Self-Cleaning Model)\n\nYou are a self-cleaning worker. You:\n1. Receive work via your hook (pinned molecule + issue)\n2. Work through molecule steps using `bd ready` / `bd close <step>`\n3. Complete and self-clean via `gt done` (submit + nuke yourself)\n4. You are GONE - Refinery merges from MQ\n\n**Self-cleaning:** When you run `gt done`, you push your work, submit to MQ,\nnuke your sandbox, and exit. There is no idle state. Done means gone.\n\n**Important:** This formula defines the template. Your molecule already has step\nbeads created from it. Use `bd ready` to find them - do NOT read this file directly.\n\n**You do NOT:**\n- Push directly to main (Refinery merges from MQ)\n- Close your own issue (Refinery closes after merge)\n- Wait for merge (you're gone after `gt done`)\n- Handle rebase conflicts (Refinery spawns fresh polecats for that)\n\n## Variables\n\n| Variable | Source | Description |\n|----------|--------|-------------|\n| issue | hook_bead | The issue ID you're assigned to work on |\n\n## Failure Modes\n\n| Situation | Action |\n|-----------|--------|\n| Tests fail | Fix them. Do not proceed with failures. |\n| Blocked on external | Mail Witness for help, mark yourself stuck |\n| Context filling | Use gt handoff to cycle to fresh session |\n| Unsure what to do | Mail Witness, don't guess |", "status": "closed", "priority": 2, "issue_type": "epic", "created_at": "2026-02-27T23:04:28Z", "updated_at": "2026-02-27T23:28:56Z", "closed_at": "2026-02-27T23:28:56Z", "close_reason": "burned: polecat nuked", "ephemeral": true, "dependency_count": 0, "dependent_count": 1, "comment_count": 0}
{"id": "gt-wisp-a0326", "title": "Merge: gt-p7uq.3", "description": "branch: polecat/slit/gt-p7uq.3@mm5nyyge\ntarget: main\nsource_issue: gt-p7uq.3\nrig: gastown\nworker: slit\nagent_bead: gt-gastown-polecat-slit\nretry_count: 0\nlast_conflict_sha: null\nconflict_task_id: null", "status": "closed", "priority": 3, "issue_type": "task", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-28T01:56:32Z", "created_by": "gastown/polecats/slit", "updated_at": "2026-02-28T02:06:42Z", "closed_at": "2026-02-28T02:06:42Z", "close_reason": "stale: branch polecat/slit/gt-p7uq.3@mm5nyyge does not exist on any remote", "labels": ["gt:merge-request"], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-wisp-g45q", "title": "mol-polecat-work", "description": "Full polecat work lifecycle from assignment through completion.\n\nThis molecule guides a polecat through a complete work assignment. Each step\nhas clear entry/exit criteria and specific commands to run. A polecat can\ncrash after any step and resume from the last completed step.\n\n## Polecat Contract (Self-Cleaning Model)\n\nYou are a self-cleaning worker. You:\n1. Receive work via your hook (pinned molecule + issue)\n2. Work through molecule steps using `bd ready` / `bd close <step>`\n3. Complete and self-clean via `gt done` (submit + nuke yourself)\n4. You are GONE - Refinery merges from MQ\n\n**Self-cleaning:** When you run `gt done`, you push your work, submit to MQ,\nnuke your sandbox, and exit. There is no idle state. Done means gone.\n\n**Important:** This formula defines the template. Your molecule already has step\nbeads created from it. Use `bd ready` to find them - do NOT read this file directly.\n\n**You do NOT:**\n- Push directly to main (Refinery merges from MQ)\n- Close your own issue (Refinery closes after merge)\n- Wait for merge (you're gone after `gt done`)\n- Handle rebase conflicts (Refinery spawns fresh polecats for that)\n\n## Variables\n\n| Variable | Source | Description |\n|----------|--------|-------------|\n| issue | hook_bead | The issue ID you're assigned to work on |\n\n## Failure Modes\n\n| Situation | Action |\n|-----------|--------|\n| Tests fail | Fix them. Do not proceed with failures. |\n| Blocked on external | Mail Witness for help, mark yourself stuck |\n| Context filling | Use gt handoff to cycle to fresh session |\n| Unsure what to do | Mail Witness, don't guess |", "status": "closed", "priority": 2, "issue_type": "epic", "created_at": "2026-02-27T23:53:44Z", "updated_at": "2026-02-28T00:23:18Z", "closed_at": "2026-02-28T00:23:18Z", "close_reason": "burned: polecat nuked", "ephemeral": true, "dependency_count": 0, "dependent_count": 1, "comment_count": 0}
{"id": "gt-wisp-h83p", "title": "mol-polecat-work", "description": "Full polecat work lifecycle from assignment through completion.\n\nThis molecule guides a polecat through a complete work assignment. Each step\nhas clear entry/exit criteria and specific commands to run. A polecat can\ncrash after any step and resume from the last completed step.\n\n## Polecat Contract (Self-Cleaning Model)\n\nYou are a self-cleaning worker. You:\n1. Receive work via your hook (pinned molecule + issue)\n2. Work through molecule steps using `bd ready` / `bd close <step>`\n3. Complete and self-clean via `gt done` (submit + nuke yourself)\n4. You are GONE - Refinery merges from MQ\n\n**Self-cleaning:** When you run `gt done`, you push your work, submit to MQ,\nnuke your sandbox, and exit. There is no idle state. Done means gone.\n\n**Important:** This formula defines the template. Your molecule already has step\nbeads created from it. Use `bd ready` to find them - do NOT read this file directly.\n\n**You do NOT:**\n- Push directly to main (Refinery merges from MQ)\n- Close your own issue (Refinery closes after merge)\n- Wait for merge (you're gone after `gt done`)\n- Handle rebase conflicts (Refinery spawns fresh polecats for that)\n\n## Variables\n\n| Variable | Source | Description |\n|----------|--------|-------------|\n| issue | hook_bead | The issue ID you're assigned to work on |\n\n## Failure Modes\n\n| Situation | Action |\n|-----------|--------|\n| Tests fail | Fix them. Do not proceed with failures. |\n| Blocked on external | Mail Witness for help, mark yourself stuck |\n| Context filling | Use gt handoff to cycle to fresh session |\n| Unsure what to do | Mail Witness, don't guess |", "status": "closed", "priority": 2, "issue_type": "epic", "created_at": "2026-02-28T00:24:33Z", "updated_at": "2026-02-28T00:40:14Z", "closed_at": "2026-02-28T00:40:14Z", "close_reason": "burned: polecat nuked", "ephemeral": true, "dependency_count": 0, "dependent_count": 1, "comment_count": 0}
{"id": "gt-wisp-kfvl", "title": "mol-polecat-work", "description": "Full polecat work lifecycle from assignment through completion.\n\nThis molecule guides a polecat through a complete work assignment. Each step\nhas clear entry/exit criteria and specific commands to run. A polecat can\ncrash after any step and resume from the last completed step.\n\n## Polecat Contract (Self-Cleaning Model)\n\nYou are a self-cleaning worker. You:\n1. Receive work via your hook (pinned molecule + issue)\n2. Work through molecule steps using `bd ready` / `bd close <step>`\n3. Complete and self-clean via `gt done` (submit + nuke yourself)\n4. You are GONE - Refinery merges from MQ\n\n**Self-cleaning:** When you run `gt done`, you push your work, submit to MQ,\nnuke your sandbox, and exit. There is no idle state. Done means gone.\n\n**Important:** This formula defines the template. Your molecule already has step\nbeads created from it. Use `bd ready` to find them - do NOT read this file directly.\n\n**You do NOT:**\n- Push directly to main (Refinery merges from MQ)\n- Close your own issue (Refinery closes after merge)\n- Wait for merge (you're gone after `gt done`)\n- Handle rebase conflicts (Refinery spawns fresh polecats for that)\n\n## Variables\n\n| Variable | Source | Description |\n|----------|--------|-------------|\n| issue | hook_bead | The issue ID you're assigned to work on |\n\n## Failure Modes\n\n| Situation | Action |\n|-----------|--------|\n| Tests fail | Fix them. Do not proceed with failures. |\n| Blocked on external | Mail Witness for help, mark yourself stuck |\n| Context filling | Use gt handoff to cycle to fresh session |\n| Unsure what to do | Mail Witness, don't guess |", "status": "closed", "priority": 2, "issue_type": "epic", "created_at": "2026-02-27T23:51:22Z", "updated_at": "2026-02-28T00:40:32Z", "closed_at": "2026-02-28T00:40:32Z", "close_reason": "burned: force re-sling", "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-wisp-l2pf", "title": "mol-polecat-work", "description": "Full polecat work lifecycle from assignment through completion.\n\nThis molecule guides a polecat through a complete work assignment. Each step\nhas clear entry/exit criteria and specific commands to run. A polecat can\ncrash after any step and resume from the last completed step.\n\n## Polecat Contract (Self-Cleaning Model)\n\nYou are a self-cleaning worker. You:\n1. Receive work via your hook (pinned molecule + issue)\n2. Work through molecule steps using `bd ready` / `bd close <step>`\n3. Complete and self-clean via `gt done` (submit + nuke yourself)\n4. You are GONE - Refinery merges from MQ\n\n**Self-cleaning:** When you run `gt done`, you push your work, submit to MQ,\nnuke your sandbox, and exit. There is no idle state. Done means gone.\n\n**Important:** This formula defines the template. Your molecule already has step\nbeads created from it. Use `bd ready` to find them - do NOT read this file directly.\n\n**You do NOT:**\n- Push directly to main (Refinery merges from MQ)\n- Close your own issue (Refinery closes after merge)\n- Wait for merge (you're gone after `gt done`)\n- Handle rebase conflicts (Refinery spawns fresh polecats for that)\n\n## Variables\n\n| Variable | Source | Description |\n|----------|--------|-------------|\n| issue | hook_bead | The issue ID you're assigned to work on |\n\n## Failure Modes\n\n| Situation | Action |\n|-----------|--------|\n| Tests fail | Fix them. Do not proceed with failures. |\n| Blocked on external | Mail Witness for help, mark yourself stuck |\n| Context filling | Use gt handoff to cycle to fresh session |\n| Unsure what to do | Mail Witness, don't guess |", "status": "closed", "priority": 2, "issue_type": "epic", "created_at": "2026-02-27T23:53:37Z", "updated_at": "2026-02-28T00:24:33Z", "closed_at": "2026-02-28T00:24:33Z", "close_reason": "burned: force re-sling", "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-wisp-mbiq", "title": "Merge: gt-51dx", "description": "branch: polecat/capable/gt-51dx@mm5jt8qg\ntarget: main\nsource_issue: gt-51dx\nrig: gastown\nworker: capable\nagent_bead: gt-gastown-polecat-capable\nretry_count: 0\nlast_conflict_sha: null\nconflict_task_id: null", "status": "closed", "priority": 2, "issue_type": "task", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-28T00:08:15Z", "created_by": "gastown/polecats/capable", "updated_at": "2026-02-28T00:26:46Z", "closed_at": "2026-02-28T00:26:46Z", "labels": ["gt:merge-request", "stale:polecat-nuked"], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-wisp-o44w", "title": "mol-polecat-work", "description": "Full polecat work lifecycle from assignment through completion.\n\nThis molecule guides a polecat through a complete work assignment. Each step\nhas clear entry/exit criteria and specific commands to run. A polecat can\ncrash after any step and resume from the last completed step.\n\n## Polecat Contract (Self-Cleaning Model)\n\nYou are a self-cleaning worker. You:\n1. Receive work via your hook (pinned molecule + issue)\n2. Work through molecule steps using `bd ready` / `bd close <step>`\n3. Complete and self-clean via `gt done` (submit + nuke yourself)\n4. You are GONE - Refinery merges from MQ\n\n**Self-cleaning:** When you run `gt done`, you push your work, submit to MQ,\nnuke your sandbox, and exit. There is no idle state. Done means gone.\n\n**Important:** This formula defines the template. Your molecule already has step\nbeads created from it. Use `bd ready` to find them - do NOT read this file directly.\n\n**You do NOT:**\n- Push directly to main (Refinery merges from MQ)\n- Close your own issue (Refinery closes after merge)\n- Wait for merge (you're gone after `gt done`)\n- Handle rebase conflicts (Refinery spawns fresh polecats for that)\n\n## Variables\n\n| Variable | Source | Description |\n|----------|--------|-------------|\n| issue | hook_bead | The issue ID you're assigned to work on |\n\n## Failure Modes\n\n| Situation | Action |\n|-----------|--------|\n| Tests fail | Fix them. Do not proceed with failures. |\n| Blocked on external | Mail Witness for help, mark yourself stuck |\n| Context filling | Use gt handoff to cycle to fresh session |\n| Unsure what to do | Mail Witness, don't guess |", "status": "closed", "priority": 2, "issue_type": "epic", "created_at": "2026-02-27T23:55:36Z", "updated_at": "2026-02-28T00:23:36Z", "closed_at": "2026-02-28T00:23:36Z", "close_reason": "burned: polecat nuked", "ephemeral": true, "dependency_count": 0, "dependent_count": 1, "comment_count": 0}
{"id": "gt-wisp-o5lw", "title": "mol-refinery-patrol", "description": "Merge queue processor patrol loop.\n\nThe Refinery is the Engineer in the engine room. You process polecat branches, merging them to main one at a time with sequential rebasing.\n\n**The Scotty Test**: Before proceeding past any failure, ask yourself: \"Would Scotty walk past a warp core leak because it existed before his shift?\"\n\n## Merge Flow\n\nThe Refinery receives MERGE_READY mail from Witnesses when polecats complete work:\n\n```\nWitness                    Refinery                      Git\n   │                          │                           │\n   │ MERGE_READY              │                           │\n   │─────────────────────────>│                           │\n   │                          │                           │\n   │                    (verify branch)                   │\n   │                          │ fetch & rebase            │\n   │                          │──────────────────────────>│\n   │                          │                           │\n   │                    (run tests)                       │\n   │                          │                           │\n   │                    (if pass)                         │\n   │                          │ merge & push              │\n   │                          │──────────────────────────>│\n   │                          │                           │\n   │ MERGED                   │                           │\n   │<─────────────────────────│                           │\n   │                          │                           │\n```\n\nAfter successful merge, Refinery sends MERGED mail back to Witness so it can\ncomplete cleanup (nuke the polecat worktree).", "status": "open", "priority": 2, "issue_type": "epic", "created_at": "2026-02-27T20:14:14Z", "updated_at": "2026-02-27T20:24:15Z", "labels": ["idle:1"], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-wisp-rc97", "title": "mol-refinery-patrol", "description": "Patrol report: Idle cycle: merge queue empty, no MERGE_READY signals, no integration branches. Session healthy.", "status": "closed", "priority": 2, "issue_type": "epic", "assignee": "gastown/refinery", "created_at": "2026-02-27T23:13:58Z", "updated_at": "2026-02-27T23:40:54Z", "closed_at": "2026-02-27T23:40:54Z", "close_reason": "patrol cycle complete: Idle cycle: merge queue empty, no MERGE_READY signals, no integration branches. Session healthy.", "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-wisp-t02q", "title": "mol-polecat-work", "description": "Full polecat work lifecycle from assignment through completion.\n\nThis molecule guides a polecat through a complete work assignment. Each step\nhas clear entry/exit criteria and specific commands to run. A polecat can\ncrash after any step and resume from the last completed step.\n\n## Polecat Contract (Self-Cleaning Model)\n\nYou are a self-cleaning worker. You:\n1. Receive work via your hook (pinned molecule + issue)\n2. Work through molecule steps using `bd ready` / `bd close <step>`\n3. Complete and self-clean via `gt done` (submit + nuke yourself)\n4. You are GONE - Refinery merges from MQ\n\n**Self-cleaning:** When you run `gt done`, you push your work, submit to MQ,\nnuke your sandbox, and exit. There is no idle state. Done means gone.\n\n**Important:** This formula defines the template. Your molecule already has step\nbeads created from it. Use `bd ready` to find them - do NOT read this file directly.\n\n**You do NOT:**\n- Push directly to main (Refinery merges from MQ)\n- Close your own issue (Refinery closes after merge)\n- Wait for merge (you're gone after `gt done`)\n- Handle rebase conflicts (Refinery spawns fresh polecats for that)\n\n## Variables\n\n| Variable | Source | Description |\n|----------|--------|-------------|\n| issue | hook_bead | The issue ID you're assigned to work on |\n\n## Failure Modes\n\n| Situation | Action |\n|-----------|--------|\n| Tests fail | Fix them. Do not proceed with failures. |\n| Blocked on external | Mail Witness for help, mark yourself stuck |\n| Context filling | Use gt handoff to cycle to fresh session |\n| Unsure what to do | Mail Witness, don't guess |", "status": "closed", "priority": 2, "issue_type": "epic", "created_at": "2026-02-27T23:51:29Z", "updated_at": "2026-02-28T00:23:27Z", "closed_at": "2026-02-28T00:23:27Z", "close_reason": "burned: polecat nuked", "ephemeral": true, "dependency_count": 0, "dependent_count": 1, "comment_count": 0}
{"id": "gt-wisp-w6o6", "title": "Merge: gt-24j2", "description": "branch: polecat/rictus/gt-24j2@mm5jsw7z\ntarget: main\nsource_issue: gt-24j2\nrig: gastown\nworker: rictus\nagent_bead: gt-gastown-polecat-rictus\nretry_count: 0\nlast_conflict_sha: null\nconflict_task_id: null", "status": "closed", "priority": 2, "issue_type": "task", "owner": "steve.yegge@gmail.com", "created_at": "2026-02-28T00:04:57Z", "created_by": "gastown/polecats/rictus", "updated_at": "2026-02-28T00:23:19Z", "closed_at": "2026-02-28T00:23:19Z", "labels": ["gt:merge-request"], "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-wisp-wf88", "title": "mol-refinery-patrol", "description": "Merge queue processor patrol loop.\n\nThe Refinery is the Engineer in the engine room. You process polecat branches, merging them to main one at a time with sequential rebasing.\n\n**The Scotty Test**: Before proceeding past any failure, ask yourself: \"Would Scotty walk past a warp core leak because it existed before his shift?\"\n\n## Merge Flow\n\nThe Refinery receives MERGE_READY mail from Witnesses when polecats complete work:\n\n```\nWitness                    Refinery                      Git\n   │                          │                           │\n   │ MERGE_READY              │                           │\n   │─────────────────────────>│                           │\n   │                          │                           │\n   │                    (verify branch)                   │\n   │                          │ fetch & rebase            │\n   │                          │──────────────────────────>│\n   │                          │                           │\n   │                    (run tests)                       │\n   │                          │                           │\n   │                    (if pass)                         │\n   │                          │ merge & push              │\n   │                          │──────────────────────────>│\n   │                          │                           │\n   │ MERGED                   │                           │\n   │<─────────────────────────│                           │\n   │                          │                           │\n```\n\nAfter successful merge, Refinery sends MERGED mail back to Witness so it can\ncomplete cleanup (nuke the polecat worktree).", "status": "open", "priority": 2, "issue_type": "epic", "created_at": "2026-02-27T17:51:14Z", "updated_at": "2026-02-27T17:56:33Z", "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0}
{"id": "gt-wisp-zy7e", "title": "mol-refinery-patrol", "description": "Merge queue processor patrol loop.\n\nThe Refinery is the Engineer in the engine room. You process polecat branches, merging them to main one at a time with sequential rebasing.\n\n**The Scotty Test**: Before proceeding past any failure, ask yourself: \"Would Scotty walk past a warp core leak because it existed before his shift?\"\n\n## Merge Flow\n\nThe Refinery receives MERGE_READY mail from Witnesses when polecats complete work:\n\n```\nWitness                    Refinery                      Git\n   │                          │                           │\n   │ MERGE_READY              │                           │\n   │─────────────────────────>│                           │\n   │                          │                           │\n   │                    (verify branch)                   │\n   │                          │ fetch & rebase            │\n   │                          │──────────────────────────>│\n   │                          │                           │\n   │                    (run tests)                       │\n   │                          │                           │\n   │                    (if pass)                         │\n   │                          │ merge & push              │\n   │                          │──────────────────────────>│\n   │                          │                           │\n   │ MERGED                   │                           │\n   │<─────────────────────────│                           │\n   │                          │                           │\n```\n\nAfter successful merge, Refinery sends MERGED mail back to Witness so it can\ncomplete cleanup (nuke the polecat worktree).", "status": "closed", "priority": 2, "issue_type": "epic", "assignee": "gastown/refinery", "created_at": "2026-02-27T20:43:31Z", "updated_at": "2026-02-28T01:50:28Z", "closed_at": "2026-02-28T01:50:28Z", "ephemeral": true, "dependency_count": 0, "dependent_count": 0, "comment_count": 0}

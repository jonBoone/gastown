package cmd

import (
	"os"
	"path/filepath"
	"testing"
)

func TestVitalsFormatCount(t *testing.T) {
	tests := []struct {
		n    int
		want string
	}{
		{0, "0"},
		{999, "999"},
		{1000, "1,000"},
		{8263, "8,263"},
	}
	for _, tt := range tests {
		got := vitalsFormatCount(tt.n)
		if got != tt.want {
			t.Errorf("vitalsFormatCount(%d) = %q, want %q", tt.n, got, tt.want)
		}
	}
}

func TestVitalsShortHome(t *testing.T) {
	home, err := os.UserHomeDir()
	if err != nil {
		t.Skip("no home dir")
	}
	got := vitalsShortHome(filepath.Join(home, "gt", ".dolt-backup"))
	if got != "~/gt/.dolt-backup" {
		t.Errorf("vitalsShortHome: got %q, want %q", got, "~/gt/.dolt-backup")
	}

	got = vitalsShortHome("/tmp/other")
	if got != "/tmp/other" {
		t.Errorf("vitalsShortHome(/tmp/other) = %q, want /tmp/other", got)
	}
}
